import {
  p as p3
} from "./chunk-JLVLP2NY.js";
import "./chunk-T66WPMUO.js";
import "./chunk-UFIIIHSC.js";
import "./chunk-VQFXN4EM.js";
import "./chunk-FRJE22BH.js";
import "./chunk-LBDV3JOS.js";
import "./chunk-RFDTTDIQ.js";
import {
  n as n3,
  p as p2
} from "./chunk-NLUGPPK2.js";
import "./chunk-BPPKPMEP.js";
import "./chunk-ADNT35Y3.js";
import "./chunk-3F7Z2GZ4.js";
import "./chunk-BVTDQR4O.js";
import "./chunk-JDVR6MOC.js";
import "./chunk-DYYHVSPV.js";
import "./chunk-UIN5EOGE.js";
import "./chunk-ZRKSP45X.js";
import "./chunk-DT2VHQBL.js";
import "./chunk-FYSZRVYZ.js";
import "./chunk-6C2TVJRX.js";
import "./chunk-Z6LZMG5A.js";
import "./chunk-323PT7GB.js";
import "./chunk-TKJNJ6KH.js";
import "./chunk-36R5EC6A.js";
import "./chunk-KLPBCYCG.js";
import "./chunk-3HOLDCR2.js";
import "./chunk-DCL3YBJN.js";
import "./chunk-3ZWLSDVT.js";
import "./chunk-5DLICG33.js";
import {
  l
} from "./chunk-ZILXWPAR.js";
import "./chunk-HPFRYEGX.js";
import "./chunk-F64GI7MS.js";
import "./chunk-4LDWKTSM.js";
import {
  A
} from "./chunk-U4ONWLTG.js";
import "./chunk-POSLR7O2.js";
import "./chunk-VOYU5TTK.js";
import "./chunk-P5VIVFJT.js";
import "./chunk-SA3C7GIT.js";
import "./chunk-P3R45ANF.js";
import "./chunk-PIEUUBJ5.js";
import "./chunk-YIAYIZOZ.js";
import {
  m as m2
} from "./chunk-P5GW5DPX.js";
import "./chunk-VIOPOI6P.js";
import "./chunk-DMLVD5AS.js";
import "./chunk-DOALI2C2.js";
import "./chunk-E3I4MGUC.js";
import "./chunk-UHNBENSV.js";
import "./chunk-GDKL26HH.js";
import "./chunk-2CL4LRYG.js";
import "./chunk-64EQFPYJ.js";
import "./chunk-HKYMYCLL.js";
import "./chunk-ICVVQFO6.js";
import "./chunk-BYK6DXRK.js";
import "./chunk-IYJG2X3Y.js";
import "./chunk-UTCX6DGX.js";
import "./chunk-HBL2432S.js";
import "./chunk-T2S5L26W.js";
import "./chunk-7VNZ6V2N.js";
import {
  r as r3
} from "./chunk-VKTTTBW2.js";
import "./chunk-TTZWDXX5.js";
import "./chunk-OCLKX5SY.js";
import "./chunk-SEKLTVY5.js";
import "./chunk-HX5GOVNX.js";
import "./chunk-2Q2Q2Z4U.js";
import "./chunk-S6MJEC4A.js";
import "./chunk-HU7QYAVQ.js";
import "./chunk-45OAWGCA.js";
import "./chunk-R4LYFMZX.js";
import "./chunk-X2TA76Q5.js";
import "./chunk-T3Y5GTKO.js";
import "./chunk-XN6LAULS.js";
import "./chunk-M7OEQQRX.js";
import "./chunk-CSWPLQ7Q.js";
import "./chunk-KWSMYM7P.js";
import {
  i
} from "./chunk-RP5SAUAF.js";
import "./chunk-6BFXMZEZ.js";
import "./chunk-AMSVADDY.js";
import {
  f as f4
} from "./chunk-6B7VJB6C.js";
import "./chunk-GAJBN4TM.js";
import {
  g as g2,
  m as m3
} from "./chunk-ULWNCWCX.js";
import {
  l as l2
} from "./chunk-J2R5B4T4.js";
import "./chunk-U5E2VNHU.js";
import "./chunk-2AXTYAMY.js";
import "./chunk-JIDGV6CL.js";
import "./chunk-BADPOP5P.js";
import "./chunk-YXRSJYLG.js";
import "./chunk-KBKTS574.js";
import "./chunk-6ABSX3YY.js";
import "./chunk-OJ65P3EQ.js";
import "./chunk-24NOAXOQ.js";
import "./chunk-FWR4JURK.js";
import "./chunk-BELGAUAK.js";
import {
  s as s5
} from "./chunk-JHJVOI7Q.js";
import "./chunk-TWNBDJHC.js";
import "./chunk-HITXLR5N.js";
import "./chunk-WYZCKLOR.js";
import "./chunk-S6NERLXF.js";
import "./chunk-4TSAC52K.js";
import "./chunk-H4ZZ5S37.js";
import "./chunk-G557TGXY.js";
import "./chunk-2AXFVQBN.js";
import {
  c as c2
} from "./chunk-WOGT6UK2.js";
import "./chunk-RHT6WWRD.js";
import "./chunk-EUGXS5RE.js";
import "./chunk-IRNKV32L.js";
import "./chunk-HLM2UN42.js";
import "./chunk-5WWPLX36.js";
import {
  f as f3
} from "./chunk-UNONG753.js";
import {
  t
} from "./chunk-OFRZSMZB.js";
import "./chunk-IATM3RCE.js";
import "./chunk-BEALJUHO.js";
import "./chunk-GRHSIT57.js";
import "./chunk-PJQIAD5D.js";
import "./chunk-Z6KIMOUA.js";
import "./chunk-SZAJDZCO.js";
import "./chunk-M7R7REMB.js";
import {
  n as n2
} from "./chunk-ZZYUEH57.js";
import "./chunk-VTWXDFFD.js";
import {
  p
} from "./chunk-IPCIO3PX.js";
import "./chunk-EIY2DYTV.js";
import {
  i as i2
} from "./chunk-WJ4LS3YG.js";
import "./chunk-F6MD5VOH.js";
import {
  o as o4
} from "./chunk-V2RPSCV3.js";
import "./chunk-AOJ6OCPK.js";
import "./chunk-LMT5JII2.js";
import "./chunk-A43TI6AT.js";
import {
  S
} from "./chunk-BHJVWW2P.js";
import "./chunk-4HKQSEUR.js";
import "./chunk-V3U4F2NL.js";
import "./chunk-ZB6PGKG5.js";
import "./chunk-OIIDE5GZ.js";
import "./chunk-3XSRVKBX.js";
import "./chunk-WYBZLWIA.js";
import "./chunk-MKW4ORPJ.js";
import "./chunk-YTH6VA7N.js";
import "./chunk-GINTRQSD.js";
import "./chunk-APYNYYQC.js";
import {
  w
} from "./chunk-TBSVVR6M.js";
import "./chunk-6TJWLWLO.js";
import "./chunk-H7BKONNV.js";
import "./chunk-K6C6RVSV.js";
import {
  o as o2
} from "./chunk-KBJ5Z4R2.js";
import {
  V
} from "./chunk-JUZJCTW2.js";
import "./chunk-423VNHLR.js";
import "./chunk-FN47E7YK.js";
import "./chunk-XZS3Q5K4.js";
import {
  j
} from "./chunk-XXFXRXFH.js";
import {
  m
} from "./chunk-CCXEAKIM.js";
import "./chunk-Y5D433JZ.js";
import {
  d as d3
} from "./chunk-QNOCEWCR.js";
import {
  o as o3
} from "./chunk-WURET5CW.js";
import {
  f as f2,
  r as r2
} from "./chunk-QWPLZ3QH.js";
import "./chunk-HLGIRLYQ.js";
import {
  n
} from "./chunk-N2K4VRZH.js";
import "./chunk-WL4VPODY.js";
import {
  s as s4
} from "./chunk-OMPEZIP5.js";
import {
  s as s3
} from "./chunk-EUTNDAIV.js";
import "./chunk-SJZIFARA.js";
import {
  I,
  kt,
  ot,
  r,
  tt
} from "./chunk-R5DM4YAB.js";
import {
  d as d2,
  f
} from "./chunk-NSRXJNTS.js";
import {
  g,
  y2 as y
} from "./chunk-LXXF7K7W.js";
import {
  T,
  c,
  d
} from "./chunk-SBW6NNVI.js";
import {
  e
} from "./chunk-62CXLI6S.js";
import {
  k as k2
} from "./chunk-RFPH3ZTZ.js";
import {
  u
} from "./chunk-WGO3VFQP.js";
import "./chunk-CQS47VN5.js";
import {
  a,
  o,
  s2 as s,
  s3 as s2
} from "./chunk-WJ3HJKNC.js";
import {
  k
} from "./chunk-4V6374PV.js";
import "./chunk-A34O4XB5.js";
import "./chunk-76J2PTFD.js";

// node_modules/@arcgis/core/layers/support/FacilityLayerInfo.js
var s6 = class extends f {
  constructor(r4) {
    super(r4), this.facilityIdField = null, this.layerId = null, this.nameField = null, this.siteIdField = null, this.sublayerId = null;
  }
};
e([y({ type: String, json: { write: true } })], s6.prototype, "facilityIdField", void 0), e([y({ type: String, json: { write: true } })], s6.prototype, "layerId", void 0), e([y({ type: String, json: { write: true } })], s6.prototype, "nameField", void 0), e([y({ type: String, json: { write: true } })], s6.prototype, "siteIdField", void 0), e([y({ type: Number, json: { read: { source: "subLayerId" }, write: { target: "subLayerId" }, origins: { "web-scene": { read: false, write: false } } } })], s6.prototype, "sublayerId", void 0), s6 = e([c("esri.layers.support.FacilityLayerInfo")], s6);
var i3 = s6;

// node_modules/@arcgis/core/layers/support/LevelLayerInfo.js
var i4 = class extends f {
  constructor(e3) {
    super(e3), this.facilityIdField = null, this.layerId = null, this.levelIdField = null, this.levelNumberField = null, this.longNameField = null, this.shortNameField = null, this.sublayerId = null, this.verticalOrderField = null;
  }
};
e([y({ type: String, json: { write: true } })], i4.prototype, "facilityIdField", void 0), e([y({ type: String, json: { write: true } })], i4.prototype, "layerId", void 0), e([y({ type: String, json: { write: true } })], i4.prototype, "levelIdField", void 0), e([y({ type: String, json: { write: true } })], i4.prototype, "levelNumberField", void 0), e([y({ type: String, json: { write: true } })], i4.prototype, "longNameField", void 0), e([y({ type: String, json: { write: true } })], i4.prototype, "shortNameField", void 0), e([y({ type: Number, json: { read: { source: "subLayerId" }, write: { target: "subLayerId" }, origins: { "web-scene": { read: false, write: false } } } })], i4.prototype, "sublayerId", void 0), e([y({ type: String, json: { write: true } })], i4.prototype, "verticalOrderField", void 0), i4 = e([c("esri.layers.support.LevelLayerInfo")], i4);
var s7 = i4;

// node_modules/@arcgis/core/layers/support/SiteLayerInfo.js
var s8 = class extends f {
  constructor(r4) {
    super(r4), this.layerId = null, this.nameField = null, this.siteIdField = null, this.sublayerId = null;
  }
};
e([y({ type: String, json: { write: true } })], s8.prototype, "layerId", void 0), e([y({ type: String, json: { write: true } })], s8.prototype, "nameField", void 0), e([y({ type: String, json: { write: true } })], s8.prototype, "siteIdField", void 0), e([y({ type: Number, json: { read: { source: "subLayerId" }, write: { target: "subLayerId" }, origins: { "web-scene": { read: false, write: false } } } })], s8.prototype, "sublayerId", void 0), s8 = e([c("esri.layers.support.SiteLayerInfo")], s8);
var i5 = s8;

// node_modules/@arcgis/core/support/MapFloorInfo.js
var a2 = class extends f {
  constructor(r4) {
    super(r4), this.levelLayer = null, this.facilityLayer = null, this.siteLayer = null;
  }
};
e([y({ type: s7, json: { write: true } })], a2.prototype, "levelLayer", void 0), e([y({ type: i3, json: { write: true } })], a2.prototype, "facilityLayer", void 0), e([y({ type: i5, json: { write: true } })], a2.prototype, "siteLayer", void 0), a2 = e([c("esri.support.MapFloorInfo")], a2);
var l3 = a2;

// node_modules/@arcgis/core/webdoc/geotriggersInfo/ExpressionInfo.js
var p4 = class extends i2(f) {
  constructor(r4) {
    super(r4), this.expression = null, this.returnType = "string", this.title = null;
  }
};
e([y({ type: String, json: { write: { isRequired: true } } })], p4.prototype, "expression", void 0), e([y({ type: ["number", "string"], json: { write: true } })], p4.prototype, "returnType", void 0), e([y({ type: String, json: { write: true } })], p4.prototype, "title", void 0), p4 = e([c("esri.webdoc.geotriggersInfo.ExpressionInfo")], p4);
var i6 = p4;

// node_modules/@arcgis/core/webdoc/geotriggersInfo/DeviceLocationFeed.js
var c3 = new s3({ deviceLocation: "device-location" });
var a3 = class extends i2(f) {
  constructor(o7) {
    super(o7), this.filterExpression = null, this.type = "device-location";
  }
};
e([y({ type: i6, json: { write: true } })], a3.prototype, "filterExpression", void 0), e([y({ type: c3.apiValues, readOnly: true, json: { type: c3.jsonValues, read: c3.read, write: c3.write } })], a3.prototype, "type", void 0), a3 = e([c("esri.webdoc.geotriggersInfo.DeviceLocationFeed")], a3);
var n4 = a3;

// node_modules/@arcgis/core/webdoc/geotriggersInfo/FeatureFilter.js
var c4 = class extends i2(f) {
  constructor(r4) {
    super(r4), this.geometry = null, this.where = null;
  }
};
e([y({ types: n2, json: { read: p, write: true } })], c4.prototype, "geometry", void 0), e([y({ type: String, json: { write: true } })], c4.prototype, "where", void 0), c4 = e([c("esri.webdoc.geotriggersInfo.FeatureFilter")], c4);
var m4 = c4;

// node_modules/@arcgis/core/webdoc/geotriggersInfo/FeatureLayerSource.js
var p5 = class extends i2(f) {
  constructor(r4) {
    super(r4), this.layerId = null, this.layerUrl = null, this.type = "feature-layer";
  }
};
e([y({ type: String, json: { write: { overridePolicy() {
  return { isRequired: null === this.layerUrl };
} } } })], p5.prototype, "layerId", void 0), e([y({ type: String, json: { write: { overridePolicy() {
  return { isRequired: null === this.layerId };
} } } })], p5.prototype, "layerUrl", void 0), e([o4({ featureLayer: "feature-layer" }, { readOnly: true })], p5.prototype, "type", void 0), p5 = e([c("esri.webdoc.geotriggersInfo.FeatureLayerSource")], p5);
var a4 = p5;

// node_modules/@arcgis/core/webdoc/geotriggersInfo/FeatureFenceParameters.js
var a5 = class extends i2(f) {
  constructor(r4) {
    super(r4), this.fenceSource = null, this.filter = null, this.bufferDistance = null, this.type = "features";
  }
};
e([y({ type: a4, json: { write: { isRequired: true } } })], a5.prototype, "fenceSource", void 0), e([y({ type: m4, json: { write: true } })], a5.prototype, "filter", void 0), e([y({ type: Number, json: { write: true } })], a5.prototype, "bufferDistance", void 0), e([o4({ features: "features" }, { readOnly: true })], a5.prototype, "type", void 0), a5 = e([c("esri.webdoc.geotriggersInfo.FeatureFenceParameters")], a5);
var u2 = a5;

// node_modules/@arcgis/core/webdoc/geotriggersInfo/Geotrigger.js
var c5 = class extends i2(f) {
  constructor(r4) {
    super(r4), this.type = "fence";
  }
};
e([o4({ fence: "fence" }, { readOnly: true })], c5.prototype, "type", void 0), c5 = e([c("esri.webdoc.geotriggersInfo.Geotrigger")], c5);
var p6 = c5;

// node_modules/@arcgis/core/webdoc/geotriggersInfo/GeotriggerNotificationOptions.js
var i7 = class extends i2(f) {
  constructor(o7) {
    super(o7), this.expressionInfo = null, this.requestedActions = null;
  }
};
e([y({ type: i6, json: { write: true } })], i7.prototype, "expressionInfo", void 0), e([y({ type: [String], json: { write: true } })], i7.prototype, "requestedActions", void 0), i7 = e([c("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")], i7);
var c6 = i7;

// node_modules/@arcgis/core/webdoc/geotriggersInfo/support/typeUtils.js
var t2 = new s3({ enterContainsAndExitDoesNotContain: "enter-contains-and-exit-does-not-contain", enterContainsAndExitDoesNotIntersect: "enter-contains-and-exit-does-not-intersect", enterIntersectsAndExitDoesNotIntersect: "enter-intersects-and-exit-does-not-intersect" });
var n5 = new s3({ useGeometry: "use-geometry", useGeometryWithAccuracy: "use-geometry-with-accuracy" });
var o5 = new s3({ enter: "enter", enterOrExit: "enter-or-exit", exit: "exit" });

// node_modules/@arcgis/core/webdoc/geotriggersInfo/FenceGeotrigger.js
var d4 = class extends p6 {
  constructor(e3) {
    super(e3), this.enterExitRule = "enter-contains-and-exit-does-not-intersect", this.feed = null, this.feedAccuracyMode = "use-geometry", this.fenceNotificationRule = null, this.fenceParameters = null, this.name = null, this.notificationOptions = null, this.type = "fence";
  }
};
e([o4(t2)], d4.prototype, "enterExitRule", void 0), e([y({ type: n4, json: { write: { isRequired: true } } })], d4.prototype, "feed", void 0), e([o4(n5)], d4.prototype, "feedAccuracyMode", void 0), e([y({ type: o5.apiValues, json: { type: o5.jsonValues, read: o5.read, write: { writer: o5.write, isRequired: true } } })], d4.prototype, "fenceNotificationRule", void 0), e([y({ type: u2, json: { write: { isRequired: true } } })], d4.prototype, "fenceParameters", void 0), e([y({ type: String, json: { write: true } })], d4.prototype, "name", void 0), e([y({ type: c6, json: { write: true } })], d4.prototype, "notificationOptions", void 0), e([o4({ fence: "fence" }, { readOnly: true })], d4.prototype, "type", void 0), d4 = e([c("esri.webdoc.geotriggersInfo.FenceGeotrigger")], d4);
var m5 = d4;

// node_modules/@arcgis/core/webdoc/geotriggersInfo/support/geotriggerTypes.js
var o6 = { base: p6, key: "type", typeMap: { fence: m5 } };

// node_modules/@arcgis/core/webdoc/GeotriggersInfo.js
var c7 = class extends i2(f) {
  constructor(r4) {
    super(r4), this.geotriggers = null;
  }
};
e([y({ types: [o6], json: { write: { isRequired: true } } })], c7.prototype, "geotriggers", void 0), c7 = e([c("esri.webdoc.GeotriggersInfo")], c7);
var i8 = c7;

// node_modules/@arcgis/core/webdoc/RangeInfo.js
var s9;
var a6 = s9 = class extends f {
  constructor(e3) {
    super(e3), this.activeRange = null, this.currentRangeExtent = null, this.fullRangeExtent = null;
  }
  clone() {
    return new s9(a({ activeRange: this.activeRange, currentRangeExtent: this.currentRangeExtent, fullRangeExtent: this.fullRangeExtent }));
  }
};
e([y({ type: String, nonNullable: true, json: { read: { source: "activeRangeName" }, write: { target: "activeRangeName", isRequired: true } } })], a6.prototype, "activeRange", void 0), e([y({ type: [Number], json: { write: true } })], a6.prototype, "currentRangeExtent", void 0), e([y({ type: [Number], json: { write: true } })], a6.prototype, "fullRangeExtent", void 0), a6 = s9 = e([c("esri.webdoc.RangeInfo")], a6);
var c8 = a6;

// node_modules/@arcgis/core/webdoc/webdocLoadUtils.js
function l4(e3, t5) {
  var _a;
  return t5.resourceInfo ? p7(t5, t5.resourceInfo, { origin: e3.origin }) : ((_a = t5.portalItem) == null ? void 0 : _a.id) ? c9(e3, t5, t5.portalItem) : Promise.resolve();
}
function p7(e3, t5, r4) {
  const o7 = { context: { ...r4, layerContainerType: "operational-layers" } };
  return e3.portalItem && (o7.context.portal = e3.portalItem.portal || j.getDefault()), import("./layersCreator-STMN4LSU.js").then(({ populateOperationalLayers: r5 }) => {
    const i14 = [], a13 = t5.operationalLayers;
    (a13 == null ? void 0 : a13.length) && i14.push(r5(e3.layers, a13, o7));
    const n10 = { ...o7, context: { ...o7.context, layerContainerType: "tables" }, defaultLayerType: "ArcGISFeatureLayer" }, s12 = t5.tables;
    return (s12 == null ? void 0 : s12.length) && i14.push(r5(e3.tables, s12, n10)), Promise.allSettled(i14).then(() => {
    });
  });
}
async function c9(e3, i14, n10) {
  var _a;
  if (await n10.load().catch((r4) => {
    throw new s2(`${e3.name}:load-portal-item`, "Failed to load portal item", { error: r4 });
  }), n10.type !== e3.itemType)
    throw new s2(`${e3.name}:invalid-portal-item`, `Invalid portal item type '${n10.type}', expected '${e3.itemType}'`, { type: n10.type });
  const s12 = await n10.fetchData();
  i14.resourceInfo = s12;
  const l8 = { origin: e3.origin, url: I(n10.itemUrl), portal: n10.portal || j.getDefault(), portalItem: n10, readResourcePaths: [] };
  await m6(e3, i14, s12, l8), i14.resourceReferences = { portalItem: n10, paths: l8.readResourcePaths };
  const p14 = await f5(i14.initialViewProperties, n10, s.getLogger(i14));
  if (p14) {
    const t5 = ((_a = i14.initialViewProperties) == null ? void 0 : _a.clone()) ?? e3.createInitialViewProperties();
    t5.viewpoint = p14, i14.initialViewProperties = t5;
  }
}
function m6(e3, t5, r4, o7) {
  const i14 = u3(e3, r4);
  return t5.read(i14, o7), p7(t5, i14, o7);
}
function u3(e3, t5) {
  const r4 = e3.parseVersion(t5.version || "", e3.name);
  return e3.currentVersion.validate(r4), t5.version = `${r4.major}.${r4.minor}`, t5;
}
async function f5(t5, r4, o7) {
  var _a;
  const i14 = (_a = t5 == null ? void 0 : t5.viewpoint) == null ? void 0 : _a.targetGeometry;
  if (i14)
    return null;
  const a13 = await y2(t5, r4, o7);
  if (!a13)
    return null;
  return new l2({ targetGeometry: a13 });
}
async function y2(e3, t5, r4) {
  const o7 = e3 == null ? void 0 : e3.spatialReference, a13 = t5 == null ? void 0 : t5.extent;
  if (!o7 || !a13)
    return null;
  if (o7.isWGS84)
    return a13.clone();
  if (o7.isWebMercator)
    return d3(a13);
  const { getGeometryServiceURL: l8 } = await import("./geometryServiceUtils-J5FRJBIM.js");
  try {
    const e4 = await l8(t5), r5 = new p2();
    r5.geometries = [a13], r5.outSpatialReference = o7;
    return (await n3(e4, r5))[0];
  } catch (p14) {
    r4.error("Error projecting item's extent:", p14);
  }
  return null;
}

// node_modules/@arcgis/core/webdoc/widgets/FloorFilter.js
var s10;
var n6 = s10 = class extends f {
  constructor(e3) {
    super(e3), this.enabled = false, this.longNames = false, this.minimized = false, this.pinnedLevels = false, this.site = null, this.facility = null, this.level = null;
  }
  clone() {
    return new s10(a({ enabled: this.enabled, longNames: this.longNames, minimized: this.minimized, pinnedLevels: this.pinnedLevels, site: this.site, facility: this.facility, level: this.level }));
  }
};
e([y({ type: Boolean, json: { read: { source: "enabled" }, write: { target: "enabled" } } })], n6.prototype, "enabled", void 0), e([y({ type: Boolean, json: { read: { source: "longNames" }, write: { target: "longNames" } } })], n6.prototype, "longNames", void 0), e([y({ type: Boolean, json: { read: { source: "minimized" }, write: { target: "minimized" } } })], n6.prototype, "minimized", void 0), e([y({ type: Boolean, json: { read: { source: "pinnedLevels" }, write: { target: "pinnedLevels" } } })], n6.prototype, "pinnedLevels", void 0), e([y({ type: String, json: { read: { source: "site" }, write: { target: "site" } } })], n6.prototype, "site", void 0), e([y({ type: String, json: { read: { source: "facility" }, write: { target: "facility" } } })], n6.prototype, "facility", void 0), e([y({ type: String, json: { read: { source: "level" }, write: { target: "level" } } })], n6.prototype, "level", void 0), n6 = s10 = e([c("esri.webdoc.widgets.FloorFilter")], n6);
var l5 = n6;

// node_modules/@arcgis/core/webdoc/widgets/Range.js
var i9;
var n7 = new s3({ slider: "slider", picker: "picker" });
var p8 = i9 = class extends f {
  constructor(e3) {
    super(e3), this.interactionMode = null, this.numStops = null, this.stopInterval = null;
  }
  clone() {
    return new i9({ interactionMode: this.interactionMode, numStops: this.numStops, stopInterval: this.stopInterval });
  }
};
e([y({ type: n7.apiValues, nonNullable: true, json: { type: n7.jsonValues, default: null, read: { reader: n7.read }, write: { isRequired: true, writer: n7.write } } })], p8.prototype, "interactionMode", void 0), e([y({ type: Number, json: { read: { source: "numberOfStops" }, write: { target: "numberOfStops", overridePolicy() {
  const e3 = null != this.stopInterval;
  return { enabled: !e3, isRequired: !e3 };
} } } })], p8.prototype, "numStops", void 0), e([y({ type: Number, json: { write: { overridePolicy() {
  return { isRequired: null == this.numStops };
} } } })], p8.prototype, "stopInterval", void 0), p8 = i9 = e([c("esri.webdoc.widgets.Range")], p8);
var a7 = p8;

// node_modules/@arcgis/core/webdoc/widgets/TimeSlider.js
var a8;
var m7 = a8 = class extends f {
  constructor(t5) {
    super(t5), this.currentTimeExtent = null, this.fullTimeExtent = null, this.loop = false, this.numStops = null, this.numThumbs = null, this.stopDelay = null, this.stopInterval = null, this.stops = null;
  }
  readCurrentTimeExtent(t5) {
    if (!t5)
      return;
    const r4 = null != t5[0] ? new Date(t5[0]) : null, o7 = null != t5[1] ? new Date(t5[1]) : null;
    return new c2({ start: r4, end: o7 });
  }
  writeCurrentTimeExtent(t5, e3, r4) {
    t5 && o(r4, [null != t5.start ? t5.start.getTime() : null, null != t5.end ? t5.end.getTime() : null], e3);
  }
  readFullTimeExtent(t5, r4) {
    const o7 = r4.properties;
    if (!o7)
      return;
    const s12 = null != o7.endTime ? new Date(o7.endTime) : null, n10 = null != o7.startTime ? new Date(o7.startTime) : null;
    return new c2({ start: n10, end: s12 });
  }
  writeFullTimeExtent(t5, e3) {
    if (!t5)
      return;
    const r4 = e3.properties = e3.properties || {}, o7 = t5.end, s12 = t5.start;
    o7 && (r4.endTime = null != o7 ? o7.getTime() : null), s12 && (r4.startTime = null != s12 ? s12.getTime() : null);
  }
  readStopInterval(t5, e3, o7) {
    return t5 ? l.fromJSON({ value: t5.interval, unit: t5.units }, o7) : null;
  }
  writeStopInterval(t5, e3, r4, o7) {
    if (!t5)
      return;
    const s12 = t5.toJSON(o7);
    o(r4, { interval: s12.value, units: s12.unit }, e3);
  }
  readStops(t5) {
    return (t5 == null ? void 0 : t5.length) ? t5.map((t6) => new Date(t6)) : null;
  }
  writeStops(t5, e3, r4) {
    (t5 == null ? void 0 : t5.length) && o(r4, t5.map((t6) => t6.getTime()), e3);
  }
  clone() {
    return new a8(a({ currentTimeExtent: this.currentTimeExtent, fullTimeExtent: this.fullTimeExtent, loop: this.loop, numStops: this.numStops, numThumbs: this.numThumbs, stopDelay: this.stopDelay, stopInterval: this.stopInterval, stops: this.stops }));
  }
};
e([y({ type: c2, json: { read: { source: "properties.currentTimeExtent" }, write: { target: "properties.currentTimeExtent" } } })], m7.prototype, "currentTimeExtent", void 0), e([o3("currentTimeExtent")], m7.prototype, "readCurrentTimeExtent", null), e([r2("currentTimeExtent")], m7.prototype, "writeCurrentTimeExtent", null), e([y({ type: c2, json: { read: { source: ["properties.endTime", "properties.startTime"] }, write: { target: { "properties.endTime": { type: Number }, "properties.startTime": { type: Number } } } } })], m7.prototype, "fullTimeExtent", void 0), e([o3("fullTimeExtent")], m7.prototype, "readFullTimeExtent", null), e([r2("fullTimeExtent")], m7.prototype, "writeFullTimeExtent", null), e([y({ type: Boolean, nonNullable: true, json: { default: false, read: { source: "properties.loop" }, write: { target: "properties.loop" } } })], m7.prototype, "loop", void 0), e([y({ type: Number, json: { read: { source: "properties.numberOfStops" }, write: { target: "properties.numberOfStops", overridePolicy() {
  var _a;
  const t5 = !!this.stopInterval, e3 = !!((_a = this.stops) == null ? void 0 : _a.length), r4 = !(t5 || e3);
  return { enabled: r4, isRequired: r4 };
} } } })], m7.prototype, "numStops", void 0), e([y({ type: [1, 2], nonNullable: true, json: { read: { source: "properties.thumbCount" }, write: { target: "properties.thumbCount", isRequired: true } } })], m7.prototype, "numThumbs", void 0), e([y({ type: Number, nonNullable: true, json: { read: { source: "properties.thumbMovingRate" }, write: { target: "properties.thumbMovingRate", isRequired: true } } })], m7.prototype, "stopDelay", void 0), e([y({ type: l, json: { read: { source: "properties.timeStopInterval" }, write: { target: "properties.timeStopInterval", overridePolicy() {
  var _a;
  const t5 = null != this.numStops, e3 = !!((_a = this.stops) == null ? void 0 : _a.length);
  return { enabled: !e3, isRequired: !(t5 || e3) };
} } } })], m7.prototype, "stopInterval", void 0), e([o3("stopInterval")], m7.prototype, "readStopInterval", null), e([r2("stopInterval")], m7.prototype, "writeStopInterval", null), e([y({ type: [Date], json: { read: { source: "properties.stops" }, write: { target: "properties.stops", overridePolicy() {
  return { isRequired: null == this.numStops && !this.stopInterval };
} } } })], m7.prototype, "stops", void 0), e([o3("stops")], m7.prototype, "readStops", null), e([r2("stops")], m7.prototype, "writeStops", null), m7 = a8 = e([c("esri.webdoc.widgets.TimeSlider")], m7);
var c10 = m7;

// node_modules/@arcgis/core/webdoc/Widgets.js
var m8;
var c11 = m8 = class extends f {
  constructor(r4) {
    super(r4), this.range = null, this.timeSlider = null, this.floorFilter = null;
  }
  clone() {
    return new m8(a({ range: this.range, timeSlider: this.timeSlider, floorFilter: this.floorFilter }));
  }
};
e([y({ type: a7, json: { write: true } })], c11.prototype, "range", void 0), e([y({ type: c10, json: { write: true } })], c11.prototype, "timeSlider", void 0), e([y({ type: l5, json: { write: true } })], c11.prototype, "floorFilter", void 0), c11 = m8 = e([c("esri.webdoc.Widgets")], c11);
var n8 = c11;

// node_modules/@arcgis/core/webdoc/support/thumbnailUtils.js
var h = { width: 600, height: 400 };
var t3 = 1.5;
function i10(i14, e3) {
  e3 = e3 || h;
  let { width: d6, height: n10 } = e3;
  const g3 = d6 / n10;
  return g3 < t3 ? n10 = d6 / t3 : g3 > t3 && (d6 = n10 * t3), d6 > i14.width && (n10 *= i14.width / d6, d6 = i14.width), n10 > i14.height && (d6 *= i14.height / n10, n10 = i14.height), { width: Math.round(d6), height: Math.round(n10) };
}

// node_modules/@arcgis/core/core/accessorSupport/extensions/serializableProperty/writePolicyUtils.js
function e2(e3) {
  return { enabled: !!(e3 == null ? void 0 : e3.length) };
}

// node_modules/@arcgis/core/webdoc/applicationProperties/SearchLayerField.js
var c12;
var a9 = c12 = class extends f {
  constructor(r4) {
    super(r4), this.exactMatch = false, this.name = null, this.type = null;
  }
  clone() {
    return new c12({ exactMatch: this.exactMatch, type: this.type, name: this.name });
  }
};
e([y({ type: Boolean, json: { write: true } })], a9.prototype, "exactMatch", void 0), e([y({ type: String, json: { write: true } })], a9.prototype, "name", void 0), e([o4(i)], a9.prototype, "type", void 0), a9 = c12 = e([c("esri.webdoc.applicationProperties.SearchLayerField")], a9);
var i11 = a9;

// node_modules/@arcgis/core/webdoc/applicationProperties/SearchLayer.js
var c13;
var a10 = c13 = class extends f {
  constructor(r4) {
    super(r4), this.field = null, this.id = null, this.subLayer = null;
  }
  clone() {
    return new c13(a({ field: this.field, id: this.id, subLayer: this.subLayer }));
  }
};
e([y({ type: i11, json: { write: { isRequired: true } } })], a10.prototype, "field", void 0), e([y({ type: String, json: { write: { isRequired: true } } })], a10.prototype, "id", void 0), e([y({ type: T, json: { write: true } })], a10.prototype, "subLayer", void 0), a10 = c13 = e([c("esri.webdoc.applicationProperties.SearchLayer")], a10);
var u4 = a10;

// node_modules/@arcgis/core/webdoc/applicationProperties/SearchTableField.js
var c14;
var a11 = c14 = class extends f {
  constructor(r4) {
    super(r4), this.exactMatch = false, this.name = null, this.type = null;
  }
  clone() {
    return new c14({ exactMatch: this.exactMatch, type: this.type, name: this.name });
  }
};
e([y({ type: Boolean, json: { write: true } })], a11.prototype, "exactMatch", void 0), e([y({ type: String, json: { write: true } })], a11.prototype, "name", void 0), e([o4(i)], a11.prototype, "type", void 0), a11 = c14 = e([c("esri.webdoc.applicationProperties.SearchTableField")], a11);
var i12 = a11;

// node_modules/@arcgis/core/webdoc/applicationProperties/SearchTable.js
var p9;
var c15 = p9 = class extends f {
  constructor(r4) {
    super(r4), this.field = null, this.id = null;
  }
  clone() {
    return new p9(a({ field: this.field, id: this.id }));
  }
};
e([y({ type: i12, json: { write: { isRequired: true } } })], c15.prototype, "field", void 0), e([y({ type: String, json: { write: { isRequired: true } } })], c15.prototype, "id", void 0), c15 = p9 = e([c("esri.webdoc.applicationProperties.SearchTable")], c15);
var l6 = c15;

// node_modules/@arcgis/core/webdoc/applicationProperties/Search.js
var p10;
var b = V.ofType(u4);
var h2 = V.ofType(l6);
var u5 = p10 = class extends f {
  constructor(e3) {
    super(e3), this.addressSearchEnabled = true, this.enabled = true, this.hintText = null, this.layers = new b(), this.tables = new h2();
  }
  readAddressSearchEnabled(e3) {
    return !e3;
  }
  writeAddressSearchEnabled(e3, r4, o7) {
    r4[o7] = !e3;
  }
  clone() {
    return new p10(a({ addressSearchEnabled: this.addressSearchEnabled, enabled: this.enabled, hintText: this.hintText, layers: this.layers, tables: this.tables }));
  }
};
e([y({ type: Boolean, nonNullable: true, json: { read: { source: "disablePlaceFinder" }, write: { target: "disablePlaceFinder", isRequired: true }, origins: { "web-scene": { read: false, write: false } } } })], u5.prototype, "addressSearchEnabled", void 0), e([o3("addressSearchEnabled")], u5.prototype, "readAddressSearchEnabled", null), e([r2("addressSearchEnabled")], u5.prototype, "writeAddressSearchEnabled", null), e([y({ type: Boolean, nonNullable: true, json: { write: true, origins: { "web-map": { write: { isRequired: true } }, "web-scene": { default: true, write: true } } } })], u5.prototype, "enabled", void 0), e([y({ type: String, json: { write: true } })], u5.prototype, "hintText", void 0), e([y({ type: b, json: { write: { overridePolicy: e2 }, origins: { "web-scene": { write: { isRequired: true } } } } })], u5.prototype, "layers", void 0), e([y({ type: h2, json: { read: true, write: { overridePolicy: e2 } } })], u5.prototype, "tables", void 0), u5 = p10 = e([c("esri.webdoc.applicationProperties.Search")], u5);
var y3 = u5;

// node_modules/@arcgis/core/webdoc/applicationProperties/Viewing.js
var p11;
var a12 = p11 = class extends f {
  constructor(r4) {
    super(r4), this.search = null;
  }
  clone() {
    return new p11(a({ search: this.search }));
  }
};
e([y({ type: y3, json: { write: true } })], a12.prototype, "search", void 0), a12 = p11 = e([c("esri.webdoc.applicationProperties.Viewing")], a12);
var i13 = a12;

// node_modules/@arcgis/core/webmap/ApplicationProperties.js
var p12;
var n9 = p12 = class extends f {
  constructor(o7) {
    super(o7), this.editing = null, this.offline = null, this.viewing = null;
  }
  clone() {
    return new p12(a({ editing: this.editing, offline: this.offline, viewing: this.viewing }));
  }
};
e([y({ json: { write: true } })], n9.prototype, "editing", void 0), e([y({ json: { write: true } })], n9.prototype, "offline", void 0), e([y({ type: i13, json: { write: true } })], n9.prototype, "viewing", void 0), n9 = p12 = e([c("esri.webmap.ApplicationProperties")], n9);
var c16 = n9;

// node_modules/@arcgis/core/webdoc/support/SlideThumbnail.js
var t4;
var p13 = t4 = class extends f {
  constructor() {
    super(...arguments), this.url = "";
  }
  destroy() {
    this.url = "";
  }
  clone() {
    return new t4({ url: this.url });
  }
};
e([y({ type: String, json: { write: { isRequired: true } } })], p13.prototype, "url", void 0), p13 = t4 = e([c("esri.webdoc.support.SlideThumbnail")], p13);

// node_modules/@arcgis/core/webmap/Bookmark.js
var y4;
var d5 = y4 = class extends s5(f) {
  constructor(t5) {
    super(t5), this.name = null, this.thumbnail = new p13(), this.timeExtent = null;
  }
  castThumbnail(t5) {
    return "string" == typeof t5 ? new p13({ url: t5 }) : d(p13, t5);
  }
  set viewpoint(t5) {
    const { targetGeometry: e3, scale: o7 } = t5;
    null != e3 && "point" === e3.type && null == o7 && s.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.", t5), this._set("viewpoint", t5);
  }
  readViewpoint(t5, e3) {
    const { extent: r4, viewpoint: i14 } = e3;
    return l2.fromJSON(i14 || { targetGeometry: r4 });
  }
  writeViewpoint(t5, e3, o7, i14) {
    if (!t5)
      return;
    const { targetGeometry: n10 } = t5;
    if (null == n10 || "extent" === n10.type)
      null != n10 && (e3.extent = n10.toJSON()), e3[o7] = t5.toJSON();
    else {
      const t6 = "Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";
      (i14 == null ? void 0 : i14.messages) ? i14.messages.push(new s2("property:unsupported", t6)) : s.getLogger(this).error(t6);
    }
  }
  clone() {
    return new y4(a({ name: this.name, thumbnail: this.thumbnail, timeExtent: this.timeExtent, viewpoint: this.viewpoint }));
  }
};
e([y({ type: String, nonNullable: true, json: { write: { isRequired: true } } })], d5.prototype, "name", void 0), e([y({ type: p13, json: { write: { overridePolicy: (t5) => ({ enabled: !(!t5 || !t5.url) }) } } })], d5.prototype, "thumbnail", void 0), e([s4("thumbnail")], d5.prototype, "castThumbnail", null), e([y({ type: c2, json: { write: true } })], d5.prototype, "timeExtent", void 0), e([y({ type: l2, nonNullable: true, json: { write: true } })], d5.prototype, "viewpoint", null), e([o3("viewpoint", ["extent", "viewpoint"])], d5.prototype, "readViewpoint", null), e([r2("viewpoint")], d5.prototype, "writeViewpoint", null), d5 = y4 = e([c("esri.webmap.Bookmark")], d5);
var f6 = d5;

// node_modules/@arcgis/core/webmap/InitialViewProperties.js
var m9 = class extends i2(g) {
  constructor(o7) {
    super(o7), this.background = null, this.rangeInfo = null, this.spatialReference = null, this.timeZone = o2, this.viewpoint = null;
  }
};
e([y({ type: m3 })], m9.prototype, "background", void 0), e([y({ type: c8 })], m9.prototype, "rangeInfo", void 0), e([y({ type: f2 })], m9.prototype, "spatialReference", void 0), e([y({ nonNullable: true })], m9.prototype, "timeZone", void 0), e([y({ type: l2 })], m9.prototype, "viewpoint", void 0), m9 = e([c("esri.webmap.InitialViewProperties")], m9);
var l7 = m9;

// node_modules/@arcgis/core/webmap/Version.js
var s11 = class extends r3 {
  constructor(r4, s12) {
    super(r4, s12, "webmap");
  }
};

// node_modules/@arcgis/core/WebMap.js
var M = new s11(2, 29);
var Z = "Web Map";
var W = "webmap";
var $ = "web-map";
var C = V.ofType(f6);
var G = V.ofType(p3);
var z = /* @__PURE__ */ new Map([["image/jpeg", "jpeg"], ["image/jpg", "jpg"], ["image/png", "png"], ["image/gif", "gif"]]);
var D = "ArcGIS Pro";
var q = f4.JSAPI;
var H = { currentVersion: M, createInitialViewProperties: () => new l7(), parseVersion: s11.parse, itemType: Z, name: W, origin: $ };
var K = class extends m2(m.LoadableMixin(n(g2))) {
  constructor(e3) {
    super(e3), this._isAuthoringAppSetByUser = false, this._isAuthoringAppVersionSetByUser = false, this._thumbnailFilename = null, this._updateFromPromise = null, this.resourceReferences = { portalItem: null, paths: [] }, this.applicationProperties = null, this.bookmarks = new C(), this.floorInfo = null, this.geotriggersInfo = null, this.initialViewProperties = new l7(), this.portalItem = null, this.presentation = null, this.sourceVersion = null, this.widgets = null, this.utilityNetworks = null, this._debouncedSaveOperations = k2(async (e4, t5, r4) => {
      const { save: i14, saveAs: o7 } = await import("./webdocSaveUtils-WTHIA67Z.js");
      switch (e4) {
        case A.SAVE:
          return i14(H, this, t5);
        case A.SAVE_AS:
          return o7(H, this, r4, t5);
      }
    }), this.authoringApp = this.authoringAppVersion = null, this._isAuthoringAppSetByUser = this._isAuthoringAppVersionSetByUser = false;
  }
  destroy() {
    if (this.portalItem = u(this.portalItem), this.utilityNetworks) {
      const e3 = this.utilityNetworks.removeAll();
      for (const t5 of e3)
        t5.destroy();
      this.utilityNetworks.destroy();
    }
  }
  initialize() {
    if (this.when().catch((e3) => {
      s.getLogger(this).error("#load()", "Failed to load web map", e3);
    }), this.resourceInfo) {
      let t5;
      try {
        t5 = this._validateJSON(this.resourceInfo);
      } catch (e3) {
        return void this.addResolvingPromise(Promise.reject(e3));
      }
      this.read(t5);
    }
  }
  set authoringApp(e3) {
    this._isAuthoringAppSetByUser = true, this._set("authoringApp", e3);
  }
  writeAuthoringApp(e3, t5) {
    e3 && this._isAuthoringAppSetByUser ? t5.authoringApp = e3 : t5.authoringApp = q;
  }
  set authoringAppVersion(e3) {
    this._isAuthoringAppVersionSetByUser = true, this._set("authoringAppVersion", e3);
  }
  writeAuthoringAppVersion(e3, r4) {
    e3 && this._isAuthoringAppVersionSetByUser ? r4.authoringAppVersion = e3 : r4.authoringAppVersion = r;
  }
  readInitialViewProperties(e3, t5) {
    var _a;
    const r4 = new l7();
    t5.background && (r4.background = m3.fromJSON(t5.background));
    const o7 = (_a = t5.initialState) == null ? void 0 : _a.viewpoint;
    if (o7) {
      if (o7.rotation) {
        s11.parse(t5.version || "", "webmap").lessThan(2, 20) && t5.authoringApp === D && (o7.rotation *= -1);
      }
      r4.viewpoint = l2.fromJSON(o7);
    }
    return t5.mapRangeInfo && (r4.rangeInfo = c8.fromJSON(t5.mapRangeInfo)), t5.spatialReference && (r4.spatialReference = f2.fromJSON(t5.spatialReference)), t5.timeZone && (r4.timeZone = t5.timeZone), r4;
  }
  writeInitialViewProperties(e3, t5, r4, i14) {
    var _a;
    e3 && (((_a = e3.background) == null ? void 0 : _a.color) && (t5.background = e3.background.write({}, i14)), e3.viewpoint && (t5.initialState = { viewpoint: e3.viewpoint.write({}, i14) }), e3.rangeInfo && (t5.mapRangeInfo = e3.rangeInfo.toJSON(i14)), e3.spatialReference && (t5.spatialReference = e3.spatialReference.write({}, i14)), t5.timeZone = e3.timeZone);
  }
  writeLayers(e3, t5, r4, i14) {
    t5[r4] = this._writeLayers(e3, i14, "operational-layers");
  }
  readSourceVersion(e3, t5) {
    const [r4, i14] = t5.version.split(".");
    return new s11(parseInt(r4, 10), parseInt(i14, 10));
  }
  writeSourceVersion(e3, t5, r4) {
    t5[r4] = `${M.major}.${M.minor}`;
  }
  writeTables(e3, t5, r4, i14) {
    const o7 = this._writeLayers(e3, i14, "tables");
    o7.length && (t5[r4] = o7);
  }
  get thumbnailUrl() {
    var _a;
    return ((_a = this.portalItem) == null ? void 0 : _a.thumbnailUrl) || null;
  }
  set thumbnailUrl(e3) {
    e3 ? (this._override("thumbnailUrl", e3), this._thumbnailFilename = this._generateCustomThumbnailFilename(e3)) : this._clearThumbnailOverride();
  }
  get updatingFromView() {
    return !!this._updateFromPromise;
  }
  load(e3) {
    return this.addResolvingPromise(l4(H, this)), Promise.resolve(this);
  }
  loadAll() {
    return t(this, (e3) => {
      e3(this.ground, this.basemap, this.layers, this.tables);
    });
  }
  read(e3, t5) {
    t5 = { ...t5, origin: $ };
    const r4 = this._getAuthoringPropsState();
    d2(this, e3, (t6) => super.read(e3, t6), t5), this._restoreAuthoringPropsFromState(r4);
  }
  write(e3, t5) {
    if ("loaded" !== this.loadStatus) {
      const e4 = new s2("webmap:not-loaded", "Web map must be loaded before it can be serialized");
      throw s.getLogger(this).error("#toJSON()", "Web map must be loaded before it can be serialized", this.loadError || this.loadStatus), e4;
    }
    return this._removeDanglingLayerRefs(), t5 = { ...t5, origin: $, restrictedWebMapWriting: true, webmap: this }, super.write(e3, t5);
  }
  async save(e3) {
    return this._debouncedSaveOperations(A.SAVE, e3);
  }
  async saveAs(e3, t5) {
    return this._debouncedSaveOperations(A.SAVE_AS, t5, e3);
  }
  async updateFrom(e3, t5) {
    const r4 = this._updateFromInternal(e3, t5);
    this._updateFromPromise = r4, await r4;
    r4 === this._updateFromPromise && (this._updateFromPromise = null);
  }
  getLayerJSONFromResourceInfo(e3) {
    var _a, _b, _c, _d;
    const t5 = this.resourceInfo;
    return this._collectAllLayersJSON([...((_a = t5 == null ? void 0 : t5.baseMap) == null ? void 0 : _a.baseMapLayers) || [], ...(t5 == null ? void 0 : t5.operationalLayers) || [], ...((_d = (_c = (_b = this.basemap) == null ? void 0 : _b.resourceInfo) == null ? void 0 : _c.data) == null ? void 0 : _d.baseMapLayers) || []]).find((t6) => t6.id === e3.id);
  }
  async updateItemThumbnail() {
    var _a;
    this.thumbnailUrl && this._isOverridden("thumbnailUrl") && (await ((_a = this.portalItem) == null ? void 0 : _a.updateThumbnail({ thumbnail: this.thumbnailUrl, filename: this._thumbnailFilename })), this._clearThumbnailOverride());
  }
  getThumbnailState() {
    let e3 = this.thumbnailUrl;
    return e3 && (e3 = this._isOverridden("thumbnailUrl") ? e3 : kt(e3, "w", "8192")), { thumbnailUrl: e3, filename: this._thumbnailFilename };
  }
  restoreThumbnailFromState(e3) {
    this.thumbnailUrl = e3.thumbnailUrl, this._thumbnailFilename = e3.filename;
  }
  _collectAllLayersJSON(e3) {
    return e3.reduce((e4, t5) => (e4.push(t5), "GroupLayer" === t5.layerType && (e4 = e4.concat(this._collectAllLayersJSON(t5.layers || []))), e4), []);
  }
  _writeLayers(e3, t5, r4) {
    t5 = { ...t5, layerContainerType: r4 };
    return e3.map((e4) => f3(e4, "tables" === r4 ? null : this.getLayerJSONFromResourceInfo(e4), t5)).filter(k).toArray();
  }
  _validateJSON(e3) {
    const t5 = s11.parse(e3.version || "", "webmap");
    return M.validate(t5), e3.version = `${t5.major}.${t5.minor}`, e3;
  }
  _removeDanglingLayerRefs() {
    var _a, _b, _c;
    const e3 = this.applicationProperties, t5 = (_a = e3 == null ? void 0 : e3.viewing) == null ? void 0 : _a.search, r4 = (e4) => this.allLayers.some((t6) => t6.id === e4);
    if (t5 && t5.layers && (t5.layers = t5.layers.filter((e4) => r4(e4.id))), t5 && t5.tables && (t5.tables = t5.tables.filter((e4) => this.tables.some((t6) => t6.id === e4.id))), e3) {
      const t6 = (_b = e3.editing) == null ? void 0 : _b.locationTracking;
      (t6 == null ? void 0 : t6.info) && !r4(t6.info.layerId) && (e3.editing = null);
    }
    const i14 = (_c = this.presentation) == null ? void 0 : _c.slides;
    i14 && i14.forEach((e4) => {
      e4.visibleLayers && (e4.visibleLayers = e4.visibleLayers.filter((e5) => r4(e5.id)));
    });
  }
  async _updateFromInternal(e3, t5) {
    if (t5 ?? (t5 = {}), await w(() => e3.ready), this._updateInitialViewProperties(e3, t5), e3.map === this)
      for (const r4 of e3.allLayerViews)
        "visible" in r4 && "visible" in r4.layer && r4._isOverridden("visible") && (r4.layer.visible = r4.visible), "featureEffect" in r4 && "featureEffect" in r4.layer && r4._isOverridden("featureEffect") && (r4.layer.featureEffect = r4.featureEffect);
    await this._updateThumbnailUrl(e3, t5);
  }
  _updateInitialViewProperties(e3, t5) {
    var _a, _b;
    if (t5.backgroundExcluded || (this.initialViewProperties.background = (_a = e3.background) == null ? void 0 : _a.clone()), this.initialViewProperties.spatialReference = (_b = e3.spatialReference) == null ? void 0 : _b.clone(), this.initialViewProperties.timeZone = e3.timeZone, t5.viewpointExcluded || (this.initialViewProperties.viewpoint = new l2({ rotation: e3.rotation, scale: t5.scalePreserved ? e3.scale : null, targetGeometry: this._getViewExtent(e3) })), !t5.widgetsExcluded)
      for (const r4 of e3.persistableViewModels)
        r4.updateWebDocument(this);
  }
  _getViewExtent(e3) {
    const t5 = e3.center.clone().normalize(), r4 = e3.extent.clone(), i14 = r4.width / 2;
    return r4.xmin = t5.x - i14, r4.xmax = t5.x + i14, r4;
  }
  async _updateThumbnailUrl(e3, t5) {
    if (t5.thumbnailExcluded)
      return;
    const r4 = i10(e3, t5.thumbnailSize), i14 = await e3.takeScreenshot({ format: "png", width: r4.width, height: r4.height });
    this._setAutoGeneratedThumbnail(i14.dataUrl);
  }
  _setAutoGeneratedThumbnail(e3) {
    this.thumbnailUrl = e3, this._thumbnailFilename = null;
  }
  _clearThumbnailOverride() {
    this._clearOverride("thumbnailUrl"), this.clear("thumbnailUrl", "user"), this._thumbnailFilename = null;
  }
  _generateCustomThumbnailFilename(e3) {
    if (tt(e3)) {
      const t5 = ot(e3), r4 = t5 == null ? void 0 : t5.mediaType, i14 = r4 && z.get(r4.toLowerCase()) || null, o7 = `thumbnail${Date.now()}`;
      return i14 ? `${o7}.${i14}` : o7;
    }
    return null;
  }
  _getAuthoringPropsState() {
    return { authoringApp: this.authoringApp, authoringAppVersion: this.authoringAppVersion, isAuthoringAppSetByUser: this._isAuthoringAppSetByUser, isAuthoringAppVersionSetByUser: this._isAuthoringAppVersionSetByUser };
  }
  _restoreAuthoringPropsFromState(e3) {
    e3.isAuthoringAppSetByUser ? this.authoringApp = e3.authoringApp : this._isAuthoringAppSetByUser = false, e3.isAuthoringAppVersionSetByUser ? this.authoringAppVersion = e3.authoringAppVersion : this._isAuthoringAppVersionSetByUser = false;
  }
  static fromJSON(e3) {
    const t5 = e3;
    if (!t5)
      throw new s2("webmap:empty-resource", "Expected a JSON resource but got nothing");
    return new this({ resourceInfo: t5 });
  }
};
K.VERSION = M, e([y()], K.prototype, "_updateFromPromise", void 0), e([y({ type: c16, json: { write: true } })], K.prototype, "applicationProperties", void 0), e([y({ type: String, json: { write: { allowNull: true, ignoreOrigin: true } } })], K.prototype, "authoringApp", null), e([r2("authoringApp")], K.prototype, "writeAuthoringApp", null), e([y({ type: String, json: { write: { allowNull: true, ignoreOrigin: true } } })], K.prototype, "authoringAppVersion", null), e([r2("authoringAppVersion")], K.prototype, "writeAuthoringAppVersion", null), e([y({ type: C, json: { write: { overridePolicy: (e3) => ({ enabled: !!(e3 && e3.length > 0), ignoreOrigin: true }) } } })], K.prototype, "bookmarks", void 0), e([y({ type: l3, json: { name: "mapFloorInfo", write: true } })], K.prototype, "floorInfo", void 0), e([y({ type: i8, json: { write: true } })], K.prototype, "geotriggersInfo", void 0), e([y({ type: l7, nonNullable: true, json: { read: { source: ["background", "initialState.viewpoint", "mapRangeInfo", "spatialReference", "timeZone"] }, write: { ignoreOrigin: true, target: { background: { type: m3 }, "initialState.viewpoint": { type: l2 }, mapRangeInfo: { type: c8 }, spatialReference: { type: f2 }, "timeZone:": { type: String } } } } })], K.prototype, "initialViewProperties", void 0), e([o3("initialViewProperties")], K.prototype, "readInitialViewProperties", null), e([r2("initialViewProperties")], K.prototype, "writeInitialViewProperties", null), e([y({ json: { read: false, write: { target: "operationalLayers", ignoreOrigin: true } } })], K.prototype, "layers", void 0), e([r2("layers")], K.prototype, "writeLayers", null), e([y({ type: S })], K.prototype, "portalItem", void 0), e([y({ json: { write: true } })], K.prototype, "presentation", void 0), e([y()], K.prototype, "resourceInfo", void 0), e([y({ readOnly: true, type: s11, json: { read: { source: "version" }, write: { allowNull: true, ignoreOrigin: true, target: "version", isRequired: true } } })], K.prototype, "sourceVersion", void 0), e([o3("sourceVersion")], K.prototype, "readSourceVersion", null), e([r2("sourceVersion")], K.prototype, "writeSourceVersion", null), e([y({ json: { read: false, write: { ignoreOrigin: true } } })], K.prototype, "tables", void 0), e([r2("tables")], K.prototype, "writeTables", null), e([y()], K.prototype, "thumbnailUrl", null), e([y()], K.prototype, "updatingFromView", null), e([y({ type: n8, json: { write: true } })], K.prototype, "widgets", void 0), e([y({ type: G, json: { read: true, write: true } })], K.prototype, "utilityNetworks", void 0), K = e([c("esri.WebMap")], K);
var Q = K;
export {
  Q as default
};
//# sourceMappingURL=@arcgis_core_WebMap.js.map
