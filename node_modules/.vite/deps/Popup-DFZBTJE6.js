import {
  e as e5
} from "./chunk-DRBYLQY3.js";
import "./chunk-X4SSAAEM.js";
import "./chunk-GKZKNWGZ.js";
import "./chunk-QS4IQWBR.js";
import {
  D as D2,
  N as N2,
  R,
  h2,
  k as k3
} from "./chunk-6JCSK7BN.js";
import "./chunk-XZLDDXLF.js";
import {
  s as s9
} from "./chunk-SH5MUYBA.js";
import {
  l
} from "./chunk-FDNAIASW.js";
import "./chunk-XI27PUTI.js";
import "./chunk-AHDIKORE.js";
import "./chunk-RCB4CZ33.js";
import "./chunk-MKRPXDII.js";
import {
  E as E2
} from "./chunk-ED5W63C6.js";
import "./chunk-S6CVQWN7.js";
import "./chunk-JWPJ4Y6I.js";
import "./chunk-OYPRFNII.js";
import "./chunk-747B2TEO.js";
import "./chunk-4NEWABLH.js";
import "./chunk-FW2Y26A2.js";
import "./chunk-5WG7GACT.js";
import {
  N,
  Z
} from "./chunk-PFFV4MXI.js";
import {
  e as e3,
  e2 as e4,
  t as t2
} from "./chunk-J7KPLT4Z.js";
import {
  e as e6,
  t as t3,
  t2 as t4
} from "./chunk-MDZDX7MD.js";
import "./chunk-B7TIRUHV.js";
import "./chunk-EY7PGBJG.js";
import "./chunk-LOGPPZUD.js";
import "./chunk-HYU6N3H3.js";
import {
  O,
  e2,
  i2,
  r as r3,
  r2 as r4
} from "./chunk-5LA3TYXZ.js";
import {
  L,
  b as b2,
  g as g3,
  i2 as i3,
  n2 as n,
  v as v3
} from "./chunk-L7F73IMH.js";
import "./chunk-SF4VUK6B.js";
import "./chunk-DN2NYMXJ.js";
import "./chunk-UUFM7UDX.js";
import {
  Ze
} from "./chunk-BPPKPMEP.js";
import "./chunk-ADNT35Y3.js";
import "./chunk-3F7Z2GZ4.js";
import "./chunk-BVTDQR4O.js";
import "./chunk-JDVR6MOC.js";
import "./chunk-DYYHVSPV.js";
import "./chunk-UIN5EOGE.js";
import "./chunk-ZRKSP45X.js";
import "./chunk-DT2VHQBL.js";
import "./chunk-FYSZRVYZ.js";
import "./chunk-6C2TVJRX.js";
import "./chunk-Z6LZMG5A.js";
import "./chunk-323PT7GB.js";
import "./chunk-TKJNJ6KH.js";
import "./chunk-36R5EC6A.js";
import "./chunk-KLPBCYCG.js";
import "./chunk-3HOLDCR2.js";
import "./chunk-DCL3YBJN.js";
import "./chunk-3ZWLSDVT.js";
import "./chunk-5DLICG33.js";
import "./chunk-ZILXWPAR.js";
import "./chunk-HPFRYEGX.js";
import {
  a as a3
} from "./chunk-F64GI7MS.js";
import "./chunk-4LDWKTSM.js";
import "./chunk-U4ONWLTG.js";
import "./chunk-POSLR7O2.js";
import "./chunk-VOYU5TTK.js";
import "./chunk-P5VIVFJT.js";
import "./chunk-SA3C7GIT.js";
import "./chunk-P3R45ANF.js";
import "./chunk-PIEUUBJ5.js";
import "./chunk-YIAYIZOZ.js";
import "./chunk-P5GW5DPX.js";
import "./chunk-VIOPOI6P.js";
import "./chunk-DMLVD5AS.js";
import "./chunk-DOALI2C2.js";
import {
  c as c8
} from "./chunk-E3I4MGUC.js";
import "./chunk-UHNBENSV.js";
import "./chunk-GDKL26HH.js";
import "./chunk-2CL4LRYG.js";
import "./chunk-64EQFPYJ.js";
import "./chunk-HKYMYCLL.js";
import "./chunk-ICVVQFO6.js";
import "./chunk-BYK6DXRK.js";
import "./chunk-IYJG2X3Y.js";
import {
  d as d4
} from "./chunk-UTCX6DGX.js";
import "./chunk-HBL2432S.js";
import "./chunk-T2S5L26W.js";
import "./chunk-7VNZ6V2N.js";
import "./chunk-VKTTTBW2.js";
import "./chunk-TTZWDXX5.js";
import "./chunk-OCLKX5SY.js";
import "./chunk-SEKLTVY5.js";
import "./chunk-HX5GOVNX.js";
import "./chunk-2Q2Q2Z4U.js";
import "./chunk-S6MJEC4A.js";
import "./chunk-HU7QYAVQ.js";
import {
  b as b3,
  m
} from "./chunk-45OAWGCA.js";
import "./chunk-R4LYFMZX.js";
import "./chunk-X2TA76Q5.js";
import "./chunk-T3Y5GTKO.js";
import "./chunk-XN6LAULS.js";
import "./chunk-M7OEQQRX.js";
import "./chunk-CSWPLQ7Q.js";
import "./chunk-KWSMYM7P.js";
import "./chunk-RP5SAUAF.js";
import "./chunk-6BFXMZEZ.js";
import "./chunk-AMSVADDY.js";
import "./chunk-6B7VJB6C.js";
import "./chunk-GAJBN4TM.js";
import "./chunk-JIDGV6CL.js";
import "./chunk-BADPOP5P.js";
import {
  b as b4
} from "./chunk-YXRSJYLG.js";
import "./chunk-KBKTS574.js";
import "./chunk-6ABSX3YY.js";
import "./chunk-24NOAXOQ.js";
import {
  c as c7
} from "./chunk-FWR4JURK.js";
import {
  I,
  a as a2,
  c as c3,
  c2 as c4,
  c4 as c5,
  c5 as c6,
  i2 as i6,
  i3 as i7,
  i4 as i8,
  p as p2
} from "./chunk-BELGAUAK.js";
import {
  s as s8
} from "./chunk-JHJVOI7Q.js";
import "./chunk-TWNBDJHC.js";
import {
  S
} from "./chunk-HITXLR5N.js";
import "./chunk-WYZCKLOR.js";
import "./chunk-S6NERLXF.js";
import "./chunk-4TSAC52K.js";
import "./chunk-H4ZZ5S37.js";
import {
  u as u3
} from "./chunk-G557TGXY.js";
import "./chunk-2AXFVQBN.js";
import "./chunk-WOGT6UK2.js";
import "./chunk-RHT6WWRD.js";
import "./chunk-EUGXS5RE.js";
import "./chunk-IRNKV32L.js";
import "./chunk-HLM2UN42.js";
import "./chunk-5WWPLX36.js";
import "./chunk-UNONG753.js";
import "./chunk-OFRZSMZB.js";
import "./chunk-IATM3RCE.js";
import "./chunk-BEALJUHO.js";
import "./chunk-GRHSIT57.js";
import "./chunk-PJQIAD5D.js";
import {
  Ge,
  be,
  je,
  pe
} from "./chunk-Z6KIMOUA.js";
import "./chunk-SZAJDZCO.js";
import {
  i as i9
} from "./chunk-M7R7REMB.js";
import "./chunk-ZZYUEH57.js";
import "./chunk-VTWXDFFD.js";
import "./chunk-IPCIO3PX.js";
import "./chunk-EIY2DYTV.js";
import {
  i as i5
} from "./chunk-WJ4LS3YG.js";
import "./chunk-F6MD5VOH.js";
import "./chunk-V2RPSCV3.js";
import "./chunk-AOJ6OCPK.js";
import "./chunk-LMT5JII2.js";
import {
  x as x2
} from "./chunk-A43TI6AT.js";
import "./chunk-BHJVWW2P.js";
import "./chunk-4HKQSEUR.js";
import "./chunk-V3U4F2NL.js";
import "./chunk-ZB6PGKG5.js";
import "./chunk-OIIDE5GZ.js";
import "./chunk-3XSRVKBX.js";
import "./chunk-WYBZLWIA.js";
import {
  i as i4
} from "./chunk-MKW4ORPJ.js";
import "./chunk-YTH6VA7N.js";
import "./chunk-GINTRQSD.js";
import "./chunk-APYNYYQC.js";
import {
  C,
  P,
  d as d2,
  p,
  v as v2,
  w
} from "./chunk-TBSVVR6M.js";
import "./chunk-6TJWLWLO.js";
import {
  o as o3,
  s as s6,
  u as u2
} from "./chunk-H7BKONNV.js";
import "./chunk-K6C6RVSV.js";
import {
  E,
  g as g2,
  j as j2,
  o as o2
} from "./chunk-KBJ5Z4R2.js";
import {
  V
} from "./chunk-JUZJCTW2.js";
import {
  o
} from "./chunk-423VNHLR.js";
import {
  s as s5
} from "./chunk-FN47E7YK.js";
import "./chunk-XZS3Q5K4.js";
import "./chunk-XXFXRXFH.js";
import "./chunk-CCXEAKIM.js";
import "./chunk-Y5D433JZ.js";
import {
  d as d3,
  x2 as x
} from "./chunk-QNOCEWCR.js";
import "./chunk-WURET5CW.js";
import "./chunk-QWPLZ3QH.js";
import {
  D
} from "./chunk-HLGIRLYQ.js";
import "./chunk-N2K4VRZH.js";
import "./chunk-WL4VPODY.js";
import {
  s as s7
} from "./chunk-OMPEZIP5.js";
import "./chunk-EUTNDAIV.js";
import {
  a
} from "./chunk-SJZIFARA.js";
import {
  j
} from "./chunk-R5DM4YAB.js";
import "./chunk-NSRXJNTS.js";
import {
  g,
  t,
  y2 as y
} from "./chunk-LXXF7K7W.js";
import {
  c as c2,
  r2,
  s as s4
} from "./chunk-SBW6NNVI.js";
import {
  e
} from "./chunk-62CXLI6S.js";
import {
  A,
  b,
  c,
  d,
  f,
  h,
  k as k2,
  v
} from "./chunk-RFPH3ZTZ.js";
import {
  u
} from "./chunk-WGO3VFQP.js";
import "./chunk-CQS47VN5.js";
import {
  i,
  r,
  s2,
  s3
} from "./chunk-WJ3HJKNC.js";
import {
  k,
  s
} from "./chunk-4V6374PV.js";
import "./chunk-A34O4XB5.js";
import "./chunk-76J2PTFD.js";

// node_modules/@arcgis/core/core/quantityUtils.js
function i10(t12, u11) {
  return { type: D(u11), value: t12, unit: u11 };
}
function l2(t12, u11) {
  return { type: D(u11), value: t12, unit: u11 };
}
function o4(t12, u11, e14 = "arithmetic") {
  return { type: D(u11), value: t12, unit: u11, rotationType: e14 };
}
var h3 = i10(0, "meters");
var d5 = l2(0, "square-meters");
var T = o4(0, "radians");
var U = o4(0, "degrees");

// node_modules/@arcgis/core/core/unitFormatUtils.js
var I3 = ["B", "kB", "MB", "GB", "TB"];
function O2(n13, r9) {
  let e14 = 0 === (r9 = Math.round(r9)) ? 0 : Math.floor(Math.log(r9) / Math.log(E2.KILOBYTES));
  e14 = i4(e14, 0, I3.length - 1);
  const u11 = u2(r9 / E2.KILOBYTES ** e14, { maximumFractionDigits: 2 });
  return r(n13.units.bytes[I3[e14]], { fileSize: u11 });
}

// node_modules/@arcgis/core/widgets/Feature/support/featureUtils.js
var m2 = "esri.widgets.Feature.support.featureUtils";
var y2 = s2.getLogger(m2);
var g5 = /href=(""|'')/gi;
var I4 = /(\{([^\{\r\n]+)\})/g;
var h4 = /\'/g;
var b5 = /^\s*expression\//i;
var T3 = /(\n)/gi;
var w2 = /[\u00A0-\u9999<>\&]/gim;
var F2 = /href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi;
var N3 = /^(?:mailto:|tel:)/;
var j4 = "relationships/";
var Z2 = E("short-date-short-time");
function E3(e14) {
  if (null != e14)
    return (e14.sourceLayer || e14.layer) ?? void 0;
}
async function x3(e14, t12) {
  return "function" == typeof e14 ? e14(t12) : e14;
}
function C2(e14 = "") {
  if (e14)
    return !N3.test(e14.trim().toLowerCase());
}
function M(e14) {
  return !!e14 && b5.test(e14);
}
function U2(e14, t12) {
  if (!M(t12) || !e14)
    return null;
  const n13 = t12.replace(b5, "").toLowerCase();
  let r9 = null;
  return e14.some((e15) => e15.name.toLowerCase() === n13 && (r9 = e15, true)), r9;
}
function q(e14, t12) {
  const n13 = U2(t12, e14 == null ? void 0 : e14.fieldName);
  return n13 ? n13.title || null : e14 ? e14.label || e14.fieldName : null;
}
function A3(e14, t12) {
  const n13 = t12.get(e14.toLowerCase());
  return `{${(n13 == null ? void 0 : n13.fieldName) || e14}}`;
}
function L2(e14) {
  return e14.replaceAll(g5, "");
}
function v5(e14, t12) {
  const n13 = $(t12, e14);
  return n13 ? n13.name : e14;
}
function R2(e14, t12) {
  return e14 && e14.map((e15) => v5(e15, t12));
}
function $(e14, t12) {
  return e14 && "function" == typeof e14.getField && t12 ? e14.getField(t12) ?? null : null;
}
function k4(e14) {
  return `${e14}`.trim();
}
function D3({ attributes: e14, globalAttributes: t12, layer: n13, text: r9, expressionAttributes: i16, fieldInfoMap: o10 }) {
  return r9 ? z({ formattedAttributes: t12, template: Q(r9, { ...t12, ...i16, ...e14 }, n13), fieldInfoMap: o10 }) : "";
}
function z({ formattedAttributes: e14, template: n13, fieldInfoMap: r9 }) {
  return k4(L2(r(r(n13, (e15) => A3(e15, r9)), e14)));
}
function O3(e14, t12, n13 = false) {
  const r9 = t12[e14];
  if ("string" == typeof r9) {
    const i16 = "%27", o10 = (n13 ? encodeURIComponent(r9) : r9).replaceAll(h4, i16);
    t12[e14] = o10;
  }
}
function G2(e14, t12 = false) {
  const n13 = { ...e14 };
  return Object.keys(n13).forEach((e15) => O3(e15, n13, t12)), n13;
}
function S2(e14, n13, r9) {
  const i16 = (n13 = k4(n13)) && "{" !== n13[0];
  return r(e14, G2(r9, i16 || false));
}
function P3(e14, t12) {
  return e14.replaceAll(I4, (e15, n13, r9) => {
    const i16 = $(t12, r9);
    return i16 ? `{${i16.name}}` : n13;
  });
}
function Q(e14, t12, n13) {
  const r9 = P3(e14, n13);
  return r9 ? r9.replaceAll(F2, (e15, n14, r10) => S2(e15, n14 || r10, t12)) : r9;
}
function _(e14, t12) {
  if ("string" == typeof e14 && t12 && null == t12.dateFormat && (null != t12.places || null != t12.digitSeparator)) {
    const t13 = Number(e14);
    if (!isNaN(t13))
      return t13;
  }
  return e14;
}
function H(e14) {
  return null != e14 && "object" == typeof e14 && "fieldsIndex" in e14 && "geometryType" in e14 && "getField" in e14 && "load" in e14 && "loaded" in e14 && "objectIdField" in e14 && "spatialReference" in e14 && "type" in e14 && ("feature" === e14.type || "scene" === e14.type) && "when" in e14;
}
function B(e14) {
  return null != e14 && "object" == typeof e14 && "createQuery" in e14 && "queryFeatureCount" in e14 && "queryObjectIds" in e14 && "queryRelatedFeatures" in e14 && "queryRelatedFeaturesCount" in e14 && "relationships" in e14;
}
function J(e14) {
  return H(e14) && B(e14);
}
function V2(e14, t12) {
  var _a;
  const { fieldInfos: n13, fieldName: r9, preventPlacesFormatting: l10, layer: u11, timeZone: s18 } = t12, c21 = Y(n13, r9), d11 = $(u11, r9);
  if (c21 && !Ge(r9)) {
    const t13 = d11 == null ? void 0 : d11.type, n14 = (_a = c21.format) == null ? void 0 : _a.dateFormat;
    if ("date" === t13 || "date-only" === t13 || "time-only" === t13 || "timestamp-offset" === t13 || n14)
      return N(e14, { format: n14, fieldType: t13, timeZoneOptions: { layerTimeZone: u11 && "preferredTimeZone" in u11 ? u11.preferredTimeZone : null, viewTimeZone: s18, datesInUnknownTimezone: !(!u11 || !("datesInUnknownTimezone" in u11)) && !!u11.datesInUnknownTimezone } });
  }
  const p14 = c21 == null ? void 0 : c21.format;
  return "string" == typeof e14 && Ge(r9) && p14 ? W(e14, p14) : "string" == typeof (e14 = _(e14, p14)) || null == e14 || null == p14 ? ae(e14) : u2(e14, l10 ? { ...o3(p14), minimumFractionDigits: 0, maximumFractionDigits: 20 } : o3(p14));
}
function W(e14, t12) {
  return e14 = e14.trim(), /\d{2}-\d{2}/.test(e14) ? e14 : e14.includes(",") ? X(e14, ",", ", ", t12) : e14.includes(";") ? X(e14, ";", "; ", t12) : e14.includes(" ") ? X(e14, " ", " ", t12) : u2(Number(e14), o3(t12));
}
function X(e14, t12, n13, r9) {
  return e14.trim().split(t12).map((e15) => u2(Number(e15), o3(r9))).join(n13);
}
function Y(e14, t12) {
  if ((e14 == null ? void 0 : e14.length) && t12)
    return e14.find((e15) => {
      var _a;
      return ((_a = e15.fieldName) == null ? void 0 : _a.toLowerCase()) === t12.toLowerCase();
    });
}
function ee({ fieldName: e14, graphic: t12, layer: n13 }) {
  if (de(e14))
    return null;
  if (!n13 || "function" != typeof n13.getFeatureType)
    return null;
  const { typeIdField: r9 } = n13;
  if (!r9 || e14 !== r9)
    return null;
  const i16 = n13.getFeatureType(t12);
  return i16 ? i16.name : null;
}
function te({ fieldName: e14, value: t12, graphic: n13, layer: r9 }) {
  if (de(e14))
    return null;
  if (!r9 || "function" != typeof r9.getFieldDomain)
    return null;
  const i16 = n13 && r9.getFieldDomain(e14, { feature: n13 });
  return i16 && "coded-value" === i16.type ? i16.getName(t12) : null;
}
function ne(e14, t12, r9, i16) {
  const { creatorField: o10, creationDateField: a10, editorField: l10, editDateField: u11 } = e14;
  if (!t12)
    return;
  const s18 = g2(i16 && "preferredTimeZone" in i16 ? i16.preferredTimeZone : null, !(!i16 || !("datesInUnknownTimezone" in i16)) && !!i16.datesInUnknownTimezone, r9, Z2, "date"), f9 = { ...Z2, ...s18 }, c21 = t12[u11];
  if ("number" == typeof c21) {
    const e15 = t12[l10];
    return { type: "edit", date: j2(c21, f9), user: e15 };
  }
  const d11 = t12[a10];
  if ("number" == typeof d11) {
    const e15 = t12[o10];
    return { type: "create", date: j2(d11, f9), user: e15 };
  }
  return null;
}
function re(e14, t12) {
  const n13 = /* @__PURE__ */ new Map();
  return e14 ? (e14.forEach((e15) => {
    const r9 = v5(e15.fieldName, t12);
    e15.fieldName = r9, n13.set(r9.toLowerCase(), e15);
  }), n13) : n13;
}
function ie(e14) {
  const t12 = [];
  if (!e14)
    return t12;
  const { fieldInfos: n13, content: r9 } = e14;
  return n13 && t12.push(...n13), r9 && Array.isArray(r9) ? (r9.forEach((e15) => {
    if ("fields" === e15.type) {
      const n14 = e15 == null ? void 0 : e15.fieldInfos;
      n14 && t12.push(...n14);
    }
  }), t12) : t12;
}
function oe(e14) {
  return e14.replaceAll(w2, (e15) => `&#${e15.charCodeAt(0)};`);
}
function ae(e14) {
  return "string" == typeof e14 ? e14.replaceAll(T3, '<br class="esri-text-new-line" />') : e14;
}
function le(e14) {
  var _a;
  const { value: t12, fieldName: n13, fieldInfos: r9, fieldInfoMap: i16, layer: o10, graphic: a10, timeZone: l10 } = e14;
  if (null == t12)
    return "";
  const s18 = te({ fieldName: n13, value: t12, graphic: a10, layer: o10 });
  if (s18)
    return s18;
  const d11 = ee({ fieldName: n13, graphic: a10, layer: o10 });
  if (d11)
    return d11;
  if (i16.get(n13.toLowerCase()))
    return V2(t12, { fieldInfos: r9 || Array.from(i16.values()), fieldName: n13, layer: o10, timeZone: l10 });
  const p14 = (_a = o10 == null ? void 0 : o10.fieldsIndex) == null ? void 0 : _a.get(n13);
  return p14 && (Z(p14) || be(p14)) ? N(t12, { fieldType: p14.type, timeZoneOptions: { layerTimeZone: o10 && "preferredTimeZone" in o10 ? o10.preferredTimeZone : null, viewTimeZone: l10, datesInUnknownTimezone: !(!o10 || !("datesInUnknownTimezone" in o10)) && !!o10.datesInUnknownTimezone } }) : ae(t12);
}
function ue({ fieldInfos: e14, attributes: t12, layer: n13, graphic: r9, fieldInfoMap: i16, relatedInfos: o10, timeZone: a10 }) {
  const l10 = {};
  return o10 == null ? void 0 : o10.forEach((t13) => ye({ attributes: l10, relatedInfo: t13, fieldInfoMap: i16, fieldInfos: e14, layer: n13, timeZone: a10 })), t12 && Object.keys(t12).forEach((o11) => {
    const u11 = t12[o11];
    l10[o11] = le({ fieldName: o11, fieldInfos: e14, fieldInfoMap: i16, layer: n13, value: u11, graphic: r9, timeZone: a10 });
  }), l10;
}
async function se(e14, t12) {
  var _a, _b;
  const { layer: n13, graphic: r9, outFields: i16, objectIds: o10, returnGeometry: a10, spatialReference: l10 } = e14, u11 = o10[0];
  if ("number" != typeof u11 && "string" != typeof u11) {
    const e15 = "Could not query required fields for the specified feature. The feature's ID is invalid.", t13 = { layer: n13, graphic: r9, objectId: u11, requiredFields: i16 };
    return y2.warn(e15, t13), null;
  }
  if (!((_b = (_a = x2(n13)) == null ? void 0 : _a.operations) == null ? void 0 : _b.supportsQuery)) {
    const e15 = "The specified layer cannot be queried. The following fields will not be available.", t13 = { layer: n13, graphic: r9, requiredFields: i16, returnGeometry: a10 };
    return y2.warn(e15, t13), null;
  }
  const f9 = n13.createQuery();
  f9.objectIds = o10, f9.outFields = (i16 == null ? void 0 : i16.length) ? i16 : [n13.objectIdField], f9.returnGeometry = !!a10, f9.returnZ = !!a10, f9.returnM = !!a10, f9.outSpatialReference = l10;
  return (await n13.queryFeatures(f9, t12)).features[0];
}
async function fe(e14) {
  var _a;
  if (!((_a = e14.expressionInfos) == null ? void 0 : _a.length))
    return false;
  const t12 = await i9(), { arcadeUtils: { hasGeometryFunctions: n13 } } = t12;
  return n13(e14);
}
async function ce({ graphic: e14, popupTemplate: t12, layer: n13, spatialReference: r9 }, i16) {
  if (!n13 || !t12)
    return;
  if ("function" == typeof n13.load && await n13.load(i16), !e14.attributes)
    return;
  const o10 = e14.attributes[n13.objectIdField];
  if (null == o10)
    return;
  const a10 = [o10], u11 = await t12.getRequiredFields(n13.fieldsIndex), s18 = je(u11, e14), f9 = s18 ? [] : u11, c21 = t12.returnGeometry || await fe(t12);
  if (s18 && !c21)
    return;
  const d11 = await se({ layer: n13, graphic: e14, outFields: f9, objectIds: a10, returnGeometry: c21, spatialReference: r9 }, i16);
  d11 && (d11.geometry && (e14.geometry = d11.geometry), d11.attributes && (e14.attributes = { ...e14.attributes, ...d11.attributes }));
}
function de(e14 = "") {
  return !!e14 && e14.includes(j4);
}
function pe2(e14) {
  return e14 ? `${j4}${e14.layerId}/${e14.fieldName}` : "";
}
function me({ attributes: e14, graphic: t12, relatedInfo: n13, fieldInfos: r9, fieldInfoMap: i16, layer: o10, timeZone: a10 }) {
  e14 && t12 && n13 && Object.keys(t12.attributes).forEach((l10) => {
    const u11 = pe2({ layerId: n13.relation.id.toString(), fieldName: l10 }), s18 = t12.attributes[l10];
    e14[u11] = le({ fieldName: u11, fieldInfos: r9, fieldInfoMap: i16, layer: o10, value: s18, graphic: t12, timeZone: a10 });
  });
}
function ye({ attributes: e14, relatedInfo: t12, fieldInfoMap: n13, fieldInfos: r9, layer: i16, timeZone: o10 }) {
  var _a, _b;
  e14 && t12 && ((_a = t12.relatedFeatures) == null ? void 0 : _a.forEach((a10) => me({ attributes: e14, graphic: a10, relatedInfo: t12, fieldInfoMap: n13, fieldInfos: r9, layer: i16, timeZone: o10 })), (_b = t12.relatedStatsFeatures) == null ? void 0 : _b.forEach((a10) => me({ attributes: e14, graphic: a10, relatedInfo: t12, fieldInfoMap: n13, fieldInfos: r9, layer: i16, timeZone: o10 })));
}
var ge = (e14) => {
  if (!e14)
    return false;
  const t12 = e14.toUpperCase();
  return t12.includes("CURRENT_TIMESTAMP") || t12.includes("CURRENT_DATE") || t12.includes("CURRENT_TIME");
};
var Ie = ({ layer: e14, method: t12, query: n13, definitionExpression: r9 }) => {
  var _a, _b;
  if (!((_b = (_a = e14.capabilities) == null ? void 0 : _a.query) == null ? void 0 : _b.supportsCacheHint) || "attachments" === t12)
    return;
  const i16 = null != n13.where ? n13.where : null, o10 = null != n13.geometry ? n13.geometry : null;
  ge(r9) || ge(i16) || "extent" === (o10 == null ? void 0 : o10.type) || "tile" === n13.resultType || (n13.cacheHint = true);
};
var he = ({ query: e14, layer: t12, method: n13 }) => {
  Ie({ layer: t12, method: n13, query: e14, definitionExpression: `${t12.definitionExpression} ${t12.serviceDefinitionExpression}` });
};
var be2 = ({ queryPayload: e14, layer: t12, method: n13 }) => {
  Ie({ layer: t12, method: n13, query: e14, definitionExpression: `${t12.definitionExpression} ${t12.serviceDefinitionExpression}` });
};
function Te(e14, t12, n13) {
  return e14 && t12 && n13 ? we(e14.allLayers, t12, n13) || we(e14.allTables, t12, n13) : null;
}
function we(e14, t12, n13) {
  const r9 = "scene" === t12.type && t12.associatedLayer ? t12.associatedLayer.url : t12.url;
  return e14.filter(J).find((e15) => e15 !== t12 && e15.url === r9 && e15.layerId === n13.relatedTableId);
}

// node_modules/@arcgis/core/widgets/Attachments/AttachmentsViewModel.js
var m3 = { editing: false, operations: { add: true, update: true, delete: true } };
var f2 = V.ofType(l);
var u4 = class extends g {
  constructor(t12) {
    super(t12), this._getAttachmentsPromise = null, this._attachmentLayer = null, this.capabilities = { ...m3 }, this.activeAttachmentInfo = null, this.activeFileInfo = null, this.attachmentInfos = new f2(), this.fileInfos = new V(), this.graphic = null, this.mode = "view", this.filesEnabled = false, this.addHandles(d2(() => this.graphic, () => this._graphicChanged(), P));
  }
  destroy() {
    this._attachmentLayer = null, this.graphic = null;
  }
  castCapabilities(t12) {
    return { ...m3, ...t12 };
  }
  get state() {
    return this._getAttachmentsPromise ? "loading" : this.graphic ? "ready" : "disabled";
  }
  get supportsResizeAttachments() {
    const { graphic: t12 } = this;
    if (!t12)
      return false;
    const e14 = t12.layer || t12.sourceLayer;
    return (e14 == null ? void 0 : e14.loaded) && "capabilities" in e14 && e14.capabilities && "operations" in e14.capabilities && "supportsResizeAttachments" in e14.capabilities.operations && e14.capabilities.operations.supportsResizeAttachments || false;
  }
  async getAttachments() {
    const { _attachmentLayer: t12, attachmentInfos: e14 } = this;
    if (!t12 || "function" != typeof t12.queryAttachments)
      throw new s3("invalid-layer", "getAttachments(): A valid layer is required.");
    const a10 = this._getObjectId(), i16 = new c8({ objectIds: [a10], returnMetadata: true }), r9 = [], s18 = t12.queryAttachments(i16).then((t13) => t13[a10] || r9).catch(() => r9);
    this._getAttachmentsPromise = s18, this.notifyChange("state");
    const o10 = await s18;
    return e14.removeAll(), o10.length && e14.addMany(o10), this._getAttachmentsPromise = null, this.notifyChange("state"), o10;
  }
  async addAttachment(t12, e14 = this.graphic) {
    var _a;
    const { _attachmentLayer: a10, attachmentInfos: i16, capabilities: r9 } = this;
    if (!e14)
      throw new s3("invalid-graphic", "addAttachment(): A valid graphic is required.", { graphic: e14 });
    if (!t12)
      throw new s3("invalid-attachment", "addAttachment(): An attachment is required.", { attachment: t12 });
    if (!((_a = r9.operations) == null ? void 0 : _a.add))
      throw new s3("invalid-capabilities", "addAttachment(): add capabilities are required.");
    if (!a10 || "function" != typeof a10.addAttachment)
      throw new s3("invalid-layer", "addAttachment(): A valid layer is required.");
    const s18 = a10.addAttachment(e14, t12).then((t13) => this._queryAttachment(t13.objectId, e14)), o10 = await s18;
    return i16.add(o10), o10;
  }
  async deleteAttachment(t12) {
    var _a;
    const { _attachmentLayer: e14, attachmentInfos: a10, graphic: i16, capabilities: r9 } = this;
    if (!t12)
      throw new s3("invalid-attachment-info", "deleteAttachment(): An attachmentInfo is required.", { attachmentInfo: t12 });
    if (!((_a = r9.operations) == null ? void 0 : _a.delete))
      throw new s3("invalid-capabilities", "deleteAttachment(): delete capabilities are required.");
    if (!e14 || "function" != typeof e14.deleteAttachments)
      throw new s3("invalid-layer", "deleteAttachment(): A valid layer is required.");
    if (!i16)
      throw new s3("invalid-graphic", "deleteAttachment(): A graphic is required.");
    const s18 = e14.deleteAttachments(i16, [t12.id]).then(() => t12), o10 = await s18;
    return a10.remove(o10), o10;
  }
  async updateAttachment(t12, e14 = this.activeAttachmentInfo) {
    var _a;
    const { _attachmentLayer: a10, attachmentInfos: i16, graphic: r9, capabilities: s18 } = this;
    if (!t12)
      throw new s3("invalid-attachment", "updateAttachment(): An attachment is required.", { attachment: t12 });
    if (!e14)
      throw new s3("invalid-attachment-info", "updateAttachment(): An attachmentInfo is required.", { attachmentInfo: e14 });
    if (!((_a = s18.operations) == null ? void 0 : _a.update))
      throw new s3("invalid-capabilities", "updateAttachment(): Update capabilities are required.");
    const o10 = i16.indexOf(e14);
    if (!a10 || "function" != typeof a10.updateAttachment)
      throw new s3("invalid-layer", "updateAttachment(): A valid layer is required.");
    if (!r9)
      throw new s3("invalid-graphic", "updateAttachment(): A graphic is required.");
    const c21 = a10.updateAttachment(r9, e14.id, t12).then((t13) => this._queryAttachment(t13.objectId)), h13 = await c21;
    return i16.splice(o10, 1, h13), h13;
  }
  async commitFiles() {
    return await Promise.all(this.fileInfos.items.map((t12) => this.addAttachment(t12.form))), this.fileInfos.removeAll(), this.getAttachments();
  }
  addFile(t12, e14) {
    if (!t12 || !e14)
      return null;
    const a10 = { file: t12, form: e14 };
    return this.fileInfos.add(a10), a10;
  }
  updateFile(t12, e14, a10 = this.activeFileInfo) {
    if (!t12 || !e14 || !a10)
      return null;
    const i16 = this.fileInfos.indexOf(a10);
    return i16 > -1 && this.fileInfos.splice(i16, 1, { file: t12, form: e14 }), this.fileInfos.items[i16];
  }
  deleteFile(t12) {
    const e14 = this.fileInfos.find((e15) => e15.file === t12);
    return e14 ? (this.fileInfos.remove(e14), e14) : null;
  }
  async _queryAttachment(t12, e14) {
    const { _attachmentLayer: a10 } = this;
    if (!t12 || !(a10 == null ? void 0 : a10.queryAttachments))
      throw new s3("invalid-attachment-id", "Could not query attachment.");
    const i16 = this._getObjectId(e14), r9 = new c8({ objectIds: [i16], attachmentsWhere: `AttachmentId=${t12}`, returnMetadata: true });
    return a10.queryAttachments(r9).then((t13) => t13[i16][0]);
  }
  _getObjectId(t12 = this.graphic) {
    return (t12 == null ? void 0 : t12.getObjectId()) ?? null;
  }
  _graphicChanged() {
    this.graphic && (this._setAttachmentLayer(), this.getAttachments().catch(() => {
    }));
  }
  _setAttachmentLayer() {
    const { graphic: t12 } = this, e14 = E3(t12);
    this._attachmentLayer = e14 ? "scene" === e14.type && null != e14.associatedLayer ? e14.associatedLayer : e14 : null;
  }
};
e([y()], u4.prototype, "capabilities", void 0), e([s7("capabilities")], u4.prototype, "castCapabilities", null), e([y()], u4.prototype, "activeAttachmentInfo", void 0), e([y()], u4.prototype, "activeFileInfo", void 0), e([y({ readOnly: true, type: f2 })], u4.prototype, "attachmentInfos", void 0), e([y()], u4.prototype, "fileInfos", void 0), e([y({ type: c7 })], u4.prototype, "graphic", void 0), e([y()], u4.prototype, "mode", void 0), e([y({ readOnly: true })], u4.prototype, "state", null), e([y()], u4.prototype, "filesEnabled", void 0), e([y({ readOnly: true })], u4.prototype, "supportsResizeAttachments", null), u4 = e([c2("esri.widgets.Attachments.AttachmentsViewModel")], u4);
var y3 = u4;

// node_modules/@arcgis/core/widgets/Attachments/support/attachmentUtils.js
function e7(i16) {
  const e14 = i16.toLowerCase();
  return "image/bmp" === e14 || "image/emf" === e14 || "image/exif" === e14 || "image/gif" === e14 || "image/x-icon" === e14 || "image/jpeg" === e14 || "image/png" === e14 || "image/tiff" === e14 || "image/x-wmf" === e14;
}
function p3(e14) {
  const p14 = a("esri/themes/base/images/files/");
  return e14 ? "text/plain" === e14 ? `${p14}text-32.svg` : "application/pdf" === e14 ? `${p14}pdf-32.svg` : "text/csv" === e14 ? `${p14}csv-32.svg` : "application/gpx+xml" === e14 ? `${p14}gpx-32.svg` : "application/x-dwf" === e14 ? `${p14}cad-32.svg` : "application/postscript" === e14 || "application/json" === e14 || "text/xml" === e14 || "model/vrml" === e14 ? `${p14}code-32.svg` : "application/x-zip-compressed" === e14 || "application/x-7z-compressed" === e14 || "application/x-gzip" === e14 || "application/x-tar" === e14 || "application/x-gtar" === e14 || "application/x-bzip2" === e14 || "application/gzip" === e14 || "application/x-compress" === e14 || "application/x-apple-diskimage" === e14 || "application/x-rar-compressed" === e14 || "application/zip" === e14 ? `${p14}zip-32.svg` : e14.includes("image/") ? `${p14}image-32.svg` : e14.includes("audio/") ? `${p14}sound-32.svg` : e14.includes("video/") ? `${p14}video-32.svg` : e14.includes("msexcel") || e14.includes("ms-excel") || e14.includes("spreadsheetml") ? `${p14}excel-32.svg` : e14.includes("msword") || e14.includes("ms-word") || e14.includes("wordprocessingml") ? `${p14}word-32.svg` : e14.includes("powerpoint") || e14.includes("presentationml") ? `${p14}report-32.svg` : `${p14}generic-32.svg` : `${p14}generic-32.svg`;
}

// node_modules/@arcgis/core/widgets/Attachments.js
var A4 = { addButton: true, addSubmitButton: true, cancelAddButton: true, cancelUpdateButton: true, deleteButton: true, errorMessage: true, progressBar: true, updateButton: true };
var w3 = "esri-attachments";
var F3 = { base: w3, loaderContainer: `${w3}__loader-container`, loader: `${w3}__loader`, fadeIn: `${w3}--fade-in`, container: `${w3}__container`, containerList: `${w3}__container--list`, containerPreview: `${w3}__container--preview`, actions: `${w3}__actions`, deleteButton: `${w3}__delete-button`, addAttachmentButton: `${w3}__add-attachment-button`, errorMessage: `${w3}__error-message`, items: `${w3}__items`, item: `${w3}__item`, itemButton: `${w3}__item-button`, itemMask: `${w3}__item-mask`, itemMaskIcon: `${w3}__item-mask--icon`, itemImage: `${w3}__image`, itemImageResizable: `${w3}__image--resizable`, itemLabel: `${w3}__label`, itemFilename: `${w3}__filename`, itemChevronIcon: `${w3}__item-chevron-icon`, itemLink: `${w3}__item-link`, itemLinkOverlay: `${w3}__item-link-overlay`, itemLinkOverlayIcon: `${w3}__item-link-overlay-icon`, itemEditIcon: `${w3}__item-edit-icon`, itemAddIcon: `${w3}__item-add-icon`, itemAddButton: `${w3}__item-add-button`, formNode: `${w3}__form-node`, fileFieldset: `${w3}__file-fieldset`, fileLabel: `${w3}__file-label`, fileName: `${w3}__file-name`, fileInput: `${w3}__file-input`, metadata: `${w3}__metadata`, metadataFieldset: `${w3}__metadata-fieldset`, progressBar: `${w3}__progress-bar` };
var k5 = window.CSS;
var M2 = class extends O {
  constructor(e14, t12) {
    super(e14, t12), this.displayType = "auto", this.messages = null, this.messagesUnits = null, this.selectedFile = null, this.submitting = false, this.viewModel = null, this.visibleElements = { ...A4 }, this._supportsImageOrientation = k5 && k5.supports && k5.supports("image-orientation", "from-image"), this._addAttachmentForm = null, this._updateAttachmentForm = null;
  }
  normalizeCtorArgs(e14) {
    return (e14 == null ? void 0 : e14.viewModel) || (e14 = { viewModel: new y3(), ...e14 }), e14;
  }
  initialize() {
    this.addHandles([v2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.attachmentInfos;
    }, "change", () => this.scheduleRender()), v2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.fileInfos;
    }, "change", () => this.scheduleRender()), d2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.mode;
    }, () => this._modeChanged(), P)]);
  }
  loadDependencies() {
    return r3({ icon: () => import("./calcite-icon-XJ35OAWQ.js") });
  }
  get capabilities() {
    return this.viewModel.capabilities;
  }
  set capabilities(e14) {
    this.viewModel.capabilities = e14;
  }
  get effectiveDisplayType() {
    const { displayType: e14 } = this;
    return e14 && "auto" !== e14 ? e14 : this.viewModel.supportsResizeAttachments ? "preview" : "list";
  }
  get graphic() {
    return this.viewModel.graphic;
  }
  set graphic(e14) {
    this.viewModel.graphic = e14;
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(e14) {
    this._overrideIfSome("label", e14);
  }
  castVisibleElements(e14) {
    return { ...A4, ...e14 };
  }
  addAttachment() {
    const { _addAttachmentForm: e14, viewModel: s18 } = this;
    return this._set("submitting", true), this._set("error", null), s18.addAttachment(e14).then((e15) => (this._set("submitting", false), this._set("error", null), s18.mode = "view", e15)).catch((e15) => {
      throw this._set("submitting", false), this._set("error", new s3("attachments:add-attachment", this.messages.addErrorMessage, e15)), e15;
    });
  }
  deleteAttachment(e14) {
    const { viewModel: s18 } = this;
    return this._set("submitting", true), this._set("error", null), s18.deleteAttachment(e14).then((e15) => (this._set("submitting", false), this._set("error", null), s18.mode = "view", e15)).catch((e15) => {
      throw this._set("submitting", false), this._set("error", new s3("attachments:delete-attachment", this.messages.deleteErrorMessage, e15)), e15;
    });
  }
  updateAttachment() {
    const { viewModel: e14 } = this, { _updateAttachmentForm: s18 } = this;
    return this._set("submitting", true), this._set("error", null), e14.updateAttachment(s18).then((t12) => (this._set("submitting", false), this._set("error", null), e14.mode = "view", t12)).catch((e15) => {
      throw this._set("submitting", false), this._set("error", new s3("attachments:update-attachment", this.messages.updateErrorMessage, e15)), e15;
    });
  }
  addFile() {
    const e14 = this.viewModel.addFile(this.selectedFile, this._addAttachmentForm);
    return this.viewModel.mode = "view", e14;
  }
  updateFile() {
    const { viewModel: e14 } = this, t12 = e14.updateFile(this.selectedFile, this._updateAttachmentForm, e14.activeFileInfo);
    return e14.mode = "view", t12;
  }
  deleteFile(e14) {
    var _a;
    const t12 = this.viewModel.deleteFile(e14 || ((_a = this.viewModel.activeFileInfo) == null ? void 0 : _a.file));
    return this.viewModel.mode = "view", t12;
  }
  render() {
    const { submitting: e14, viewModel: t12 } = this, { state: s18 } = t12;
    return n("div", { class: this.classes(F3.base, e6.widget) }, e14 ? this._renderProgressBar() : null, "loading" === s18 ? this._renderLoading() : this._renderAttachments(), this._renderErrorMessage());
  }
  _renderErrorMessage() {
    const { error: e14, visibleElements: t12 } = this;
    return e14 && t12.errorMessage ? n("div", { class: F3.errorMessage, key: "error-message" }, e14.message) : null;
  }
  _renderAttachments() {
    const { activeFileInfo: e14, mode: t12, activeAttachmentInfo: s18 } = this.viewModel;
    return "add" === t12 ? this._renderAddForm() : "edit" === t12 ? this._renderDetailsForm(s18 || e14) : this._renderAttachmentContainer();
  }
  _renderLoading() {
    return n("div", { class: F3.loaderContainer, key: "loader" }, n("div", { class: F3.loader }));
  }
  _renderProgressBar() {
    return this.visibleElements.progressBar ? n("div", { class: F3.progressBar, key: "progress-bar" }) : null;
  }
  _renderAddForm() {
    const { submitting: e14, selectedFile: t12 } = this, s18 = e14 || !t12, i16 = this.visibleElements.cancelAddButton ? n("button", { bind: this, class: this.classes(e6.button, e6.buttonTertiary, e6.buttonSmall, e6.buttonHalf, e14 && e6.buttonDisabled), disabled: e14, onclick: this._cancelForm, type: "button" }, this.messages.cancel) : null, a10 = this.visibleElements.addSubmitButton ? n("button", { class: this.classes(e6.button, e6.buttonSecondary, e6.buttonSmall, e6.buttonHalf, { [e6.buttonDisabled]: s18 }), disabled: s18, type: "submit" }, this.messages.add) : null, n13 = t12 ? n("span", { class: F3.fileName, key: "file-name" }, t12.name) : null, l10 = n("form", { afterCreate: b2, afterRemoved: L, bind: this, "data-node-ref": "_addAttachmentForm", onsubmit: this._submitAddAttachment }, n("fieldset", { class: F3.fileFieldset }, n13, n("label", { class: this.classes(F3.fileLabel, e6.button, e6.buttonSecondary) }, t12 ? this.messages.changeFile : this.messages.selectFile, n("input", { bind: this, class: F3.fileInput, name: "attachment", onchange: this._handleFileInputChange, type: "file" }))), a10, i16);
    return n("div", { class: F3.formNode, key: "add-form-container" }, l10);
  }
  _renderDetailsForm(e14) {
    var _a, _b, _c;
    const { visibleElements: t12, viewModel: s18, selectedFile: i16, submitting: a10 } = this, { capabilities: l10 } = s18, r9 = a10 || !i16;
    let o10, d11, m10, c21;
    i16 ? (o10 = i16.type, d11 = i16.name, m10 = i16.size) : e14 && "file" in e14 ? (o10 = e14.file.type, d11 = e14.file.name, m10 = e14.file.size) : e14 && "contentType" in e14 && (o10 = e14.contentType, d11 = e14.name, m10 = e14.size, c21 = e14.url);
    const h13 = l10.editing && ((_a = l10.operations) == null ? void 0 : _a.delete) && t12.deleteButton ? n("button", { bind: this, class: this.classes(e6.button, e6.buttonSmall, e6.buttonTertiary, F3.deleteButton, { [e6.buttonDisabled]: a10 }), disabled: a10, key: "delete-button", onclick: (t13) => this._submitDeleteAttachment(t13, e14), type: "button" }, this.messages.delete) : void 0, u11 = l10.editing && ((_b = l10.operations) == null ? void 0 : _b.update) && t12.updateButton ? n("button", { class: this.classes(e6.button, e6.buttonSmall, e6.buttonThird, { [e6.buttonDisabled]: r9 }), disabled: r9, key: "update-button", type: "submit" }, this.messages.update) : void 0, b10 = this.visibleElements.cancelUpdateButton ? n("button", { bind: this, class: this.classes(e6.button, e6.buttonSmall, e6.buttonTertiary, e6.buttonThird, { [e6.buttonDisabled]: a10 }), disabled: a10, key: "cancel-button", onclick: this._cancelForm, type: "button" }, this.messages.cancel) : void 0, f9 = l10.editing && ((_c = l10.operations) == null ? void 0 : _c.update) ? n("fieldset", { class: F3.fileFieldset, key: "file" }, n("span", { class: F3.fileName, key: "file-name" }, d11), n("label", { class: this.classes(F3.fileLabel, e6.button, e6.buttonSecondary) }, this.messages.changeFile, n("input", { bind: this, class: F3.fileInput, name: "attachment", onchange: this._handleFileInputChange, type: "file" }))) : void 0, v11 = n("fieldset", { class: F3.metadataFieldset, key: "size" }, n("label", null, O2(this.messagesUnits, m10 ?? 0))), A7 = n("fieldset", { class: F3.metadataFieldset, key: "content-type" }, n("label", null, o10)), w11 = null != c21 ? n("a", { class: F3.itemLink, href: c21, rel: "noreferrer", target: "_blank" }, this._renderImageMask(e14, 400), n("div", { class: F3.itemLinkOverlay }, n("span", { class: F3.itemLinkOverlayIcon }, n("calcite-icon", { icon: "launch" })))) : this._renderImageMask(e14, 400), k8 = n("form", { afterCreate: b2, afterRemoved: L, bind: this, "data-node-ref": "_updateAttachmentForm", onsubmit: (t13) => this._submitUpdateAttachment(t13, e14) }, n("div", { class: F3.metadata }, v11, A7), f9, n("div", { class: F3.actions }, h13, b10, u11));
    return n("div", { class: F3.formNode, key: "edit-form-container" }, w11, k8);
  }
  _renderImageMask(e14, t12) {
    return e14 ? "file" in e14 ? this._renderGenericImageMask(e14.file.name, e14.file.type) : this._renderImageMaskForAttachment(e14, t12) : null;
  }
  _renderGenericImageMask(e14, t12) {
    const { supportsResizeAttachments: s18 } = this.viewModel, i16 = p3(t12), a10 = { [F3.itemImageResizable]: s18 };
    return n("div", { class: this.classes(F3.itemMaskIcon, F3.itemMask), key: i16 }, n("img", { alt: e14, class: this.classes(a10, F3.itemImage), src: i16, title: e14 }));
  }
  _renderImageMaskForAttachment(e14, t12) {
    const { supportsResizeAttachments: s18 } = this.viewModel;
    if (!e14)
      return null;
    const { contentType: i16, name: a10, url: n13 } = e14;
    if (!s18 || !e7(i16))
      return this._renderGenericImageMask(a10, i16);
    const l10 = this._getCSSTransform(e14), r9 = l10 ? { transform: l10, "image-orientation": "none" } : {}, o10 = `${n13}${(n13 == null ? void 0 : n13.includes("?")) ? "&" : "?"}w=${t12}`, d11 = { [F3.itemImageResizable]: s18 };
    return n("div", { class: this.classes(F3.itemMask), key: o10 }, n("img", { alt: a10, class: this.classes(d11, F3.itemImage), src: o10, styles: r9, title: a10 }));
  }
  _renderFile(e14) {
    const { file: t12 } = e14;
    return n("li", { class: F3.item, key: t12 }, n("button", { "aria-label": this.messages.attachmentDetails, bind: this, class: F3.itemButton, key: "details-button", onclick: () => this._startEditFile(e14), title: this.messages.attachmentDetails, type: "button" }, this._renderImageMask(e14), n("label", { class: F3.itemLabel }, n("span", { class: F3.itemFilename }, t12.name || this.messages.noTitle), n("span", { "aria-hidden": "true", class: this.classes(F3.itemChevronIcon, v3(this.container) ? i2.left : i2.right) }))));
  }
  _renderAttachmentInfo({ attachmentInfo: e14, displayType: t12 }) {
    const { viewModel: s18, effectiveDisplayType: i16 } = this, { capabilities: a10, supportsResizeAttachments: n13 } = s18, { contentType: l10, name: r9, url: o10 } = e14, d11 = this._renderImageMask(e14, "list" === t12 ? 48 : 400), m10 = a10.editing ? n("span", { "aria-hidden": "true", class: this.classes(F3.itemChevronIcon, v3(this.container) ? i2.left : i2.right) }) : null, c21 = [d11, "preview" === i16 && n13 && e7(l10) ? null : n("label", { class: F3.itemLabel }, n("span", { class: F3.itemFilename }, r9 || this.messages.noTitle), m10)], u11 = a10.editing ? n("button", { "aria-label": this.messages.attachmentDetails, bind: this, class: F3.itemButton, "data-attachment-info-id": e14.id, key: "details-button", onclick: () => this._startEditAttachment(e14), title: this.messages.attachmentDetails, type: "button" }, c21) : n("a", { class: F3.itemButton, href: o10 ?? void 0, key: "details-link", target: "_blank" }, c21);
    return n("li", { class: F3.item, key: e14 }, u11);
  }
  _renderAttachmentContainer() {
    var _a;
    const { effectiveDisplayType: e14, viewModel: t12, visibleElements: s18 } = this, { attachmentInfos: i16, capabilities: a10, fileInfos: n13 } = t12, l10 = !!(i16 == null ? void 0 : i16.length), r9 = !!(n13 == null ? void 0 : n13.length), o10 = { [F3.containerList]: "preview" !== e14, [F3.containerPreview]: "preview" === e14 }, d11 = a10.editing && ((_a = a10.operations) == null ? void 0 : _a.add) && s18.addButton ? n("button", { bind: this, class: this.classes(e6.button, e6.buttonTertiary, F3.addAttachmentButton), onclick: () => this._startAddAttachment(), type: "button" }, n("span", { "aria-hidden": "true", class: this.classes(F3.itemAddIcon, i2.plus) }), this.messages.add) : void 0, m10 = l10 ? n("ul", { class: F3.items, key: "attachments-list" }, i16.toArray().map((t13) => this._renderAttachmentInfo({ attachmentInfo: t13, displayType: e14 }))) : void 0, c21 = r9 ? n("ul", { class: F3.items, key: "file-list" }, n13.toArray().map((e15) => this._renderFile(e15))) : void 0, h13 = r9 || l10 ? void 0 : n("div", { class: e6.empty }, this.messages.noAttachments);
    return n("div", { class: this.classes(F3.container, o10), key: "attachments-container" }, m10, c21, h13, d11);
  }
  _modeChanged() {
    this._set("error", null), this._set("selectedFile", null);
  }
  _handleFileInputChange(e14) {
    var _a;
    const t12 = e14.target, s18 = (_a = t12.files) == null ? void 0 : _a.item(0);
    this._set("selectedFile", s18);
  }
  _submitDeleteAttachment(e14, t12) {
    e14.preventDefault(), t12 && ("file" in t12 ? this.deleteFile(t12.file) : t12 && this.deleteAttachment(t12));
  }
  _submitAddAttachment(e14) {
    e14.preventDefault(), this.viewModel.filesEnabled ? this.addFile() : this.addAttachment();
  }
  _submitUpdateAttachment(e14, t12) {
    e14.preventDefault(), t12 && "file" in t12 ? this.updateFile() : this.updateAttachment();
  }
  _startEditAttachment(e14) {
    const { viewModel: t12 } = this;
    t12.activeFileInfo = null, t12.activeAttachmentInfo = e14, t12.mode = "edit";
  }
  _startEditFile(e14) {
    const { viewModel: t12 } = this;
    t12.activeAttachmentInfo = null, t12.activeFileInfo = e14, t12.mode = "edit";
  }
  _startAddAttachment() {
    this.viewModel.mode = "add";
  }
  _cancelForm(e14) {
    e14.preventDefault(), this.viewModel.mode = "view";
  }
  _getCSSTransform(e14) {
    const { orientationInfo: t12 } = e14;
    return !this._supportsImageOrientation && t12 ? [t12.rotation ? `rotate(${t12.rotation}deg)` : "", t12.mirrored ? "scaleX(-1)" : ""].join(" ") : "";
  }
};
e([y()], M2.prototype, "capabilities", null), e([y()], M2.prototype, "displayType", void 0), e([y({ readOnly: true })], M2.prototype, "effectiveDisplayType", null), e([y()], M2.prototype, "graphic", null), e([y()], M2.prototype, "label", null), e([y(), e2("esri/widgets/Attachments/t9n/Attachments")], M2.prototype, "messages", void 0), e([y(), e2("esri/core/t9n/Units")], M2.prototype, "messagesUnits", void 0), e([y({ readOnly: true })], M2.prototype, "selectedFile", void 0), e([y({ readOnly: true })], M2.prototype, "submitting", void 0), e([y({ readOnly: true })], M2.prototype, "error", void 0), e([y({ type: y3 })], M2.prototype, "viewModel", void 0), e([y()], M2.prototype, "visibleElements", void 0), e([s7("visibleElements")], M2.prototype, "castVisibleElements", null), M2 = e([c2("esri.widgets.Attachments")], M2);
var I5 = M2;

// node_modules/@arcgis/core/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel.js
var o5 = class extends y3 {
  constructor(t12) {
    super(t12), this.description = null, this.title = null;
  }
};
e([y()], o5.prototype, "description", void 0), e([y()], o5.prototype, "title", void 0), o5 = e([c2("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")], o5);
var c9 = o5;

// node_modules/@arcgis/core/widgets/support/Heading.js
function e8({ level: r9, class: e14, ...n13 }, l10) {
  const a10 = s11(r9);
  return n(`h${a10}`, { ...n13, "aria-level": String(a10), class: g3(e6.heading, e14), role: "heading" }, l10);
}
function s11(t12) {
  return i4(Math.ceil(t12), 1, 6);
}

// node_modules/@arcgis/core/widgets/Feature/support/FeatureElementInfo.js
var p4 = "esri-feature-element-info";
var n2 = { base: p4, title: `${p4}__title`, description: `${p4}__description` };
var c10 = class extends O {
  constructor(e14, t12) {
    super(e14, t12), this.description = null, this.headingLevel = 2, this.title = null;
  }
  render() {
    return n("div", { class: n2.base }, this._renderTitle(), this._renderDescription());
  }
  _renderTitle() {
    const { title: e14 } = this;
    return e14 ? n(e8, { class: n2.title, level: this.headingLevel }, e14) : null;
  }
  _renderDescription() {
    const { description: e14 } = this;
    return e14 ? n("div", { class: n2.description, key: "description" }, e14) : null;
  }
};
e([y()], c10.prototype, "description", void 0), e([y()], c10.prototype, "headingLevel", void 0), e([y()], c10.prototype, "title", void 0), c10 = e([c2("esri.widgets.Feature.support.FeatureElementInfo")], c10);
var l3 = c10;

// node_modules/@arcgis/core/widgets/Feature/FeatureAttachments.js
var d6 = { base: "esri-feature-attachments" };
var c11 = class extends O {
  constructor(e14, t12) {
    super(e14, t12), this._featureElementInfo = null, this.attachmentsWidget = new I5(), this.headingLevel = 2, this.viewModel = new c9();
  }
  initialize() {
    this._featureElementInfo = new l3(), this.addHandles([d2(() => {
      var _a, _b;
      return [(_a = this.viewModel) == null ? void 0 : _a.description, (_b = this.viewModel) == null ? void 0 : _b.title, this.headingLevel];
    }, () => this._setupFeatureElementInfo(), P), d2(() => this.viewModel, (e14) => this.attachmentsWidget.viewModel = e14, P)]);
  }
  destroy() {
    var _a;
    this.attachmentsWidget.viewModel = null, this.attachmentsWidget.destroy(), (_a = this._featureElementInfo) == null ? void 0 : _a.destroy();
  }
  get description() {
    return this.viewModel.description;
  }
  set description(e14) {
    this.viewModel.description = e14;
  }
  get displayType() {
    return this.attachmentsWidget.displayType;
  }
  set displayType(e14) {
    this.attachmentsWidget.displayType = e14;
  }
  get graphic() {
    return this.viewModel.graphic;
  }
  set graphic(e14) {
    this.viewModel.graphic = e14;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e14) {
    this.viewModel.title = e14;
  }
  render() {
    var _a;
    const { attachmentsWidget: e14 } = this;
    return n("div", { class: d6.base }, (_a = this._featureElementInfo) == null ? void 0 : _a.render(), e14 == null ? void 0 : e14.render());
  }
  _setupFeatureElementInfo() {
    var _a;
    const { description: e14, title: t12, headingLevel: i16 } = this;
    (_a = this._featureElementInfo) == null ? void 0 : _a.set({ description: e14, title: t12, headingLevel: i16 });
  }
};
e([y({ readOnly: true })], c11.prototype, "attachmentsWidget", void 0), e([y()], c11.prototype, "description", null), e([y()], c11.prototype, "displayType", null), e([y()], c11.prototype, "graphic", null), e([y()], c11.prototype, "headingLevel", void 0), e([y()], c11.prototype, "title", null), e([y({ type: c9 })], c11.prototype, "viewModel", void 0), c11 = e([c2("esri.widgets.Feature.FeatureAttachments")], c11);
var h5 = c11;

// node_modules/@arcgis/core/widgets/Feature/FeatureContent/FeatureContentViewModel.js
var n3 = class extends g {
  constructor(t12) {
    super(t12), this._loadingPromise = null, this.created = null, this.creator = null, this.destroyer = null, this.graphic = null, this.addHandles(d2(() => this.creator, (t13) => {
      this._destroyContent(), this._createContent(t13);
    }, P));
  }
  destroy() {
    this._destroyContent();
  }
  get state() {
    return this._loadingPromise ? "loading" : "ready";
  }
  _destroyContent() {
    const { created: t12, graphic: e14, destroyer: r9 } = this;
    t12 && e14 && (x3(r9, { graphic: e14 }).catch(() => null), this._set("created", null));
  }
  async _createContent(t12) {
    const e14 = this.graphic;
    if (!e14 || !t12)
      return;
    const r9 = x3(t12, { graphic: e14 }).catch(() => null);
    this._loadingPromise = r9, this.notifyChange("state");
    const o10 = await r9;
    r9 === this._loadingPromise && (this._loadingPromise = null, this.notifyChange("state"), this._set("created", o10));
  }
};
e([y({ readOnly: true })], n3.prototype, "created", void 0), e([y()], n3.prototype, "creator", void 0), e([y()], n3.prototype, "destroyer", void 0), e([y({ type: c7 })], n3.prototype, "graphic", void 0), e([y({ readOnly: true })], n3.prototype, "state", null), n3 = e([c2("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")], n3);
var p5 = n3;

// node_modules/@arcgis/core/widgets/Feature/FeatureContent.js
var n4 = "esri-feature-content";
var c12 = { base: n4, loaderContainer: `${n4}__loader-container`, loader: `${n4}__loader` };
var l4 = class extends O {
  constructor(e14, r9) {
    super(e14, r9), this.viewModel = null, this._addTargetToAnchors = (e15) => {
      Array.from(e15.querySelectorAll("a")).forEach((e16) => {
        C2(e16.href) && !e16.hasAttribute("target") && e16.setAttribute("target", "_blank");
      });
    };
  }
  get creator() {
    var _a;
    return (_a = this.viewModel) == null ? void 0 : _a.creator;
  }
  set creator(e14) {
    this.viewModel && (this.viewModel.creator = e14);
  }
  get graphic() {
    var _a;
    return (_a = this.viewModel) == null ? void 0 : _a.graphic;
  }
  set graphic(e14) {
    this.viewModel && (this.viewModel.graphic = e14);
  }
  render() {
    var _a;
    const e14 = (_a = this.viewModel) == null ? void 0 : _a.state;
    return n("div", { class: c12.base }, "loading" === e14 ? this._renderLoading() : this._renderCreated());
  }
  _renderLoading() {
    return n("div", { class: c12.loaderContainer, key: "loader" }, n("div", { class: c12.loader }));
  }
  _renderCreated() {
    var _a;
    const e14 = (_a = this.viewModel) == null ? void 0 : _a.created;
    return e14 ? e14 instanceof HTMLElement ? n("div", { afterCreate: this._attachToNode, bind: e14, key: e14 }) : e4(e14) ? n("div", { key: e14 }, !e14.destroyed && e14.render()) : n("div", { afterCreate: this._addTargetToAnchors, innerHTML: e14, key: e14 }) : null;
  }
  _attachToNode(e14) {
    const r9 = this;
    e14.appendChild(r9);
  }
};
e([y()], l4.prototype, "creator", null), e([y()], l4.prototype, "graphic", null), e([y({ type: p5 })], l4.prototype, "viewModel", void 0), l4 = e([c2("esri.widgets.Feature.FeatureContent")], l4);
var p6 = l4;

// node_modules/@arcgis/core/widgets/Feature/FeatureFields/FeatureFieldsViewModel.js
var l5 = class extends g {
  constructor(o10) {
    super(o10), this.attributes = null, this.expressionInfos = null, this.description = null, this.fieldInfos = null, this.title = null;
  }
  get formattedFieldInfos() {
    const { expressionInfos: o10, fieldInfos: e14 } = this, s18 = [];
    return e14 == null ? void 0 : e14.forEach((e15) => {
      if (!(!e15.hasOwnProperty("visible") || e15.visible))
        return;
      const t12 = e15.clone();
      t12.label = q(t12, o10), s18.push(t12);
    }), s18;
  }
};
e([y()], l5.prototype, "attributes", void 0), e([y({ type: [i8] })], l5.prototype, "expressionInfos", void 0), e([y()], l5.prototype, "description", void 0), e([y({ type: [c3] })], l5.prototype, "fieldInfos", void 0), e([y({ readOnly: true })], l5.prototype, "formattedFieldInfos", null), e([y()], l5.prototype, "title", void 0), l5 = e([c2("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")], l5);
var n5 = l5;

// node_modules/@arcgis/core/widgets/support/uriUtils.js
var s12 = [{ pattern: /^\s*(https?:\/\/([^\s]+))\s*$/i, target: "_blank", label: "{messages.view}" }, { pattern: /^\s*(tel:([^\s]+))\s*$/i, label: "{hierPart}" }, { pattern: /^\s*(mailto:([^\s]+))\s*$/i, label: "{hierPart}" }, { pattern: /^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "App Studio Player" }, { pattern: /^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Collector" }, { pattern: /^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Explorer" }, { pattern: /^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Navigator" }, { pattern: /^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Survey123" }, { pattern: /^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Trek2There" }, { pattern: /^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Workforce" }, { pattern: /^\s*(iform:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "iForm" }, { pattern: /^\s*(flow:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "FlowFinity" }, { pattern: /^\s*(lfmobile:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Laserfische" }, { pattern: /^\s*(mspbi:\/\/([^\s]+))\s*$/i, label: "{messages.openInApp}", appName: "Microsoft Power Bi" }];
function a4(e14) {
  let a10 = null;
  return s12.some((s18) => (s18.pattern.test(e14) && (a10 = s18), !!a10)), a10;
}
function p7(s18, p14) {
  if ("string" != typeof p14 || !p14)
    return p14;
  const r9 = a4(p14);
  if (!r9)
    return p14;
  const t12 = p14.match(r9.pattern), n13 = t12 && t12[2], l10 = r(r(r9.label, { messages: s18, hierPart: n13 }), { appName: r9.appName }), i16 = r9.target ? ` target="${r9.target}"` : "", o10 = "_blank" === r9.target ? ' rel="noreferrer"' : "";
  return p14.replace(r9.pattern, `<a${i16} href="$1"${o10}>${l10}</a>`);
}

// node_modules/@arcgis/core/widgets/Feature/FeatureFields.js
var u5 = "esri-feature-fields";
var m4 = { base: u5, fieldHeader: `${u5}__field-header`, fieldData: `${u5}__field-data`, fieldDataDate: `${u5}__field-data--date` };
var c13 = class extends O {
  constructor(e14, t12) {
    super(e14, t12), this._featureElementInfo = null, this.viewModel = new n5(), this.messages = null, this.messagesURIUtils = null;
  }
  initialize() {
    this._featureElementInfo = new l3(), this.addHandles(d2(() => {
      var _a, _b;
      return [(_a = this.viewModel) == null ? void 0 : _a.description, (_b = this.viewModel) == null ? void 0 : _b.title];
    }, () => this._setupFeatureElementInfo(), P));
  }
  destroy() {
    var _a;
    (_a = this._featureElementInfo) == null ? void 0 : _a.destroy();
  }
  get attributes() {
    return this.viewModel.attributes;
  }
  set attributes(e14) {
    this.viewModel.attributes = e14;
  }
  get description() {
    return this.viewModel.description;
  }
  set description(e14) {
    this.viewModel.description = e14;
  }
  get expressionInfos() {
    return this.viewModel.expressionInfos;
  }
  set expressionInfos(e14) {
    this.viewModel.expressionInfos = e14;
  }
  get fieldInfos() {
    return this.viewModel.fieldInfos;
  }
  set fieldInfos(e14) {
    this.viewModel.fieldInfos = e14;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e14) {
    this.viewModel.title = e14;
  }
  render() {
    var _a;
    return n("div", { class: m4.base }, (_a = this._featureElementInfo) == null ? void 0 : _a.render(), this._renderFields());
  }
  _renderFieldInfo(e14, t12) {
    const { attributes: s18 } = this.viewModel, r9 = e14.fieldName, i16 = e14.label || r9, o10 = s18 ? null == s18[r9] ? "" : s18[r9] : "", l10 = !(!e14.format || !e14.format.dateFormat), n13 = "number" == typeof o10 && !l10 ? this._forceLTR(o10) : p7(this.messagesURIUtils, o10), d11 = { [m4.fieldDataDate]: l10 };
    return n("tr", { key: `fields-element-info-row-${r9}-${t12}` }, n("th", { class: m4.fieldHeader, innerHTML: i16, key: `fields-element-info-row-header-${r9}-${t12}` }), n("td", { class: this.classes(m4.fieldData, d11), innerHTML: n13, key: `fields-element-info-row-data-${r9}-${t12}` }));
  }
  _renderFields() {
    const { formattedFieldInfos: e14 } = this.viewModel;
    return (e14 == null ? void 0 : e14.length) ? n("table", { class: e6.table, summary: this.messages.fieldsSummary }, n("tbody", null, e14.map((e15, t12) => this._renderFieldInfo(e15, t12)))) : null;
  }
  _setupFeatureElementInfo() {
    var _a;
    const { description: e14, title: t12 } = this;
    (_a = this._featureElementInfo) == null ? void 0 : _a.set({ description: e14, title: t12 });
  }
  _forceLTR(e14) {
    return `&lrm;${e14}`;
  }
};
e([y()], c13.prototype, "attributes", null), e([y()], c13.prototype, "description", null), e([y()], c13.prototype, "expressionInfos", null), e([y()], c13.prototype, "fieldInfos", null), e([y()], c13.prototype, "title", null), e([y({ type: n5, nonNullable: true })], c13.prototype, "viewModel", void 0), e([y(), e2("esri/widgets/Feature/t9n/Feature")], c13.prototype, "messages", void 0), e([y(), e2("esri/widgets/support/t9n/uriUtils")], c13.prototype, "messagesURIUtils", void 0), c13 = e([c2("esri.widgets.Feature.FeatureFields")], c13);
var h6 = c13;

// node_modules/@arcgis/core/core/a11yUtils.js
var e9 = () => window.matchMedia("(prefers-reduced-motion: reduce)").matches;

// node_modules/@arcgis/core/renderers/support/numberUtils.js
var s13 = { maximumFractionDigits: 20 };
function c14(n13) {
  return u2(n13, s13);
}

// node_modules/@arcgis/core/widgets/Legend/support/utils.js
var i11 = "<";
var a5 = ">";
function r5(l10, r9, s18, o10) {
  let n13 = "";
  0 === r9 ? n13 = `${i11} ` : r9 === s18 && (n13 = `${a5} `);
  return n13 + (o10 ? N(l10, o10) : c14(l10));
}

// node_modules/@arcgis/core/widgets/Legend/support/colorRampUtils.js
var o6 = new u3([64, 64, 64]);
function n6(l10, o10) {
  const n13 = [], r9 = l10.length - 1;
  return 5 === l10.length ? n13.push(0, 2, 4) : n13.push(0, r9), l10.map((l11, t12) => n13.includes(t12) ? r5(l11, t12, r9, o10) : null);
}
async function r6(l10, e14, o10) {
  let r9 = false, a10 = [], u11 = [];
  if (l10.stops) {
    const e15 = l10.stops;
    a10 = e15.map((l11) => l11.value), r9 = e15.some((l11) => !!l11.label), r9 && (u11 = e15.map((l11) => l11.label));
  }
  const s18 = a10[0], i16 = a10[a10.length - 1];
  if (null == s18 && null == i16)
    return null;
  const c21 = r9 ? null : n6(a10, o10);
  return (await Promise.all(a10.map(async (o11, n13) => ({ value: o11, color: "opacity" === l10.type ? await t5(o11, l10, e14) : (await import("./visualVariableUtils-CUWY3LAY.js")).getColor(l10, o11), label: r9 ? u11[n13] : (c21 == null ? void 0 : c21[n13]) ?? "" })))).reverse();
}
async function t5(e14, n13, r9) {
  const t12 = new u3(r9 ?? o6), a10 = (await import("./visualVariableUtils-CUWY3LAY.js")).getOpacity(n13, e14);
  return null != a10 && (t12.a = a10), t12;
}

// node_modules/@arcgis/core/widgets/Legend/support/heatmapRampUtils.js
function r7(r9) {
  if (!r9.colorStops)
    return [];
  const e14 = [...r9.colorStops].filter((o10) => {
    var _a;
    return ((_a = o10.color) == null ? void 0 : _a.a) > 0;
  });
  let t12 = e14.length - 1;
  if (e14 && e14[0]) {
    const r10 = e14[t12];
    r10 && 1 !== r10.ratio && (e14.push(new a3({ ratio: 1, color: r10.color })), t12++);
  }
  return e14.map((o10, e15) => {
    var _a, _b;
    let l10 = "";
    return 0 === e15 ? l10 = ((_a = r9.legendOptions) == null ? void 0 : _a.minLabel) || "low" : e15 === t12 && (l10 = ((_b = r9.legendOptions) == null ? void 0 : _b.maxLabel) || "high"), { color: o10.color, label: l10, ratio: o10.ratio };
  }).reverse();
}

// node_modules/@arcgis/core/renderers/support/utils.js
var y4 = s2.getLogger("esri.renderers.support.utils");
var v6 = E("short-date");
async function w4(e14, l10, t12) {
  r2(e14, l10, () => []).push(...t12);
}
async function x4(l10) {
  var _a, _b;
  const t12 = /* @__PURE__ */ new Map();
  if (!l10)
    return t12;
  if ("visualVariables" in l10 && l10.visualVariables) {
    const e14 = l10.visualVariables.filter((e15) => "color" === e15.type);
    for (const l11 of e14) {
      const e15 = (await r6(l11) ?? []).map((e16) => e16.color);
      await w4(t12, l11.field || l11.valueExpression, e15);
    }
  }
  if ("heatmap" === l10.type) {
    const e14 = r7(l10).map((e15) => e15.color);
    await w4(t12, l10.field || l10.valueExpression, e14);
  } else if ("pie-chart" === l10.type) {
    for (const e14 of l10.attributes)
      await w4(t12, e14.field || e14.valueExpression, [e14.color]);
    await w4(t12, "default", [(_a = l10 == null ? void 0 : l10.othersCategory) == null ? void 0 : _a.color, h2(l10.backgroundFillSymbol, null)]);
  } else if ("dot-density" === l10.type) {
    for (const e14 of l10.attributes)
      await w4(t12, e14.field || e14.valueExpression, [e14.color]);
    await w4(t12, "default", [l10.backgroundColor]);
  } else if ("unique-value" === l10.type)
    if ("predominance" === ((_b = l10.authoringInfo) == null ? void 0 : _b.type))
      for (const e14 of l10.uniqueValueInfos ?? [])
        await w4(t12, e14.value.toString(), [h2(e14.symbol, null)]);
    else {
      const e14 = (l10.uniqueValueInfos ?? []).map((e15) => h2(e15.symbol, null)), { field: i16, field2: o10, field3: a10, valueExpression: n13 } = l10;
      (i16 || n13) && await w4(t12, i16 || n13, e14), o10 && await w4(t12, o10, e14), a10 && await w4(t12, a10, e14);
    }
  else if ("class-breaks" === l10.type) {
    const e14 = l10.classBreakInfos.map((e15) => h2(e15.symbol, null)), { field: i16, valueExpression: o10 } = l10;
    await w4(t12, i16 ?? o10, e14);
  } else
    "simple" === l10.type && await w4(t12, "default", [h2(l10.symbol, null)]);
  return "defaultSymbol" in l10 && l10.defaultSymbol && await w4(t12, "default", [h2(l10.defaultSymbol, null)]), t12.forEach((l11, i16) => {
    const o10 = s(l11.filter(Boolean), (e14, l12) => JSON.stringify(e14) === JSON.stringify(l12));
    t12.set(i16, o10);
  }), t12;
}

// node_modules/@arcgis/core/widgets/Feature/support/relatedFeatureUtils.js
var f3 = "esri.widgets.Feature.support.relatedFeatureUtils";
var m6 = s2.getLogger(f3);
var d7 = /* @__PURE__ */ new Map();
function y5(e14) {
  if (!de(e14))
    return null;
  const [t12, r9] = e14.split("/").slice(1);
  return { layerId: t12, fieldName: r9 };
}
function j5(e14, t12) {
  if (!t12.relationships)
    return null;
  let r9 = null;
  const { relationships: o10 } = t12;
  return o10.some((t13) => t13.id === parseInt(e14, 10) && (r9 = t13, true)), r9;
}
function g6({ originRelationship: e14, relationships: t12, layerId: r9 }) {
  let o10 = null;
  return t12 && t12.some((t13) => (`${t13.relatedTableId}` === r9 && t13.id === (e14 == null ? void 0 : e14.id) && (o10 = t13), !!o10)), o10;
}
function h7(e14, t12) {
  const r9 = t12.toLowerCase();
  for (const o10 in e14)
    if (o10.toLowerCase() === r9)
      return e14[o10];
  return null;
}
function F4(e14, t12) {
  const r9 = j5(e14, t12);
  if (!r9)
    return;
  return { url: `${t12.url}/${r9.relatedTableId}`, sourceSpatialReference: t12.spatialReference, relation: r9, relatedFields: [], outStatistics: [] };
}
function I6(e14, t12) {
  if (!t12)
    return;
  if (!e14)
    return;
  const { features: r9, statsFeatures: o10 } = e14, s18 = r9 == null ? void 0 : r9.value;
  t12.relatedFeatures = s18 ? s18.features : [];
  const i16 = o10 == null ? void 0 : o10.value;
  t12.relatedStatsFeatures = i16 ? i16.features : [];
}
function S3(e14, t12, r9, o10) {
  var _a;
  const s18 = new d4();
  return s18.outFields = ["*"], s18.relationshipId = "number" == typeof t12.id ? t12.id : parseInt(t12.id, 10), s18.objectIds = [e14.attributes[r9.objectIdField]], ((_a = r9.queryRelatedFeatures) == null ? void 0 : _a.call(r9, s18, o10)) ?? Promise.resolve({});
}
function w5(e14, t12, r9) {
  let o10 = 0;
  const s18 = [];
  for (; o10 < t12.length; )
    s18.push(`${e14} IN (${t12.slice(o10, r9 + o10)})`), o10 += r9;
  return s18.join(" OR ");
}
function b6(e14) {
  return e14 ? s(e14) : void 0;
}
function R3(e14) {
  return e14 ? s(e14, (e15, t12) => JSON.stringify(e15.toJSON()) === JSON.stringify(t12.toJSON())) : void 0;
}
async function U3(e14, t12, r9, o10) {
  const s18 = r9.layerId.toString(), { layerInfo: u11, relation: p14, relatedFields: c21, outStatistics: f9, url: m10, sourceSpatialReference: d11 } = t12, y11 = b6(c21), j9 = R3(f9);
  if (!u11 || !p14)
    return null;
  const F9 = g6({ originRelationship: p14, relationships: u11.relationships, layerId: s18 });
  if ((F9 == null ? void 0 : F9.relationshipTableId) && F9.keyFieldInRelationshipTable) {
    const t13 = (await S3(e14, F9, r9, o10))[e14.attributes[r9.objectIdField]];
    if (!t13)
      return null;
    const s19 = t13.features.map((e15) => e15.attributes[u11.objectIdField]);
    if ((j9 == null ? void 0 : j9.length) && u11.supportsStatistics) {
      const e15 = new b3();
      e15.where = w5(u11.objectIdField, s19, 1e3), e15.outFields = y11, e15.outStatistics = j9, e15.sourceSpatialReference = d11;
      const r10 = { features: Promise.resolve(t13), statsFeatures: s9(m10, e15) };
      return v(r10);
    }
  }
  const I12 = F9 == null ? void 0 : F9.keyField;
  if (I12) {
    const t13 = pe(q2(u11.fields, I12)), r10 = h7(e14.attributes, p14.keyField), s19 = t13 ? `${I12}=${r10}` : `${I12}='${r10}'`, c22 = s9(m10, new b3({ where: s19, outFields: y11, sourceSpatialReference: d11 }), o10), f10 = !!(j9 == null ? void 0 : j9.length) && u11.supportsStatistics ? s9(m10, new b3({ where: s19, outFields: y11, outStatistics: j9, sourceSpatialReference: d11 }), o10) : null, g12 = { features: c22 };
    return f10 && (g12.statsFeatures = f10), v(g12);
  }
  return null;
}
function $2(t12, r9) {
  return j(t12, { query: { f: "json" }, signal: r9 == null ? void 0 : r9.signal });
}
function v7({ relatedInfos: e14, layer: t12 }, o10) {
  const n13 = {};
  return e14.forEach((e15, o11) => {
    const { relation: s18 } = e15;
    if (!s18) {
      const e16 = new s3("relation-required", "A relation is required on a layer to retrieve related records.");
      throw m6.error(e16), e16;
    }
    const { relatedTableId: i16 } = s18;
    if ("number" != typeof i16) {
      const e16 = new s3("A related table ID is required on a layer to retrieve related records.");
      throw m6.error(e16), e16;
    }
    const l10 = `${t12.url}/${i16}`, a10 = d7.get(l10), u11 = a10 ?? $2(l10);
    a10 || d7.set(l10, u11), n13[o11] = u11;
  }), h(v(n13), o10);
}
function N4({ graphic: e14, relatedInfos: t12, layer: r9 }, o10) {
  const s18 = {};
  return t12.forEach((t13, i16) => {
    t13.layerInfo && (s18[i16] = U3(e14, t13, r9, o10));
  }), v(s18);
}
function T4({ relatedInfo: e14, fieldName: t12, fieldInfo: r9 }) {
  var _a, _b;
  if ((_a = e14.relatedFields) == null ? void 0 : _a.push(t12), r9.statisticType) {
    const o10 = new m({ statisticType: r9.statisticType, onStatisticField: t12, outStatisticFieldName: t12 });
    (_b = e14.outStatistics) == null ? void 0 : _b.push(o10);
  }
}
function q2(e14, t12) {
  if (null != e14) {
    t12 = t12.toLowerCase();
    for (const r9 of e14)
      if (r9 && r9.name.toLowerCase() === t12)
        return r9;
  }
  return null;
}

// node_modules/@arcgis/core/widgets/Feature/FeatureMedia/FeatureMediaViewModel.js
var I7 = { chartAnimation: true };
var v8 = class extends g {
  constructor(t12) {
    super(t12), this.abilities = { ...I7 }, this.activeMediaInfoIndex = 0, this.attributes = null, this.description = null, this.fieldInfoMap = null, this.formattedAttributes = null, this.expressionAttributes = null, this.isAggregate = false, this.layer = null, this.mediaInfos = null, this.popupTemplate = null, this.relatedInfos = null, this.title = null;
  }
  castAbilities(t12) {
    return { ...I7, ...t12 };
  }
  get activeMediaInfo() {
    return this.formattedMediaInfos[this.activeMediaInfoIndex] || null;
  }
  get formattedMediaInfos() {
    return this._formatMediaInfos() || [];
  }
  get formattedMediaInfoCount() {
    return this.formattedMediaInfos.length;
  }
  setActiveMedia(t12) {
    this._setContentElementMedia(t12);
  }
  next() {
    this._pageContentElementMedia(1);
  }
  previous() {
    this._pageContentElementMedia(-1);
  }
  _setContentElementMedia(t12) {
    const { formattedMediaInfoCount: e14 } = this, o10 = (t12 + e14) % e14;
    this.activeMediaInfoIndex = o10;
  }
  _pageContentElementMedia(t12) {
    const { activeMediaInfoIndex: e14 } = this, o10 = e14 + t12;
    this._setContentElementMedia(o10);
  }
  _formatMediaInfos() {
    const { mediaInfos: t12, layer: e14 } = this, i16 = this.attributes ?? {}, r9 = this.formattedAttributes ?? {}, a10 = this.expressionAttributes ?? {}, s18 = this.fieldInfoMap ?? /* @__PURE__ */ new Map();
    return (t12 == null ? void 0 : t12.map((t13) => {
      const o10 = t13 == null ? void 0 : t13.clone();
      if (!o10)
        return null;
      if (o10.title = D3({ attributes: i16, fieldInfoMap: s18, globalAttributes: r9, expressionAttributes: a10, layer: e14, text: o10.title }), o10.caption = D3({ attributes: i16, fieldInfoMap: s18, globalAttributes: r9, expressionAttributes: a10, layer: e14, text: o10.caption }), o10.altText = D3({ attributes: i16, fieldInfoMap: s18, globalAttributes: r9, expressionAttributes: a10, layer: e14, text: o10.altText }), "image" === o10.type) {
        const { value: t14 } = o10;
        return this._setImageValue({ value: t14, formattedAttributes: r9, layer: e14 }), o10.value.sourceURL ? o10 : void 0;
      }
      if ("pie-chart" === o10.type || "line-chart" === o10.type || "column-chart" === o10.type || "bar-chart" === o10.type) {
        const { value: t14 } = o10;
        return this._setChartValue({ value: t14, chartType: o10.type, attributes: i16, formattedAttributes: r9, layer: e14, expressionAttributes: a10 }), o10;
      }
      return null;
    }).filter(k)) ?? [];
  }
  _setImageValue(t12) {
    const e14 = this.fieldInfoMap ?? /* @__PURE__ */ new Map(), { value: o10, formattedAttributes: i16, layer: r9 } = t12, { linkURL: a10, sourceURL: s18 } = o10;
    if (s18) {
      const t13 = P3(s18, r9);
      o10.sourceURL = z({ formattedAttributes: i16, template: t13, fieldInfoMap: e14 });
    }
    if (a10) {
      const t13 = P3(a10, r9);
      o10.linkURL = z({ formattedAttributes: i16, template: t13, fieldInfoMap: e14 });
    }
  }
  _setChartValue(t12) {
    const { value: e14, attributes: o10, formattedAttributes: i16, chartType: r9, layer: a10, expressionAttributes: s18 } = t12, { popupTemplate: l10, relatedInfos: n13 } = this, { fields: p14, normalizeField: d11 } = e14, m10 = a10;
    e14.fields = R2(p14, m10), d11 && (e14.normalizeField = v5(d11, m10));
    if (!p14.some((t13) => !!(null != i16[t13] || de(t13) && (n13 == null ? void 0 : n13.size))))
      return;
    const h13 = (l10 == null ? void 0 : l10.fieldInfos) ?? [];
    p14.forEach((t13, a11) => {
      var _a;
      const l11 = (_a = e14.colors) == null ? void 0 : _a[a11];
      if (de(t13))
        return void (e14.series = [...e14.series, ...this._getRelatedChartInfos({ fieldInfos: h13, fieldName: t13, formattedAttributes: i16, chartType: r9, value: e14, color: l11 })]);
      const n14 = this._getChartOption({ value: e14, attributes: o10, chartType: r9, formattedAttributes: i16, expressionAttributes: s18, fieldName: t13, fieldInfos: h13, color: l11 });
      e14.series.push(n14);
    });
  }
  _getRelatedChartInfos(t12) {
    var _a;
    const { fieldInfos: e14, fieldName: o10, formattedAttributes: i16, chartType: r9, value: a10, color: s18 } = t12, l10 = [], n13 = y5(o10), p14 = n13 && ((_a = this.relatedInfos) == null ? void 0 : _a.get(n13.layerId.toString()));
    if (!p14)
      return l10;
    const { relatedFeatures: d11, relation: u11 } = p14;
    if (!u11 || !d11)
      return l10;
    const { cardinality: f9 } = u11;
    d11.forEach((t13) => {
      const { attributes: p15 } = t13;
      p15 && Object.keys(p15).forEach((t14) => {
        t14 === n13.fieldName && l10.push(this._getChartOption({ value: a10, attributes: p15, formattedAttributes: i16, fieldName: o10, chartType: r9, relatedFieldName: t14, hasMultipleRelatedFeatures: (d11 == null ? void 0 : d11.length) > 1, fieldInfos: e14, color: s18 }));
      });
    });
    return "one-to-many" === f9 || "many-to-many" === f9 ? l10 : [l10[0]];
  }
  _getTooltip({ label: t12, value: e14, chartType: o10 }) {
    return "pie-chart" === o10 ? `${t12}` : `${t12}: ${e14}`;
  }
  _getChartOption(t12) {
    var _a;
    const { value: e14, attributes: o10, formattedAttributes: i16, expressionAttributes: r9, fieldName: a10, relatedFieldName: n13, fieldInfos: p14, chartType: d11, hasMultipleRelatedFeatures: u11, color: I12 } = t12, v11 = this.layer, M7 = this.fieldInfoMap ?? /* @__PURE__ */ new Map(), { normalizeField: A7, tooltipField: g12 } = e14, x10 = A7 ? de(A7) ? o10[y5(A7).fieldName] : o10[A7] : null, _5 = M(a10) && r9 && void 0 !== r9[a10] ? r9[a10] : n13 && void 0 !== o10[n13] ? o10[n13] : void 0 !== o10[a10] ? o10[a10] : i16[a10], C5 = new i7({ fieldName: a10, color: I12, value: void 0 === _5 ? null : _5 && x10 ? _5 / x10 : _5 });
    if (de(a10)) {
      const t13 = M7.get(a10.toLowerCase()), e15 = g12 && M7.get(g12.toLowerCase()), r10 = (t13 == null ? void 0 : t13.fieldName) ?? a10, s18 = u11 && g12 ? y5(g12).fieldName : (e15 == null ? void 0 : e15.fieldName) ?? g12, l10 = u11 && s18 ? o10[s18] : i16[s18] ?? (t13 == null ? void 0 : t13.label) ?? (t13 == null ? void 0 : t13.fieldName) ?? n13, p15 = u11 && n13 ? o10[n13] : i16[r10];
      return C5.tooltip = this._getTooltip({ label: l10, value: p15, chartType: d11 }), C5;
    }
    const T10 = Y(p14, a10), N5 = v5(a10, v11), F9 = g12 && void 0 !== i16[g12] ? i16[g12] : q(T10 || new c3({ fieldName: N5 }), (_a = this.popupTemplate) == null ? void 0 : _a.expressionInfos), j9 = i16[N5];
    return C5.tooltip = this._getTooltip({ label: F9, value: j9, chartType: d11 }), C5;
  }
};
e([y()], v8.prototype, "abilities", void 0), e([s7("abilities")], v8.prototype, "castAbilities", null), e([y()], v8.prototype, "activeMediaInfoIndex", void 0), e([y({ readOnly: true })], v8.prototype, "activeMediaInfo", null), e([y()], v8.prototype, "attributes", void 0), e([y()], v8.prototype, "description", void 0), e([y()], v8.prototype, "fieldInfoMap", void 0), e([y()], v8.prototype, "formattedAttributes", void 0), e([y()], v8.prototype, "expressionAttributes", void 0), e([y({ readOnly: true })], v8.prototype, "formattedMediaInfos", null), e([y()], v8.prototype, "isAggregate", void 0), e([y()], v8.prototype, "layer", void 0), e([y({ readOnly: true })], v8.prototype, "formattedMediaInfoCount", null), e([y()], v8.prototype, "mediaInfos", void 0), e([y()], v8.prototype, "popupTemplate", void 0), e([y()], v8.prototype, "relatedInfos", void 0), e([y()], v8.prototype, "title", void 0), v8 = e([c2("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")], v8);
var M3 = v8;

// node_modules/@arcgis/core/widgets/Feature/FeatureMedia.js
var g7 = "esri-feature-media";
var M4 = { base: g7, mediaContainer: `${g7}__container`, mediaItemContainer: `${g7}__item-container`, mediaItem: `${g7}__item`, mediaItemText: `${g7}__item-text`, mediaItemTitle: `${g7}__item-title`, mediaItemCaption: `${g7}__item-caption`, mediaNavigation: `${g7}__item-navigation`, mediaPagination: `${g7}__pagination`, mediaPaginationText: `${g7}__pagination-text`, mediaPrevious: `${g7}__previous`, mediaPreviousIconLTR: `${g7}__previous-icon`, mediaPreviousIconRTL: `${g7}__previous-icon--rtl`, mediaNext: `${g7}__next`, mediaNextIconLTR: `${g7}__next-icon`, mediaNextIconRTL: `${g7}__next-icon--rtl`, mediaChart: `${g7}__chart`, mediaPaginationButton: `${g7}__pagination-button`, mediaPaginationIcon: `${g7}__pagination-icon`, mediaChartRendered: `${g7}__chart--rendered` };
var w6 = 15;
var I8 = "category";
var A5 = "value";
var y6 = "rgba(50, 50, 50, 1)";
var C3 = 250;
var x5 = 500;
var T5 = 200;
var b7 = class extends O {
  constructor(e14, t12) {
    super(e14, t12), this._refreshTimer = null, this._refreshIntervalInfo = null, this._featureElementInfo = null, this._chartRootMap = /* @__PURE__ */ new WeakMap(), this.viewModel = new M3(), this.messages = null, this._disposeChart = (e15) => {
      var _a;
      (_a = this._chartRootMap.get(e15)) == null ? void 0 : _a.dispose(), this._chartRootMap.delete(e15);
    }, this._createChart = async (e15) => {
      const { destroyed: t13, viewModel: i16 } = this;
      if (t13 || !i16 || !e15)
        return;
      const { createRoot: r9 } = await import("./chartUtilsAm5-Y47ROQFU.js"), a10 = await r9(e15);
      this._chartRootMap.set(e15, a10), this._renderChart({ mediaInfo: i16.activeMediaInfo, root: a10 });
    };
  }
  initialize() {
    this._featureElementInfo = new l3(), this.addHandles([d2(() => {
      var _a, _b;
      return [(_a = this.viewModel) == null ? void 0 : _a.activeMediaInfo, (_b = this.viewModel) == null ? void 0 : _b.activeMediaInfoIndex];
    }, () => this._setupMediaRefreshTimer(), P), d2(() => {
      var _a, _b;
      return [(_a = this.viewModel) == null ? void 0 : _a.description, (_b = this.viewModel) == null ? void 0 : _b.title];
    }, () => this._setupFeatureElementInfo(), P)]);
  }
  loadDependencies() {
    return r3({ icon: () => import("./calcite-icon-XJ35OAWQ.js") });
  }
  destroy() {
    var _a;
    this._clearMediaRefreshTimer(), (_a = this._featureElementInfo) == null ? void 0 : _a.destroy();
  }
  get attributes() {
    return this.viewModel.attributes;
  }
  set attributes(e14) {
    this.viewModel.attributes = e14;
  }
  get activeMediaInfoIndex() {
    return this.viewModel.activeMediaInfoIndex;
  }
  set activeMediaInfoIndex(e14) {
    this.viewModel.activeMediaInfoIndex = e14;
  }
  get description() {
    return this.viewModel.description;
  }
  set description(e14) {
    this.viewModel.description = e14;
  }
  get fieldInfoMap() {
    return this.viewModel.fieldInfoMap;
  }
  set fieldInfoMap(e14) {
    this.viewModel.fieldInfoMap = e14;
  }
  get layer() {
    return this.viewModel.layer;
  }
  set layer(e14) {
    this.viewModel.layer = e14;
  }
  get mediaInfos() {
    return this.viewModel.mediaInfos;
  }
  set mediaInfos(e14) {
    this.viewModel.mediaInfos = e14;
  }
  get popupTemplate() {
    return this.viewModel.popupTemplate;
  }
  set popupTemplate(e14) {
    this.viewModel.popupTemplate = e14;
  }
  get relatedInfos() {
    return this.viewModel.relatedInfos;
  }
  set relatedInfos(e14) {
    this.viewModel.relatedInfos = e14;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e14) {
    this.viewModel.title = e14;
  }
  render() {
    var _a;
    return n("div", { bind: this, class: M4.base, onkeyup: this._handleMediaKeyup }, (_a = this._featureElementInfo) == null ? void 0 : _a.render(), this._renderMedia());
  }
  _renderMedia() {
    const { formattedMediaInfoCount: e14, activeMediaInfoIndex: t12 } = this.viewModel, i16 = this._renderMediaText();
    return e14 ? n("div", { class: M4.mediaContainer, key: "media-element-container" }, this._renderMediaInfo(), n("div", { class: M4.mediaNavigation }, i16, e14 > 1 ? n("div", { class: M4.mediaPagination }, this._renderMediaPageButton("previous"), n("span", { class: M4.mediaPaginationText }, s6(this.messages.pageText, { index: t12 + 1, total: e14 })), this._renderMediaPageButton("next")) : null)) : null;
  }
  _renderMediaText() {
    const { activeMediaInfo: e14 } = this.viewModel;
    if (!e14)
      return null;
    const t12 = e14 && e14.title ? n("div", { class: M4.mediaItemTitle, innerHTML: e14.title, key: "media-title" }) : null, i16 = e14 && e14.caption ? n("div", { class: M4.mediaItemCaption, innerHTML: e14.caption, key: "media-caption" }) : null;
    return t12 || i16 ? n("div", { class: M4.mediaItemText, key: "media-text" }, t12, i16) : null;
  }
  _renderImageMediaInfo(e14) {
    const { _refreshIntervalInfo: t12 } = this, { activeMediaInfoIndex: i16, formattedMediaInfoCount: r9 } = this.viewModel, { value: a10, refreshInterval: s18, altText: o10, title: n13, type: l10 } = e14, { sourceURL: d11, linkURL: m10 } = a10, p14 = C2(m10 ?? void 0) ? "_blank" : "_self", h13 = "_blank" === p14 ? "noreferrer" : "", u11 = s18 ? t12 : null, _5 = u11 ? u11.timestamp : 0, v11 = u11 ? u11.sourceURL : d11, g12 = n("img", { alt: o10 || n13, key: `media-${l10}-${i16}-${r9}-${_5}`, src: v11 ?? void 0 });
    return (m10 ? n("a", { href: m10, rel: h13, target: p14, title: n13 }, g12) : null) ?? g12;
  }
  _renderChartMediaInfo(e14) {
    const { activeMediaInfoIndex: t12, formattedMediaInfoCount: i16 } = this.viewModel;
    return n("div", { afterCreate: this._createChart, afterRemoved: this._disposeChart, bind: this, class: M4.mediaChart, key: `media-${e14.type}-${t12}-${i16}` });
  }
  _renderMediaInfoType() {
    const { activeMediaInfo: e14 } = this.viewModel;
    return e14 ? "image" === e14.type ? this._renderImageMediaInfo(e14) : e14.type.includes("chart") ? this._renderChartMediaInfo(e14) : null : null;
  }
  _renderMediaInfo() {
    const { activeMediaInfo: e14 } = this.viewModel;
    return e14 ? n("div", { class: M4.mediaItemContainer, key: "media-container" }, n("div", { class: M4.mediaItem, key: "media-item-container" }, this._renderMediaInfoType())) : null;
  }
  _renderMediaPageButton(e14) {
    if (this.viewModel.formattedMediaInfoCount < 2)
      return null;
    const t12 = "previous" === e14, i16 = t12 ? this.messages.previous : this.messages.next, r9 = t12 ? "chevron-left" : "chevron-right", a10 = t12 ? "media-previous" : "media-next", s18 = t12 ? this._previous : this._next;
    return n("button", { "aria-label": i16, bind: this, class: M4.mediaPaginationButton, key: a10, onclick: s18, tabIndex: 0, title: i16, type: "button" }, n("calcite-icon", { class: M4.mediaPaginationIcon, icon: r9, scale: "s" }));
  }
  _setupFeatureElementInfo() {
    var _a;
    const { description: e14, title: t12 } = this;
    (_a = this._featureElementInfo) == null ? void 0 : _a.set({ description: e14, title: t12 });
  }
  _next() {
    this.viewModel.next();
  }
  _previous() {
    this.viewModel.previous();
  }
  _getRenderer() {
    if (!this.viewModel)
      return;
    const { isAggregate: e14, layer: t12 } = this.viewModel;
    return e14 && (t12 == null ? void 0 : t12.featureReduction) && "renderer" in t12.featureReduction ? t12.featureReduction.renderer : t12 == null ? void 0 : t12.renderer;
  }
  async _getSeriesColors(e14) {
    const { colorAm5: t12 } = await import("./chartCommon-344B3JLY.js"), i16 = /* @__PURE__ */ new Map();
    return e14.forEach((e15) => {
      e15.color && i16.set(e15, t12(e15.color.toCss(true)));
    }), i16;
  }
  async _getRendererColors() {
    const { colorAm5: e14 } = await import("./chartCommon-344B3JLY.js"), t12 = /* @__PURE__ */ new Map(), i16 = this._getRenderer(), r9 = "default";
    if (!i16)
      return t12;
    const a10 = await x4(i16);
    a10.delete(r9);
    return Array.from(a10.values()).every((e15) => 1 === (e15 == null ? void 0 : e15.length)) ? (Array.from(a10.keys()).forEach((i17) => {
      var _a, _b;
      const r10 = (_b = (_a = a10.get(i17)) == null ? void 0 : _a[0]) == null ? void 0 : _b.toCss(true);
      r10 && t12.set(i17, e14(r10));
    }), t12) : t12;
  }
  _handleMediaKeyup(e14) {
    const t12 = c(e14);
    "ArrowLeft" === t12 && (e14.stopPropagation(), this.viewModel.previous()), "ArrowRight" === t12 && (e14.stopPropagation(), this.viewModel.next());
  }
  _canAnimateChart() {
    return !!this.viewModel && (!!this.viewModel.abilities.chartAnimation && !e9());
  }
  _getChartAnimationMS() {
    return this._canAnimateChart() ? C3 : 0;
  }
  _getChartSeriesAnimationMS() {
    return this._canAnimateChart() ? x5 : 0;
  }
  async _renderChart(e14) {
    const { root: t12, mediaInfo: i16 } = e14, { value: r9, type: a10 } = i16, { ResponsiveThemeAm5: s18, DarkThemeAm5: o10, AnimatedThemeAm5: n13, ColorSetAm5: l10, ThemeAm5: d11, esriChartColorSet: m10 } = await import("./chartCommon-344B3JLY.js"), c21 = d11.new(t12);
    c21.rule("ColorSet").set("colors", m10), c21.rule("ColorSet").set("reuse", true);
    const p14 = [s18.new(t12), c21];
    r4() && p14.push(o10.new(t12)), this._canAnimateChart() && p14.push(n13.new(t12)), t12.setThemes(p14);
    const h13 = await this._getRendererColors(), u11 = await this._getSeriesColors(r9.series), f9 = l10.new(t12, {}), v11 = u11.get(r9.series[0]), g12 = v11 ? { lineSettings: { stroke: v11 } } : void 0, M7 = r9.series.map((e15, t13) => {
      const i17 = u11.get(e15) || h13.get(e15.fieldName) || f9.getIndex(t13);
      return { [I8]: e15.tooltip, [A5]: e15.value, columnSettings: { fill: i17, stroke: i17 }, ...g12 };
    }).filter((e15) => "pie-chart" !== a10 || null != e15.value && e15.value > 0);
    "pie-chart" === a10 ? this._createPieChart(e14, M7) : this._createXYChart(e14, M7);
  }
  _getDirection() {
    return v3(this.container) ? "rtl" : "ltr";
  }
  _isInversed() {
    return !!v3(this.container);
  }
  async _customizeChartTooltip(e14, t12 = "horizontal") {
    var _a;
    const { colorAm5: i16 } = await import("./chartCommon-344B3JLY.js");
    e14.setAll({ pointerOrientation: t12 }), (_a = e14.get("background")) == null ? void 0 : _a.setAll({ stroke: i16(y6) }), e14.label.setAll({ direction: this._getDirection(), oversizedBehavior: "wrap", maxWidth: T5 });
  }
  async _createPieChart(e14, t12) {
    const { TooltipAm5: i16 } = await import("./chartCommon-344B3JLY.js"), { PieChartAm5: r9, PieSeriesAm5: a10 } = await import("./pieChart-GUKSUPUO.js"), { mediaInfo: s18, root: o10 } = e14, { title: n13 } = s18, l10 = 5, d11 = (s18 == null ? void 0 : s18.altText) || (s18 == null ? void 0 : s18.title) || "", m10 = o10.container.children.push(r9.new(o10, { ariaLabel: d11, focusable: true, paddingBottom: l10, paddingTop: l10, paddingLeft: l10, paddingRight: l10 })), c21 = "{category}: {valuePercentTotal.formatNumber('0.00')}%\n ({value})", p14 = i16.new(o10, { labelText: c21 }), h13 = m10.series.push(a10.new(o10, { name: n13, valueField: A5, categoryField: I8, tooltip: p14 }));
    h13.ticks.template.set("forceHidden", true), h13.labels.template.set("forceHidden", true), h13.slices.template.states.create("active", { shiftRadius: l10 }), this._customizeChartTooltip(p14), h13.slices.template.setAll({ ariaLabel: c21, focusable: true, templateField: "columnSettings" }), h13.data.setAll(t12), h13.appear(this._getChartSeriesAnimationMS()), m10.appear(this._getChartAnimationMS()), m10.root.dom.classList.toggle(M4.mediaChartRendered, true);
  }
  _getMinSeriesValue(e14) {
    let t12 = 0;
    return e14.forEach((e15) => t12 = Math.min(e15.value, t12)), t12;
  }
  async _createColumnChart(e14, t12, i16) {
    const { TooltipAm5: r9, ScrollbarAm5: a10 } = await import("./chartCommon-344B3JLY.js"), { CategoryAxisAm5: s18, AxisRendererXAm5: o10, ValueAxisAm5: n13, AxisRendererYAm5: l10, ColumnSeriesAm5: d11 } = await import("./xyChart-RXURJBAA.js"), { mediaInfo: m10, root: c21 } = t12, { value: p14, title: h13 } = m10;
    e14.setAll({ wheelX: "panX", wheelY: "zoomX" });
    const u11 = e14.xAxes.push(s18.new(c21, { renderer: o10.new(c21, { inversed: this._isInversed() }), categoryField: I8 }));
    u11.get("renderer").labels.template.setAll({ forceHidden: true });
    const f9 = e14.yAxes.push(n13.new(c21, { renderer: l10.new(c21, { inside: false }), min: this._getMinSeriesValue(p14.series) }));
    f9.get("renderer").labels.template.setAll({ direction: this._getDirection() });
    const _5 = "{categoryX}", v11 = r9.new(c21, { labelText: _5 }), g12 = e14.series.push(d11.new(c21, { name: h13, xAxis: u11, yAxis: f9, valueYField: A5, categoryXField: I8, tooltip: v11 }));
    this._customizeChartTooltip(v11), g12.columns.template.setAll({ ariaLabel: _5, focusable: true, templateField: "columnSettings" }), p14.series.length > w6 && e14.set("scrollbarX", a10.new(c21, { orientation: "horizontal" })), u11.data.setAll(i16), g12.data.setAll(i16), g12.appear(this._getChartSeriesAnimationMS()), e14.appear(this._getChartAnimationMS());
  }
  async _createBarChart(e14, t12, i16) {
    const { TooltipAm5: r9, ScrollbarAm5: a10 } = await import("./chartCommon-344B3JLY.js"), { CategoryAxisAm5: s18, AxisRendererXAm5: o10, ValueAxisAm5: n13, AxisRendererYAm5: l10, ColumnSeriesAm5: d11 } = await import("./xyChart-RXURJBAA.js"), { mediaInfo: m10, root: c21 } = t12, { value: p14, title: h13 } = m10;
    e14.setAll({ wheelX: "panY", wheelY: "zoomY" });
    const u11 = e14.yAxes.push(s18.new(c21, { renderer: l10.new(c21, { inversed: true }), categoryField: I8 }));
    u11.get("renderer").labels.template.setAll({ forceHidden: true });
    const f9 = e14.xAxes.push(n13.new(c21, { renderer: o10.new(c21, { inside: false, inversed: this._isInversed() }), min: this._getMinSeriesValue(p14.series) }));
    f9.get("renderer").labels.template.setAll({ direction: this._getDirection() });
    const _5 = "{categoryY}", v11 = r9.new(c21, { labelText: _5 }), g12 = e14.series.push(d11.new(c21, { name: h13, xAxis: f9, yAxis: u11, valueXField: A5, categoryYField: I8, tooltip: v11 }));
    this._customizeChartTooltip(v11, "vertical"), g12.columns.template.setAll({ ariaLabel: _5, focusable: true, templateField: "columnSettings" }), p14.series.length > w6 && e14.set("scrollbarY", a10.new(c21, { orientation: "vertical" })), u11.data.setAll(i16), g12.data.setAll(i16), g12.appear(this._getChartSeriesAnimationMS()), e14.appear(this._getChartAnimationMS());
  }
  async _createLineChart(e14, t12, i16) {
    var _a, _b, _c;
    const { TooltipAm5: r9, ScrollbarAm5: a10 } = await import("./chartCommon-344B3JLY.js"), { CategoryAxisAm5: s18, AxisRendererXAm5: o10, ValueAxisAm5: n13, AxisRendererYAm5: l10, LineSeriesAm5: d11 } = await import("./xyChart-RXURJBAA.js"), { root: m10, mediaInfo: c21 } = t12, { value: p14, title: h13 } = c21;
    e14.setAll({ wheelX: "panX", wheelY: "zoomX" });
    const u11 = e14.xAxes.push(s18.new(m10, { renderer: o10.new(m10, { inversed: this._isInversed() }), categoryField: I8 }));
    u11.get("renderer").labels.template.setAll({ forceHidden: true });
    const f9 = e14.yAxes.push(n13.new(m10, { renderer: l10.new(m10, { inside: false }), min: this._getMinSeriesValue(p14.series) }));
    f9.get("renderer").labels.template.setAll({ direction: this._getDirection() });
    const _5 = "{categoryX}", v11 = (_b = (_a = i16[0]) == null ? void 0 : _a.lineSettings) == null ? void 0 : _b.stroke, g12 = r9.new(m10, { getFillFromSprite: !v11, labelText: _5 });
    v11 && ((_c = g12.get("background")) == null ? void 0 : _c.setAll({ fill: v11 }));
    const M7 = e14.series.push(d11.new(m10, { name: h13, xAxis: u11, yAxis: f9, valueYField: A5, categoryXField: I8, tooltip: g12 }));
    M7.strokes.template.setAll({ templateField: "lineSettings" }), this._customizeChartTooltip(g12, "vertical"), p14.series.length > w6 && e14.set("scrollbarX", a10.new(m10, { orientation: "horizontal" })), u11.data.setAll(i16), M7.data.setAll(i16), M7.appear(this._getChartSeriesAnimationMS()), e14.appear(this._getChartAnimationMS());
  }
  async _createXYChart(e14, t12) {
    const { XYChartAm5: i16, XYCursorAm5: r9 } = await import("./xyChart-RXURJBAA.js"), { root: a10, mediaInfo: s18 } = e14, { type: o10 } = s18, n13 = (s18 == null ? void 0 : s18.altText) || (s18 == null ? void 0 : s18.title) || "", l10 = a10.container.children.push(i16.new(a10, { ariaLabel: n13, focusable: true, panX: true, panY: true }));
    l10.set("cursor", r9.new(a10, {})), "column-chart" === o10 && await this._createColumnChart(l10, e14, t12), "bar-chart" === o10 && await this._createBarChart(l10, e14, t12), "line-chart" === o10 && await this._createLineChart(l10, e14, t12), l10.root.dom.classList.toggle(M4.mediaChartRendered, true);
  }
  _clearMediaRefreshTimer() {
    const { _refreshTimer: e14 } = this;
    e14 && (clearTimeout(e14), this._refreshTimer = null);
  }
  _updateMediaInfoTimestamp(e14) {
    const t12 = Date.now();
    this._refreshIntervalInfo = { timestamp: t12, sourceURL: e14 && this._getImageSource(e14, t12) };
  }
  _setupMediaRefreshTimer() {
    this._clearMediaRefreshTimer();
    const { activeMediaInfo: e14 } = this.viewModel;
    e14 && "image" === e14.type && e14.refreshInterval && this._setRefreshTimeout(e14);
  }
  _setRefreshTimeout(e14) {
    const { refreshInterval: t12, value: i16 } = e14;
    if (!t12)
      return;
    const r9 = 6e4 * t12;
    this._updateMediaInfoTimestamp(i16.sourceURL);
    const a10 = setInterval(() => {
      this._updateMediaInfoTimestamp(i16.sourceURL);
    }, r9);
    this._refreshTimer = a10;
  }
  _getImageSource(e14, t12) {
    const i16 = e14.includes("?") ? "&" : "?", [r9, a10 = ""] = e14.split("#");
    return `${r9}${i16}timestamp=${t12}${a10 ? "#" : ""}${a10}`;
  }
};
e([y()], b7.prototype, "_refreshIntervalInfo", void 0), e([y()], b7.prototype, "attributes", null), e([y()], b7.prototype, "activeMediaInfoIndex", null), e([y()], b7.prototype, "description", null), e([y()], b7.prototype, "fieldInfoMap", null), e([y()], b7.prototype, "layer", null), e([y()], b7.prototype, "mediaInfos", null), e([y()], b7.prototype, "popupTemplate", null), e([y()], b7.prototype, "relatedInfos", null), e([y()], b7.prototype, "title", null), e([y({ type: M3 })], b7.prototype, "viewModel", void 0), e([y(), e2("esri/widgets/Feature/t9n/Feature")], b7.prototype, "messages", void 0), b7 = e([c2("esri.widgets.Feature.FeatureMedia")], b7);
var S4 = b7;

// node_modules/@arcgis/core/widgets/Feature/support/arcadeFeatureUtils.js
var n7 = ["$datastore", "$map", "$layer", "$aggregatedfeatures"];
var s14 = "esri.widgets.Feature.support.arcadeFeatureUtils";
var o7 = s2.getLogger(s14);
function c15(e14) {
  return "string" == typeof e14 ? ae(oe(e14)) : Array.isArray(e14) ? p8(e14) : "esri.arcade.Dictionary" === (e14 == null ? void 0 : e14.declaredClass) ? l6(e14) : e14;
}
function p8(e14) {
  return `<ul class="esri-widget__list">${e14.map((e15) => `<li>${"string" == typeof e15 ? ae(oe(e15)) : e15}</li>`).join("")}</ul>`;
}
function l6(e14) {
  return `<table class="esri-widget__table">${e14.keys().map((r9) => {
    const t12 = e14.field(r9);
    return `<tr><th>${r9}</th><td>${"string" == typeof t12 ? ae(oe(t12)) : t12}</td></tr>`;
  }).join("")}</table>`;
}
function u7({ aggregatedFeatures: e14, arcadeUtils: r9, featureSetVars: a10, context: i16, viewInfo: n13, map: s18, graphic: o10, interceptor: c21 }) {
  a10.forEach((a11) => {
    const p14 = a11.toLowerCase(), l10 = n13.sr, u11 = { map: s18, spatialReference: l10, interceptor: c21 };
    if ("$map" === p14 && (i16.vars[p14] = r9.convertMapToFeatureSetCollection(u11)), "$layer" === p14 && (i16.vars[p14] = r9.convertFeatureLayerToFeatureSet({ layer: o10.sourceLayer, spatialReference: l10, interceptor: c21 })), "$datastore" === p14 && (i16.vars[p14] = r9.convertServiceUrlToWorkspace({ url: o10.sourceLayer.url, spatialReference: l10, interceptor: c21 })), "$aggregatedfeatures" === p14) {
      const a12 = o10.layer, { fields: n14, objectIdField: s19, geometryType: l11, spatialReference: u12, displayField: f9 } = a12, g12 = new Ze({ fields: n14, objectIdField: s19, geometryType: l11, spatialReference: u12, displayField: f9, ..."feature" === a12.type ? { templates: a12.templates, typeIdField: a12.typeIdField, types: a12.types } : null, source: e14 });
      i16.vars[p14] = r9.convertFeatureLayerToFeatureSet({ layer: g12, spatialReference: u12, interceptor: c21 });
    }
  });
}
function f4() {
  return import("./arcadeUtils-XGMWCG7P.js");
}
function g8(e14) {
  return "createQuery" in e14 && "queryFeatures" in e14;
}
async function y7({ graphic: e14, view: r9 }) {
  const { isAggregate: t12, layer: a10 } = e14;
  if (!t12 || !a10 || "2d" !== (r9 == null ? void 0 : r9.type))
    return [];
  const i16 = await r9.whenLayerView(a10);
  if (!g8(i16))
    return [];
  const n13 = i16.createQuery(), s18 = e14.getObjectId();
  n13.aggregateIds = null != s18 ? [s18] : [];
  const { features: o10 } = await i16.queryFeatures(n13);
  return o10;
}
async function d8({ expressionInfo: e14, arcadeUtils: r9, interceptor: t12, spatialReference: a10, map: i16, graphic: s18, view: c21 }) {
  if (!(e14 == null ? void 0 : e14.expression))
    return null;
  const p14 = r9.createSyntaxTree(e14.expression), l10 = n7.filter((e15) => r9.hasVariable(p14, e15)), [f9] = await Promise.all([y7({ graphic: s18, view: c21 }), r9.loadScriptDependencies(p14, true, l10)]), g12 = r9.getViewInfo({ spatialReference: a10 }), d11 = r9.createExecContext(s18, g12, c21 == null ? void 0 : c21.timeZone);
  d11.interceptor = t12, d11.useAsync = true, u7({ aggregatedFeatures: f9, arcadeUtils: r9, featureSetVars: l10, context: d11, viewInfo: g12, map: i16, graphic: s18, interceptor: t12 });
  const m10 = r9.createFunction(p14, d11);
  return r9.executeAsyncFunction(m10, d11).catch((r10) => o7.error("arcade-execution-error", { error: r10, graphic: s18, expressionInfo: e14 }));
}
async function m7({ expressionInfos: e14, spatialReference: t12, graphic: a10, interceptor: i16, map: n13, view: s18 }) {
  if (!(e14 == null ? void 0 : e14.length))
    return {};
  const o10 = await f4(), p14 = {};
  for (const r9 of e14)
    p14[`expression/${r9.name}`] = d8({ expressionInfo: r9, arcadeUtils: o10, interceptor: i16, spatialReference: t12, map: n13, graphic: a10, view: s18 });
  const l10 = await v(p14), u11 = {};
  for (const r9 in l10)
    u11[r9] = c15(l10[r9].value);
  return u11;
}

// node_modules/@arcgis/core/widgets/Feature/FeatureExpression/FeatureExpressionViewModel.js
var _2 = 1;
var w7 = class extends g {
  constructor(t12) {
    super(t12), this._abortController = null, this.expressionInfo = null, this.graphic = null, this.contentElement = null, this.contentElementViewModel = null, this.interceptor = null, this.view = null, this._cancelQuery = () => {
      const { _abortController: t13 } = this;
      t13 && t13.abort(), this._abortController = null;
    }, this._createVM = () => {
      var _a, _b;
      const t13 = (_a = this.contentElement) == null ? void 0 : _a.type;
      (_b = this.contentElementViewModel) == null ? void 0 : _b.destroy();
      const e14 = "fields" === t13 ? new n5() : "media" === t13 ? new M3() : "text" === t13 ? new p5() : null;
      this._set("contentElementViewModel", e14);
    }, this._compile = async () => {
      this._cancelQuery();
      const t13 = new AbortController();
      this._abortController = t13, await this._compileExpression(), this._abortController === t13 && (this._abortController = null);
    }, this._compileThrottled = e5(this._compile, _2, this), this._compileExpression = async () => {
      const { expressionInfo: t13, graphic: e14, interceptor: o10, spatialReference: r9, map: n13, view: s18, _abortController: i16 } = this;
      if (!(t13 && e14 && r9 && n13))
        return void this._set("contentElement", null);
      const l10 = await f4();
      if (i16 !== this._abortController)
        return;
      const m10 = await d8({ arcadeUtils: l10, expressionInfo: t13, graphic: e14, interceptor: o10, map: n13, spatialReference: r9, view: s18 });
      if (!m10 || "esri.arcade.Dictionary" !== m10.declaredClass)
        return void this._set("contentElement", null);
      const h13 = await m10.castAsJsonAsync(i16 == null ? void 0 : i16.signal), d11 = h13 == null ? void 0 : h13.type, u11 = "media" === d11 ? I.fromJSON(h13) : "text" === d11 ? c5.fromJSON(h13) : "fields" === d11 ? c4.fromJSON(h13) : null;
      this._set("contentElement", u11);
    }, this.addHandles([d2(() => [this.expressionInfo, this.graphic, this.map, this.spatialReference, this.view], () => this._compileThrottled(), P), d2(() => [this.contentElement], () => this._createVM(), P)]);
  }
  initialize() {
    this.addHandles(this._compileThrottled);
  }
  destroy() {
    var _a;
    this._cancelQuery(), (_a = this.contentElementViewModel) == null ? void 0 : _a.destroy(), this._set("contentElementViewModel", null), this._set("contentElement", null);
  }
  get spatialReference() {
    var _a;
    return ((_a = this.view) == null ? void 0 : _a.spatialReference) ?? null;
  }
  set spatialReference(t12) {
    this._override("spatialReference", t12);
  }
  get state() {
    const { _abortController: t12, contentElement: e14, contentElementViewModel: o10 } = this;
    return t12 ? "loading" : e14 || o10 ? "ready" : "disabled";
  }
  get map() {
    var _a;
    return ((_a = this.view) == null ? void 0 : _a.map) ?? null;
  }
  set map(t12) {
    this._override("map", t12);
  }
};
e([y()], w7.prototype, "_abortController", void 0), e([y({ type: i6 })], w7.prototype, "expressionInfo", void 0), e([y({ type: c7 })], w7.prototype, "graphic", void 0), e([y({ readOnly: true })], w7.prototype, "contentElement", void 0), e([y({ readOnly: true })], w7.prototype, "contentElementViewModel", void 0), e([y()], w7.prototype, "interceptor", void 0), e([y()], w7.prototype, "spatialReference", null), e([y({ readOnly: true })], w7.prototype, "state", null), e([y()], w7.prototype, "map", null), e([y()], w7.prototype, "view", void 0), w7 = e([c2("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")], w7);
var j6 = w7;

// node_modules/@arcgis/core/widgets/Feature/FeatureExpression.js
var u8 = "esri-feature";
var g9 = { base: `${u8}-expression`, loadingSpinnerContainer: `${u8}__loading-container`, spinner: `${u8}__loading-spinner` };
var h8 = class extends O {
  constructor(e14, t12) {
    super(e14, t12), this._contentWidget = null, this.viewModel = new j6();
  }
  initialize() {
    this.addHandles(d2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.contentElementViewModel;
    }, () => this._setupExpressionWidget(), P));
  }
  destroy() {
    this._destroyContentWidget();
  }
  render() {
    var _a;
    const { state: e14 } = this.viewModel;
    return n("div", { class: g9.base }, "loading" === e14 ? this._renderLoading() : "disabled" === e14 ? null : (_a = this._contentWidget) == null ? void 0 : _a.render());
  }
  _renderLoading() {
    return n("div", { class: g9.loadingSpinnerContainer, key: "loading-container" }, n("span", { class: this.classes(i2.loadingIndicator, e6.rotating, g9.spinner) }));
  }
  _destroyContentWidget() {
    const { _contentWidget: e14 } = this;
    e14 && (e14.viewModel = null, e14.destroy()), this._contentWidget = null;
  }
  _setupExpressionWidget() {
    const { contentElementViewModel: e14, contentElement: t12 } = this.viewModel, o10 = t12 == null ? void 0 : t12.type;
    this._destroyContentWidget();
    const s18 = e14 ? "fields" === o10 ? new h6({ viewModel: e14 }) : "media" === o10 ? new S4({ viewModel: e14 }) : "text" === o10 ? new p6({ viewModel: e14 }) : null : null;
    this._contentWidget = s18, this.scheduleRender();
  }
};
e([y({ type: j6 })], h8.prototype, "viewModel", void 0), h8 = e([c2("esri.widgets.Feature.FeatureExpression")], h8);
var w8 = h8;

// node_modules/@arcgis/core/widgets/FeatureForm/featureFormUtils.js
var D4;
!function(e14) {
  e14.TOO_SHORT = "length-validation-error::too-short";
}(D4 || (D4 = {}));
var G3 = (e14) => {
  var _a;
  const t12 = [];
  if (e14.formTemplate) {
    const { description: r9, title: o10 } = e14.formTemplate;
    (_a = e14.fields) == null ? void 0 : _a.forEach((e15) => {
      const i16 = o10 && i(o10, e15.name), l10 = r9 && i(r9, e15.name);
      (i16 || l10) && t12.push(e15.name);
    });
  }
  return t12;
};

// node_modules/@arcgis/core/widgets/Feature/FeatureRelationship/FeatureRelationshipViewModel.js
var _3 = 100;
var g10 = class extends i5(s8(g)) {
  constructor(e14) {
    super(e14), this._loaded = false, this._queryAbortController = null, this._queryPageAbortController = null, this._queryFeatureCountAbortController = null, this.featuresPerPage = 10, this.description = null, this.graphic = null, this.layer = null, this.map = null, this.orderByFields = null, this.featureCount = 0, this.relationshipId = null, this.showAllEnabled = false, this.title = null, this._cancelQuery = () => {
      const { _queryAbortController: e15 } = this;
      e15 && e15.abort(), this._queryAbortController = null;
    }, this._cancelQueryFeatureCount = () => {
      const { _queryFeatureCountAbortController: e15 } = this;
      e15 && e15.abort(), this._queryFeatureCountAbortController = null;
    }, this._cancelQueryPage = () => {
      const { _queryPageAbortController: e15 } = this;
      e15 && e15.abort(), this._queryPageAbortController = null;
    }, this._queryController = async () => {
      this._cancelQuery();
      const e15 = new AbortController();
      this._queryAbortController = e15, await d(this._query()), this._queryAbortController === e15 && (this._queryAbortController = null);
    }, this._queryFeatureCountController = async () => {
      this._loaded = false, this._cancelQueryFeatureCount();
      const e15 = new AbortController();
      this._queryFeatureCountAbortController = e15, await d(this._queryFeatureCount()), this._queryFeatureCountAbortController === e15 && (this._queryFeatureCountAbortController = null), this._loaded = true;
    }, this._queryPageController = async () => {
      const e15 = new AbortController();
      this._queryPageAbortController = e15, await d(this._queryPage()), this._queryPageAbortController === e15 && (this._queryPageAbortController = null);
    }, this._queryDebounced = k2(this._queryController, _3), this._queryFeatureCountDebounced = k2(this._queryFeatureCountController, _3), this._queryPageDebounced = k2(this._queryPageController, _3), this._query = async () => {
      const { _queryAbortController: e15, relatedFeatures: t12 } = this;
      this.featureCount && (this._destroyRelatedFeatureViewModels(), this.featurePage = 1, t12.removeAll(), this.destroyed || t12.addMany(this._sliceFeatures(await this._queryRelatedFeatures({ signal: e15 == null ? void 0 : e15.signal }))));
    }, this.addHandles([d2(() => {
      var _a;
      return [this.displayCount, this.graphic, this.layer, (_a = this.layer) == null ? void 0 : _a.loaded, this.map, this.orderByFields, this.relationshipId, this.featuresPerPage, this.showAllEnabled, this.canQuery, this.featureCount];
    }, () => this._queryDebounced(), P), d2(() => [this.featurePage, this.showAllEnabled], () => this._queryPageDebounced()), d2(() => [this.layer, this.relationshipId, this.objectId, this.canQuery], () => this._queryFeatureCountDebounced())]);
  }
  destroy() {
    this._destroyRelatedFeatureViewModels(), this.relatedFeatures.removeAll(), this._cancelQuery(), this._cancelQueryFeatureCount(), this._cancelQueryPage();
  }
  set featurePage(e14) {
    const { featuresPerPage: t12, featureCount: r9 } = this, o10 = 1, l10 = Math.ceil(r9 / t12) || 1;
    this._set("featurePage", Math.min(Math.max(e14, o10), l10));
  }
  get featurePage() {
    return this._get("featurePage");
  }
  get orderByFieldsFixedCasing() {
    const { orderByFields: e14, relatedLayer: t12 } = this;
    return e14 && (t12 == null ? void 0 : t12.loaded) ? e14.map((e15) => {
      const r9 = e15.clone();
      return r9.field = v5(e15.field, t12), r9;
    }) : e14 ?? [];
  }
  get supportsCacheHint() {
    var _a, _b, _c;
    return !!((_c = (_b = (_a = this.layer) == null ? void 0 : _a.capabilities) == null ? void 0 : _b.queryRelated) == null ? void 0 : _c.supportsCacheHint);
  }
  get canLoad() {
    return !!this.map && "number" == typeof this.relationshipId && "number" == typeof this.objectId;
  }
  get canQuery() {
    var _a, _b;
    const e14 = (_b = (_a = this.layer) == null ? void 0 : _a.capabilities) == null ? void 0 : _b.queryRelated;
    return !!(this.relatedLayer && this.relationship && "number" == typeof this.relationshipId && "number" == typeof this.objectId && (e14 == null ? void 0 : e14.supportsCount) && (e14 == null ? void 0 : e14.supportsPagination));
  }
  get itemDescriptionFieldName() {
    var _a;
    return ((_a = this.orderByFieldsFixedCasing[0]) == null ? void 0 : _a.field) || null;
  }
  set displayCount(e14) {
    const t12 = 0, r9 = 10;
    this._set("displayCount", Math.min(Math.max(e14, t12), r9));
  }
  get displayCount() {
    return this._get("displayCount");
  }
  get objectId() {
    var _a, _b;
    return (this.objectIdField && ((_b = (_a = this.graphic) == null ? void 0 : _a.attributes) == null ? void 0 : _b[this.objectIdField])) ?? null;
  }
  get objectIdField() {
    var _a;
    return ((_a = this.layer) == null ? void 0 : _a.objectIdField) || null;
  }
  get relatedFeatures() {
    return this._get("relatedFeatures") || new V();
  }
  get relatedLayer() {
    const { layer: e14, map: t12, relationship: r9 } = this;
    return (e14 == null ? void 0 : e14.loaded) && t12 && r9 ? Te(t12, e14, r9) ?? null : null;
  }
  get relationship() {
    var _a;
    const { relationshipId: e14, layer: t12 } = this;
    return "number" == typeof e14 ? ((_a = t12 == null ? void 0 : t12.relationships) == null ? void 0 : _a.find(({ id: t13 }) => t13 === e14)) ?? null : null;
  }
  get relatedFeatureViewModels() {
    return this._get("relatedFeatureViewModels") || new V();
  }
  get state() {
    const { _queryAbortController: e14, _queryFeatureCountAbortController: t12, _queryPageAbortController: r9, canQuery: o10, _loaded: l10, canLoad: a10 } = this;
    return t12 || a10 && !l10 ? "loading" : e14 || r9 ? "querying" : o10 ? "ready" : "disabled";
  }
  getRelatedFeatureByObjectId(e14) {
    return this.relatedFeatures.find((t12) => t12.getObjectId() === e14);
  }
  _destroyRelatedFeatureViewModels() {
    var _a;
    (_a = this.relatedFeatureViewModels) == null ? void 0 : _a.forEach((e14) => !e14.destroyed && e14.destroy()), this.relatedFeatureViewModels.removeAll();
  }
  async _queryFeatureCount() {
    const { layer: e14, relatedLayer: t12, relationshipId: r9, objectId: o10, _queryFeatureCountAbortController: l10, canQuery: a10, supportsCacheHint: s18 } = this;
    if (await (e14 == null ? void 0 : e14.load()), await (t12 == null ? void 0 : t12.load()), !a10 || !e14 || !t12)
      return void this._set("featureCount", 0);
    const i16 = t12.createQuery(), n13 = new d4({ cacheHint: s18, relationshipId: r9, returnGeometry: false, objectIds: [o10], where: i16.where ?? void 0 }), u11 = await e14.queryRelatedFeaturesCount(n13, { signal: l10 == null ? void 0 : l10.signal });
    this._set("featureCount", u11[o10] || 0);
  }
  _sliceFeatures(e14) {
    const { showAllEnabled: t12, displayCount: r9 } = this;
    return t12 ? e14 : r9 ? e14.slice(0, r9) : [];
  }
  async _queryPage() {
    const { relatedFeatures: e14, featurePage: t12, showAllEnabled: r9, _queryPageAbortController: o10, featureCount: l10 } = this;
    !r9 || t12 < 2 || !l10 || e14.addMany(await this._queryRelatedFeatures({ signal: o10 == null ? void 0 : o10.signal }));
  }
  async _queryRelatedFeatures(e14) {
    var _a;
    const { orderByFieldsFixedCasing: t12, showAllEnabled: r9, featuresPerPage: l10, displayCount: a10, layer: s18, relationshipId: i16, featurePage: n13, featureCount: u11, relatedLayer: d11, supportsCacheHint: y11 } = this, { canQuery: h13, objectId: c21 } = this;
    if (!h13 || !s18 || !d11)
      return [];
    const C5 = r9 ? ((n13 - 1) * l10 + u11) % u11 : 0, _5 = r9 ? l10 : a10, g12 = d11.objectIdField, F9 = [...t12.map((e15) => e15.field), ...G3(d11), g12].filter(k), m10 = t12.map((e15) => `${e15.field} ${e15.order}`), f9 = d11.createQuery(), q4 = new d4({ orderByFields: m10, start: C5, num: _5, outFields: F9, cacheHint: y11, relationshipId: i16, returnGeometry: false, objectIds: [c21], where: f9.where ?? void 0 }), A7 = await s18.queryRelatedFeatures(q4, { signal: e14 == null ? void 0 : e14.signal }), w11 = ((_a = A7[c21]) == null ? void 0 : _a.features) || [];
    return w11.forEach((e15) => {
      e15.sourceLayer = d11, e15.layer = d11;
    }), w11;
  }
};
e([y()], g10.prototype, "_loaded", void 0), e([y()], g10.prototype, "_queryAbortController", void 0), e([y()], g10.prototype, "_queryPageAbortController", void 0), e([y()], g10.prototype, "_queryFeatureCountAbortController", void 0), e([y({ value: 1 })], g10.prototype, "featurePage", null), e([y()], g10.prototype, "featuresPerPage", void 0), e([y({ readOnly: true })], g10.prototype, "orderByFieldsFixedCasing", null), e([y({ readOnly: true })], g10.prototype, "supportsCacheHint", null), e([y({ readOnly: true })], g10.prototype, "canLoad", null), e([y({ readOnly: true })], g10.prototype, "canQuery", null), e([y()], g10.prototype, "description", void 0), e([y({ readOnly: true })], g10.prototype, "itemDescriptionFieldName", null), e([y({ value: 3 })], g10.prototype, "displayCount", null), e([y({ type: c7 })], g10.prototype, "graphic", void 0), e([y()], g10.prototype, "layer", void 0), e([y()], g10.prototype, "map", void 0), e([y({ readOnly: true })], g10.prototype, "objectId", null), e([y({ readOnly: true })], g10.prototype, "objectIdField", null), e([y()], g10.prototype, "orderByFields", void 0), e([y({ readOnly: true })], g10.prototype, "relatedFeatures", null), e([y({ readOnly: true })], g10.prototype, "relatedLayer", null), e([y({ readOnly: true })], g10.prototype, "relationship", null), e([y()], g10.prototype, "featureCount", void 0), e([y({ readOnly: true })], g10.prototype, "relatedFeatureViewModels", null), e([y()], g10.prototype, "relationshipId", void 0), e([y()], g10.prototype, "showAllEnabled", void 0), e([y()], g10.prototype, "state", null), e([y()], g10.prototype, "title", void 0), e([y()], g10.prototype, "getRelatedFeatureByObjectId", null), g10 = e([c2("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")], g10);
var F6 = g10;

// node_modules/@arcgis/core/widgets/Feature/FeatureRelationship.js
var f5 = "esri-feature";
var b8 = `${f5}-relationship`;
var y8 = { base: b8, listContainer: `${b8}__list`, listItem: `${b8}__list-item`, listItemHidden: `${b8}__list-item--hidden`, listContainerQuerying: `${b8}__list--querying`, featureObserver: `${f5}__feature-observer`, stickySpinnerContainer: `${f5}__sticky-loading-container`, loadingSpinnerContainer: `${f5}__loading-container`, spinner: `${f5}__loading-spinner` };
var F7 = { title: true, description: true };
var I9 = class extends O {
  constructor(e14, t12) {
    super(e14, t12), this._featureElementInfo = null, this._relatedFeatureIntersectionObserverNode = null, this._relatedFeatureIntersectionObserver = new IntersectionObserver(([e15]) => {
      (e15 == null ? void 0 : e15.isIntersecting) && this._increaseFeaturePage();
    }, { root: window.document }), this.headingLevel = 2, this.viewModel = new F6(), this.messages = null, this.messagesCommon = null, this.visibleElements = { ...F7 }, this._increaseFeaturePage = () => {
      const { state: e15, showAllEnabled: t13, relatedFeatures: s18, featuresPerPage: r9, featurePage: i16 } = this.viewModel;
      "ready" === e15 && t13 && s18.length >= r9 * i16 && this.viewModel.featurePage++;
    };
  }
  initialize() {
    this._featureElementInfo = new l3(), this.addHandles([d2(() => [this.viewModel.description, this.viewModel.title, this.headingLevel], () => this._setupFeatureElementInfo(), P), d2(() => [this.viewModel.state, this.viewModel.showAllEnabled, this._relatedFeatureIntersectionObserverNode], () => this._handleRelatedFeatureObserverChange()), v2(() => this.viewModel.relatedFeatureViewModels, "change", () => this._setupRelatedFeatureViewModels())]);
  }
  loadDependencies() {
    return r3({ icon: () => import("./calcite-icon-XJ35OAWQ.js"), list: () => import("./calcite-list-TSNRA7E7.js"), "list-item": () => import("./calcite-list-item-5JFMHRNV.js"), notice: () => import("./calcite-notice-BMEFLJ33.js") });
  }
  destroy() {
    this._unobserveRelatedFeatureObserver(), this._featureElementInfo = u(this._featureElementInfo);
  }
  get displayShowAllButton() {
    const { showAllEnabled: e14, featureCount: t12, displayCount: s18, state: r9 } = this.viewModel;
    return !e14 && !!t12 && "ready" === r9 && (t12 > s18 || 0 === s18);
  }
  get displayListItems() {
    return this.displayShowAllButton || this.viewModel.relatedFeatureViewModels.length > 0;
  }
  get description() {
    return this.viewModel.description;
  }
  set description(e14) {
    this.viewModel.description = e14;
  }
  get featureCountDescription() {
    const { messages: e14 } = this, { featureCount: t12 } = this.viewModel;
    return s6(e14 == null ? void 0 : e14.numberRecords, { number: t12 });
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e14) {
    this.viewModel.title = e14;
  }
  castVisibleElements(e14) {
    return { ...F7, ...e14 };
  }
  render() {
    var _a;
    const { state: e14 } = this.viewModel;
    return n("div", { class: this.classes(y8.base, e6.widget) }, (_a = this._featureElementInfo) == null ? void 0 : _a.render(), "loading" === e14 ? this._renderLoading() : "disabled" === e14 ? this._renderRelationshipNotFound() : this._renderRelatedFeatures());
  }
  _renderStickyLoading() {
    return "querying" === this.viewModel.state ? n("div", { class: y8.stickySpinnerContainer, key: "sticky-loader" }, this._renderLoadingIcon()) : null;
  }
  _renderLoadingIcon() {
    return n("span", { class: this.classes(i2.loadingIndicator, e6.rotating, y8.spinner) });
  }
  _renderLoading() {
    return n("div", { class: y8.loadingSpinnerContainer, key: "loading-container" }, this._renderLoadingIcon());
  }
  _renderShowAllIconNode() {
    return n("calcite-icon", { icon: "list", scale: "s", slot: "content-end" });
  }
  _renderChevronIconNode() {
    const e14 = v3(this.container) ? "chevron-left" : "chevron-right";
    return n("calcite-icon", { icon: e14, scale: "s", slot: "content-end" });
  }
  _renderRelatedFeature(e14) {
    var _a;
    const { itemDescriptionFieldName: t12 } = this.viewModel, s18 = e14.title;
    e14.description = t12 && ((_a = e14.formattedAttributes) == null ? void 0 : _a.global[t12]);
    const r9 = "loading" === e14.state;
    return n("calcite-list-item", { class: this.classes(y8.listItem, { [y8.listItemHidden]: r9 }), description: e14.description ?? "", key: e14.uid, label: s18, onCalciteListItemSelect: () => this.emit("select-record", { featureViewModel: e14 }) }, this._renderChevronIconNode());
  }
  _renderShowAllListItem() {
    var _a;
    return this.displayShowAllButton ? n("calcite-list-item", { description: this.featureCountDescription, key: "show-all-item", label: (_a = this.messages) == null ? void 0 : _a.showAll, onCalciteListItemSelect: () => this.emit("show-all-records") }, this._renderShowAllIconNode()) : null;
  }
  _renderNoRelatedFeaturesMessage() {
    var _a;
    return n("calcite-notice", { icon: "information", key: "no-related-features-message", kind: "brand", open: true, scale: "s", width: "full" }, n("div", { slot: "message" }, (_a = this.messages) == null ? void 0 : _a.noRelatedFeatures));
  }
  _renderFeatureObserver() {
    return n("div", { afterCreate: this._relatedFeatureIntersectionObserverCreated, bind: this, class: y8.featureObserver, key: "feature-observer" });
  }
  _renderList() {
    const { relatedFeatureViewModels: e14 } = this.viewModel;
    return n("calcite-list", null, e14.toArray().map((e15) => this._renderRelatedFeature(e15)), this._renderShowAllListItem());
  }
  _renderRelatedFeatures() {
    const { displayListItems: e14 } = this, { state: t12 } = this.viewModel;
    return n("div", { class: this.classes(y8.listContainer, { [y8.listContainerQuerying]: "querying" === t12 }), key: "list-container" }, e14 ? this._renderList() : "ready" === t12 ? this._renderNoRelatedFeaturesMessage() : null, this._renderStickyLoading(), this._renderFeatureObserver());
  }
  _renderRelationshipNotFound() {
    var _a;
    return n("calcite-notice", { icon: "exclamation-mark-triangle", key: "relationship-not-found", kind: "danger", open: true, scale: "s", width: "full" }, n("div", { slot: "message" }, (_a = this.messages) == null ? void 0 : _a.relationshipNotFound));
  }
  _setupRelatedFeatureViewModels() {
    const { relatedFeatureViewModels: e14 } = this.viewModel, t12 = "related-feature-viewmodels";
    this.removeHandles(t12), e14 == null ? void 0 : e14.forEach((e15) => {
      this.addHandles(d2(() => [e15.title, e15.state], () => this.scheduleRender(), P), t12);
    }), this.scheduleRender();
  }
  _setupFeatureElementInfo() {
    var _a;
    const { headingLevel: e14, visibleElements: t12 } = this, s18 = t12.description && this.description, r9 = t12.title && this.title;
    (_a = this._featureElementInfo) == null ? void 0 : _a.set({ description: s18, title: r9, headingLevel: e14 });
  }
  async _handleRelatedFeatureObserverChange() {
    this._unobserveRelatedFeatureObserver();
    const { state: e14, showAllEnabled: t12 } = this.viewModel;
    await A(0), this._relatedFeatureIntersectionObserverNode && "ready" === e14 && t12 && this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode);
  }
  _relatedFeatureIntersectionObserverCreated(e14) {
    this._relatedFeatureIntersectionObserverNode = e14;
  }
  _unobserveRelatedFeatureObserver() {
    this._relatedFeatureIntersectionObserverNode && this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode);
  }
};
e([y()], I9.prototype, "_relatedFeatureIntersectionObserverNode", void 0), e([y({ readOnly: true })], I9.prototype, "displayShowAllButton", null), e([y({ readOnly: true })], I9.prototype, "displayListItems", null), e([y()], I9.prototype, "description", null), e([y({ readOnly: true })], I9.prototype, "featureCountDescription", null), e([y()], I9.prototype, "headingLevel", void 0), e([y()], I9.prototype, "title", null), e([y({ type: F6 })], I9.prototype, "viewModel", void 0), e([y(), e2("esri/widgets/Feature/t9n/Feature")], I9.prototype, "messages", void 0), e([y(), e2("esri/t9n/common")], I9.prototype, "messagesCommon", void 0), e([y()], I9.prototype, "visibleElements", void 0), e([s7("visibleElements")], I9.prototype, "castVisibleElements", null), I9 = e([c2("esri.widgets.Feature.FeatureRelationship")], I9);
var M5 = I9;

// node_modules/@arcgis/core/arcade/featureset/support/FeatureSetQueryInterceptor.js
var e10 = class {
  constructor(e14, a10) {
    this.preLayerQueryCallback = e14, this.preRequestCallback = a10, this.preLayerQueryCallback || (this.preLayerQueryCallback = (e15) => {
    }), this.preRequestCallback || (this.preLayerQueryCallback = (e15) => {
    });
  }
};

// node_modules/@arcgis/core/widgets/Feature/FeatureViewModel.js
var Q2;
var G4 = 1;
var z2 = "content-view-models";
var J2 = "relationship-view-models";
var K2 = { attachmentsContent: true, chartAnimation: true, customContent: true, expressionContent: true, fieldsContent: true, mediaContent: true, textContent: true, relationshipContent: true };
var W2 = Q2 = class extends s8(g) {
  constructor(e14) {
    super(e14), this._error = null, this._featureAbortController = null, this._graphicChangedThrottled = e5(this._graphicChanged, G4, this), this._expressionAttributes = null, this._graphicExpressionAttributes = null, this.abilities = { ...K2 }, this.content = null, this.contentViewModels = [], this.description = null, this.defaultPopupTemplateEnabled = false, this.formattedAttributes = null, this.lastEditInfo = null, this.relatedInfos = /* @__PURE__ */ new Map(), this.title = "", this.view = null, this._isAllowedContentType = (e15) => {
      const { abilities: t12 } = this;
      return "attachments" === e15.type && !!t12.attachmentsContent || "custom" === e15.type && !!t12.customContent || "fields" === e15.type && !!t12.fieldsContent || "media" === e15.type && !!t12.mediaContent || "text" === e15.type && !!t12.textContent || "expression" === e15.type && !!t12.expressionContent || "relationship" === e15.type && !!t12.relationshipContent;
    }, this.addHandles(d2(() => [this.graphic, this._effectivePopupTemplate, this.abilities], () => this._graphicChangedThrottled(), P));
  }
  initialize() {
    this.addHandles(this._graphicChangedThrottled);
  }
  destroy() {
    this._clear(), this._cancelFeatureQuery(), this._error = null, this.graphic = null, this._destroyContentViewModels(), this.relatedInfos.clear();
  }
  get _effectivePopupTemplate() {
    return null != this.graphic ? this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled) : null;
  }
  get _fieldInfoMap() {
    return re(ie(this._effectivePopupTemplate), this._sourceLayer);
  }
  get _sourceLayer() {
    return E3(this.graphic);
  }
  castAbilities(e14) {
    return { ...K2, ...e14 };
  }
  get isTable() {
    var _a;
    return ((_a = this._sourceLayer) == null ? void 0 : _a.isTable) || false;
  }
  get state() {
    return this.graphic ? this._error ? "error" : this.waitingForContent ? "loading" : "ready" : "disabled";
  }
  set graphic(e14) {
    this._set("graphic", e14 ? e14.clone() : null);
  }
  get spatialReference() {
    var _a;
    return ((_a = this.view) == null ? void 0 : _a.spatialReference) ?? null;
  }
  set spatialReference(e14) {
    this._override("spatialReference", e14);
  }
  get map() {
    var _a;
    return ((_a = this.view) == null ? void 0 : _a.map) || null;
  }
  set map(e14) {
    this._override("map", e14);
  }
  get waitingForContent() {
    return !!this._featureAbortController;
  }
  setActiveMedia(e14, t12) {
    const i16 = this.contentViewModels[e14];
    i16 instanceof M3 && i16.setActiveMedia(t12);
  }
  nextMedia(e14) {
    const t12 = this.contentViewModels[e14];
    t12 instanceof M3 && t12.next();
  }
  previousMedia(e14) {
    const t12 = this.contentViewModels[e14];
    t12 instanceof M3 && t12.previous();
  }
  async updateGeometry() {
    var _a;
    const { graphic: e14, spatialReference: t12, _sourceLayer: i16 } = this;
    await (i16 == null ? void 0 : i16.load());
    const r9 = i16 == null ? void 0 : i16.objectIdField;
    if (!r9 || !e14 || !i16)
      return;
    const o10 = (_a = e14 == null ? void 0 : e14.attributes) == null ? void 0 : _a[r9];
    if (null == o10)
      return;
    const s18 = [o10];
    if (!e14.geometry) {
      const r10 = await se({ layer: i16, graphic: e14, outFields: [], objectIds: s18, returnGeometry: true, spatialReference: t12 }), o11 = r10 == null ? void 0 : r10.geometry;
      o11 && (e14.geometry = o11);
    }
  }
  _clear() {
    this._set("title", ""), this._set("content", null), this._set("formattedAttributes", null);
  }
  async _graphicChanged() {
    this._cancelFeatureQuery(), this._error = null, this._clear();
    const { graphic: e14 } = this;
    if (!e14)
      return;
    const t12 = new AbortController();
    this._featureAbortController = t12;
    try {
      await this._queryFeature({ signal: t12.signal });
    } catch (i16) {
      b(i16) || (this._error = i16, s2.getLogger(this).error("error", "The popupTemplate could not be displayed for this feature.", { error: i16, graphic: e14, popupTemplate: this._effectivePopupTemplate }));
    }
    this._featureAbortController === t12 && (this._featureAbortController = null);
  }
  _cancelFeatureQuery() {
    const { _featureAbortController: e14 } = this;
    e14 && e14.abort(), this._featureAbortController = null;
  }
  _compileContentElement(e14, t12) {
    return "attachments" === e14.type ? this._compileAttachments(e14, t12) : "custom" === e14.type ? this._compileCustom(e14, t12) : "fields" === e14.type ? this._compileFields(e14, t12) : "media" === e14.type ? this._compileMedia(e14, t12) : "text" === e14.type ? this._compileText(e14, t12) : "expression" === e14.type ? this._compileExpression(e14, t12) : "relationship" === e14.type ? this._compileRelationship(e14, t12) : void 0;
  }
  _compileContent(e14) {
    if (this._destroyContentViewModels(), this.graphic)
      return Array.isArray(e14) ? e14.filter(this._isAllowedContentType).map((e15, t12) => this._compileContentElement(e15, t12)).filter(k) : "string" == typeof e14 ? this._compileText(new c5({ text: e14 }), 0).text : e14;
  }
  _destroyContentViewModels() {
    this.removeHandles(J2), this.removeHandles(z2), this.contentViewModels.forEach((e14) => e14 && !e14.destroyed && e14.destroy()), this._set("contentViewModels", []);
  }
  _matchesFeature(e14, t12) {
    var _a;
    const i16 = (_a = e14 == null ? void 0 : e14.graphic) == null ? void 0 : _a.getObjectId(), r9 = t12 == null ? void 0 : t12.getObjectId();
    return null != i16 && null != r9 && i16 === r9;
  }
  _setRelatedFeaturesViewModels({ relatedFeatureViewModels: e14, relatedFeatures: t12, map: i16 }) {
    const { view: r9, spatialReference: o10 } = this;
    t12 == null ? void 0 : t12.filter(Boolean).forEach((t13) => {
      e14.find((e15) => this._matchesFeature(e15, t13)) || e14.add(new Q2({ abilities: { relationshipContent: false }, map: i16, view: r9, spatialReference: o10, graphic: t13 }));
    }), e14.forEach((i17) => {
      const r10 = t12 == null ? void 0 : t12.find((e15) => this._matchesFeature(i17, e15));
      r10 || e14.remove(i17);
    });
  }
  _setExpressionContentVM(e14, t12) {
    const i16 = this.formattedAttributes, { contentElement: r9, contentElementViewModel: o10 } = e14, s18 = r9 == null ? void 0 : r9.type;
    o10 && s18 && ("fields" === s18 && (this._createFieldsFormattedAttributes({ contentElement: r9, contentElementIndex: t12, formattedAttributes: i16 }), o10.set(this._createFieldsVMParams(r9, t12))), "media" === s18 && (this._createMediaFormattedAttributes({ contentElement: r9, contentElementIndex: t12, formattedAttributes: i16 }), o10.set(this._createMediaVMParams(r9, t12))), "text" === s18 && o10.set(this._createTextVMParams(r9)));
  }
  _compileRelationship(e14, t12) {
    const { displayCount: i16, orderByFields: r9, relationshipId: o10, title: s18, description: n13 } = e14, { _sourceLayer: a10, graphic: l10, map: p14 } = this;
    if (!J(a10))
      return;
    const d11 = new F6({ displayCount: i16, graphic: l10, orderByFields: r9, relationshipId: o10, layer: a10, map: p14, ...this._compileTitleAndDesc({ title: s18, description: n13 }) });
    return this.contentViewModels[t12] = d11, this.addHandles(v2(() => d11.relatedFeatures, "change", () => this._setRelatedFeaturesViewModels(d11)), J2), e14;
  }
  _compileExpression(e14, t12) {
    const { expressionInfo: i16 } = e14, { graphic: r9, map: o10, spatialReference: s18, view: n13 } = this, a10 = new j6({ expressionInfo: i16, graphic: r9, interceptor: Q2.interceptor, map: o10, spatialReference: s18, view: n13 });
    return this.contentViewModels[t12] = a10, this.addHandles(d2(() => a10.contentElementViewModel, () => this._setExpressionContentVM(a10, t12), P), z2), e14;
  }
  _compileAttachments(e14, t12) {
    const { graphic: i16 } = this, { description: r9, title: o10 } = e14;
    return this.contentViewModels[t12] = new c9({ graphic: i16, ...this._compileTitleAndDesc({ title: o10, description: r9 }) }), e14;
  }
  _compileCustom(e14, t12) {
    const { graphic: i16 } = this, { creator: r9, destroyer: o10 } = e14;
    return this.contentViewModels[t12] = new p5({ graphic: i16, creator: r9, destroyer: o10 }), e14;
  }
  _compileTitleAndDesc({ title: e14, description: t12 }) {
    const { _fieldInfoMap: i16, _sourceLayer: r9, graphic: o10, formattedAttributes: s18 } = this, n13 = o10 == null ? void 0 : o10.attributes, a10 = this._expressionAttributes, l10 = s18.global;
    return { title: D3({ attributes: n13, fieldInfoMap: i16, globalAttributes: l10, expressionAttributes: a10, layer: r9, text: e14 }), description: D3({ attributes: n13, fieldInfoMap: i16, globalAttributes: l10, expressionAttributes: a10, layer: r9, text: t12 }) };
  }
  _createFieldsVMParams(e14, t12) {
    const i16 = this._effectivePopupTemplate, r9 = this.formattedAttributes, o10 = { ...r9 == null ? void 0 : r9.global, ...r9 == null ? void 0 : r9.content[t12] }, s18 = (e14 == null ? void 0 : e14.fieldInfos) || (i16 == null ? void 0 : i16.fieldInfos), n13 = s18 == null ? void 0 : s18.filter(({ fieldName: e15 }) => M(e15) || de(e15) || o10.hasOwnProperty(e15)), a10 = i16 == null ? void 0 : i16.expressionInfos, { description: l10, title: p14 } = e14;
    return { attributes: o10, expressionInfos: a10, fieldInfos: n13, ...this._compileTitleAndDesc({ title: p14, description: l10 }) };
  }
  _compileFields(e14, t12) {
    const i16 = e14.clone(), r9 = new n5(this._createFieldsVMParams(e14, t12));
    return this.contentViewModels[t12] = r9, i16.fieldInfos = r9.formattedFieldInfos.slice(0), i16;
  }
  _createMediaVMParams(e14, t12) {
    const { abilities: i16, graphic: r9, _fieldInfoMap: o10, _effectivePopupTemplate: s18, relatedInfos: n13, _sourceLayer: a10, _expressionAttributes: l10 } = this, p14 = this.formattedAttributes, c21 = (r9 == null ? void 0 : r9.attributes) ?? {}, { description: d11, mediaInfos: u11, title: h13 } = e14;
    return { abilities: { chartAnimation: i16.chartAnimation }, activeMediaInfoIndex: e14.activeMediaInfoIndex || 0, attributes: c21, isAggregate: r9 == null ? void 0 : r9.isAggregate, layer: a10, fieldInfoMap: o10, formattedAttributes: { ...p14 == null ? void 0 : p14.global, ...p14 == null ? void 0 : p14.content[t12] }, expressionAttributes: l10, mediaInfos: u11, popupTemplate: s18, relatedInfos: n13, ...this._compileTitleAndDesc({ title: h13, description: d11 }) };
  }
  _compileMedia(e14, t12) {
    const i16 = e14.clone(), r9 = new M3(this._createMediaVMParams(e14, t12));
    return i16.mediaInfos = r9.formattedMediaInfos.slice(0), this.contentViewModels[t12] = r9, i16;
  }
  _createTextVMParams(e14) {
    var _a;
    const { graphic: t12, _fieldInfoMap: i16, _sourceLayer: r9, _expressionAttributes: o10 } = this;
    if (e14 && e14.text) {
      const s18 = (t12 == null ? void 0 : t12.attributes) ?? {}, n13 = ((_a = this.formattedAttributes) == null ? void 0 : _a.global) ?? {};
      e14.text = D3({ attributes: s18, fieldInfoMap: i16, globalAttributes: n13, expressionAttributes: o10, layer: r9, text: e14.text });
    }
    return { graphic: t12, creator: e14.text };
  }
  _compileText(e14, t12) {
    const i16 = e14.clone();
    return this.contentViewModels[t12] = new p5(this._createTextVMParams(i16)), i16;
  }
  _compileLastEditInfo() {
    const { _effectivePopupTemplate: e14, _sourceLayer: t12, graphic: i16, view: r9 } = this;
    if (!e14)
      return;
    const { lastEditInfoEnabled: o10 } = e14, s18 = t12 == null ? void 0 : t12.editFieldsInfo;
    return o10 && s18 ? ne(s18, i16 == null ? void 0 : i16.attributes, (r9 == null ? void 0 : r9.timeZone) ?? o2, t12) : void 0;
  }
  _compileTitle(e14) {
    var _a;
    const { _fieldInfoMap: t12, _sourceLayer: i16, graphic: r9, _expressionAttributes: o10 } = this, s18 = (r9 == null ? void 0 : r9.attributes) ?? {}, n13 = ((_a = this.formattedAttributes) == null ? void 0 : _a.global) ?? {};
    return D3({ attributes: s18, fieldInfoMap: t12, globalAttributes: n13, expressionAttributes: o10, layer: i16, text: e14 });
  }
  async _getTitle() {
    const { _effectivePopupTemplate: e14, graphic: t12 } = this;
    if (!t12)
      return null;
    const i16 = e14 == null ? void 0 : e14.title;
    return x3(i16, { graphic: t12 });
  }
  async _getContent() {
    const { _effectivePopupTemplate: e14, graphic: t12 } = this;
    if (!t12)
      return null;
    const i16 = e14 == null ? void 0 : e14.content;
    return x3(i16, { graphic: t12 });
  }
  async _queryFeature(e14) {
    const { _featureAbortController: t12, _sourceLayer: i16, graphic: r9, _effectivePopupTemplate: o10 } = this, s18 = this.map, n13 = this.view, a10 = this.spatialReference;
    if (t12 !== this._featureAbortController || !r9)
      return;
    await ce({ graphic: r9, popupTemplate: o10, layer: i16, spatialReference: a10 }, e14);
    const { content: { value: p14 }, title: { value: c21 } } = await v({ content: this._getContent(), title: this._getTitle() }), { expressionAttributes: { value: d11 } } = await v({ checkForRelatedFeatures: this._checkForRelatedFeatures(e14), expressionAttributes: m7({ expressionInfos: o10 == null ? void 0 : o10.expressionInfos, spatialReference: a10, graphic: r9, map: s18, interceptor: Q2.interceptor, view: n13 }) });
    t12 === this._featureAbortController && r9 && (this._expressionAttributes = d11, this._graphicExpressionAttributes = { ...r9.attributes, ...d11 }, this._set("formattedAttributes", this._createFormattedAttributes(p14)), this._set("title", this._compileTitle(c21)), this._set("lastEditInfo", this._compileLastEditInfo() || null), this._set("content", this._compileContent(p14) || null));
  }
  _createMediaFormattedAttributes({ contentElement: e14, contentElementIndex: t12, formattedAttributes: i16 }) {
    var _a;
    const { _effectivePopupTemplate: r9, graphic: o10, relatedInfos: s18, _sourceLayer: n13, _fieldInfoMap: a10, _graphicExpressionAttributes: l10 } = this;
    i16.content[t12] = ue({ fieldInfos: r9 == null ? void 0 : r9.fieldInfos, graphic: o10, attributes: { ...l10, ...e14.attributes }, layer: n13, fieldInfoMap: a10, relatedInfos: s18, timeZone: ((_a = this.view) == null ? void 0 : _a.timeZone) ?? o2 });
  }
  _createFieldsFormattedAttributes({ contentElement: e14, contentElementIndex: t12, formattedAttributes: i16 }) {
    var _a;
    if (e14.fieldInfos) {
      const { graphic: r9, relatedInfos: o10, _sourceLayer: s18, _fieldInfoMap: n13, _graphicExpressionAttributes: a10 } = this;
      i16.content[t12] = ue({ fieldInfos: e14.fieldInfos, graphic: r9, attributes: { ...a10, ...e14.attributes }, layer: s18, fieldInfoMap: n13, relatedInfos: o10, timeZone: ((_a = this.view) == null ? void 0 : _a.timeZone) ?? o2 });
    }
  }
  _createFormattedAttributes(e14) {
    var _a;
    const { _effectivePopupTemplate: t12, graphic: i16, relatedInfos: r9, _sourceLayer: o10, _fieldInfoMap: s18, _graphicExpressionAttributes: n13 } = this, a10 = t12 == null ? void 0 : t12.fieldInfos, l10 = { global: ue({ fieldInfos: a10, graphic: i16, attributes: n13, layer: o10, fieldInfoMap: s18, relatedInfos: r9, timeZone: ((_a = this.view) == null ? void 0 : _a.timeZone) ?? o2 }), content: [] };
    return Array.isArray(e14) && e14.forEach((e15, t13) => {
      "fields" === e15.type && this._createFieldsFormattedAttributes({ contentElement: e15, contentElementIndex: t13, formattedAttributes: l10 }), "media" === e15.type && this._createMediaFormattedAttributes({ contentElement: e15, contentElementIndex: t13, formattedAttributes: l10 });
    }), l10;
  }
  _checkForRelatedFeatures(e14) {
    const { graphic: t12, _effectivePopupTemplate: i16 } = this;
    return this._queryRelatedInfos(t12, ie(i16), e14);
  }
  async _queryRelatedInfos(e14, t12, i16) {
    const { relatedInfos: r9, _sourceLayer: o10 } = this;
    r9.clear();
    const s18 = null != (o10 == null ? void 0 : o10.associatedLayer) ? await (o10 == null ? void 0 : o10.associatedLayer.load(i16)) : o10;
    if (!s18 || !e14)
      return;
    const n13 = t12.filter((e15) => e15 && de(e15.fieldName));
    if (!(n13 == null ? void 0 : n13.length))
      return;
    t12.forEach((e15) => this._configureRelatedInfo(e15, s18));
    const a10 = await v7({ relatedInfos: r9, layer: s18 }, i16);
    Object.keys(a10).forEach((e15) => {
      var _a;
      const t13 = r9.get(e15.toString()), i17 = (_a = a10[e15]) == null ? void 0 : _a.value;
      t13 && i17 && (t13.layerInfo = i17.data);
    });
    const l10 = await N4({ graphic: e14, relatedInfos: r9, layer: s18 }, i16);
    Object.keys(l10).forEach((e15) => {
      var _a;
      I6((_a = l10[e15]) == null ? void 0 : _a.value, r9.get(e15.toString()));
    });
  }
  _configureRelatedInfo(e14, t12) {
    const { relatedInfos: i16 } = this, r9 = y5(e14.fieldName);
    if (!r9)
      return;
    const { layerId: o10, fieldName: s18 } = r9;
    if (!o10)
      return;
    const n13 = i16.get(o10.toString()) || F4(o10, t12);
    n13 && (T4({ relatedInfo: n13, fieldName: s18, fieldInfo: e14 }), this.relatedInfos.set(o10, n13));
  }
};
W2.interceptor = new e10(he, be2), e([y()], W2.prototype, "_error", void 0), e([y()], W2.prototype, "_featureAbortController", void 0), e([y({ readOnly: true })], W2.prototype, "_effectivePopupTemplate", null), e([y({ readOnly: true })], W2.prototype, "_fieldInfoMap", null), e([y({ readOnly: true })], W2.prototype, "_sourceLayer", null), e([y()], W2.prototype, "abilities", void 0), e([s7("abilities")], W2.prototype, "castAbilities", null), e([y({ readOnly: true })], W2.prototype, "content", void 0), e([y({ readOnly: true })], W2.prototype, "contentViewModels", void 0), e([y()], W2.prototype, "description", void 0), e([y({ type: Boolean })], W2.prototype, "defaultPopupTemplateEnabled", void 0), e([y({ readOnly: true })], W2.prototype, "isTable", null), e([y({ readOnly: true })], W2.prototype, "state", null), e([y({ readOnly: true })], W2.prototype, "formattedAttributes", void 0), e([y({ type: c7, value: null })], W2.prototype, "graphic", null), e([y({ readOnly: true })], W2.prototype, "lastEditInfo", void 0), e([y({ readOnly: true })], W2.prototype, "relatedInfos", void 0), e([y()], W2.prototype, "spatialReference", null), e([y({ readOnly: true })], W2.prototype, "title", void 0), e([y()], W2.prototype, "map", null), e([y({ readOnly: true })], W2.prototype, "waitingForContent", null), e([y()], W2.prototype, "view", void 0), W2 = Q2 = e([c2("esri.widgets.FeatureViewModel")], W2);
var X2 = W2;

// node_modules/@arcgis/core/widgets/Feature/support/FeatureContentMixin.js
var i12 = (i16) => {
  let n13 = class extends i16 {
    constructor() {
      super(...arguments), this.renderNodeContent = (e14) => e4(e14) && !e14.destroyed ? n("div", { class: t3.contentNode, key: e14 }, e14.render()) : e14 instanceof HTMLElement ? n("div", { afterCreate: this._attachToNode, bind: e14, class: t3.contentNode, key: e14 }) : t2(e14) ? n("div", { afterCreate: this._attachToNode, bind: e14.domNode, class: t3.contentNode, key: e14 }) : null;
    }
    _attachToNode(e14) {
      const o10 = this;
      e14.appendChild(o10);
    }
  };
  return n13 = e([c2("esri.widgets.Feature.ContentMixin")], n13), n13;
};

// node_modules/@arcgis/core/widgets/Feature.js
var j7;
var C4 = { title: true, content: true, lastEditedInfo: true };
var F8 = "relationship-handles";
var W3 = j7 = class extends i12(O) {
  constructor(e14, t12) {
    super(e14, t12), this._contentWidgets = [], this.flowItems = null, this.headingLevel = 2, this.messages = null, this.messagesCommon = null, this.messagesURIUtils = null, this.visibleElements = { ...C4 }, this.viewModel = new X2();
  }
  initialize() {
    this.addHandles(d2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.contentViewModels;
    }, () => this._setupContentWidgets(), P));
  }
  loadDependencies() {
    return r3({ notice: () => import("./calcite-notice-BMEFLJ33.js") });
  }
  destroy() {
    this._destroyContentWidgets();
  }
  get graphic() {
    return this.viewModel.graphic;
  }
  set graphic(e14) {
    this.viewModel.graphic = e14;
  }
  get defaultPopupTemplateEnabled() {
    return this.viewModel.defaultPopupTemplateEnabled;
  }
  set defaultPopupTemplateEnabled(e14) {
    this.viewModel.defaultPopupTemplateEnabled = e14;
  }
  get isTable() {
    return this.viewModel.isTable;
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(e14) {
    this._overrideIfSome("label", e14);
  }
  get spatialReference() {
    return this.viewModel.spatialReference;
  }
  set spatialReference(e14) {
    this.viewModel.spatialReference = e14;
  }
  get title() {
    return this.viewModel.title;
  }
  castVisibleElements(e14) {
    return { ...C4, ...e14 };
  }
  get map() {
    return this.viewModel.map;
  }
  set map(e14) {
    this.viewModel.map = e14;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e14) {
    this.viewModel.view = e14;
  }
  setActiveMedia(e14, t12) {
    return this.viewModel.setActiveMedia(e14, t12);
  }
  nextMedia(e14) {
    return this.viewModel.nextMedia(e14);
  }
  previousMedia(e14) {
    return this.viewModel.previousMedia(e14);
  }
  render() {
    const { state: e14 } = this.viewModel, t12 = n("div", { class: t3.container, key: "container" }, this._renderTitle(), "error" === e14 ? this._renderError() : "loading" === e14 ? this._renderLoading() : this._renderContentContainer());
    return n("div", { class: this.classes(t3.base, e6.widget) }, t12);
  }
  _renderError() {
    const { messagesCommon: e14, messages: t12, visibleElements: s18 } = this;
    return n("calcite-notice", { icon: "exclamation-mark-circle", kind: "danger", open: true, scale: "s" }, s18.title ? n("div", { key: "error-title", slot: "title" }, e14.errorMessage) : null, n("div", { key: "error-message", slot: "message" }, t12.loadingError));
  }
  _renderLoading() {
    return n("div", { class: t3.loadingSpinnerContainer, key: "loading-container" }, n("span", { class: this.classes(i2.loadingIndicator, e6.rotating, t3.spinner) }));
  }
  _renderContentContainer() {
    const { visibleElements: e14 } = this;
    return e14.content ? n("div", { class: t3.main }, [this._renderContent(), this._renderLastEditInfo()]) : null;
  }
  _renderTitle() {
    const { visibleElements: e14, title: t12 } = this;
    return e14.title ? n(e8, { class: t3.title, innerHTML: t12, level: this.headingLevel }) : null;
  }
  _renderContent() {
    const e14 = this.viewModel.content, t12 = "content";
    if (!e14)
      return null;
    if (Array.isArray(e14))
      return e14.length ? n("div", { class: t3.contentNode, key: `${t12}-content-elements` }, e14.map(this._renderContentElement, this)) : null;
    if ("string" == typeof e14) {
      const e15 = this._contentWidgets[0];
      return !e15 || e15.destroyed ? null : n("div", { class: this.classes(t3.contentNode, t3.contentNodeText), key: `${t12}-content` }, e15.render());
    }
    return this.renderNodeContent(e14);
  }
  _renderContentElement(e14, t12) {
    var _a;
    const { visibleElements: s18 } = this;
    if ("boolean" != typeof s18.content && !((_a = s18.content) == null ? void 0 : _a[e14.type]))
      return null;
    switch (e14.type) {
      case "attachments":
        return this._renderAttachments(t12);
      case "custom":
        return this._renderCustom(e14, t12);
      case "fields":
        return this._renderFields(t12);
      case "media":
        return this._renderMedia(t12);
      case "text":
        return this._renderText(e14, t12);
      case "expression":
        return this._renderExpression(t12);
      case "relationship":
        return this._renderRelationship(t12);
      default:
        return null;
    }
  }
  _renderAttachments(e14) {
    const t12 = this._contentWidgets[e14];
    if (!t12 || t12.destroyed)
      return null;
    const { state: s18, attachmentInfos: i16 } = t12.viewModel;
    return "loading" === s18 || i16.length > 0 ? n("div", { class: this.classes(t3.contentElement), key: this._buildKey("attachments-element", e14) }, t12.render()) : null;
  }
  _renderRelationship(e14) {
    const t12 = this._contentWidgets[e14];
    return t12 && !t12.destroyed && this.flowItems ? n("div", { class: t3.contentElement, key: this._buildKey("relationship-element", e14) }, t12.render()) : null;
  }
  _renderExpression(e14) {
    const t12 = this._contentWidgets[e14];
    return !t12 || t12.destroyed ? null : n("div", { class: t3.contentElement, key: this._buildKey("expression-element", e14) }, t12.render());
  }
  _renderCustom(e14, t12) {
    const { creator: s18 } = e14, i16 = this._contentWidgets[t12];
    return !i16 || i16.destroyed ? null : s18 ? n("div", { class: t3.contentElement, key: this._buildKey("custom-element", t12) }, i16.render()) : null;
  }
  _renderFields(e14) {
    const t12 = this._contentWidgets[e14];
    return !t12 || t12.destroyed ? null : n("div", { class: t3.contentElement, key: this._buildKey("fields-element", e14) }, t12.render());
  }
  _renderMedia(e14) {
    const t12 = this._contentWidgets[e14];
    return !t12 || t12.destroyed ? null : n("div", { class: t3.contentElement, key: this._buildKey("media-element", e14) }, t12.render());
  }
  _renderLastEditInfo() {
    const { visibleElements: e14, messages: t12 } = this, { lastEditInfo: s18 } = this.viewModel;
    if (!s18 || !e14.lastEditedInfo)
      return null;
    const { date: i16, user: n13 } = s18, r9 = "edit" === s18.type ? n13 ? t12.lastEditedByUser : t12.lastEdited : n13 ? t12.lastCreatedByUser : t12.lastCreated, o10 = s6(r9, { date: i16, user: n13 });
    return n("div", { class: this.classes(t3.lastEditedInfo, t3.contentElement), key: "edit-info-element" }, o10);
  }
  _renderText(e14, t12) {
    const s18 = e14.text, i16 = this._contentWidgets[t12];
    return !i16 || i16.destroyed ? null : s18 ? n("div", { class: this.classes(t3.contentElement, t3.text), key: this._buildKey("text-element", t12) }, i16.render()) : null;
  }
  _buildKey(e14, ...t12) {
    var _a, _b;
    return `${e14}__${((_b = (_a = this.viewModel) == null ? void 0 : _a.graphic) == null ? void 0 : _b.uid) || "0"}-${t12.join("-")}`;
  }
  _destroyContentWidget(e14) {
    e14 && (e14.viewModel = null, !e14.destroyed && e14.destroy());
  }
  _destroyContentWidgets() {
    this.removeHandles(F8), this._contentWidgets.forEach((e14) => this._destroyContentWidget(e14)), this._contentWidgets = [];
  }
  _addFeatureRelationshipHandles(e14) {
    const { flowItems: t12, visibleElements: i16 } = this;
    this.addHandles([v2(() => e14, "select-record", ({ featureViewModel: e15 }) => {
      t12 && (e15.abilities = { relationshipContent: true }, t12.push(new j7({ flowItems: t12, viewModel: e15, visibleElements: i16 })));
    }), v2(() => e14, "show-all-records", () => {
      if (!t12)
        return;
      const { viewModel: s18 } = e14;
      s18.showAllEnabled = true;
      const i17 = new M5({ visibleElements: { title: false, description: false }, viewModel: s18 });
      this._addFeatureRelationshipHandles(i17), t12.push(i17);
    })], F8);
  }
  _setupContentWidgets() {
    var _a;
    this._destroyContentWidgets();
    const { headingLevel: e14, visibleElements: t12 } = this, s18 = (_a = this.viewModel) == null ? void 0 : _a.content, { contentViewModels: i16 } = this.viewModel;
    if (Array.isArray(s18))
      s18.forEach((s19, n13) => {
        if ("attachments" === s19.type && (this._contentWidgets[n13] = new h5({ displayType: s19.displayType, headingLevel: t12.title ? e14 + 1 : e14, viewModel: i16[n13] })), "fields" === s19.type && (this._contentWidgets[n13] = new h6({ viewModel: i16[n13] })), "media" === s19.type && (this._contentWidgets[n13] = new S4({ viewModel: i16[n13] })), "text" === s19.type && (this._contentWidgets[n13] = new p6({ viewModel: i16[n13] })), "custom" === s19.type && (this._contentWidgets[n13] = new p6({ viewModel: i16[n13] })), "expression" === s19.type && (this._contentWidgets[n13] = new w8({ viewModel: i16[n13] })), "relationship" === s19.type) {
          const e15 = new M5({ viewModel: i16[n13] });
          this._addFeatureRelationshipHandles(e15), this._contentWidgets[n13] = e15;
        }
      }, this);
    else {
      const e15 = i16[0];
      e15 && !e15.destroyed && (this._contentWidgets[0] = new p6({ viewModel: e15 }));
    }
    this.scheduleRender();
  }
};
e([y()], W3.prototype, "graphic", null), e([y()], W3.prototype, "defaultPopupTemplateEnabled", null), e([y()], W3.prototype, "flowItems", void 0), e([y()], W3.prototype, "headingLevel", void 0), e([y({ readOnly: true })], W3.prototype, "isTable", null), e([y()], W3.prototype, "label", null), e([y(), e2("esri/widgets/Feature/t9n/Feature")], W3.prototype, "messages", void 0), e([y(), e2("esri/t9n/common")], W3.prototype, "messagesCommon", void 0), e([y(), e2("esri/widgets/support/t9n/uriUtils")], W3.prototype, "messagesURIUtils", void 0), e([y()], W3.prototype, "spatialReference", null), e([y({ readOnly: true })], W3.prototype, "title", null), e([y()], W3.prototype, "visibleElements", void 0), e([s7("visibleElements")], W3.prototype, "castVisibleElements", null), e([y()], W3.prototype, "map", null), e([y()], W3.prototype, "view", null), e([y({ type: X2 })], W3.prototype, "viewModel", void 0), W3 = j7 = e([c2("esri.widgets.Feature")], W3);
var x6 = W3;

// node_modules/@arcgis/core/widgets/support/AnchorElementViewModel.js
var i13 = class extends o.EventedAccessor {
  constructor(e14) {
    super(e14), this.location = null, this.screenLocationEnabled = false, this.view = null, this.addHandles([p(() => {
      const e15 = this.screenLocationEnabled ? this.view : null;
      return e15 ? [e15.size, "3d" === e15.type ? e15.camera : e15.viewpoint] : null;
    }, () => this.notifyChange("screenLocation")), d2(() => this.screenLocation, (e15, o10) => {
      null != e15 && null != o10 && this.emit("view-change");
    })]);
  }
  destroy() {
    this.view = null;
  }
  get screenLocation() {
    const { location: e14, view: o10, screenLocationEnabled: t12 } = this;
    return t12 && null != e14 && null != o10 && o10.ready ? o10.toScreen(e14) : null;
  }
};
e([y()], i13.prototype, "location", void 0), e([y()], i13.prototype, "screenLocation", null), e([y()], i13.prototype, "screenLocationEnabled", void 0), e([y()], i13.prototype, "view", void 0), i13 = e([c2("esri.widgets.support.AnchorElementViewModel")], i13);
var c16 = i13;

// node_modules/@arcgis/core/widgets/Spinner/SpinnerViewModel.js
var t7 = "esri.widgets.CompassViewModel";
var p9 = class extends c16 {
  constructor(s18) {
    super(s18), this.visible = false;
  }
};
e([y()], p9.prototype, "visible", void 0), p9 = e([c2(t7)], p9);
var c17 = p9;

// node_modules/@arcgis/core/widgets/Spinner.js
var a7 = "esri-spinner";
var c18 = { base: a7, spinnerStart: `${a7}--start`, spinnerFinish: `${a7}--finish` };
var p10 = class extends O {
  constructor(i16, e14) {
    super(i16, e14), this._animationDelay = 500, this._animationPromise = null, this.viewModel = new c17();
  }
  initialize() {
    this.addHandles(d2(() => this.visible, (i16) => this._visibleChange(i16)));
  }
  destroy() {
    this._animationPromise = null;
  }
  get location() {
    return this.viewModel.location;
  }
  set location(i16) {
    this.viewModel.location = i16;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(i16) {
    this.viewModel.view = i16;
  }
  get visible() {
    return this.viewModel.visible;
  }
  set visible(i16) {
    this.viewModel.visible = i16;
  }
  show(i16) {
    const { location: e14, promise: t12 } = i16 ?? {};
    e14 && (this.viewModel.location = e14), this.visible = true;
    const s18 = () => this.hide();
    t12 && t12.catch(() => {
    }).then(s18);
  }
  hide() {
    this.visible = false;
  }
  render() {
    const { visible: i16 } = this, { screenLocation: e14 } = this.viewModel, t12 = !!e14, s18 = i16 && t12, o10 = !i16 && t12, r9 = { [c18.spinnerStart]: s18, [c18.spinnerFinish]: o10 }, n13 = this._getPositionStyles();
    return n("div", { class: this.classes(c18.base, r9), styles: n13 });
  }
  _visibleChange(i16) {
    if (i16)
      return void (this.viewModel.screenLocationEnabled = true);
    const t12 = A(this._animationDelay);
    this._animationPromise = t12, t12.catch(() => {
    }).then(() => {
      this._animationPromise === t12 && (this.viewModel.screenLocationEnabled = false, this._animationPromise = null);
    });
  }
  _getPositionStyles() {
    const { screenLocation: i16, view: e14 } = this.viewModel;
    if (null == e14 || null == i16)
      return {};
    const { padding: t12 } = e14;
    return { left: i16.x - t12.left + "px", top: i16.y - t12.top + "px" };
  }
};
e([y()], p10.prototype, "location", null), e([y()], p10.prototype, "view", null), e([y({ type: c17 })], p10.prototype, "viewModel", void 0), e([y()], p10.prototype, "visible", null), p10 = e([c2("esri.widgets.Spinner")], p10);
var h9 = p10;

// node_modules/@arcgis/core/widgets/Features/css.js
var e11 = "esri-features";
var n9 = { icon: `${e11}__icon`, actionImage: `${e11}__action-image`, base: e11, container: `${e11}__container`, contentContainer: `${e11}__content-container`, contentFeature: `${e11}__content-feature`, flowItemCollapsed: `${e11}__flow-item--collapsed`, header: `${e11}__header`, footer: `${e11}__footer`, featureMenuObserver: `${e11}__feature-menu-observer`, actionExit: `${e11}__action--exit`, loader: `${e11}__loader`, featuresHeading: `${e11}__heading`, paginationActionBar: `${e11}__pagination-action-bar`, paginationPrevious: `${e11}__pagination-previous`, paginationNext: `${e11}__pagination-next` };

// node_modules/@arcgis/core/widgets/Features/FeaturesRelatedRecords.js
var n10 = class extends O {
  constructor(e14, t12) {
    super(e14, t12), this.messages = null, this.closed = false, this.closable = true, this._handleOpenRelatedFeature = (e15) => {
      this.emit("open-related-feature", { feature: e15 });
    };
  }
  loadDependencies() {
    return r3({ action: () => import("./calcite-action-AW5ALFBA.js"), "flow-item": () => import("./calcite-flow-item-SSG7LFOE.js") });
  }
  render() {
    const { flowItems: e14 } = this, t12 = e14 == null ? void 0 : e14.toArray();
    return n(i3, null, t12 == null ? void 0 : t12.map((e15) => this._renderRelatedRecordsFlowItem(e15)));
  }
  _handleCloseClick() {
    this.emit("close");
  }
  _handleExitClick() {
    this.emit("exit");
  }
  _handleRelatedRecordsBackClick() {
    var _a;
    const e14 = (_a = this.flowItems) == null ? void 0 : _a.pop();
    e14 && ("showAllEnabled" in e14.viewModel && (e14.viewModel.showAllEnabled = false), e14 && (e14.viewModel = null, e14.destroy()));
  }
  _renderRelatedRecordsFlowItem(e14) {
    const { messages: t12, closable: o10, closed: s18 } = this, r9 = "graphic" in e14 && !e14.isTable;
    return n("calcite-flow-item", { bind: this, closable: o10, closed: s18, description: this._getRelatedRecordsFlowItemDescription(e14), heading: e14.title ?? "", key: `flow-item-${e14.viewModel.uid}`, onCalciteFlowItemBack: this._handleRelatedRecordsBackClick, onCalciteFlowItemClose: this._handleCloseClick }, n("calcite-action", { appearance: "transparent", bind: this, class: n9.actionExit, icon: "move-up", key: "exit-related-records-action", label: t12.exitRelatedRecords, onclick: this._handleExitClick, scale: "m", slot: "header-actions-start", text: t12.exitRelatedRecords, title: t12.exitRelatedRecords }), r9 ? n("calcite-action", { appearance: "transparent", bind: this, icon: "zoom-to-object", key: "open-related-feature-action", label: t12.selectFeature, onclick: () => this._handleOpenRelatedFeature(e14), scale: "m", slot: "header-actions-end", text: t12.selectFeature, title: t12.selectFeature }) : null, n("div", { class: n9.container }, e14.render()));
  }
  _getRelatedRecordsFlowItemDescription(e14) {
    return "featureCountDescription" in e14 ? e14.featureCountDescription : e14.viewModel.description ?? "";
  }
};
e([y()], n10.prototype, "flowItems", void 0), e([y(), e2("esri/widgets/Features/t9n/Features")], n10.prototype, "messages", void 0), e([y()], n10.prototype, "closed", void 0), e([y()], n10.prototype, "closable", void 0), n10 = e([c2("esri.widgets.Features.FeaturesRelatedRecords")], n10);
var d9 = n10;

// node_modules/@arcgis/core/core/ReactiveSet.js
var s15 = class {
  constructor() {
    this._set = /* @__PURE__ */ new Set(), this._observable = new s5();
  }
  get size() {
    return s4(this._observable), this._set.size;
  }
  add(t12) {
    const e14 = this._set.size;
    return this._set.add(t12), this._set.size !== e14 && this._observable.notify(), this;
  }
  clear() {
    this._set.size > 0 && (this._set.clear(), this._observable.notify());
  }
  delete(t12) {
    const e14 = this._set.delete(t12);
    return e14 && this._observable.notify(), e14;
  }
  entries() {
    return s4(this._observable), this._set.entries();
  }
  forEach(e14, s18) {
    s4(this._observable), this._set.forEach((t12, r9) => e14.call(s18, t12, r9, this), s18);
  }
  has(e14) {
    return s4(this._observable), this._set.has(e14);
  }
  keys() {
    return s4(this._observable), this._set.keys();
  }
  values() {
    return s4(this._observable), this._set.values();
  }
  [Symbol.iterator]() {
    return s4(this._observable), this._set[Symbol.iterator]();
  }
  get [Symbol.toStringTag]() {
    return this._set[Symbol.toStringTag];
  }
};

// node_modules/@arcgis/core/layers/LayerConstants.js
var o8 = "OBJECTID";

// node_modules/@arcgis/core/widgets/Legend/styles/support/relationshipUtils.js
var b9 = "esri-relationship-ramp";
var u9 = `${b9}--diamond`;
var c19 = `${b9}--square`;
var p11 = { diamondContainer: `${u9}__container`, diamondLeftCol: `${u9}__left-column`, diamondRightCol: `${u9}__right-column`, diamondMidCol: `${u9}__middle-column`, diamondMidColLabel: `${u9}__middle-column--label`, diamondMidColRamp: `${u9}__middle-column--ramp`, squareTable: `${c19}__table`, squareTableRow: `${c19}__table-row`, squareTableCell: `${c19}__table-cell`, squareTableLabel: `${c19}__table-label`, squareTableLabelLeftBottom: `${c19}__table-label--left-bottom`, squareTableLabelRightBottom: `${c19}__table-label--right-bottom`, squareTableLabelLeftTop: `${c19}__table-label--left-top`, squareTableLabelRightTop: `${c19}__table-label--right-top` };

// node_modules/@arcgis/core/symbols/support/symbolUtils.js
function x7(e14) {
  return e14 && "opacity" in e14 ? e14.opacity * x7(e14.parent) : 1;
}
async function L3(t12, l10) {
  var _a;
  if (!t12)
    return;
  const i16 = t12.sourceLayer, r9 = (null != l10 && l10.useSourceLayer ? i16 : t12.layer) ?? i16, a10 = x7(r9);
  if (null != t12.symbol && (null == l10 || true !== l10.ignoreGraphicSymbol)) {
    const e14 = "web-style" === t12.symbol.type ? await N2(t12.symbol, { ...l10, cache: null != l10 ? l10.webStyleCache : null }) : t12.symbol.clone();
    return k3(e14, null, a10), e14;
  }
  const u11 = (null != l10 ? l10.renderer : null) ?? (r9 && "renderer" in r9 ? r9.renderer : null);
  let f9 = u11 && "getSymbolAsync" in u11 ? await u11.getSymbolAsync(t12, l10) : null;
  if (!f9)
    return;
  if (f9 = "web-style" === f9.type ? await f9.fetchSymbol({ ...l10, cache: null != l10 ? l10.webStyleCache : null }) : f9.clone(), !u11 || !("visualVariables" in u11) || !((_a = u11.visualVariables) == null ? void 0 : _a.length))
    return k3(f9, null, a10), f9;
  if ("arcadeRequiredForVisualVariables" in u11 && u11.arcadeRequiredForVisualVariables && null == (l10 == null ? void 0 : l10.arcade)) {
    const t13 = { ...l10 };
    t13.arcade = await i9(), l10 = t13;
  }
  const { getColor: p14, getOpacity: h13, getAllSizes: y11, getRotationAngle: d11 } = await import("./visualVariableUtils-CUWY3LAY.js"), m10 = [], b10 = [], g12 = [], w11 = [];
  for (const e14 of u11.visualVariables)
    switch (e14.type) {
      case "color":
        m10.push(e14);
        break;
      case "opacity":
        b10.push(e14);
        break;
      case "rotation":
        w11.push(e14);
        break;
      case "size":
        e14.target || g12.push(e14);
    }
  const v11 = !!m10.length && m10[m10.length - 1], S6 = v11 ? p14(v11, t12, l10) : null, V4 = !!b10.length && b10[b10.length - 1];
  let L4 = V4 ? h13(V4, t12, l10) : null;
  if (null != a10 && (L4 = null != L4 ? L4 * a10 : a10), k3(f9, S6, L4), g12.length) {
    const e14 = y11(g12, t12, l10);
    await R(f9, e14);
  }
  for (const e14 of w11)
    D2(f9, d11(e14, t12, l10), e14.axis);
  return f9;
}

// node_modules/@arcgis/core/views/support/layerViewUtils.js
function n11(n13) {
  return n13 && "function" == typeof n13.highlight;
}

// node_modules/@arcgis/core/widgets/Popup/actions.js
var i15 = V.ofType({ key: "type", defaultKeyValue: "button", base: p2, typeMap: { button: c6, toggle: a2 } });
var n12 = new c6({ icon: "magnifying-glass-plus", id: "zoom-to-feature", title: "{messages.zoom}", className: i2.zoomInMagnifyingGlass });
var r8 = new c6({ icon: "trash", id: "remove-selected-feature", title: "{messages.remove}", className: i2.trash });
var l8 = new c6({ icon: "magnifying-glass-plus", id: "zoom-to-clustered-features", title: "{messages.zoom}", className: i2.zoomInMagnifyingGlass });
var m8 = new a2({ icon: "table", id: "browse-clustered-features", title: "{messages.browseClusteredFeatures}", className: i2.table, value: false });

// node_modules/@arcgis/core/widgets/Popup/actionUtils.js
var c20 = "esri.widgets.Popup.PopupViewModel";
var s16 = s2.getLogger(c20);
var u10 = (t12) => {
  const { event: c21, view: s18, viewModel: u11 } = t12, { action: l10 } = c21;
  if (!l10)
    return Promise.reject(new s3("trigger-action:missing-arguments", "Event has no action"));
  const { disabled: d11, id: g12 } = l10;
  if (!g12)
    return Promise.reject(new s3("trigger-action:invalid-action", "action.id is missing"));
  if (d11)
    return Promise.reject(new s3("trigger-action:invalid-action", "Action is disabled"));
  if (g12 === n12.id)
    return w10(u11).catch(f);
  if (g12 === l8.id)
    return f7(u11);
  if (g12 === m8.id)
    return u11.browseClusterEnabled = !u11.browseClusterEnabled, u11.featureMenuOpen = u11.browseClusterEnabled, Promise.resolve();
  if (g12 === r8.id) {
    u11.visible = false;
    const { selectedFeature: t13 } = u11;
    if (!t13)
      return Promise.reject(new s3(`trigger-action:${r8.id}`, "selectedFeature is required", { selectedFeature: t13 }));
    const { sourceLayer: r9 } = t13;
    return r9 ? r9.remove(t13) : s18 == null ? void 0 : s18.graphics.remove(t13), Promise.resolve();
  }
  return Promise.resolve();
};
function l9(e14) {
  const { selectedFeature: t12, location: r9, view: n13 } = e14;
  return n13 ? t12 ?? r9 ?? null : null;
}
function d10(e14) {
  var _a, _b;
  return !!e14 && e14.isAggregate && "cluster" === ((_b = (_a = e14.sourceLayer) == null ? void 0 : _a.featureReduction) == null ? void 0 : _b.type);
}
async function g11(e14, t12) {
  if ("3d" !== (t12 == null ? void 0 : t12.type) || !e14 || "esri.Graphic" !== e14.declaredClass)
    return true;
  const r9 = t12.getViewForGraphic(e14);
  if (r9 && "whenGraphicBounds" in r9) {
    let t13 = null;
    try {
      t13 = await r9.whenGraphicBounds(e14, { useViewElevation: true });
    } catch (n13) {
    }
    return !t13 || !t13.boundingBox || t13.boundingBox[0] === t13.boundingBox[3] && t13.boundingBox[1] === t13.boundingBox[4] && t13.boundingBox[2] === t13.boundingBox[5];
  }
  return true;
}
async function w10(t12) {
  var _a;
  const { location: r9, selectedFeature: o10, view: i16, zoomFactor: a10 } = t12, c21 = l9(t12);
  if (!i16 || !c21) {
    const t13 = new s3("zoom-to:invalid-target-or-view", "Cannot zoom to location without a target and view.", { target: c21, view: i16 });
    throw s16.error(t13), t13;
  }
  const u11 = i16.scale / a10, d11 = (_a = t12.selectedFeature) == null ? void 0 : _a.geometry, w11 = d11 ?? r9, f9 = null != w11 && "point" === w11.type && await g11(o10, i16);
  n12.active = true, n12.disabled = true;
  try {
    await t12.zoomTo({ target: { target: c21, scale: f9 ? u11 : void 0 } });
  } catch (m10) {
    const t13 = new s3("zoom-to:invalid-graphic", "Could not zoom to the location of the graphic.", { graphic: o10 });
    s16.error(t13);
  } finally {
    n12.active = false, n12.disabled = false, t12.zoomToLocation = null, f9 && (t12.location = w11);
  }
}
async function f7(t12) {
  const { selectedFeature: r9, view: n13 } = t12;
  if ("2d" !== (n13 == null ? void 0 : n13.type)) {
    const t13 = new s3("zoomToCluster:invalid-view", "View must be 2d MapView.", { view: n13 });
    throw s16.error(t13), t13;
  }
  if (!r9 || !d10(r9)) {
    const t13 = new s3("zoomToCluster:invalid-selectedFeature", "Selected feature must represent an aggregate/cluster graphic.", { selectedFeature: r9 });
    throw s16.error(t13), t13;
  }
  const [i16, a10] = await p12(n13, r9);
  l8.active = true, l8.disabled = true;
  const { extent: c21 } = await i16.queryExtent(a10);
  await t12.zoomTo({ target: c21 }), l8.active = false, l8.disabled = false;
}
async function m9(e14) {
  const { view: t12, selectedFeature: r9 } = e14;
  if (!t12 || !r9)
    return;
  const [n13, o10] = await p12(t12, r9), { extent: i16 } = await n13.queryExtent(o10);
  e14.selectedClusterBoundaryFeature.geometry = i16, t12.graphics.add(e14.selectedClusterBoundaryFeature);
}
async function v10(e14) {
  const { selectedFeature: t12, view: r9 } = e14;
  if (!r9 || !t12)
    return;
  const [n13, o10] = await p12(r9, t12);
  m8.active = true, m8.disabled = true;
  const { features: a10 } = await n13.queryFeatures(o10);
  m8.active = false, m8.disabled = false, m8.value = true, e14 == null ? void 0 : e14.open({ features: [t12].concat(a10), featureMenuOpen: true });
}
async function p12(e14, t12) {
  const r9 = await e14.whenLayerView(t12.sourceLayer), n13 = r9.createQuery(), o10 = t12.getObjectId();
  return n13.aggregateIds = null != o10 ? [o10] : [], [r9, n13];
}
function y10(e14) {
  m8.value = false;
  const t12 = e14.features.filter((e15) => d10(e15));
  t12.length && (e14.features = t12);
}
function h12(e14) {
  var _a;
  if (null == e14)
    return null;
  switch (e14.type) {
    case "point":
      return e14;
    case "extent":
      return e14.center;
    case "polygon":
      return e14.centroid;
    case "multipoint":
    case "polyline":
      return (_a = e14.extent) == null ? void 0 : _a.center;
    default:
      return null;
  }
}

// node_modules/@arcgis/core/widgets/Features/FeaturesViewModel.js
var I11 = () => [n12.clone()];
var S5 = () => [l8.clone(), m8.clone()];
var T8 = class extends t4(c16) {
  constructor(e14) {
    super(e14), this._pendingPromises = new s15(), this._fetchFeaturesController = null, this._highlightSelectedFeaturePromise = null, this._highlightActiveFeaturePromise = null, this._selectedClusterFeature = null, this.actions = new i15(), this.activeFeature = null, this.autoCloseEnabled = false, this.autoOpenEnabled = true, this.browseClusterEnabled = false, this.content = null, this.defaultPopupTemplateEnabled = false, this.featurePage = null, this.featuresPerPage = 20, this.featureMenuOpen = false, this.featureViewModelAbilities = null, this.featureViewModels = [], this.highlightEnabled = true, this.includeDefaultActions = true, this.selectedClusterBoundaryFeature = new c7({ symbol: new S({ outline: { width: 1.5, color: "cyan" }, style: "none" }) }), this.title = null, this.updateLocationEnabled = false, this.view = null, this.visible = false, this.zoomFactor = 4, this.zoomToLocation = null;
  }
  initialize() {
    this.addHandles([this.on("view-change", () => this._autoClose()), d2(() => [this.highlightEnabled, this.selectedFeature, this.visible, this.view], () => this._highlightSelectedFeature()), d2(() => [this.highlightEnabled, this.activeFeature, this.visible, this.view], () => this._highlightActiveFeature()), d2(() => {
      var _a, _b;
      return (_b = (_a = this.view) == null ? void 0 : _a.animation) == null ? void 0 : _b.state;
    }, (e14) => this._animationStateChange(e14)), d2(() => this.location, (e14) => this._locationChange(e14)), d2(() => this.selectedFeature, (e14) => this._selectedFeatureChange(e14)), d2(() => [this.selectedFeatureIndex, this.featureCount, this.featuresPerPage], () => this._selectedFeatureIndexChange()), d2(() => [this.featurePage, this.selectedFeatureIndex, this.featureCount, this.featuresPerPage, this.featureViewModels], () => this._setGraphicOnFeatureViewModels()), d2(() => this.featureViewModels, () => this._featureViewModelsChange()), this.on("trigger-action", (e14) => u10({ event: e14, viewModel: this, view: this.view })), p(() => !this.waitingForResult, () => this._waitingForResultChange(), C), d2(() => {
      var _a, _b;
      return [this.features, (_a = this.view) == null ? void 0 : _a.map, (_b = this.view) == null ? void 0 : _b.spatialReference];
    }, () => this._updateFeatureVMs()), d2(() => {
      var _a;
      return (_a = this.view) == null ? void 0 : _a.scale;
    }, () => this._viewScaleChange()), p(() => !this.visible, () => this.browseClusterEnabled = false), d2(() => this.browseClusterEnabled, (e14) => e14 ? this.enableClusterBrowsing() : this.disableClusterBrowsing())]);
  }
  destroy() {
    this._cancelFetchingFeatures(), this._pendingPromises.clear(), this.browseClusterEnabled = false, this.view = null;
  }
  get active() {
    return !(!this.visible || this.waitingForResult);
  }
  get allActions() {
    const e14 = this._get("allActions") || new i15();
    e14.removeAll();
    const { actions: t12, defaultActions: i16, defaultPopupTemplateEnabled: s18, includeDefaultActions: r9, selectedFeature: o10 } = this, a10 = r9 ? i16.concat(t12) : t12, n13 = o10 && ("function" == typeof o10.getEffectivePopupTemplate && o10.getEffectivePopupTemplate(s18) || o10.popupTemplate), l10 = n13 == null ? void 0 : n13.actions, u11 = (n13 == null ? void 0 : n13.overwriteActions) ? l10 : (l10 == null ? void 0 : l10.concat(a10)) ?? a10;
    return u11 == null ? void 0 : u11.filter(Boolean).forEach((t13) => e14.add(t13)), e14;
  }
  get defaultActions() {
    const e14 = this._get("defaultActions") || new i15();
    return e14.removeAll(), e14.addMany(d10(this.selectedFeature) ? S5() : I11()), e14;
  }
  get featureCount() {
    return this.features.length;
  }
  set features(e14) {
    const t12 = e14 || [];
    this._set("features", t12);
    const { pendingPromisesCount: i16, promiseCount: s18, selectedFeatureIndex: r9 } = this, o10 = s18 && t12.length;
    o10 && i16 && -1 === r9 ? this.selectedFeatureIndex = 0 : o10 && -1 !== r9 || (this.selectedFeatureIndex = t12.length ? 0 : -1);
  }
  set location(e14) {
    var _a, _b, _c;
    let t12 = e14;
    const i16 = (_b = (_a = this.view) == null ? void 0 : _a.spatialReference) == null ? void 0 : _b.isWebMercator, s18 = (_c = e14 == null ? void 0 : e14.spatialReference) == null ? void 0 : _c.isWGS84;
    s18 && i16 && (t12 = d3(e14)), this._set("location", t12);
  }
  get pendingPromisesCount() {
    return this._pendingPromises.size;
  }
  get promiseCount() {
    return this.promises.length;
  }
  get promises() {
    return this._get("promises") || [];
  }
  set promises(e14) {
    this._pendingPromises.clear(), this.features = [], Array.isArray(e14) && e14.length ? (this._set("promises", e14), (e14 = e14.slice(0)).forEach((e15) => {
      this._pendingPromises.add(e15);
      const t12 = (t13) => {
        this._pendingPromises.has(e15) && this._updateFeatures(t13), this._updatePendingPromises(e15);
      }, i16 = () => this._updatePendingPromises(e15);
      e15.then(t12, i16);
    })) : this._set("promises", []);
  }
  get selectedFeature() {
    const { features: e14, selectedFeatureIndex: t12 } = this;
    if (-1 === t12)
      return null;
    return e14[t12] || null;
  }
  get selectedFeatureIndex() {
    const e14 = this._get("selectedFeatureIndex");
    return "number" == typeof e14 ? e14 : -1;
  }
  set selectedFeatureIndex(e14) {
    const { featureCount: t12 } = this;
    e14 = isNaN(e14) || e14 < -1 || !t12 ? -1 : (e14 + t12) % t12, this.activeFeature = null, this._set("selectedFeatureIndex", e14);
  }
  get selectedFeatureViewModel() {
    return this.featureViewModels[this.selectedFeatureIndex] || null;
  }
  get state() {
    var _a;
    return ((_a = this.view) == null ? void 0 : _a.ready) ? "ready" : "disabled";
  }
  get waitingForContents() {
    return this.featureViewModels.some((e14) => e14.waitingForContent);
  }
  get waitingForResult() {
    return !(!(!!this._fetchFeaturesController || this.pendingPromisesCount > 0) || 0 !== this.featureCount);
  }
  centerAtLocation() {
    const { view: e14 } = this, t12 = l9(this);
    return t12 && e14 ? this.callGoTo({ target: { target: t12, scale: e14.scale } }) : Promise.reject(new s3("center-at-location:invalid-target-or-view", "Cannot center at a location without a target and view.", { target: t12, view: e14 }));
  }
  zoomTo(e14) {
    return this.callGoTo(e14);
  }
  clear() {
    this.set({ promises: [], features: [], content: null, title: null, location: null, activeFeature: null });
  }
  fetchFeatures(e14, t12) {
    const { view: i16 } = this;
    if (!i16 || !e14)
      throw new s3("fetch-features:invalid-screenpoint-or-view", "Cannot fetch features without a screenPoint and view.", { screenPoint: e14, view: i16 });
    return i16.fetchPopupFeatures(e14, { event: t12 == null ? void 0 : t12.event, defaultPopupTemplateEnabled: this.defaultPopupTemplateEnabled, signal: t12 == null ? void 0 : t12.signal });
  }
  open(e14) {
    const t12 = { updateLocationEnabled: false, promises: [], fetchFeatures: false, ...e14, visible: true }, { fetchFeatures: i16 } = t12;
    delete t12.fetchFeatures, i16 && this._setFetchFeaturesPromises(t12.location);
    const s18 = ["actionsMenuOpen", "collapsed"];
    for (const r9 of s18)
      delete t12[r9];
    this.set(t12);
  }
  triggerAction(e14) {
    const t12 = this.allActions.at(e14);
    t12 && !t12.disabled && this.emit("trigger-action", { action: t12 });
  }
  next() {
    return this.selectedFeatureIndex++, this;
  }
  previous() {
    return this.selectedFeatureIndex--, this;
  }
  disableClusterBrowsing() {
    y10(this), this._clearBrowsedClusterGraphics();
  }
  async enableClusterBrowsing() {
    const { view: e14, selectedFeature: t12 } = this;
    "2d" === (e14 == null ? void 0 : e14.type) ? d10(t12) ? (await m9(this), await v10(this)) : s2.getLogger(this).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.", t12) : s2.getLogger(this).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.", t12);
  }
  handleViewClick(e14) {
    this.autoOpenEnabled && this._fetchFeaturesAndOpen(e14);
  }
  _animationStateChange(e14) {
    this.zoomToLocation || (n12.disabled = "waiting-for-target" === e14);
  }
  _clearBrowsedClusterGraphics() {
    var _a, _b;
    const e14 = [this.selectedClusterBoundaryFeature, this._selectedClusterFeature].filter(k);
    (_b = (_a = this.view) == null ? void 0 : _a.graphics) == null ? void 0 : _b.removeMany(e14), this._selectedClusterFeature = null, this.selectedClusterBoundaryFeature.geometry = null;
  }
  _viewScaleChange() {
    if (d10(this.selectedFeature))
      return this.browseClusterEnabled = false, this.visible = false, void this.clear();
    this.browseClusterEnabled && (this.features = this.selectedFeature ? [this.selectedFeature] : []);
  }
  _locationChange(e14) {
    const { selectedFeature: t12, updateLocationEnabled: i16 } = this;
    i16 && e14 && (!t12 || t12.geometry) && this.centerAtLocation();
  }
  _selectedFeatureIndexChange() {
    this.featurePage = this.featureCount > 1 ? Math.floor(this.selectedFeatureIndex / this.featuresPerPage) + 1 : null;
  }
  _featureViewModelsChange() {
    this.featurePage = this.featureCount > 1 ? 1 : null;
  }
  _setGraphicOnFeatureViewModels() {
    const { features: e14, featureCount: t12, featurePage: i16, featuresPerPage: s18, featureViewModels: r9 } = this;
    if (null === i16)
      return;
    const o10 = ((i16 - 1) * s18 + t12) % t12, a10 = o10 + s18;
    r9.slice(o10, a10).forEach((t13, i17) => {
      t13 && (t13.graphic ?? (t13.graphic = e14[o10 + i17]));
    });
  }
  async _selectedFeatureChange(e14) {
    var _a;
    const { location: t12, updateLocationEnabled: i16, view: s18 } = this;
    if (e14 && s18) {
      if (this.browseClusterEnabled) {
        if (this._selectedClusterFeature && (s18.graphics.remove(this._selectedClusterFeature), this._selectedClusterFeature = null), d10(e14))
          return;
        return e14.symbol = await L3(e14), this._selectedClusterFeature = e14, void s18.graphics.add(this._selectedClusterFeature);
      }
      if (!i16 && t12 || !e14.geometry) {
        if (i16 && !e14.geometry) {
          await this.centerAtLocation();
          const e15 = (_a = s18.center) == null ? void 0 : _a.clone();
          e15 && (this.location = e15);
        }
      } else
        this.location = h12(e14.geometry);
    }
  }
  _waitingForResultChange() {
    !this.featureCount && this.promises && (this.visible = false);
  }
  async _setFetchFeaturesPromises(e14) {
    const { clientOnlyGraphics: t12, promisesPerLayerView: i16 } = await this._fetchFeaturesWithController(this._getScreenPoint(e14 || this.location)), s18 = Promise.resolve(t12), r9 = i16.map((e15) => e15.promise);
    this.promises = [s18, ...r9];
  }
  _destroyFeatureVMs() {
    this.featureViewModels.forEach((e14) => e14 && !e14.destroyed && e14.destroy()), this._set("featureViewModels", []);
  }
  _updateFeatureVMs() {
    const { selectedFeature: e14, features: t12, featureViewModels: i16, view: s18 } = this;
    if (d10(e14) || (this.browseClusterEnabled = false), this._destroyFeatureVMs(), !(t12 == null ? void 0 : t12.length))
      return;
    const r9 = i16.slice(0), o10 = [];
    t12.forEach((t13, i17) => {
      if (!t13)
        return;
      let a10 = null;
      if (r9.some((e15, i18) => (e15 && e15.graphic === t13 && (a10 = e15, r9.splice(i18, 1)), !!a10)), a10)
        o10[i17] = a10;
      else {
        const r10 = new X2({ abilities: this.featureViewModelAbilities, defaultPopupTemplateEnabled: this.defaultPopupTemplateEnabled, spatialReference: s18 == null ? void 0 : s18.spatialReference, graphic: t13 === e14 ? t13 : null, map: s18 == null ? void 0 : s18.map, view: s18 });
        o10[i17] = r10;
      }
    }), r9.forEach((e15) => e15 && !e15.destroyed && e15.destroy()), this._set("featureViewModels", o10);
  }
  _getScreenPoint(e14) {
    const { view: t12 } = this;
    return t12 && e14 && "function" == typeof t12.toScreen ? t12.toScreen(e14) : null;
  }
  _cancelFetchingFeatures() {
    const e14 = this._fetchFeaturesController;
    e14 && e14.abort(), this._fetchFeaturesController = null;
  }
  _fetchFeaturesWithController(e14, t12) {
    this._cancelFetchingFeatures();
    const i16 = new AbortController(), { signal: s18 } = i16;
    this._fetchFeaturesController = i16;
    const r9 = this.fetchFeatures(e14, { signal: s18, event: t12 });
    return r9.catch(() => {
    }).then(() => {
      this._fetchFeaturesController = null;
    }), r9;
  }
  async _fetchFeaturesAndOpen(e14) {
    const { screenPoint: t12, mapPoint: i16 } = e14, { view: s18 } = this, { clientOnlyGraphics: r9, promisesPerLayerView: o10, location: a10 } = await this._fetchFeaturesWithController(t12, e14), n13 = [Promise.resolve(r9), ...o10.map((e15) => e15.promise)];
    (s18 == null ? void 0 : s18.popup) && "open" in s18.popup && s18.popup.open({ location: a10 || i16, promises: n13 });
  }
  _updatePendingPromises(e14) {
    e14 && this._pendingPromises.has(e14) && this._pendingPromises.delete(e14);
  }
  _autoClose() {
    this.autoCloseEnabled && (this.visible = false);
  }
  async _getLayerView(e14, t12) {
    return await e14.when(), e14.whenLayerView(t12);
  }
  _getHighlightLayer(e14) {
    const { layer: t12, sourceLayer: i16 } = e14;
    return i16 && "layer" in i16 && i16.layer ? i16.layer : "map-notes" === (i16 == null ? void 0 : i16.type) || "subtype-group" === (i16 == null ? void 0 : i16.type) ? i16 : t12;
  }
  _getHighlightTarget(e14, t12) {
    const i16 = "imagery" === t12.type ? void 0 : "objectIdField" in t12 ? t12.objectIdField || o8 : null, s18 = e14.attributes;
    return s18 && i16 && s18[i16] || e14;
  }
  _mapIncludesLayer(e14) {
    var _a, _b, _c;
    return !!((_c = (_b = (_a = this.view) == null ? void 0 : _a.map) == null ? void 0 : _b.allLayers) == null ? void 0 : _c.includes(e14));
  }
  async _highlightActiveFeature() {
    const e14 = "highlight-active-feature";
    this.removeHandles(e14);
    const { highlightEnabled: t12, view: i16, activeFeature: s18, visible: r9 } = this;
    if (!(s18 && i16 && t12 && r9))
      return;
    const o10 = this._getHighlightLayer(s18);
    if (!(o10 && o10 instanceof b4 && this._mapIncludesLayer(o10)))
      return;
    const a10 = this._getLayerView(i16, o10);
    this._highlightActiveFeaturePromise = a10;
    const n13 = await a10;
    if (!(n13 && n11(n13) && this._highlightActiveFeaturePromise === a10 && this.activeFeature && this.highlightEnabled))
      return;
    const l10 = n13.highlight(this._getHighlightTarget(s18, o10));
    this.addHandles(l10, e14);
  }
  async _highlightSelectedFeature() {
    const e14 = "highlight-selected-feature";
    this.removeHandles(e14);
    const { selectedFeature: t12, highlightEnabled: i16, view: s18, visible: r9 } = this;
    if (!(t12 && s18 && i16 && r9))
      return;
    const o10 = this._getHighlightLayer(t12);
    if (!(o10 && o10 instanceof b4 && this._mapIncludesLayer(o10)))
      return;
    const a10 = this._getLayerView(s18, o10);
    this._highlightSelectedFeaturePromise = a10;
    const n13 = await a10;
    if (!(n13 && n11(n13) && this._highlightSelectedFeaturePromise === a10 && this.selectedFeature && this.highlightEnabled && this.visible))
      return;
    const l10 = n13.highlight(this._getHighlightTarget(t12, o10));
    this.addHandles(l10, e14);
  }
  _updateFeatures(e14) {
    const { features: t12 } = this;
    if (!(e14 == null ? void 0 : e14.length))
      return;
    if (!t12.length)
      return void (this.features = e14);
    const i16 = e14.filter((e15) => !t12.includes(e15));
    this.features = t12.concat(i16);
  }
};
e([y()], T8.prototype, "_fetchFeaturesController", void 0), e([y({ type: i15 })], T8.prototype, "actions", void 0), e([y({ readOnly: true })], T8.prototype, "active", null), e([y()], T8.prototype, "activeFeature", void 0), e([y({ readOnly: true })], T8.prototype, "allActions", null), e([y()], T8.prototype, "autoCloseEnabled", void 0), e([y()], T8.prototype, "autoOpenEnabled", void 0), e([y()], T8.prototype, "browseClusterEnabled", void 0), e([y()], T8.prototype, "content", void 0), e([y({ type: i15, readOnly: true })], T8.prototype, "defaultActions", null), e([y({ type: Boolean })], T8.prototype, "defaultPopupTemplateEnabled", void 0), e([y({ readOnly: true })], T8.prototype, "featureCount", null), e([y()], T8.prototype, "featurePage", void 0), e([y({ value: [] })], T8.prototype, "features", null), e([y()], T8.prototype, "featuresPerPage", void 0), e([y()], T8.prototype, "featureMenuOpen", void 0), e([y()], T8.prototype, "featureViewModelAbilities", void 0), e([y({ readOnly: true })], T8.prototype, "featureViewModels", void 0), e([y()], T8.prototype, "highlightEnabled", void 0), e([y()], T8.prototype, "includeDefaultActions", void 0), e([y({ type: x })], T8.prototype, "location", null), e([y({ readOnly: true })], T8.prototype, "pendingPromisesCount", null), e([y({ readOnly: true })], T8.prototype, "promiseCount", null), e([y()], T8.prototype, "promises", null), e([y({ readOnly: true })], T8.prototype, "selectedClusterBoundaryFeature", void 0), e([y({ value: null, readOnly: true })], T8.prototype, "selectedFeature", null), e([y({ value: -1 })], T8.prototype, "selectedFeatureIndex", null), e([y({ readOnly: true })], T8.prototype, "selectedFeatureViewModel", null), e([y({ readOnly: true })], T8.prototype, "state", null), e([y()], T8.prototype, "title", void 0), e([y()], T8.prototype, "updateLocationEnabled", void 0), e([y()], T8.prototype, "view", void 0), e([y()], T8.prototype, "visible", void 0), e([y({ readOnly: true })], T8.prototype, "waitingForContents", null), e([y({ readOnly: true })], T8.prototype, "waitingForResult", null), e([y()], T8.prototype, "zoomFactor", void 0), e([y()], T8.prototype, "zoomToLocation", void 0), e([y()], T8.prototype, "centerAtLocation", null), T8 = e([c2("esri.widgets.Features.FeaturesViewModel")], T8);
var x8 = T8;

// node_modules/@arcgis/core/widgets/Features/FeaturesVisibleElements.js
var s17 = class extends g {
  constructor() {
    super(...arguments), this.actionBar = true, this.closeButton = true, this.collapseButton = false, this.featureNavigation = true, this.heading = true, this.spinner = true;
  }
};
e([y({ type: Boolean, nonNullable: true })], s17.prototype, "actionBar", void 0), e([y({ type: Boolean, nonNullable: true })], s17.prototype, "closeButton", void 0), e([y({ type: Boolean, nonNullable: true })], s17.prototype, "collapseButton", void 0), e([y({ type: Boolean, nonNullable: true })], s17.prototype, "featureNavigation", void 0), e([y({ type: Boolean, nonNullable: true })], s17.prototype, "heading", void 0), e([y({ type: Boolean, nonNullable: true })], s17.prototype, "spinner", void 0), s17 = e([c2("esri.widgets.Features.FeaturesVisibleElements")], s17);
var a9 = s17;

// node_modules/@arcgis/core/widgets/Features.js
var x9 = "selected-index";
var j8 = 0;
var R4 = "features-spinner";
var k6 = 50;
var O4 = class extends i12(O) {
  constructor(e14, i16) {
    super(e14, i16), this._featureMenuIntersectionObserverCallback = ([e15]) => {
      (e15 == null ? void 0 : e15.isIntersecting) && null != this.viewModel.featurePage && this.viewModel.featurePage++;
    }, this._featureMenuIntersectionObserver = new IntersectionObserver(this._featureMenuIntersectionObserverCallback, { root: window.document }), this._featureMenuIntersectionObserverNode = null, this._focusOn = null, this._spinner = null, this._feature = null, this._relatedRecordsFlowItems = new V(), this._relatedRecordsWidget = new d9({ flowItems: this._relatedRecordsFlowItems }), this._rootFlowItemNode = null, this._featureMenuViewportNode = null, this.collapsed = false, this.icon = null, this.featureNavigationTop = false, this.headerActions = new i15(), this.headingLevel = 2, this.messages = null, this.messagesCommon = null, this.responsiveActionsEnabled = false, this.viewModel = new x8(), this.visibleElements = new a9(), this._renderAction = (e15, t12) => {
      const i17 = this._getActionTitle(e15), { type: o10, active: s18, uid: r9, disabled: n13, indicator: a10 } = e15;
      return e15.visible ? n("calcite-action", { active: "toggle" === o10 && e15.value, appearance: "solid", bind: this, "data-action-uid": r9, disabled: n13, icon: this._getActionIcon(e15), indicator: a10, key: `action-${t12}`, loading: s18, onclick: this._triggerAction, scale: "s", text: i17, title: this._hideActionText ? i17 : void 0 }, this._getFallbackIcon(e15)) : null;
    }, this._openFeatureMenu = () => {
      this.featureMenuOpen = true;
    }, this._previousFeature = () => {
      this.viewModel.selectedFeatureIndex--;
    }, this._nextFeature = () => {
      this.viewModel.selectedFeatureIndex++;
    }, this._handleFeatureMenuBack = () => {
      this.featureMenuOpen && (this._focusOn = "root-flow-item", this.featureMenuOpen = false);
    }, this._focusFlowItemNode = (e15) => {
      this._focusOn === e15 && requestAnimationFrame(async () => {
        var _a, _b;
        switch (e15) {
          case "menu-flow-item":
            await ((_a = this._featureMenuViewportNode) == null ? void 0 : _a.setFocus());
            break;
          case "root-flow-item":
            await ((_b = this._rootFlowItemNode) == null ? void 0 : _b.setFocus());
        }
        this._focusOn = null;
      });
    }, this._focusFlowItemNodeThrottled = e5(this._focusFlowItemNode, k6), this._displaySpinnerThrottled = e5(() => this._displaySpinner(), j8), this._addSelectedFeatureIndexHandle(), this.addHandles([this._displaySpinnerThrottled, this._focusFlowItemNodeThrottled, d2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.active;
    }, () => this._toggleScreenLocationEnabled()), d2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.active;
    }, (e15) => this._relatedRecordsWidget.closed = !e15), d2(() => {
      var _a;
      return (_a = this.visibleElements) == null ? void 0 : _a.closeButton;
    }, (e15) => this._relatedRecordsWidget.closable = e15), d2(() => {
      var _a;
      return (_a = this.visibleElements) == null ? void 0 : _a.spinner;
    }, (e15) => this._spinnerEnabledChange(e15)), d2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.view;
    }, (e15, t12) => this._viewChange(e15, t12)), d2(() => {
      var _a, _b;
      return (_b = (_a = this.viewModel) == null ? void 0 : _a.view) == null ? void 0 : _b.ready;
    }, (e15, t12) => this._viewReadyChange(e15 ?? false, t12 ?? false)), d2(() => {
      var _a, _b;
      return [(_a = this.viewModel) == null ? void 0 : _a.waitingForResult, (_b = this.viewModel) == null ? void 0 : _b.location];
    }, () => {
      this._hideSpinner(), this._displaySpinnerThrottled();
    }), d2(() => this.selectedFeatureWidget, () => this._destroyRelatedRecordsFlowItemWidgets()), d2(() => {
      var _a;
      const e15 = (_a = this.selectedFeatureWidget) == null ? void 0 : _a.viewModel;
      return [e15 == null ? void 0 : e15.title, e15 == null ? void 0 : e15.state];
    }, () => this._setTitleFromFeatureWidget()), d2(() => {
      var _a;
      const e15 = (_a = this.selectedFeatureWidget) == null ? void 0 : _a.viewModel;
      return [e15 == null ? void 0 : e15.content, e15 == null ? void 0 : e15.state];
    }, () => this._setContentFromFeatureWidget()), d2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.featureViewModels;
    }, () => this._featureMenuViewportScrollTop()), this._relatedRecordsWidget.on("close", () => this.close()), this._relatedRecordsWidget.on("exit", () => this._destroyRelatedRecordsFlowItemWidgets()), this._relatedRecordsWidget.on("open-related-feature", ({ feature: e15 }) => this._openRelatedFeature(e15))]);
  }
  loadDependencies() {
    return r3({ action: () => import("./calcite-action-AW5ALFBA.js"), "action-bar": () => import("./calcite-action-bar-QNECQ5JB.js"), "action-group": () => import("./calcite-action-group-QLQ7APMT.js"), button: () => import("./calcite-button-EKBJ2D7K.js"), flow: () => import("./calcite-flow-C45QE5EW.js"), "flow-item": () => import("./calcite-flow-item-SSG7LFOE.js"), list: () => import("./calcite-list-TSNRA7E7.js"), "list-item": () => import("./calcite-list-item-5JFMHRNV.js"), "list-item-group": () => import("./calcite-list-item-group-E7XTEONW.js"), loader: () => import("./calcite-loader-N4MEBG4W.js") });
  }
  destroy() {
    var _a, _b;
    this._destroyRelatedRecordsFlowItemWidgets(), this._destroySelectedFeatureWidget(), this._destroySpinner(), this._unobserveFeatureMenuObserver(), (_a = this._featureMenuIntersectionObserver) == null ? void 0 : _a.disconnect(), (_b = this._relatedRecordsWidget) == null ? void 0 : _b.destroy();
  }
  get _hideActionText() {
    var _a;
    if (!this.responsiveActionsEnabled)
      return false;
    const e14 = (_a = this.view) == null ? void 0 : _a.widthBreakpoint;
    return "xsmall" === e14 || "small" === e14 || "medium" === e14;
  }
  get _featureNavigationVisible() {
    return this.viewModel.active && this.viewModel.featureCount > 1 && this.visibleElements.featureNavigation;
  }
  get _isCollapsed() {
    return this._collapseEnabled && this.collapsed;
  }
  get _collapseEnabled() {
    return this.visibleElements.collapseButton && !!this.title && !!this.content;
  }
  get content() {
    return this.viewModel.content;
  }
  set content(e14) {
    this.viewModel.content = e14;
  }
  get featureMenuOpen() {
    return this.viewModel.featureMenuOpen;
  }
  set featureMenuOpen(e14) {
    this.viewModel.featureMenuOpen = e14;
  }
  get features() {
    return this.viewModel.features;
  }
  set features(e14) {
    this.viewModel.features = e14;
  }
  get location() {
    return this.viewModel.location;
  }
  set location(e14) {
    this.viewModel.location = e14;
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(e14) {
    this._overrideIfSome("label", e14);
  }
  get promises() {
    return this.viewModel.promises;
  }
  set promises(e14) {
    this.viewModel.promises = e14;
  }
  get selectedFeature() {
    return this.viewModel.selectedFeature;
  }
  get selectedFeatureIndex() {
    return this.viewModel.selectedFeatureIndex;
  }
  set selectedFeatureIndex(e14) {
    this.viewModel.selectedFeatureIndex = e14;
  }
  get selectedFeatureWidget() {
    const { _feature: e14, headingLevel: t12, _relatedRecordsFlowItems: i16 } = this, { selectedFeatureViewModel: o10 } = this.viewModel, s18 = { title: false };
    return o10 ? (e14 ? (e14.viewModel = o10, e14.visibleElements = s18) : this._feature = new x6({ flowItems: i16, headingLevel: t12 + 1, viewModel: o10, visibleElements: s18 }), this._feature) : null;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e14) {
    this.viewModel.title = e14;
  }
  get updateLocationEnabled() {
    return this.viewModel.updateLocationEnabled;
  }
  set updateLocationEnabled(e14) {
    this.viewModel.updateLocationEnabled = e14;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e14) {
    this.viewModel.view = e14;
  }
  get visible() {
    return this.viewModel.visible;
  }
  set visible(e14) {
    this.viewModel.visible = e14;
  }
  blur() {
    var _a;
    const { active: e14 } = this.viewModel;
    e14 ? (_a = this._rootFlowItemNode) == null ? void 0 : _a.blur() : s2.getLogger(this).warn("Features can only be blurred when currently active.");
  }
  clear() {
    return this.viewModel.clear();
  }
  close() {
    this.viewModel.visible = false;
  }
  fetchFeatures(e14, t12) {
    return this.viewModel.fetchFeatures(e14, t12);
  }
  focus() {
    const { active: e14 } = this.viewModel;
    e14 ? this._setFocusOn() : s2.getLogger(this).warn("Features can only be focused when currently active.");
  }
  next() {
    return this.viewModel.next();
  }
  open(e14) {
    this.removeHandles(x9);
    const t12 = { collapsed: (e14 == null ? void 0 : e14.collapsed) ?? false };
    this.set(t12), this.viewModel.open(e14), this.addHandles(p(() => !this.viewModel.waitingForResult, () => this._addSelectedFeatureIndexHandle(), { once: true }));
  }
  previous() {
    return this.viewModel.previous();
  }
  triggerAction(e14) {
    return this.viewModel.triggerAction(e14);
  }
  render() {
    return n("div", { bind: this, class: this.classes(n9.base, e6.widget, e6.panel), onkeydown: this._onMainKeydown }, this._renderHeader(), this._renderContentContainer());
  }
  _renderFeatureNavigation() {
    return [this._renderPagination(), this._renderFeatureMenuButton()];
  }
  _renderHeader() {
    return !this.featureMenuOpen && this.featureNavigationTop && this._featureNavigationVisible ? n("div", { class: n9.header, key: "header-actions" }, this._renderFeatureNavigation()) : null;
  }
  _renderFooter() {
    return this.featureMenuOpen || this.featureNavigationTop || !this._featureNavigationVisible ? null : n("div", { class: n9.footer, key: "footer-actions", slot: "footer" }, this._renderFeatureNavigation());
  }
  _renderFeatureMenuButton() {
    const { messages: e14, viewModel: t12 } = this, { featureCount: i16, selectedFeatureIndex: o10, pendingPromisesCount: s18 } = t12;
    return n("calcite-action", { appearance: "solid", bind: this, icon: "list", key: "feature-menu-button", label: e14.selectFeature, loading: s18 > 0, onclick: this._openFeatureMenu, scale: "s", text: s6(e14.pageText, { index: u2(o10 + 1), total: u2(i16) }), textEnabled: true, title: e14.selectFeature });
  }
  _renderPagination() {
    const { previous: e14, next: t12 } = this.messagesCommon.pagination;
    return n("calcite-action-bar", { class: n9.paginationActionBar, expandDisabled: true, key: "pagination-action-bar", layout: "horizontal", overflowActionsDisabled: true, scale: "s" }, n("calcite-action-group", { scale: "s" }, n("calcite-action", { appearance: "solid", class: n9.paginationPrevious, icon: "chevron-left", iconFlipRtl: true, label: e14, onclick: this._previousFeature, scale: "s", text: e14, title: e14 }), n("calcite-action", { appearance: "solid", icon: "chevron-right", iconFlipRtl: true, label: t12, onclick: this._nextFeature, scale: "s", text: t12, title: t12 })));
  }
  _renderFeatureMenuItem(e14) {
    const { selectedFeatureViewModel: t12, featureViewModels: i16 } = this.viewModel, o10 = e14 === t12, s18 = i16.indexOf(e14);
    return n("calcite-list-item", { bind: this, "data-feature-index": s18, key: `feature-menu-item-${e14.uid}`, onblur: this._removeActiveFeature, onfocus: this._setActiveFeature, onmouseleave: this._removeActiveFeature, onmouseover: this._setActiveFeature, selected: o10, onCalciteListItemSelect: this._selectFeature }, n("span", { innerHTML: e14.title || this.messagesCommon.untitled, slot: "content" }));
  }
  _groupResultsByLayer() {
    const { featureViewModels: e14 } = this.viewModel, t12 = /* @__PURE__ */ new Map();
    return e14.forEach((e15) => {
      const i16 = e15 == null ? void 0 : e15.graphic;
      if (!i16)
        return;
      const o10 = i16.sourceLayer ?? i16.layer, s18 = t12.get(o10) ?? [];
      t12.set(o10, [...s18, e15]);
    }), t12;
  }
  _renderFeatureMenu() {
    const { featureViewModels: e14 } = this.viewModel, t12 = this._groupResultsByLayer();
    return e14.length ? n("calcite-list", { selectionAppearance: "icon", selectionMode: "single" }, Array.from(t12.keys()).map((e15) => {
      var _a;
      return n("calcite-list-item-group", { heading: (e15 == null ? void 0 : e15.title) ?? this.messagesCommon.untitled, key: (e15 == null ? void 0 : e15.uid) || "untitled" }, (_a = t12.get(e15)) == null ? void 0 : _a.map((e16) => this._renderFeatureMenuItem(e16)));
    })) : null;
  }
  _renderHeaderAction(e14, t12) {
    return e14.visible ? n("calcite-action", { active: "toggle" === e14.type && e14.value, appearance: "solid", bind: this, "data-action-uid": e14.uid, disabled: e14.disabled, icon: e14.icon || "", indicator: e14.indicator, key: `header-action-${t12}`, loading: e14.active, onclick: this._triggerHeaderAction, scale: "m", slot: "header-actions-end", text: e14.title || "", title: e14.title || "" }) : null;
  }
  _renderHeaderActions() {
    return this.headerActions.map((e14, t12) => this._renderHeaderAction(e14, t12)).toArray();
  }
  _renderContentFeature() {
    const { headingLevel: e14, visibleElements: t12, _isCollapsed: i16, _collapseEnabled: o10, featureNavigationTop: s18 } = this, { title: r9, active: n13 } = this.viewModel, a10 = t12.heading && r9 ? r9 : "";
    return n("calcite-flow-item", { afterCreate: this._storeRootFlowItemNode, afterUpdate: this._focusRootFlowItemNode, bind: this, class: this.classes({ [n9.contentFeature]: true, [n9.flowItemCollapsed]: i16 }), closable: t12.closeButton, closed: !n13, collapsed: i16, collapseDirection: s18 ? "down" : "up", collapsible: o10, headingLevel: e14, key: "root-flow-item", onCalciteFlowItemClose: this.close, onCalciteFlowItemToggle: this._handleCollapseToggle }, a10 ? n(e8, { class: this.classes(n9.featuresHeading, e6.heading), innerHTML: a10, key: "header-content", level: this.headingLevel, slot: "header-content" }) : null, this._renderHeaderActions(), this._renderActionBar(), i16 ? null : n("div", { class: this.classes(n9.container, n9.contentContainer) }, this._renderContent()), this._renderFooter());
  }
  _renderFeatureMenuContainer() {
    const { viewModel: e14, featureMenuOpen: t12, messages: i16, messagesCommon: o10 } = this, { active: s18, featureViewModels: r9, pendingPromisesCount: n13 } = e14;
    return t12 ? n("calcite-flow-item", { afterCreate: this._storeFeatureMenuFlowItemNode, afterUpdate: this._focusFeatureMenuFlowItemNode, bind: this, closable: false, closed: !s18, description: s6(i16.total, { total: r9.length }), heading: i16.selectFeature, key: "feature-menu", loading: e14.waitingForContents, onCalciteFlowItemBack: this._handleFeatureMenuBack }, n13 > 0 ? n("calcite-loader", { class: n9.loader, inline: true, key: "feature-menu-loader", label: o10.loading, scale: "m", slot: "header-actions-end" }) : null, n("div", { class: n9.container }, this._renderFeatureMenu()), n("div", { afterCreate: this._featureMenuIntersectionObserverCreated, bind: this, class: n9.featureMenuObserver }), n("calcite-button", { appearance: "transparent", onclick: this._handleFeatureMenuBack, slot: "footer-actions", width: "full" }, o10.back)) : null;
  }
  _renderContentContainer() {
    return n("calcite-flow", { key: "content-container" }, this._renderContentFeature(), this._renderFeatureMenuContainer(), this._relatedRecordsWidget.render());
  }
  _getIconStyles(e14) {
    return { "background-image": e14 ? `url(${e14})` : "" };
  }
  _getActionImage(e14) {
    const { selectedFeature: t12 } = this, i16 = t12 == null ? void 0 : t12.attributes, { image: o10 } = e14;
    return o10 && i16 ? s6(o10, i16) : o10 ?? "";
  }
  _getFallbackIcon(e14) {
    const { className: t12, icon: i16 } = e14;
    if (i16)
      return null;
    const o10 = this._getActionImage(e14), s18 = { [n9.icon]: !!t12, [n9.actionImage]: !!o10 };
    return t12 && (s18[t12] = true), o10 || t12 ? n("span", { "aria-hidden": "true", class: this.classes(n9.icon, s18), key: "icon", styles: o10 ? this._getIconStyles(o10) : {} }) : null;
  }
  _renderActionBar() {
    var _a;
    return !this._isCollapsed && this.visibleElements.actionBar && ((_a = this.viewModel.allActions) == null ? void 0 : _a.length) ? n("calcite-action-bar", { expandDisabled: true, expanded: !this._hideActionText, key: "header-action-bar", scale: "s", slot: "action-bar" }, n("calcite-action-group", { overlayPositioning: "fixed", scale: "s" }, this._renderActions())) : null;
  }
  _renderActions() {
    return this.viewModel.allActions.toArray().map(this._renderAction);
  }
  _renderContent() {
    var _a;
    const e14 = (_a = this.viewModel) == null ? void 0 : _a.content;
    return e14 ? "string" == typeof e14 ? n("div", { class: t3.contentNode, innerHTML: e14, key: e14 }) : this.renderNodeContent(e14) : null;
  }
  _setFocusOn() {
    this._focusOn = this.featureMenuOpen ? "menu-flow-item" : "root-flow-item", this.renderNow();
  }
  _handleCollapseToggle() {
    this.collapsed = !this.collapsed;
  }
  async _openRelatedFeature(e14) {
    await e14.viewModel.updateGeometry();
    const t12 = e14.graphic, i16 = t12 == null ? void 0 : t12.geometry;
    if (null == i16 || null == t12)
      return;
    this._destroyRelatedRecordsFlowItemWidgets(), await this.viewModel.zoomTo({ target: i16 });
    const o10 = h12(i16);
    this.open({ features: [t12], location: null != o10 ? o10 : void 0 });
  }
  _focusRootFlowItemNode() {
    this._focusFlowItemNodeThrottled("root-flow-item");
  }
  _focusFeatureMenuFlowItemNode() {
    this._focusFlowItemNodeThrottled("menu-flow-item");
  }
  _storeRootFlowItemNode(e14) {
    this._rootFlowItemNode = e14, this._focusFlowItemNodeThrottled("root-flow-item");
  }
  _storeFeatureMenuFlowItemNode(e14) {
    this._featureMenuViewportNode = e14, this._focusFlowItemNodeThrottled("menu-flow-item");
  }
  _setActiveFeature(e14) {
    var _a;
    const { viewModel: t12 } = this, i16 = e14.currentTarget["data-feature-index"];
    t12.activeFeature = ((_a = t12.features) == null ? void 0 : _a[i16]) || null;
  }
  _removeActiveFeature() {
    this.viewModel.activeFeature = null;
  }
  _selectFeature(e14) {
    const t12 = e14.currentTarget["data-feature-index"];
    isNaN(t12) || (this.viewModel.selectedFeatureIndex = t12), this._handleFeatureMenuBack();
  }
  _unobserveFeatureMenuObserver() {
    this._featureMenuIntersectionObserverNode && this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode);
  }
  _featureMenuIntersectionObserverCreated(e14) {
    this._unobserveFeatureMenuObserver(), this._featureMenuIntersectionObserver.observe(e14), this._featureMenuIntersectionObserverNode = e14;
  }
  _getActionIcon(e14) {
    return e14.icon ? e14.icon : e14.image || e14.className ? void 0 : "question";
  }
  _getActionTitle(e14) {
    const { messages: t12, selectedFeature: i16, messagesCommon: o10 } = this, { id: s18 } = e14, r9 = i16 == null ? void 0 : i16.attributes, n13 = e14.title ?? "", a10 = "zoom-to-feature" === s18 ? s6(n13, { messages: t12 }) : "remove-selected-feature" === s18 ? s6(n13, { messages: o10 }) : "zoom-to-clustered-features" === s18 || "browse-clustered-features" === s18 ? s6(n13, { messages: t12 }) : e14.title;
    return a10 && r9 ? s6(a10, r9) : a10 ?? "";
  }
  _onMainKeydown(e14) {
    const t12 = c(e14);
    "ArrowLeft" === t12 && (e14.stopPropagation(), this._handleFeatureMenuBack(), this.previous()), "ArrowRight" === t12 && (e14.stopPropagation(), this._handleFeatureMenuBack(), this.next());
  }
  _featureMenuViewportScrollTop() {
    this._featureMenuViewportNode && this._featureMenuViewportNode.scrollContentTo({ top: 0 });
  }
  _setContentFromFeatureWidget() {
    const { selectedFeatureWidget: e14 } = this;
    e14 && (this.viewModel.content = e14);
  }
  _setTitleFromFeatureWidget() {
    const { selectedFeatureWidget: e14, messagesCommon: t12 } = this, i16 = e14 == null ? void 0 : e14.viewModel;
    e14 && (this.viewModel.title = "error" === (i16 == null ? void 0 : i16.state) ? t12 == null ? void 0 : t12.errorMessage : (i16 == null ? void 0 : i16.title) || "");
  }
  _addSelectedFeatureIndexHandle() {
    const e14 = d2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.selectedFeatureIndex;
    }, (e15, t12) => this._selectedFeatureIndexUpdated(e15, t12));
    this.addHandles(e14, x9);
  }
  _selectedFeatureIndexUpdated(e14, t12) {
    const { featureCount: i16 } = this.viewModel;
    i16 && e14 !== t12 && -1 !== e14 && (this._destroyRelatedRecordsFlowItemWidgets(), this._rootFlowItemNode && this._rootFlowItemNode.scrollContentTo({ top: 0 }));
  }
  _triggerHeaderAction(e14) {
    const t12 = e14.currentTarget;
    if (t12.disabled)
      return;
    const i16 = t12.dataset.actionUid, o10 = this.headerActions.find(({ uid: e15 }) => e15 === i16);
    o10 && !o10.disabled && ("toggle" === (o10 == null ? void 0 : o10.type) && (o10.value = !o10.value), this.emit("trigger-header-action", { action: o10 }));
  }
  _triggerAction(e14) {
    const t12 = e14.currentTarget;
    if (t12.disabled)
      return;
    const i16 = t12.dataset.actionUid, { allActions: o10 } = this.viewModel, s18 = o10.findIndex((e15) => e15.uid === i16), r9 = o10.at(s18);
    r9 && "toggle" === r9.type && (r9.value = !r9.value), this.viewModel.triggerAction(s18);
  }
  _createSpinner(e14) {
    e14 && (this._spinner = new h9({ view: e14 }), e14.ui.add(this._spinner, { key: R4, position: "manual", internal: true }));
  }
  _wireUpView(e14) {
    var _a;
    this._destroySpinner(), e14 && ((_a = this.visibleElements) == null ? void 0 : _a.spinner) && this._createSpinner(e14);
  }
  _hideSpinner() {
    const { _spinner: e14 } = this;
    e14 && (e14.location = null, e14.hide());
  }
  _viewReadyChange(e14, t12) {
    var _a;
    e14 ? this._wireUpView((_a = this.viewModel) == null ? void 0 : _a.view) : t12 && this.viewModel.clear();
  }
  _viewChange(e14, t12) {
    e14 && t12 && this.viewModel.clear();
  }
  _destroySelectedFeatureWidget() {
    const { _feature: e14 } = this;
    e14 && (e14.viewModel = null, !e14.destroyed && e14.destroy()), this._feature = null;
  }
  _destroyRelatedRecordsFlowItemWidgets() {
    this._relatedRecordsFlowItems.removeAll().forEach((e14) => {
      "showAllEnabled" in e14.viewModel && (e14.viewModel.showAllEnabled = false), e14.viewModel = null, e14.destroy();
    });
  }
  _toggleScreenLocationEnabled() {
    const { viewModel: e14 } = this;
    e14 && (e14.screenLocationEnabled = e14.active);
  }
  _displaySpinner() {
    const { _spinner: e14 } = this;
    if (!e14)
      return;
    const { location: t12, waitingForResult: i16 } = this.viewModel;
    i16 && t12 ? e14.show({ location: t12 }) : e14.hide();
  }
  _destroySpinner() {
    var _a;
    const { _spinner: e14, view: t12 } = this;
    e14 && ((_a = t12 == null ? void 0 : t12.ui) == null ? void 0 : _a.remove(e14, R4), e14.destroy(), this._spinner = null);
  }
  _spinnerEnabledChange(e14) {
    var _a;
    this._destroySpinner(), e14 && this._createSpinner((_a = this.viewModel) == null ? void 0 : _a.view);
  }
};
e([y()], O4.prototype, "_focusOn", void 0), e([y()], O4.prototype, "_relatedRecordsFlowItems", void 0), e([y()], O4.prototype, "_hideActionText", null), e([y()], O4.prototype, "_featureNavigationVisible", null), e([y()], O4.prototype, "_isCollapsed", null), e([y()], O4.prototype, "_collapseEnabled", null), e([y()], O4.prototype, "collapsed", void 0), e([y()], O4.prototype, "content", null), e([y()], O4.prototype, "icon", void 0), e([y()], O4.prototype, "featureMenuOpen", null), e([y()], O4.prototype, "featureNavigationTop", void 0), e([y()], O4.prototype, "features", null), e([y({ type: i15 })], O4.prototype, "headerActions", void 0), e([y()], O4.prototype, "headingLevel", void 0), e([y()], O4.prototype, "location", null), e([y()], O4.prototype, "label", null), e([y(), e2("esri/widgets/Features/t9n/Features")], O4.prototype, "messages", void 0), e([y(), e2("esri/t9n/common")], O4.prototype, "messagesCommon", void 0), e([y()], O4.prototype, "promises", null), e([y()], O4.prototype, "responsiveActionsEnabled", void 0), e([y({ readOnly: true })], O4.prototype, "selectedFeature", null), e([y()], O4.prototype, "selectedFeatureIndex", null), e([y({ readOnly: true })], O4.prototype, "selectedFeatureWidget", null), e([y()], O4.prototype, "title", null), e([y()], O4.prototype, "updateLocationEnabled", null), e([y()], O4.prototype, "view", null), e([y({ type: x8 }), e3(["triggerAction", "trigger-action"])], O4.prototype, "viewModel", void 0), e([y({ type: a9, nonNullable: true })], O4.prototype, "visibleElements", void 0), e([y()], O4.prototype, "visible", null), O4 = e([c2("esri.widgets.Features")], O4);
var T9 = O4;

// node_modules/@arcgis/core/widgets/Popup/css.js
var t9 = "esri-popup";
var o9 = `${t9}--is-docked`;
var e12 = { base: t9, main: `${t9}__main-container`, shadow: `${t9}--shadow`, isDocked: o9, isDockedTopLeft: `${o9}-top-left`, isDockedTopCenter: `${o9}-top-center`, isDockedTopRight: `${o9}-top-right`, isDockedBottomLeft: `${o9}-bottom-left`, isDockedBottomCenter: `${o9}-bottom-center`, isDockedBottomRight: `${o9}-bottom-right`, alignTopCenter: `${t9}--aligned-top-center`, alignBottomCenter: `${t9}--aligned-bottom-center`, alignTopLeft: `${t9}--aligned-top-left`, alignBottomLeft: `${t9}--aligned-bottom-left`, alignTopRight: `${t9}--aligned-top-right`, alignBottomRight: `${t9}--aligned-bottom-right`, pointer: `${t9}__pointer`, pointerDirection: `${t9}__pointer-direction` };

// node_modules/@arcgis/core/widgets/Popup/PopupViewModel.js
var e13 = class extends x8 {
  constructor(r9) {
    super(r9);
  }
};
e13 = e([c2("esri.widgets.Popup.PopupViewModel")], e13);
var t10 = e13;

// node_modules/@arcgis/core/widgets/Popup/PopupVisibleElements.js
var t11 = class extends g {
  constructor() {
    super(...arguments), this.closeButton = true, this.featureNavigation = true;
  }
};
e([y({ type: Boolean, nonNullable: true })], t11.prototype, "closeButton", void 0), e([y({ type: Boolean, nonNullable: true })], t11.prototype, "featureNavigation", void 0), t11 = e([c2("esri.widgets.Features.PopupVisibleElements")], t11);
var p13 = t11;

// node_modules/@arcgis/core/widgets/Popup.js
var f8 = { buttonEnabled: true, position: "auto", breakpoint: { width: 544 } };
var _4 = class extends O {
  constructor(e14, t12) {
    super(e14, t12), this._dockAction = new c6({ id: "popup-dock-action" }), this._featuresWidget = new T9({ responsiveActionsEnabled: true }), this._containerNode = null, this._mainContainerNode = null, this._pointerOffsetInPx = 16, this.alignment = "auto", this.collapsed = false, this.collapseEnabled = true, this.dockEnabled = false, this.headingLevel = 2, this.maxInlineActions = 3, this.messages = null, this.spinnerEnabled = true, this.viewModel = new t10(), this.visibleElements = new p13();
  }
  initialize() {
    this.addHandles([d2(() => {
      var _a, _b;
      return [(_b = (_a = this.viewModel) == null ? void 0 : _a.view) == null ? void 0 : _b.widthBreakpoint, this.dockEnabled];
    }, () => this._handleDockIcon(), { initial: true }), d2(() => {
      var _a, _b;
      return [this.dockEnabled, (_a = this.messages) == null ? void 0 : _a.undock, (_b = this.messages) == null ? void 0 : _b.dock];
    }, () => this._handleDockEnabled(), { initial: true }), d2(() => this.dockOptions, (e14) => {
      const { _dockAction: t12 } = this, i16 = this._featuresWidget.headerActions;
      i16.remove(t12), e14.buttonEnabled && i16.add(t12);
    }, { initial: true }), d2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.screenLocation;
    }, () => this._positionContainer()), d2(() => {
      var _a;
      return [(_a = this.viewModel) == null ? void 0 : _a.active, this.dockEnabled];
    }, () => this._toggleScreenLocationEnabled()), d2(() => {
      var _a, _b, _c, _d, _e, _f, _g;
      return [(_a = this.viewModel) == null ? void 0 : _a.screenLocation, (_c = (_b = this.viewModel) == null ? void 0 : _b.view) == null ? void 0 : _c.padding, (_e = (_d = this.viewModel) == null ? void 0 : _d.view) == null ? void 0 : _e.size, (_f = this.viewModel) == null ? void 0 : _f.active, (_g = this.viewModel) == null ? void 0 : _g.location, this.alignment];
    }, () => this.reposition()), d2(() => {
      var _a, _b;
      return (_b = (_a = this.viewModel) == null ? void 0 : _a.view) == null ? void 0 : _b.size;
    }, (e14, t12) => this._updateDockEnabledForViewSize(e14, t12)), d2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.view;
    }, (e14, t12) => this._viewChange(e14, t12)), d2(() => {
      var _a, _b;
      return (_b = (_a = this.viewModel) == null ? void 0 : _a.view) == null ? void 0 : _b.ready;
    }, (e14, t12) => this._viewReadyChange(e14 ?? false, t12 ?? false)), d2(() => this.viewModel, () => this._featuresWidget.viewModel = this.viewModel, { initial: true }), d2(() => this._featureNavigationTop, (e14) => this._featuresWidget.featureNavigationTop = e14, { initial: true }), d2(() => this.headingLevel, (e14) => this._featuresWidget.headingLevel = e14, { initial: true }), d2(() => this.collapseEnabled, (e14) => this._featuresWidget.visibleElements.collapseButton = e14, { initial: true }), d2(() => this.collapsed, (e14) => this._featuresWidget.collapsed = e14, { initial: true }), d2(() => this.visibleElements.closeButton, (e14) => this._featuresWidget.visibleElements.closeButton = !!e14, { initial: true }), d2(() => this.spinnerEnabled, (e14) => this._featuresWidget.visibleElements.spinner = e14, { initial: true }), d2(() => this.visibleElements.featureNavigation, (e14) => this._featuresWidget.visibleElements.featureNavigation = !!e14, { initial: true }), v2(() => this._featuresWidget, "trigger-header-action", (e14) => {
      e14.action === this._dockAction && (this.dockEnabled = !this.dockEnabled);
    })]);
  }
  destroy() {
    var _a;
    this._dockAction.destroy(), (_a = this._featuresWidget) == null ? void 0 : _a.destroy();
  }
  get _featureNavigationTop() {
    const { currentAlignment: e14, currentDockPosition: t12 } = this;
    return "bottom-left" === e14 || "bottom-center" === e14 || "bottom-right" === e14 || "top-left" === t12 || "top-center" === t12 || "top-right" === t12;
  }
  get actions() {
    return this.viewModel.actions;
  }
  set actions(e14) {
    this.viewModel.actions = e14;
  }
  get autoCloseEnabled() {
    return this.viewModel.autoCloseEnabled;
  }
  set autoCloseEnabled(e14) {
    this.viewModel.autoCloseEnabled = e14;
  }
  get autoOpenEnabled() {
    return t(s2.getLogger(this), "autoOpenEnabled", { replacement: "MapView/SceneView.popupEnabled", version: "4.27" }), this.viewModel.autoOpenEnabled;
  }
  set autoOpenEnabled(e14) {
    t(s2.getLogger(this), "autoOpenEnabled", { replacement: "MapView/SceneView.popupEnabled", version: "4.27" }), this.viewModel.autoOpenEnabled = e14;
  }
  get defaultPopupTemplateEnabled() {
    return this.viewModel.defaultPopupTemplateEnabled;
  }
  set defaultPopupTemplateEnabled(e14) {
    this.viewModel.defaultPopupTemplateEnabled = e14;
  }
  get content() {
    return this.viewModel.content;
  }
  set content(e14) {
    this.viewModel.content = e14;
  }
  get currentAlignment() {
    return this._getCurrentAlignment();
  }
  get currentDockPosition() {
    return this._getCurrentDockPosition();
  }
  get dockOptions() {
    return this._get("dockOptions") || f8;
  }
  set dockOptions(e14) {
    var _a, _b;
    const t12 = { ...f8 }, i16 = (_b = (_a = this.viewModel) == null ? void 0 : _a.view) == null ? void 0 : _b.breakpoints, o10 = {};
    i16 && (o10.width = i16.xsmall, o10.height = i16.xsmall);
    const n13 = { ...t12, ...e14 }, s18 = { ...t12.breakpoint, ...o10 }, { breakpoint: r9 } = n13;
    "object" == typeof r9 ? n13.breakpoint = { ...s18, ...r9 } : r9 && (n13.breakpoint = s18), this._set("dockOptions", n13), this._setCurrentDockPosition(), this.reposition();
  }
  get featureCount() {
    return this.viewModel.featureCount;
  }
  get featureMenuOpen() {
    return this.viewModel.featureMenuOpen;
  }
  set featureMenuOpen(e14) {
    this.viewModel.featureMenuOpen = e14;
  }
  get features() {
    return this.viewModel.features;
  }
  set features(e14) {
    this.viewModel.features = e14;
  }
  get goToOverride() {
    return this.viewModel.goToOverride;
  }
  set goToOverride(e14) {
    this.viewModel.goToOverride = e14;
  }
  get highlightEnabled() {
    return this.viewModel.highlightEnabled;
  }
  set highlightEnabled(e14) {
    this.viewModel.highlightEnabled = e14;
  }
  get location() {
    return this.viewModel.location;
  }
  set location(e14) {
    this.viewModel.location = e14;
  }
  get label() {
    var _a;
    return ((_a = this.messages) == null ? void 0 : _a.widgetLabel) ?? "";
  }
  set label(e14) {
    this._overrideIfSome("label", e14);
  }
  get promises() {
    return this.viewModel.promises;
  }
  set promises(e14) {
    this.viewModel.promises = e14;
  }
  get selectedFeature() {
    return this.viewModel.selectedFeature;
  }
  get selectedFeatureIndex() {
    return this.viewModel.selectedFeatureIndex;
  }
  set selectedFeatureIndex(e14) {
    this.viewModel.selectedFeatureIndex = e14;
  }
  get selectedFeatureWidget() {
    return this._featuresWidget.selectedFeatureWidget;
  }
  get title() {
    return this.viewModel.title;
  }
  set title(e14) {
    this.viewModel.title = e14;
  }
  get updateLocationEnabled() {
    return this.viewModel.updateLocationEnabled;
  }
  set updateLocationEnabled(e14) {
    this.viewModel.updateLocationEnabled = e14;
  }
  get view() {
    return this.viewModel.view;
  }
  set view(e14) {
    this.viewModel.view = e14;
  }
  get visible() {
    return this.viewModel.visible;
  }
  set visible(e14) {
    this.viewModel.visible = e14;
  }
  blur() {
    const { active: e14 } = this.viewModel;
    e14 || s2.getLogger(this).warn("Popup can only be blurred when currently active."), this._featuresWidget.blur();
  }
  clear() {
    return this.viewModel.clear();
  }
  close() {
    this.visible = false;
  }
  fetchFeatures(e14, t12) {
    return this.viewModel.fetchFeatures(e14, t12);
  }
  focus() {
    const { active: e14 } = this.viewModel;
    e14 || s2.getLogger(this).warn("Popup can only be focused when currently active."), this.renderNow(), this._featuresWidget.focus();
  }
  next() {
    return this.viewModel.next();
  }
  open(e14) {
    const t12 = !!e14 && !!e14.featureMenuOpen, i16 = { collapsed: !!e14 && !!e14.collapsed, featureMenuOpen: t12 };
    this.set(i16), this.viewModel.open(e14), this._shouldFocus(e14);
  }
  previous() {
    return this.viewModel.previous();
  }
  reposition() {
    this.renderNow(), this._positionContainer(), this._setCurrentAlignment();
  }
  triggerAction(e14) {
    return this.viewModel.triggerAction(e14);
  }
  render() {
    var _a, _b, _c, _d;
    const { dockEnabled: e14, currentAlignment: t12, currentDockPosition: i16 } = this, { active: o10 } = this.viewModel, n13 = o10 && e14, s18 = o10 && !e14, r9 = (_b = (_a = this.selectedFeature) == null ? void 0 : _a.layer) == null ? void 0 : _b.title, l10 = (_d = (_c = this.selectedFeature) == null ? void 0 : _c.layer) == null ? void 0 : _d.id, a10 = { [e12.alignTopCenter]: "top-center" === t12, [e12.alignBottomCenter]: "bottom-center" === t12, [e12.alignTopLeft]: "top-left" === t12, [e12.alignBottomLeft]: "bottom-left" === t12, [e12.alignTopRight]: "top-right" === t12, [e12.alignBottomRight]: "bottom-right" === t12, [e12.isDocked]: n13, [e12.shadow]: s18, [e12.isDockedTopLeft]: "top-left" === i16, [e12.isDockedTopCenter]: "top-center" === i16, [e12.isDockedTopRight]: "top-right" === i16, [e12.isDockedBottomLeft]: "bottom-left" === i16, [e12.isDockedBottomCenter]: "bottom-center" === i16, [e12.isDockedBottomRight]: "bottom-right" === i16 };
    return n("div", { afterCreate: this._positionContainer, afterUpdate: this._positionContainer, bind: this, class: this.classes(e12.base, a10), "data-layer-id": l10, "data-layer-title": r9, role: "presentation" }, o10 ? [this._renderMainContainer(), this._renderPointer()] : null);
  }
  _renderPointer() {
    return this.dockEnabled ? null : n("div", { class: e12.pointer, key: "popup-pointer", role: "presentation" }, n("div", { class: this.classes(e12.pointerDirection, e12.shadow) }));
  }
  _renderMainContainer() {
    const { dockEnabled: e14 } = this, t12 = { [e12.shadow]: e14 };
    return n("div", { afterCreate: this._setMainContainerNode, afterUpdate: this._setMainContainerNode, bind: this, class: this.classes(e12.main, e6.widget, t12) }, this._featuresWidget.render());
  }
  async _shouldFocus(e14) {
    (e14 == null ? void 0 : e14.shouldFocus) && (await w(() => {
      var _a;
      return true === ((_a = this.viewModel) == null ? void 0 : _a.active);
    }), this.focus());
  }
  _isOutsideView(e14) {
    const { popupHeight: t12, popupWidth: i16, screenLocation: o10, side: n13, view: s18 } = e14;
    if (isNaN(i16) || isNaN(t12) || !s18 || !o10)
      return false;
    const r9 = s18.padding;
    return "right" === n13 && o10.x + i16 / 2 > s18.width - r9.right || ("left" === n13 && o10.x - i16 / 2 < r9.left || ("top" === n13 && o10.y - t12 < r9.top || "bottom" === n13 && o10.y + t12 > s18.height - r9.bottom));
  }
  _calculateAutoAlignment(e14) {
    if ("auto" !== e14)
      return e14;
    const { _pointerOffsetInPx: t12, _containerNode: i16, _mainContainerNode: o10, viewModel: n13 } = this, { screenLocation: s18, view: r9 } = n13;
    if (null == s18 || !r9 || !i16)
      return "top-center";
    function l10(e15) {
      return parseInt(e15.replaceAll(/[^-\d\.]/g, ""), 10);
    }
    const a10 = o10 ? window.getComputedStyle(o10, null) : null, d11 = a10 ? l10(a10.getPropertyValue("max-height")) : 0, c21 = a10 ? l10(a10.getPropertyValue("height")) : 0, { height: p14, width: h13 } = i16.getBoundingClientRect(), u11 = h13 + t12, g12 = Math.max(p14, d11, c21) + t12, v11 = this._isOutsideView({ popupHeight: g12, popupWidth: u11, screenLocation: s18, side: "right", view: r9 }), w11 = this._isOutsideView({ popupHeight: g12, popupWidth: u11, screenLocation: s18, side: "left", view: r9 }), m10 = this._isOutsideView({ popupHeight: g12, popupWidth: u11, screenLocation: s18, side: "top", view: r9 }), b10 = this._isOutsideView({ popupHeight: g12, popupWidth: u11, screenLocation: s18, side: "bottom", view: r9 });
    return w11 ? m10 ? "bottom-right" : "top-right" : v11 ? m10 ? "bottom-left" : "top-left" : m10 ? b10 ? "top-center" : "bottom-center" : "top-center";
  }
  _callCurrentAlignment(e14) {
    return "function" == typeof e14 ? e14.call(this) : e14;
  }
  _getCurrentAlignment() {
    const { alignment: e14, dockEnabled: t12 } = this;
    return t12 || !this.viewModel.active ? null : this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e14)));
  }
  _setCurrentAlignment() {
    this._set("currentAlignment", this._getCurrentAlignment());
  }
  _setCurrentDockPosition() {
    this._set("currentDockPosition", this._getCurrentDockPosition());
  }
  _calculatePositionResult(e14) {
    const t12 = ["left", "right"];
    return v3(this.container) && t12.reverse(), e14 == null ? void 0 : e14.replace(/leading/gi, t12[0]).replaceAll(/trailing/gi, t12[1]);
  }
  _callDockPosition(e14) {
    return "function" == typeof e14 ? e14.call(this) : e14;
  }
  _getDockPosition() {
    var _a;
    return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((_a = this.dockOptions) == null ? void 0 : _a.position)));
  }
  _getCurrentDockPosition() {
    return this.dockEnabled && this.viewModel.active ? this._getDockPosition() : null;
  }
  _calculateAutoDockPosition(e14) {
    var _a;
    if ("auto" !== e14)
      return e14;
    const t12 = (_a = this.viewModel) == null ? void 0 : _a.view, i16 = v3(this.container) ? "top-left" : "top-right";
    if (!t12)
      return i16;
    const o10 = t12.padding || { left: 0, right: 0, top: 0, bottom: 0 }, n13 = t12.width - o10.left - o10.right, { breakpoints: s18 } = t12;
    return s18 && n13 <= s18.xsmall ? "bottom-center" : i16;
  }
  _getDockIcon() {
    const e14 = this._getDockPosition();
    if (this.dockEnabled)
      return "minimize";
    switch (e14) {
      case "top-left":
      case "bottom-left":
        return "dock-left";
      case "top-center":
        return "maximize";
      case "bottom-center":
        return "dock-bottom";
      default:
        return "dock-right";
    }
  }
  _handleDockIcon() {
    this._dockAction.icon = this._getDockIcon();
  }
  _handleDockEnabled() {
    var _a, _b;
    this._dockAction.title = this.dockEnabled ? (_a = this.messages) == null ? void 0 : _a.undock : (_b = this.messages) == null ? void 0 : _b.dock;
  }
  _setMainContainerNode(e14) {
    this._mainContainerNode = e14;
  }
  _positionContainer(e14 = this._containerNode) {
    if (e14 && (this._containerNode = e14), !this._containerNode)
      return;
    const { screenLocation: t12 } = this.viewModel, { width: i16 } = this._containerNode.getBoundingClientRect(), o10 = this._calculatePositionStyle(t12, i16);
    o10 && Object.assign(this._containerNode.style, o10);
  }
  _calculateFullWidth(e14) {
    const { currentAlignment: t12, _pointerOffsetInPx: i16 } = this;
    return "top-left" === t12 || "bottom-left" === t12 || "top-right" === t12 || "bottom-right" === t12 ? e14 + i16 : e14;
  }
  _calculateAlignmentPosition(e14, t12, i16, o10) {
    const { currentAlignment: n13, _pointerOffsetInPx: s18 } = this;
    if (!i16)
      return;
    const { padding: r9 } = i16, l10 = o10 / 2, a10 = i16.height - t12, d11 = i16.width - e14;
    return "bottom-center" === n13 ? { top: t12 + s18 - r9.top, left: e14 - l10 - r9.left } : "top-left" === n13 ? { bottom: a10 + s18 - r9.bottom, right: d11 + s18 - r9.right } : "bottom-left" === n13 ? { top: t12 + s18 - r9.top, right: d11 + s18 - r9.right } : "top-right" === n13 ? { bottom: a10 + s18 - r9.bottom, left: e14 + s18 - r9.left } : "bottom-right" === n13 ? { top: t12 + s18 - r9.top, left: e14 + s18 - r9.left } : "top-center" === n13 ? { bottom: a10 + s18 - r9.bottom, left: e14 - l10 - r9.left } : void 0;
  }
  _calculatePositionStyle(e14, t12) {
    const { dockEnabled: i16, view: o10 } = this;
    if (!o10)
      return;
    if (i16)
      return { left: "", top: "", right: "", bottom: "" };
    if (null == e14 || !t12)
      return;
    const n13 = this._calculateFullWidth(t12), s18 = this._calculateAlignmentPosition(e14.x, e14.y, o10, n13);
    return s18 ? { top: void 0 !== s18.top ? `${s18.top}px` : "auto", left: void 0 !== s18.left ? `${s18.left}px` : "auto", bottom: void 0 !== s18.bottom ? `${s18.bottom}px` : "auto", right: void 0 !== s18.right ? `${s18.right}px` : "auto" } : void 0;
  }
  _viewChange(e14, t12) {
    e14 && t12 && (this.close(), this.clear());
  }
  _viewReadyChange(e14, t12) {
    e14 ? this._wireUpView() : t12 && (this.close(), this.clear());
  }
  _wireUpView() {
    this._setDockEnabledForViewSize(this.dockOptions);
  }
  _dockingThresholdCrossed(e14, t12, i16) {
    const [o10, n13] = e14, [s18, r9] = t12, { width: l10 = 0, height: a10 = 0 } = i16 ?? {};
    return o10 <= l10 && s18 > l10 || o10 > l10 && s18 <= l10 || n13 <= a10 && r9 > a10 || n13 > a10 && r9 <= a10;
  }
  _updateDockEnabledForViewSize(e14, t12) {
    var _a, _b;
    if (!e14 || !t12)
      return;
    const i16 = ((_b = (_a = this.viewModel) == null ? void 0 : _a.view) == null ? void 0 : _b.padding) || { left: 0, right: 0, top: 0, bottom: 0 }, o10 = i16.left + i16.right, n13 = i16.top + i16.bottom, s18 = [], r9 = [];
    s18[0] = e14[0] - o10, s18[1] = e14[1] - n13, r9[0] = t12[0] - o10, r9[1] = t12[1] - n13;
    const { dockOptions: l10 } = this, a10 = l10.breakpoint;
    this._dockingThresholdCrossed(s18, r9, a10) && this._setDockEnabledForViewSize(l10), this._setCurrentDockPosition();
  }
  _toggleScreenLocationEnabled() {
    const { dockEnabled: e14, viewModel: t12 } = this;
    if (!t12)
      return;
    const i16 = t12.active && !e14;
    t12.screenLocationEnabled = i16;
  }
  _shouldDockAtCurrentViewSize(e14) {
    var _a, _b;
    const t12 = e14.breakpoint, i16 = (_b = (_a = this.viewModel) == null ? void 0 : _a.view) == null ? void 0 : _b.ui;
    if (!i16)
      return false;
    const { width: o10, height: n13 } = i16;
    if (isNaN(o10) || isNaN(n13))
      return false;
    if (!t12)
      return false;
    const s18 = t12.hasOwnProperty("width") && o10 <= (t12.width ?? 0), r9 = t12.hasOwnProperty("height") && n13 <= (t12.height ?? 0);
    return s18 || r9;
  }
  _setDockEnabledForViewSize(e14) {
    e14.breakpoint && (this.dockEnabled = this._shouldDockAtCurrentViewSize(e14));
  }
};
e([y({ readOnly: true })], _4.prototype, "_featureNavigationTop", null), e([y()], _4.prototype, "actions", null), e([y()], _4.prototype, "alignment", void 0), e([y()], _4.prototype, "autoCloseEnabled", null), e([y()], _4.prototype, "autoOpenEnabled", null), e([y()], _4.prototype, "defaultPopupTemplateEnabled", null), e([y()], _4.prototype, "content", null), e([y()], _4.prototype, "collapsed", void 0), e([y()], _4.prototype, "collapseEnabled", void 0), e([y({ readOnly: true })], _4.prototype, "currentAlignment", null), e([y({ readOnly: true })], _4.prototype, "currentDockPosition", null), e([y()], _4.prototype, "dockOptions", null), e([y()], _4.prototype, "dockEnabled", void 0), e([y({ readOnly: true })], _4.prototype, "featureCount", null), e([y()], _4.prototype, "featureMenuOpen", null), e([y()], _4.prototype, "features", null), e([y()], _4.prototype, "goToOverride", null), e([y()], _4.prototype, "headingLevel", void 0), e([y()], _4.prototype, "highlightEnabled", null), e([y()], _4.prototype, "location", null), e([y()], _4.prototype, "label", null), e([y()], _4.prototype, "maxInlineActions", void 0), e([y(), e2("esri/widgets/Popup/t9n/Popup")], _4.prototype, "messages", void 0), e([y()], _4.prototype, "promises", null), e([y({ readOnly: true })], _4.prototype, "selectedFeature", null), e([y()], _4.prototype, "selectedFeatureIndex", null), e([y({ readOnly: true })], _4.prototype, "selectedFeatureWidget", null), e([y()], _4.prototype, "spinnerEnabled", void 0), e([y()], _4.prototype, "title", null), e([y()], _4.prototype, "updateLocationEnabled", null), e([y()], _4.prototype, "view", null), e([y({ type: t10 }), e3(["triggerAction", "trigger-action"])], _4.prototype, "viewModel", void 0), e([y()], _4.prototype, "visible", null), e([y({ type: p13, nonNullable: true })], _4.prototype, "visibleElements", void 0), _4 = e([c2("esri.widgets.Popup")], _4);
var k7 = _4;
export {
  k7 as default
};
//# sourceMappingURL=Popup-DFZBTJE6.js.map
