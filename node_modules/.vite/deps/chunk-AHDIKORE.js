import {
  a,
  c
} from "./chunk-RCB4CZ33.js";
import {
  b,
  c as c2,
  d,
  p,
  w
} from "./chunk-HX5GOVNX.js";
import {
  b as b2
} from "./chunk-2Q2Q2Z4U.js";
import {
  a as a2,
  p3 as p2,
  x
} from "./chunk-HITXLR5N.js";
import {
  i
} from "./chunk-LMT5JII2.js";
import {
  j
} from "./chunk-XXFXRXFH.js";
import {
  I,
  Rt
} from "./chunk-R5DM4YAB.js";
import {
  s3 as s
} from "./chunk-WJ3HJKNC.js";

// node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js
function g(t, e, r, o) {
  const n = t.name;
  return null == n ? Promise.reject(new s("symbolstyleutils:style-symbol-reference-name-missing", "Missing name in style symbol reference")) : t.styleName && "Esri2DPointSymbolsStyle" === t.styleName ? d2(n, e, o) : c2(t, e, o).then((t2) => h(t2, n, e, r, d, o));
}
function j2(t, e) {
  return e.items.find((e2) => e2.name === t);
}
function h(u, y, c3, g2, h2, d3) {
  var _a, _b;
  const U = null != (c3 == null ? void 0 : c3.portal) ? c3.portal : j.getDefault(), N = { portal: U, url: I(u.baseUrl), origin: "portal-item" }, w2 = j2(y, u.data);
  if (!w2) {
    const t = `The symbol name '${y}' could not be found`;
    return Promise.reject(new s("symbolstyleutils:symbol-name-not-found", t, { symbolName: y }));
  }
  let S = i(h2(w2, g2), N), D = ((_a = w2.thumbnail) == null ? void 0 : _a.href) ?? null;
  const O = (_b = w2.thumbnail) == null ? void 0 : _b.imageData;
  c() && (S = a(S) ?? "", D = a(D));
  const P = { portal: U, url: I(Rt(S)), origin: "portal-item" };
  return b(S, d3).then((e) => {
    const r = "cimRef" === g2 ? p(e.data) : e.data, l = b2(r, P);
    if (l && x(l)) {
      if (D) {
        const t = i(D, N);
        l.thumbnail = new p2({ url: t });
      } else
        O && (l.thumbnail = new p2({ url: `data:image/png;base64,${O}` }));
      u.styleUrl ? l.styleOrigin = new a2({ portal: c3.portal, styleUrl: u.styleUrl, name: y }) : u.styleName && (l.styleOrigin = new a2({ portal: c3.portal, styleName: u.styleName, name: y }));
    }
    return l;
  });
}
function d2(t, e, r) {
  const l = w.replaceAll(/\{SymbolName\}/gi, t), m = null != e.portal ? e.portal : j.getDefault();
  return b(l, r).then((t2) => {
    const e2 = p(t2.data);
    return b2(e2, { portal: m, url: I(Rt(l)), origin: "portal-item" });
  });
}

export {
  g,
  j2 as j,
  h
};
//# sourceMappingURL=chunk-AHDIKORE.js.map
