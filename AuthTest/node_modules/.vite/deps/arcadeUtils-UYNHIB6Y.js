import {
  $ as $2,
  C,
  L as L2,
  W as W2,
  c as c2,
  d,
  f as f2,
  l as l2,
  m as m2,
  o,
  p as p4,
  p2 as p5,
  s as s2,
  u as u3,
  x as x2,
  y
} from "./chunk-W24NOO6R.js";
import "./chunk-JZRUQED2.js";
import {
  D
} from "./chunk-3SRIDUXT.js";
import "./chunk-2SW44O36.js";
import {
  i as i2,
  r as r5,
  u as u4,
  y as y2
} from "./chunk-7QTR2TBZ.js";
import "./chunk-6643GOM6.js";
import {
  N
} from "./chunk-Z3CHIB6Q.js";
import {
  $,
  F2 as F,
  Fe,
  G2 as G,
  H,
  Ie,
  K,
  L,
  M2,
  Me,
  Ne,
  O2 as O,
  P2 as P,
  Q,
  R,
  U,
  W,
  We,
  X,
  a as a3,
  be,
  ce,
  e,
  fe,
  i,
  je,
  ke,
  l,
  n as n4,
  ne,
  p as p3,
  pe,
  q,
  qe,
  r as r3,
  r2 as r4,
  s,
  s2 as s3,
  s3 as s4,
  se,
  u as u2,
  v2 as v,
  w,
  z as z2
} from "./chunk-24PJGGGS.js";
import "./chunk-IHXVTF6I.js";
import "./chunk-747B2TEO.js";
import "./chunk-4NEWABLH.js";
import "./chunk-FW2Y26A2.js";
import "./chunk-5WG7GACT.js";
import {
  a as a2,
  c,
  n as n2,
  n2 as n3,
  r as r2
} from "./chunk-W4QVNWBV.js";
import "./chunk-XN6LAULS.js";
import "./chunk-CKGVKMVG.js";
import "./chunk-RP5SAUAF.js";
import "./chunk-GAJBN4TM.js";
import "./chunk-IRNKV32L.js";
import "./chunk-GAWSWBHO.js";
import "./chunk-SZAJDZCO.js";
import "./chunk-3DSKWYU4.js";
import "./chunk-ZZYUEH57.js";
import "./chunk-VTWXDFFD.js";
import {
  p as p2
} from "./chunk-IPCIO3PX.js";
import "./chunk-V2RPSCV3.js";
import {
  j as j2,
  m3 as m,
  u
} from "./chunk-OIIDE5GZ.js";
import "./chunk-3XSRVKBX.js";
import "./chunk-WYBZLWIA.js";
import "./chunk-MKW4ORPJ.js";
import "./chunk-YTH6VA7N.js";
import "./chunk-GINTRQSD.js";
import "./chunk-H7BKONNV.js";
import "./chunk-K6C6RVSV.js";
import "./chunk-KBJ5Z4R2.js";
import "./chunk-XZS3Q5K4.js";
import {
  j as j3
} from "./chunk-WZPOQGKL.js";
import "./chunk-CCXEAKIM.js";
import {
  M
} from "./chunk-Y5D433JZ.js";
import {
  p,
  x2 as x
} from "./chunk-QNOCEWCR.js";
import "./chunk-WURET5CW.js";
import {
  f
} from "./chunk-QWPLZ3QH.js";
import {
  z
} from "./chunk-HLGIRLYQ.js";
import "./chunk-N2K4VRZH.js";
import "./chunk-WL4VPODY.js";
import "./chunk-OMPEZIP5.js";
import "./chunk-EUTNDAIV.js";
import "./chunk-SJZIFARA.js";
import {
  j,
  r
} from "./chunk-R5DM4YAB.js";
import "./chunk-NSRXJNTS.js";
import "./chunk-LXXF7K7W.js";
import "./chunk-SBW6NNVI.js";
import "./chunk-62CXLI6S.js";
import {
  E
} from "./chunk-RFPH3ZTZ.js";
import {
  n
} from "./chunk-WGO3VFQP.js";
import "./chunk-CQS47VN5.js";
import {
  a
} from "./chunk-WJ3HJKNC.js";
import {
  has
} from "./chunk-4V6374PV.js";
import "./chunk-76J2PTFD.js";

// node_modules/@arcgis/core/arcade/functions/geomsync.js
var q2 = null;
function z3(e5) {
  return 0 === r.indexOf("4.") ? j2.fromExtent(e5) : new j2({ spatialReference: e5.spatialReference, rings: [[[e5.xmin, e5.ymin], [e5.xmin, e5.ymax], [e5.xmax, e5.ymax], [e5.xmax, e5.ymin], [e5.xmin, e5.ymin]]] });
}
function C2(n7) {
  q2 = n7;
}
function J(n7, e5) {
  if ("polygon" !== n7.type && "polyline" !== n7.type && "extent" !== n7.type)
    return 0;
  let t3 = 1;
  if (n7.spatialReference.vcsWkid || n7.spatialReference.latestVcsWkid) {
    t3 = i2(n7.spatialReference) / z(n7.spatialReference);
  }
  let r8 = 0;
  if ("polyline" === n7.type)
    for (const a5 of n7.paths)
      for (let n8 = 1; n8 < a5.length; n8++)
        r8 += r5(a5[n8], a5[n8 - 1], t3);
  else if ("polygon" === n7.type)
    for (const a5 of n7.rings) {
      for (let n8 = 1; n8 < a5.length; n8++)
        r8 += r5(a5[n8], a5[n8 - 1], t3);
      (a5[0][0] !== a5[a5.length - 1][0] || a5[0][1] !== a5[a5.length - 1][1] || void 0 !== a5[0][2] && a5[0][2] !== a5[a5.length - 1][2]) && (r8 += r5(a5[0], a5[a5.length - 1], t3));
    }
  else
    "extent" === n7.type && (r8 += 2 * r5([n7.xmin, n7.ymin, 0], [n7.xmax, n7.ymin, 0], t3), r8 += 2 * r5([n7.xmin, n7.ymin, 0], [n7.xmin, n7.ymax, 0], t3), r8 *= 2, r8 += 4 * Math.abs(L(n7.zmax, 0) * t3 - L(n7.zmin, 0) * t3));
  const i5 = new m({ hasZ: false, hasM: false, spatialReference: n7.spatialReference, paths: [[0, 0], [0, r8]] });
  return q2.planarLength(i5, e5);
}
function S(n7, j5) {
  function L6(n8, e5, i5) {
    if (ne(i5, 2, 2, n8, e5), i5[0] instanceof p && i5[1] instanceof p)
      ;
    else if (i5[0] instanceof p && null === i5[1])
      ;
    else if (i5[1] instanceof p && null === i5[0])
      ;
    else if (null !== i5[0] || null !== i5[1])
      throw new a3(n8, r3.InvalidParameter, e5);
  }
  n7.disjoint = function(n8, e5) {
    return j5(n8, e5, (t3, r8, i5) => (i5 = ke(i5), L6(n8, e5, i5), null === i5[0] || null === i5[1] || q2.disjoint(i5[0], i5[1])));
  }, n7.intersects = function(n8, e5) {
    return j5(n8, e5, (t3, r8, i5) => (i5 = ke(i5), L6(n8, e5, i5), null !== i5[0] && null !== i5[1] && q2.intersects(i5[0], i5[1])));
  }, n7.touches = function(n8, e5) {
    return j5(n8, e5, (t3, r8, i5) => (i5 = ke(i5), L6(n8, e5, i5), null !== i5[0] && null !== i5[1] && q2.touches(i5[0], i5[1])));
  }, n7.crosses = function(n8, e5) {
    return j5(n8, e5, (t3, r8, i5) => (i5 = ke(i5), L6(n8, e5, i5), null !== i5[0] && null !== i5[1] && q2.crosses(i5[0], i5[1])));
  }, n7.within = function(n8, e5) {
    return j5(n8, e5, (t3, r8, i5) => (i5 = ke(i5), L6(n8, e5, i5), null !== i5[0] && null !== i5[1] && q2.within(i5[0], i5[1])));
  }, n7.contains = function(n8, e5) {
    return j5(n8, e5, (t3, r8, i5) => (i5 = ke(i5), L6(n8, e5, i5), null !== i5[0] && null !== i5[1] && q2.contains(i5[0], i5[1])));
  }, n7.overlaps = function(n8, e5) {
    return j5(n8, e5, (t3, r8, i5) => (i5 = ke(i5), L6(n8, e5, i5), null !== i5[0] && null !== i5[1] && q2.overlaps(i5[0], i5[1])));
  }, n7.equals = function(n8, e5) {
    return j5(n8, e5, (t3, r8, i5) => (ne(i5, 2, 2, n8, e5), i5[0] === i5[1] || (i5[0] instanceof p && i5[1] instanceof p ? q2.equals(i5[0], i5[1]) : (Q(i5[0]) && Q(i5[1]) || K(i5[0]) && K(i5[1]) || !(!X(i5[0]) || !X(i5[1]))) && i5[0].equals(i5[1]))));
  }, n7.relate = function(n8, e5) {
    return j5(n8, e5, (i5, a5, l6) => {
      if (l6 = ke(l6), ne(l6, 3, 3, n8, e5), l6[0] instanceof p && l6[1] instanceof p)
        return q2.relate(l6[0], l6[1], ce(l6[2]));
      if (l6[0] instanceof p && null === l6[1])
        return false;
      if (l6[1] instanceof p && null === l6[0])
        return false;
      if (null === l6[0] && null === l6[1])
        return false;
      throw new a3(n8, r3.InvalidParameter, e5);
    });
  }, n7.intersection = function(n8, e5) {
    return j5(n8, e5, (t3, r8, i5) => (i5 = ke(i5), L6(n8, e5, i5), null === i5[0] || null === i5[1] ? null : q2.intersect(i5[0], i5[1])));
  }, n7.union = function(n8, e5) {
    return j5(n8, e5, (a5, l6, f5) => {
      const s9 = [];
      if (0 === (f5 = ke(f5)).length)
        throw new a3(n8, r3.WrongNumberOfParameters, e5);
      if (1 === f5.length)
        if (q(f5[0])) {
          const i5 = ke(f5[0]);
          for (let a6 = 0; a6 < i5.length; a6++)
            if (null !== i5[a6]) {
              if (!(i5[a6] instanceof p))
                throw new a3(n8, r3.InvalidParameter, e5);
              s9.push(i5[a6]);
            }
        } else {
          if (!$(f5[0])) {
            if (f5[0] instanceof p)
              return Ne(c(f5[0]), n8.spatialReference);
            if (null === f5[0])
              return null;
            throw new a3(n8, r3.InvalidParameter, e5);
          }
          {
            const i5 = ke(f5[0].toArray());
            for (let a6 = 0; a6 < i5.length; a6++)
              if (null !== i5[a6]) {
                if (!(i5[a6] instanceof p))
                  throw new a3(n8, r3.InvalidParameter, e5);
                s9.push(i5[a6]);
              }
          }
        }
      else
        for (let i5 = 0; i5 < f5.length; i5++)
          if (null !== f5[i5]) {
            if (!(f5[i5] instanceof p))
              throw new a3(n8, r3.InvalidParameter, e5);
            s9.push(f5[i5]);
          }
      return 0 === s9.length ? null : q2.union(s9);
    });
  }, n7.difference = function(n8, e5) {
    return j5(n8, e5, (t3, r8, a5) => (a5 = ke(a5), L6(n8, e5, a5), null !== a5[0] && null === a5[1] ? c(a5[0]) : null === a5[0] ? null : q2.difference(a5[0], a5[1])));
  }, n7.symmetricdifference = function(n8, e5) {
    return j5(n8, e5, (t3, r8, a5) => (a5 = ke(a5), L6(n8, e5, a5), null === a5[0] && null === a5[1] ? null : null === a5[0] ? c(a5[1]) : null === a5[1] ? c(a5[0]) : q2.symmetricDifference(a5[0], a5[1])));
  }, n7.clip = function(n8, e5) {
    return j5(n8, e5, (i5, a5, l6) => {
      if (l6 = ke(l6), ne(l6, 2, 2, n8, e5), !(l6[1] instanceof M) && null !== l6[1])
        throw new a3(n8, r3.InvalidParameter, e5);
      if (null === l6[0])
        return null;
      if (!(l6[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      return null === l6[1] ? null : q2.clip(l6[0], l6[1]);
    });
  }, n7.cut = function(n8, e5) {
    return j5(n8, e5, (a5, l6, s9) => {
      if (s9 = ke(s9), ne(s9, 2, 2, n8, e5), !(s9[1] instanceof m) && null !== s9[1])
        throw new a3(n8, r3.InvalidParameter, e5);
      if (null === s9[0])
        return [];
      if (!(s9[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      return null === s9[1] ? [c(s9[0])] : q2.cut(s9[0], s9[1]);
    });
  }, n7.area = function(n8, e5) {
    return j5(n8, e5, (i5, l6, s9) => {
      if (ne(s9, 1, 2, n8, e5), null === (s9 = ke(s9))[0])
        return 0;
      if (q(s9[0]) || $(s9[0])) {
        const e6 = je(s9[0], n8.spatialReference);
        return null === e6 ? 0 : q2.planarArea(e6, r2(L(s9[1], -1)));
      }
      if (!(s9[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      return q2.planarArea(s9[0], r2(L(s9[1], -1)));
    });
  }, n7.areageodetic = function(n8, e5) {
    return j5(n8, e5, (i5, l6, s9) => {
      if (ne(s9, 1, 2, n8, e5), null === (s9 = ke(s9))[0])
        return 0;
      if (q(s9[0]) || $(s9[0])) {
        const e6 = je(s9[0], n8.spatialReference);
        return null === e6 ? 0 : q2.geodesicArea(e6, r2(L(s9[1], -1)));
      }
      if (!(s9[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      return q2.geodesicArea(s9[0], r2(L(s9[1], -1)));
    });
  }, n7.length = function(n8, e5) {
    return j5(n8, e5, (i5, a5, s9) => {
      if (ne(s9, 1, 2, n8, e5), null === (s9 = ke(s9))[0])
        return 0;
      if (q(s9[0]) || $(s9[0])) {
        const e6 = Me(s9[0], n8.spatialReference);
        return null === e6 ? 0 : q2.planarLength(e6, a2(L(s9[1], -1)));
      }
      if (!(s9[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      return q2.planarLength(s9[0], a2(L(s9[1], -1)));
    });
  }, n7.length3d = function(n8, e5) {
    return j5(n8, e5, (i5, a5, s9) => {
      if (ne(s9, 1, 2, n8, e5), null === (s9 = ke(s9))[0])
        return 0;
      if (q(s9[0]) || $(s9[0])) {
        const e6 = Me(s9[0], n8.spatialReference);
        return null === e6 ? 0 : true === e6.hasZ ? J(e6, a2(L(s9[1], -1))) : q2.planarLength(e6, a2(L(s9[1], -1)));
      }
      if (!(s9[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      return true === s9[0].hasZ ? J(s9[0], a2(L(s9[1], -1))) : q2.planarLength(s9[0], a2(L(s9[1], -1)));
    });
  }, n7.lengthgeodetic = function(n8, e5) {
    return j5(n8, e5, (i5, a5, s9) => {
      if (ne(s9, 1, 2, n8, e5), null === (s9 = ke(s9))[0])
        return 0;
      if (q(s9[0]) || $(s9[0])) {
        const e6 = Me(s9[0], n8.spatialReference);
        return null === e6 ? 0 : q2.geodesicLength(e6, a2(L(s9[1], -1)));
      }
      if (!(s9[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      return q2.geodesicLength(s9[0], a2(L(s9[1], -1)));
    });
  }, n7.distance = function(n8, e5) {
    return j5(n8, e5, (i5, a5, s9) => {
      s9 = ke(s9), ne(s9, 2, 3, n8, e5);
      let u8 = s9[0];
      (q(s9[0]) || $(s9[0])) && (u8 = Fe(s9[0], n8.spatialReference));
      let c4 = s9[1];
      if ((q(s9[1]) || $(s9[1])) && (c4 = Fe(s9[1], n8.spatialReference)), !(u8 instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      if (!(c4 instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      return q2.distance(u8, c4, a2(L(s9[2], -1)));
    });
  }, n7.distancegeodetic = function(n8, e5) {
    return j5(n8, e5, (i5, a5, s9) => {
      s9 = ke(s9), ne(s9, 2, 3, n8, e5);
      const u8 = s9[0], c4 = s9[1];
      if (!(u8 instanceof x))
        throw new a3(n8, r3.InvalidParameter, e5);
      if (!(c4 instanceof x))
        throw new a3(n8, r3.InvalidParameter, e5);
      const m5 = new m({ paths: [], spatialReference: u8.spatialReference });
      return m5.addPath([u8, c4]), q2.geodesicLength(m5, a2(L(s9[2], -1)));
    });
  }, n7.densify = function(n8, e5) {
    return j5(n8, e5, (i5, a5, s9) => {
      if (s9 = ke(s9), ne(s9, 2, 3, n8, e5), null === s9[0])
        return null;
      if (!(s9[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      const u8 = pe(s9[1]);
      if (isNaN(u8))
        throw new a3(n8, r3.InvalidParameter, e5);
      if (u8 <= 0)
        throw new a3(n8, r3.InvalidParameter, e5);
      return s9[0] instanceof j2 || s9[0] instanceof m ? q2.densify(s9[0], u8, a2(L(s9[2], -1))) : s9[0] instanceof M ? q2.densify(z3(s9[0]), u8, a2(L(s9[2], -1))) : s9[0];
    });
  }, n7.densifygeodetic = function(n8, e5) {
    return j5(n8, e5, (i5, a5, s9) => {
      if (s9 = ke(s9), ne(s9, 2, 3, n8, e5), null === s9[0])
        return null;
      if (!(s9[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      const u8 = pe(s9[1]);
      if (isNaN(u8))
        throw new a3(n8, r3.InvalidParameter, e5);
      if (u8 <= 0)
        throw new a3(n8, r3.InvalidParameter, e5);
      return s9[0] instanceof j2 || s9[0] instanceof m ? q2.geodesicDensify(s9[0], u8, a2(L(s9[2], -1))) : s9[0] instanceof M ? q2.geodesicDensify(z3(s9[0]), u8, a2(L(s9[2], -1))) : s9[0];
    });
  }, n7.generalize = function(n8, e5) {
    return j5(n8, e5, (i5, a5, s9) => {
      if (s9 = ke(s9), ne(s9, 2, 4, n8, e5), null === s9[0])
        return null;
      if (!(s9[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      const u8 = pe(s9[1]);
      if (isNaN(u8))
        throw new a3(n8, r3.InvalidParameter, e5);
      return q2.generalize(s9[0], u8, be(L(s9[2], true)), a2(L(s9[3], -1)));
    });
  }, n7.buffer = function(n8, e5) {
    return j5(n8, e5, (a5, s9, u8) => {
      if (u8 = ke(u8), ne(u8, 2, 3, n8, e5), null === u8[0])
        return null;
      if (!(u8[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      const c4 = pe(u8[1]);
      if (isNaN(c4))
        throw new a3(n8, r3.InvalidParameter, e5);
      return 0 === c4 ? c(u8[0]) : q2.buffer(u8[0], c4, a2(L(u8[2], -1)));
    });
  }, n7.buffergeodetic = function(n8, e5) {
    return j5(n8, e5, (a5, s9, u8) => {
      if (u8 = ke(u8), ne(u8, 2, 3, n8, e5), null === u8[0])
        return null;
      if (!(u8[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      const c4 = pe(u8[1]);
      if (isNaN(c4))
        throw new a3(n8, r3.InvalidParameter, e5);
      return 0 === c4 ? c(u8[0]) : q2.geodesicBuffer(u8[0], c4, a2(L(u8[2], -1)));
    });
  }, n7.offset = function(n8, e5) {
    return j5(n8, e5, (i5, a5, s9) => {
      if (s9 = ke(s9), ne(s9, 2, 6, n8, e5), null === s9[0])
        return null;
      if (!(s9[0] instanceof j2 || s9[0] instanceof m))
        throw new a3(n8, r3.InvalidParameter, e5);
      const u8 = pe(s9[1]);
      if (isNaN(u8))
        throw new a3(n8, r3.InvalidParameter, e5);
      const c4 = pe(L(s9[4], 10));
      if (isNaN(c4))
        throw new a3(n8, r3.InvalidParameter, e5);
      const h3 = pe(L(s9[5], 0));
      if (isNaN(h3))
        throw new a3(n8, r3.InvalidParameter, e5);
      return q2.offset(s9[0], u8, a2(L(s9[2], -1)), ce(L(s9[3], "round")).toLowerCase(), c4, h3);
    });
  }, n7.rotate = function(n8, e5) {
    return j5(n8, e5, (i5, a5, l6) => {
      l6 = ke(l6), ne(l6, 2, 3, n8, e5);
      let s9 = l6[0];
      if (null === s9)
        return null;
      if (!(s9 instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      s9 instanceof M && (s9 = j2.fromExtent(s9));
      const u8 = pe(l6[1]);
      if (isNaN(u8))
        throw new a3(n8, r3.InvalidParameter, e5);
      const c4 = L(l6[2], null);
      if (null === c4)
        return q2.rotate(s9, u8);
      if (c4 instanceof x)
        return q2.rotate(s9, u8, c4);
      throw new a3(n8, r3.InvalidParameter, e5);
    });
  }, n7.centroid = function(n8, e5) {
    return j5(n8, e5, (a5, l6, s9) => {
      if (s9 = ke(s9), ne(s9, 1, 1, n8, e5), null === s9[0])
        return null;
      let u8 = s9[0];
      if ((q(s9[0]) || $(s9[0])) && (u8 = Fe(s9[0], n8.spatialReference)), null === u8)
        return null;
      if (!(u8 instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      return u8 instanceof x ? Ne(c(s9[0]), n8.spatialReference) : u8 instanceof j2 ? u8.centroid : u8 instanceof m ? u4(u8) : u8 instanceof u ? y2(u8) : u8 instanceof M ? u8.center : null;
    });
  }, n7.multiparttosinglepart = function(n8, e5) {
    return j5(n8, e5, (a5, l6, s9) => {
      s9 = ke(s9), ne(s9, 1, 1, n8, e5);
      const u8 = [];
      if (null === s9[0])
        return null;
      if (!(s9[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      if (s9[0] instanceof x)
        return [Ne(c(s9[0]), n8.spatialReference)];
      if (s9[0] instanceof M)
        return [Ne(c(s9[0]), n8.spatialReference)];
      const c4 = q2.simplify(s9[0]);
      if (c4 instanceof j2) {
        const n9 = [], e6 = [];
        for (let t3 = 0; t3 < c4.rings.length; t3++)
          if (c4.isClockwise(c4.rings[t3])) {
            const e7 = p2({ rings: [c4.rings[t3]], hasZ: true === c4.hasZ, hasM: true === c4.hasM, spatialReference: c4.spatialReference.toJSON() });
            n9.push(e7);
          } else
            e6.push({ ring: c4.rings[t3], pt: c4.getPoint(t3, 0) });
        for (let t3 = 0; t3 < e6.length; t3++)
          for (let r8 = 0; r8 < n9.length; r8++)
            if (n9[r8].contains(e6[t3].pt)) {
              n9[r8].addRing(e6[t3].ring);
              break;
            }
        return n9;
      }
      if (c4 instanceof m) {
        const n9 = [];
        for (let e6 = 0; e6 < c4.paths.length; e6++) {
          const t3 = p2({ paths: [c4.paths[e6]], hasZ: true === c4.hasZ, hasM: true === c4.hasM, spatialReference: c4.spatialReference.toJSON() });
          n9.push(t3);
        }
        return n9;
      }
      if (s9[0] instanceof u) {
        const e6 = Ne(c(s9[0]), n8.spatialReference);
        for (let n9 = 0; n9 < e6.points.length; n9++)
          u8.push(e6.getPoint(n9));
        return u8;
      }
      return null;
    });
  }, n7.issimple = function(n8, e5) {
    return j5(n8, e5, (i5, a5, l6) => {
      if (l6 = ke(l6), ne(l6, 1, 1, n8, e5), null === l6[0])
        return true;
      if (!(l6[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      return q2.isSimple(l6[0]);
    });
  }, n7.simplify = function(n8, e5) {
    return j5(n8, e5, (i5, a5, l6) => {
      if (l6 = ke(l6), ne(l6, 1, 1, n8, e5), null === l6[0])
        return null;
      if (!(l6[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      return q2.simplify(l6[0]);
    });
  }, n7.convexhull = function(n8, e5) {
    return j5(n8, e5, (i5, a5, l6) => {
      if (l6 = ke(l6), ne(l6, 1, 1, n8, e5), null === l6[0])
        return null;
      if (!(l6[0] instanceof p))
        throw new a3(n8, r3.InvalidParameter, e5);
      return q2.convexHull(l6[0]);
    });
  }, n7.nearestcoordinate = function(n8, i5) {
    return j5(n8, i5, (a5, l6, s9) => {
      if (s9 = ke(s9), ne(s9, 2, 2, n8, i5), !(s9[0] instanceof p || null === s9[0]))
        throw new a3(n8, r3.InvalidParameter, i5);
      if (!(s9[1] instanceof x || null === s9[1]))
        throw new a3(n8, r3.InvalidParameter, i5);
      if (null === s9[0] || null === s9[1])
        return null;
      const u8 = q2.nearestCoordinate(s9[0], s9[1]);
      return null === u8 || u8.isEmpty ? null : N.convertObjectToArcadeDictionary({ coordinate: u8.coordinate, distance: u8.distance }, qe(n8), false, true);
    });
  }, n7.nearestvertex = function(n8, i5) {
    return j5(n8, i5, (a5, l6, s9) => {
      if (s9 = ke(s9), ne(s9, 2, 2, n8, i5), !(s9[0] instanceof p || null === s9[0]))
        throw new a3(n8, r3.InvalidParameter, i5);
      if (!(s9[1] instanceof x || null === s9[1]))
        throw new a3(n8, r3.InvalidParameter, i5);
      if (null === s9[0] || null === s9[1])
        return null;
      const u8 = q2.nearestVertex(s9[0], s9[1]);
      return null === u8 || u8.isEmpty ? null : N.convertObjectToArcadeDictionary({ coordinate: u8.coordinate, distance: u8.distance }, qe(n8), false, true);
    });
  };
}

// node_modules/@arcgis/core/arcade/arcadeCompiler.js
var K2 = class extends r4 {
  constructor(e5, n7) {
    super(), this.paramCount = n7, this.fn = e5;
  }
  createFunction(e5) {
    return (...n7) => {
      if (n7.length !== this.paramCount)
        throw new a3(e5, r3.WrongNumberOfParameters, null);
      return this.fn(...n7);
    };
  }
  call(e5, n7) {
    return this.fn(...n7.arguments);
  }
  marshalledCall(e5, n7, t3, o5) {
    return o5(e5, n7, (n8, l6, r8) => {
      r8 = r8.map((n9) => !v(n9) || n9 instanceof s4 ? n9 : n4(n9, e5, o5));
      const a5 = this.call(t3, { arguments: r8 });
      return E(a5) ? a5.then((e6) => n4(e6, t3, o5)) : a5;
    });
  }
};
function q3(e5, n7, t3) {
  try {
    return t3(e5, null, n7.arguments);
  } catch (o5) {
    throw o5;
  }
}
function W3(e5, n7) {
  try {
    switch (n7.type) {
      case "EmptyStatement":
        return "lc.voidOperation";
      case "VariableDeclarator":
        return ue(e5, n7);
      case "VariableDeclaration":
        return ce2(e5, n7);
      case "BlockStatement":
      case "Program":
        return oe(e5, n7);
      case "FunctionDeclaration":
        return ie(e5, n7);
      case "ImportDeclaration":
        return re(e5, n7);
      case "ExportNamedDeclaration":
        return ae(e5, n7);
      case "ReturnStatement":
        return le(e5, n7);
      case "IfStatement":
        return te(e5, n7);
      case "ExpressionStatement":
        return ee(e5, n7);
      case "AssignmentExpression":
        return X2(e5, n7);
      case "UpdateExpression":
        return H2(e5, n7);
      case "BreakStatement":
        return "break";
      case "ContinueStatement":
        return "continue";
      case "TemplateLiteral":
        return de(e5, n7);
      case "TemplateElement":
        return JSON.stringify(n7.value ? n7.value.cooked : "");
      case "ForStatement":
        return Y(e5, n7);
      case "ForInStatement":
        return J2(e5, n7);
      case "WhileStatement":
        return Q2(e5, n7);
      case "Identifier":
        return ye(e5, n7);
      case "MemberExpression":
        return pe2(e5, n7);
      case "Literal":
        return null === n7.value || void 0 === n7.value ? "null" : JSON.stringify(n7.value);
      case "CallExpression":
        return be2(e5, n7);
      case "UnaryExpression":
        return me(e5, n7);
      case "BinaryExpression":
        return fe2(e5, n7);
      case "LogicalExpression":
        return he(e5, n7);
      case "ArrayExpression":
        return ge(e5, n7);
      case "ObjectExpression":
        return z4(e5, n7);
      case "Property":
        return V(e5, n7);
      case "Array":
        throw new s3(e5, r3.NeverReach, n7);
      default:
        throw new s3(e5, r3.Unrecognized, n7);
    }
  } catch (t3) {
    throw t3;
  }
}
function z4(e5, n7) {
  let t3 = "lang.dictionary([";
  for (let o5 = 0; o5 < n7.properties.length; o5++) {
    const l6 = n7.properties[o5];
    se2(l6.key.name);
    o5 > 0 && (t3 += ","), t3 += "lang.strCheck(" + ("Identifier" === l6.key.type ? "'" + l6.key.name + "'" : W3(e5, l6.key)) + ",'ObjectExpression'),lang.aCheck(" + W3(e5, l6.value) + ", 'ObjectExpression')";
  }
  return t3 += "])", t3;
}
function V(e5, n7) {
  throw new s3(e5, r3.NeverReach, n7);
}
function J2(e5, n7) {
  const t3 = Fe2(e5), o5 = Fe2(e5), l6 = Fe2(e5);
  let r8 = "var " + t3 + " = " + W3(e5, n7.right) + ";\n";
  "VariableDeclaration" === n7.left.type && (r8 += W3(e5, n7.left));
  let a5 = "VariableDeclaration" === n7.left.type ? n7.left.declarations[0].id.name : n7.left.name;
  a5 = a5.toLowerCase(), se2(a5);
  let s9 = "";
  null !== e5.localScope && (void 0 !== e5.localScope[a5] ? s9 = "lscope['" + a5 + "']" : void 0 !== e5.localScope._SymbolsMap[a5] && (s9 = "lscope['" + e5.localScope._SymbolsMap[a5] + "']"));
  let i5 = "";
  if ("" === s9) {
    if (void 0 !== e5.globalScope[a5])
      s9 = "gscope['" + a5 + "']";
    else if (void 0 !== e5.globalScope._SymbolsMap[a5])
      s9 = "gscope['" + e5.globalScope._SymbolsMap[a5] + "']";
    else if (null !== e5.localScope)
      if (e5.undeclaredGlobalsInFunctions.has(a5))
        s9 = "gscope['" + e5.undeclaredGlobalsInFunctions.get(a5).manglename + "']", i5 = e5.undeclaredGlobalsInFunctions.get(a5).manglename;
      else {
        const t4 = { manglename: Me2(e5), node: n7.left };
        e5.undeclaredGlobalsInFunctions.set(a5, t4), s9 = "gscope['" + t4.manglename + "']", i5 = t4.manglename;
      }
  }
  return i5 && (r8 += "lang.chkAssig('" + i5 + "',runtimeCtx); \n"), r8 += "if (" + t3 + "===null) {  lastStatement = lc.voidOperation; }\n ", r8 += "else if (lc.isArray(" + t3 + ") || lc.isString(" + t3 + ")) {", r8 += "var " + o5 + "=" + t3 + ".length; \n", r8 += "for(var " + l6 + "=0; " + l6 + "<" + o5 + "; " + l6 + "++) {\n", r8 += s9 + "=" + l6 + ";\n", r8 += W3(e5, n7.body), r8 += "\n}\n", r8 += " lastStatement = lc.voidOperation; \n", r8 += " \n}\n", r8 += "else if (lc.isImmutableArray(" + t3 + ")) {", r8 += "var " + o5 + "=" + t3 + ".length(); \n", r8 += "for(var " + l6 + "=0; " + l6 + "<" + o5 + "; " + l6 + "++) {\n", r8 += s9 + "=" + l6 + ";\n", r8 += W3(e5, n7.body), r8 += "\n}\n", r8 += " lastStatement = lc.voidOperation; \n", r8 += " \n}\n", r8 += "else if (( " + t3 + " instanceof lang.Dictionary) || ( " + t3 + " instanceof lang.Feature)) {", r8 += "var " + o5 + "=" + t3 + ".keys(); \n", r8 += "for(var " + l6 + "=0; " + l6 + "<" + o5 + ".length; " + l6 + "++) {\n", r8 += s9 + "=" + o5 + "[" + l6 + "];\n", r8 += W3(e5, n7.body), r8 += "\n}\n", r8 += " lastStatement = lc.voidOperation; \n", r8 += " \n}\n", e5.isAsync && (r8 += "else if (lc.isFeatureSet(" + t3 + ")) {", r8 += "var " + o5 + "=" + t3 + ".iterator(runtimeCtx.abortSignal); \n", r8 += "for(var " + l6 + "=lang. graphicToFeature( yield " + o5 + ".next()," + t3 + ", runtimeCtx); " + l6 + "!=null; " + l6 + "=lang. graphicToFeature( yield " + o5 + ".next()," + t3 + ", runtimeCtx)) {\n", r8 += s9 + "=" + l6 + ";\n", r8 += W3(e5, n7.body), r8 += "\n}\n", r8 += " lastStatement = lc.voidOperation; \n", r8 += " \n}\n"), r8 += "else { lastStatement = lc.voidOperation; } \n", r8;
}
function Y(e5, n7) {
  let t3 = "lastStatement = lc.voidOperation; \n";
  null !== n7.init && (t3 += W3(e5, n7.init) + "; ");
  const o5 = Fe2(e5), r8 = Fe2(e5);
  return t3 += "var " + o5 + " = true; ", t3 += "\n do { ", null !== n7.update && (t3 += " if (" + o5 + "===false) {\n " + W3(e5, n7.update) + "  \n}\n " + o5 + "=false; \n"), null !== n7.test && (t3 += "var " + r8 + " = " + W3(e5, n7.test) + "; ", t3 += "if (" + r8 + "===false) { break; } else if (" + r8 + "!==true) { lang.error('" + r3.BooleanConditionRequired + "');   }\n"), t3 += W3(e5, n7.body), null !== n7.update && (t3 += "\n " + W3(e5, n7.update)), t3 += "\n" + o5 + " = true; \n} while(true);  lastStatement = lc.voidOperation; ", t3;
}
function H2(e5, n7) {
  let t3 = null, r8 = "";
  if ("MemberExpression" === n7.argument.type)
    return t3 = W3(e5, n7.argument.object), true === n7.argument.computed ? r8 = W3(e5, n7.argument.property) : (r8 = "'" + n7.argument.property.name + "'", se2(n7.argument.property.name)), "lang.memberupdate(" + t3 + "," + r8 + ",'" + n7.operator + "'," + n7.prefix + ")";
  if (t3 = n7.argument.name.toLowerCase(), se2(t3), null !== e5.localScope) {
    if (void 0 !== e5.localScope[t3])
      return "lang.update(lscope, '" + t3 + "','" + n7.operator + "'," + n7.prefix + ")";
    if (void 0 !== e5.localScope._SymbolsMap[t3])
      return "lang.update(lscope, '" + e5.localScope._SymbolsMap[t3] + "','" + n7.operator + "'," + n7.prefix + ")";
  }
  if (void 0 !== e5.globalScope[t3])
    return "lang.update(gscope, '" + t3 + "','" + n7.operator + "'," + n7.prefix + ")";
  if (void 0 !== e5.globalScope._SymbolsMap[t3])
    return "lang.update(gscope, '" + e5.globalScope._SymbolsMap[t3] + "','" + n7.operator + "'," + n7.prefix + ")";
  if (null !== e5.localScope) {
    if (e5.undeclaredGlobalsInFunctions.has(t3))
      return "lang.update(gscope,lang.chkAssig( '" + e5.undeclaredGlobalsInFunctions.get(t3).manglename + "',runtimeCtx),'" + n7.operator + "'," + n7.prefix + ")";
    const o5 = { manglename: Me2(e5), node: n7.argument };
    return e5.undeclaredGlobalsInFunctions.set(t3, o5), "lang.update(gscope, lang.chkAssig('" + o5.manglename + "',runtimeCtx),'" + n7.operator + "'," + n7.prefix + ")";
  }
  throw new a3(e5, r3.InvalidIdentifier, n7);
}
function Q2(e5, n7) {
  let t3 = "lastStatement = lc.voidOperation; \n";
  const o5 = Fe2(e5);
  return t3 += `
  var ${o5} = true;
    do {
      ${o5} = ${W3(e5, n7.test)};
      if (${o5}==false) {
        break;
      }
      if (${o5}!==true) {
        lang.error('${r3.BooleanConditionRequired}');
      }
      ${W3(e5, n7.body)}
    }
    while (${o5} !== false);
    lastStatement = lc.voidOperation;
  `, t3;
}
function X2(e5, n7) {
  const t3 = W3(e5, n7.right);
  let r8 = null, a5 = "";
  if ("MemberExpression" === n7.left.type)
    return r8 = W3(e5, n7.left.object), true === n7.left.computed ? a5 = W3(e5, n7.left.property) : (a5 = "'" + n7.left.property.name + "'", se2(n7.left.property.name)), "lang.assignmember(" + r8 + "," + a5 + ",'" + n7.operator + "'," + t3 + ")";
  if (r8 = n7.left.name.toLowerCase(), se2(r8), null !== e5.localScope) {
    if (void 0 !== e5.localScope[r8])
      return "lscope['" + r8 + "']=lang.assign(" + t3 + ",'" + n7.operator + "', lscope['" + r8 + "'])";
    if (void 0 !== e5.localScope._SymbolsMap[r8])
      return "lscope['" + e5.localScope._SymbolsMap[r8] + "']=lang.assign(" + t3 + ",'" + n7.operator + "', lscope['" + e5.localScope._SymbolsMap[r8] + "'])";
  }
  if (void 0 !== e5.globalScope[r8])
    return "gscope['" + r8 + "']=lang.assign(" + t3 + ",'" + n7.operator + "', gscope['" + r8 + "'])";
  if (void 0 !== e5.globalScope._SymbolsMap[r8])
    return "gscope['" + e5.globalScope._SymbolsMap[r8] + "']=lang.assign(" + t3 + ",'" + n7.operator + "', gscope['" + e5.globalScope._SymbolsMap[r8] + "'])";
  if (null !== e5.localScope) {
    if (e5.undeclaredGlobalsInFunctions.has(r8))
      return "gscope[lang.chkAssig('" + e5.undeclaredGlobalsInFunctions.get(r8).manglename + "',runtimeCtx)]=lang.assign(" + t3 + ",'" + n7.operator + "', gscope['" + e5.undeclaredGlobalsInFunctions.get(r8).manglename + "'])";
    const o5 = { manglename: Me2(e5), node: n7.argument };
    return e5.undeclaredGlobalsInFunctions.set(r8, o5), "gscope[lang.chkAssig('" + o5.manglename + "',runtimeCtx)]=lang.assign(" + t3 + ",'" + n7.operator + "', gscope['" + o5.manglename + "'])";
  }
  throw new a3(e5, r3.InvalidIdentifier, n7);
}
function ee(e5, n7) {
  return "AssignmentExpression" === n7.expression.type ? "lastStatement = lc.voidOperation; " + W3(e5, n7.expression) + "; \n " : (n7.expression.type, "lastStatement = " + W3(e5, n7.expression) + "; ");
}
function ne2(e5, n7) {
  return "BlockStatement" === n7.type ? W3(e5, n7) : "ReturnStatement" === n7.type || "BreakStatement" === n7.type || "ContinueStatement" === n7.type ? W3(e5, n7) + "; " : "UpdateExpression" === n7.type ? "lastStatement = " + W3(e5, n7) + "; " : "ExpressionStatement" === n7.type ? W3(e5, n7) : "ObjectExpression" === n7.type ? "lastStatement = " + W3(e5, n7) + "; " : W3(e5, n7) + "; ";
}
function te(e5, n7) {
  if ("AssignmentExpression" === n7.test.type || "UpdateExpression" === n7.test.type)
    throw new s3(e5, r3.BooleanConditionRequired, n7);
  return `if (lang.mustBoolean(${W3(e5, n7.test)}, runtimeCtx) === true) {
    ${ne2(e5, n7.consequent)}
  } ` + (null !== n7.alternate ? "IfStatement" === n7.alternate.type ? " else " + te(e5, n7.alternate) : ` else {
      ${ne2(e5, n7.alternate)}
    }
` : " else {\n      lastStatement = lc.voidOperation;\n    }\n");
}
function oe(e5, n7) {
  let t3 = "";
  for (let o5 = 0; o5 < n7.body.length; o5++)
    "EmptyStatement" !== n7.body[o5].type && ("ReturnStatement" === n7.body[o5].type || "BreakStatement" === n7.body[o5].type || "ContinueStatement" === n7.body[o5].type ? t3 += W3(e5, n7.body[o5]) + "; \n" : "UpdateExpression" === n7.body[o5].type || "ObjectExpression" === n7.body[o5].type ? t3 += "lastStatement = " + W3(e5, n7.body[o5]) + "; \n" : t3 += W3(e5, n7.body[o5]) + " \n");
  return t3;
}
function le(e5, n7) {
  if (null === n7.argument)
    return "return lc.voidOperation";
  return "return " + W3(e5, n7.argument);
}
function re(e5, n7) {
  var _a;
  const t3 = n7.specifiers[0].local.name.toLowerCase();
  se2(t3);
  const o5 = (_a = e5.libraryResolver) == null ? void 0 : _a.loadLibrary(t3), l6 = Me2(e5);
  void 0 === e5.moduleFactory[o5.uri] && (e5.moduleFactory[o5.uri] = De(o5.syntax, { interceptor: e5.interceptor, services: e5.services, moduleFactory: e5.moduleFactory, lrucache: e5.lrucache, timeZone: e5.timeZone ?? null, libraryResolver: e5.libraryResolver, customfunctions: e5.customfunctions, vars: {} }, e5.isAsync)), e5.moduleFactoryMap[l6] = o5.uri;
  let r8 = "";
  if (r8 = e5.isAsync ? "(yield lang.loadModule('" + l6 + "', runtimeCtx) ); " : "lang.loadModule('" + l6 + "', runtimeCtx); ", void 0 !== e5.globalScope[t3])
    return "gscope['" + t3 + "']=" + r8;
  if (void 0 !== e5.globalScope._SymbolsMap[t3])
    return "gscope['" + e5.globalScope._SymbolsMap[t3] + "']=" + r8;
  let a5 = "";
  return e5.undeclaredGlobalsInFunctions.has(t3) ? (a5 = e5.undeclaredGlobalsInFunctions.get(t3).manglename, e5.undeclaredGlobalsInFunctions.delete(t3)) : a5 = Me2(e5), e5.globalScope._SymbolsMap[t3] = a5, e5.mangleMap[t3] = a5, "gscope[lang.setAssig('" + a5 + "', runtimeCtx)]=" + r8;
}
function ae(e5, n7) {
  const t3 = W3(e5, n7.declaration);
  if ("FunctionDeclaration" === n7.declaration.type)
    e5.exports[n7.declaration.id.name.toLowerCase()] = "function";
  else if ("VariableDeclaration" === n7.declaration.type)
    for (const o5 of n7.declaration.declarations)
      e5.exports[o5.id.name.toLowerCase()] = "variable";
  return t3;
}
function se2(e5) {
  if ("iif" === e5)
    throw new i();
  if ("decode" === e5)
    throw new i();
  if ("when" === e5)
    throw new i();
}
function ie(e5, n7) {
  const t3 = n7.id.name.toLowerCase();
  se2(t3);
  let o5 = "", l6 = false;
  void 0 !== e5.globalScope[t3] ? o5 = t3 : void 0 !== e5.globalScope._SymbolsMap[t3] ? o5 = e5.globalScope._SymbolsMap[t3] : e5.undeclaredGlobalsInFunctions.has(t3) ? (o5 = e5.undeclaredGlobalsInFunctions.get(t3).manglename, e5.globalScope._SymbolsMap[t3] = o5, e5.mangleMap[t3] = o5, e5.undeclaredGlobalsInFunctions.delete(t3), l6 = true) : (o5 = Me2(e5), e5.globalScope._SymbolsMap[t3] = o5, e5.mangleMap[t3] = o5);
  const r8 = { isAsync: e5.isAsync, console: e5.console, exports: e5.exports, undeclaredGlobalsInFunctions: e5.undeclaredGlobalsInFunctions, customfunctions: e5.customfunctions, moduleFactory: e5.moduleFactory, moduleFactoryMap: e5.moduleFactoryMap, libraryResolver: e5.libraryResolver, lrucache: e5.lrucache, interceptor: e5.interceptor, services: e5.services, symbols: e5.symbols, mangleMap: e5.mangleMap, localScope: { _SymbolsMap: {} }, depthCounter: e5.depthCounter, globalScope: e5.globalScope };
  let a5 = "new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement = lc.voidOperation; \n   var lscope = runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
  for (let s9 = 0; s9 < n7.params.length; s9++) {
    const t4 = n7.params[s9].name.toLowerCase();
    se2(t4);
    const o6 = Me2(e5);
    r8.localScope._SymbolsMap[t4] = o6, r8.mangleMap[t4] = o6, a5 += "lscope['" + o6 + "']=arguments[" + s9.toString() + "];\n";
  }
  return true === e5.isAsync ? (a5 += "return lang.__awaiter(this, void 0, void 0, function* () {\n", a5 += oe(r8, n7.body) + "\n return lastStatement; ", a5 += "});  }", a5 += ", runtimeCtx)," + n7.params.length + ")", a5 += "\n lastStatement = lc.voidOperation; \n") : (a5 += oe(r8, n7.body) + "\n return lastStatement; }, runtimeCtx)," + n7.params.length + ")", a5 += "\n lastStatement = lc.voidOperation; \n"), l6 ? "gscope[lang.setAssig('" + o5 + "', runtimeCtx)]=" + a5 : "gscope['" + o5 + "']=" + a5;
}
function ce2(e5, n7) {
  const t3 = [];
  for (let o5 = 0; o5 < n7.declarations.length; o5++)
    t3.push(W3(e5, n7.declarations[o5]));
  return t3.join("\n") + " \n lastStatement=  lc.voidOperation; \n";
}
function ue(e5, n7) {
  let t3 = null === n7.init ? null : W3(e5, n7.init);
  t3 === w && (t3 = null);
  const o5 = n7.id.name.toLowerCase();
  if (se2(o5), null !== e5.localScope) {
    if (void 0 !== e5.localScope[o5])
      return "lscope['" + o5 + "']=" + t3 + "; ";
    if (void 0 !== e5.localScope._SymbolsMap[o5])
      return "lscope['" + e5.localScope._SymbolsMap[o5] + "']=" + t3 + "; ";
    {
      const n8 = Me2(e5);
      return e5.localScope._SymbolsMap[o5] = n8, e5.mangleMap[o5] = n8, "lscope['" + n8 + "']=" + t3 + "; ";
    }
  }
  if (void 0 !== e5.globalScope[o5])
    return "gscope['" + o5 + "']=" + t3 + "; ";
  if (void 0 !== e5.globalScope._SymbolsMap[o5])
    return "gscope['" + e5.globalScope._SymbolsMap[o5] + "']=" + t3 + "; ";
  if (e5.undeclaredGlobalsInFunctions.has(o5)) {
    const n8 = e5.undeclaredGlobalsInFunctions.get(o5).manglename;
    return e5.globalScope._SymbolsMap[o5] = n8, e5.mangleMap[o5] = n8, e5.undeclaredGlobalsInFunctions.delete(o5), "gscope[lang.setAssig('" + n8 + "', runtimeCtx)]=" + t3 + "; ";
  }
  const l6 = Me2(e5);
  return e5.globalScope._SymbolsMap[o5] = l6, e5.mangleMap[o5] = l6, "gscope['" + l6 + "']=" + t3 + "; ";
}
function pe2(e5, n7) {
  try {
    let t3;
    return true === n7.computed ? t3 = W3(e5, n7.property) : (t3 = "'" + n7.property.name + "'", se2(n7.property.name)), "lang.member(" + W3(e5, n7.object) + "," + t3 + ")";
  } catch (t3) {
    throw t3;
  }
}
function me(e5, n7) {
  try {
    return "lang.unary(" + W3(e5, n7.argument) + ",'" + n7.operator + "')";
  } catch (t3) {
    throw t3;
  }
}
function ge(e5, n7) {
  try {
    const t3 = [];
    for (let o5 = 0; o5 < n7.elements.length; o5++)
      "Literal" === n7.elements[o5].type ? t3.push(W3(e5, n7.elements[o5])) : t3.push("lang.aCheck(" + W3(e5, n7.elements[o5]) + ",'ArrayExpression')");
    return "[" + t3.join(",") + "]";
  } catch (t3) {
    throw t3;
  }
}
function de(e5, n7) {
  try {
    const t3 = [];
    let o5 = 0;
    for (const l6 of n7.quasis)
      t3.push(l6.value ? JSON.stringify(l6.value.cooked) : JSON.stringify("")), false === l6.tail && (t3.push(n7.expressions[o5] ? "lang.castString(lang.aCheck(" + W3(e5, n7.expressions[o5]) + ", 'TemplateLiteral'))" : ""), o5++);
    return "([" + t3.join(",") + "]).join('')";
  } catch (t3) {
    throw t3;
  }
}
function fe2(e5, n7) {
  try {
    return "lang.binary(" + W3(e5, n7.left) + "," + W3(e5, n7.right) + ",'" + n7.operator + "')";
  } catch (t3) {
    throw t3;
  }
}
function he(e5, n7) {
  try {
    if ("AssignmentExpression" === n7.left.type || "UpdateExpression" === n7.left.type)
      throw new s3(e5, r3.LogicalExpressionOnlyBoolean, n7);
    if ("AssignmentExpression" === n7.right.type || "UpdateExpression" === n7.right.type)
      throw new s3(e5, r3.LogicalExpressionOnlyBoolean, n7);
    if ("&&" === n7.operator || "||" === n7.operator)
      return "(lang.logicalCheck(" + W3(e5, n7.left) + ") " + n7.operator + " lang.logicalCheck(" + W3(e5, n7.right) + "))";
    throw new s3(null, r3.LogicExpressionOrAnd, null);
  } catch (t3) {
    throw t3;
  }
}
function ye(e5, n7) {
  try {
    const t3 = n7.name.toLowerCase();
    if (se2(t3), null !== e5.localScope) {
      if (void 0 !== e5.localScope[t3])
        return "lscope['" + t3 + "']";
      if (void 0 !== e5.localScope._SymbolsMap[t3])
        return "lscope['" + e5.localScope._SymbolsMap[t3] + "']";
    }
    if (void 0 !== e5.globalScope[t3])
      return "gscope['" + t3 + "']";
    if (void 0 !== e5.globalScope._SymbolsMap[t3])
      return "gscope['" + e5.globalScope._SymbolsMap[t3] + "']";
    if (null !== e5.localScope) {
      if (e5.undeclaredGlobalsInFunctions.has(t3))
        return "gscope[lang.chkAssig('" + e5.undeclaredGlobalsInFunctions.get(t3).manglename + "',runtimeCtx)]";
      const o5 = { manglename: Me2(e5), node: n7.argument };
      return e5.undeclaredGlobalsInFunctions.set(t3, o5), "gscope[lang.chkAssig('" + o5.manglename + "',runtimeCtx)]";
    }
    throw new s3(e5, r3.InvalidIdentifier, n7);
  } catch (t3) {
    throw t3;
  }
}
function be2(e5, n7) {
  try {
    if ("MemberExpression" === n7.callee.type) {
      let t4;
      true === n7.callee.computed ? t4 = W3(e5, n7.callee.property) : (t4 = "'" + n7.callee.property.name + "'", se2(n7.callee.property.name));
      let o6 = "[";
      for (let l6 = 0; l6 < n7.arguments.length; l6++)
        l6 > 0 && (o6 += ", "), o6 += W3(e5, n7.arguments[l6]);
      return o6 += "]", e5.isAsync ? "(yield lang.callModuleFunction(" + W3(e5, n7.callee.object) + "," + o6 + "," + t4 + ",runtimeCtx))" : "lang.callModuleFunction(" + W3(e5, n7.callee.object) + "," + o6 + "," + t4 + ",runtimeCtx)";
    }
    if ("Identifier" !== n7.callee.type)
      throw new s3(e5, r3.FunctionNotFound, n7);
    const t3 = n7.callee.name.toLowerCase();
    if ("iif" === t3)
      return we(e5, n7);
    if ("when" === t3)
      return Se(e5, n7);
    if ("decode" === t3)
      return ve(e5, n7);
    let o5 = "";
    if (null !== e5.localScope && (void 0 !== e5.localScope[t3] ? o5 = "lscope['" + t3 + "']" : void 0 !== e5.localScope._SymbolsMap[t3] && (o5 = "lscope['" + e5.localScope._SymbolsMap[t3] + "']")), "" === o5) {
      if (void 0 !== e5.globalScope[t3])
        o5 = "gscope['" + t3 + "']";
      else if (void 0 !== e5.globalScope._SymbolsMap[t3])
        o5 = "gscope['" + e5.globalScope._SymbolsMap[t3] + "']";
      else if (null !== e5.localScope)
        if (e5.undeclaredGlobalsInFunctions.has(t3))
          o5 = "gscope[lang.chkAssig('" + e5.undeclaredGlobalsInFunctions.get(t3).manglename + "',runtimeCtx)]";
        else {
          const l6 = { manglename: Me2(e5), node: n7.argument };
          e5.undeclaredGlobalsInFunctions.set(t3, l6), o5 = "gscope[lang.chkAssig('" + l6.manglename + "',runtimeCtx)]";
        }
    }
    if ("" !== o5) {
      let t4 = "[";
      for (let o6 = 0; o6 < n7.arguments.length; o6++)
        o6 > 0 && (t4 += ", "), t4 += W3(e5, n7.arguments[o6]);
      return t4 += "]", e5.isAsync ? "(yield lang.callfunc(" + o5 + "," + t4 + ",runtimeCtx) )" : "lang.callfunc(" + o5 + "," + t4 + ",runtimeCtx)";
    }
    throw new s3(e5, r3.FunctionNotFound, n7);
  } catch (t3) {
    throw t3;
  }
}
function we(e5, n7) {
  try {
    if (3 !== n7.arguments.length)
      throw new s3(e5, r3.WrongNumberOfParameters, n7);
    const t3 = Fe2(e5);
    return `${e5.isAsync ? "(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {" : "function() {"}
        var ${t3} = ${W3(e5, n7.arguments[0])};

        if (${t3} === true) {
          return  ${W3(e5, n7.arguments[1])};
        }
        else if (${t3} === false) {
          return ${W3(e5, n7.arguments[2])};
        }
        else {
          lang.error('ExecutionErrorCodes.BooleanConditionRequired');
        }
      ${e5.isAsync ? "})}()))" : "}()"}`;
  } catch (t3) {
    throw t3;
  }
}
function Se(e5, n7) {
  try {
    if (n7.arguments.length < 3)
      throw new s3(e5, r3.WrongNumberOfParameters, n7);
    if (n7.arguments.length % 2 == 0)
      throw new s3(e5, r3.WrongNumberOfParameters, n7);
    const t3 = Fe2(e5);
    let o5 = "var ";
    for (let l6 = 0; l6 < n7.arguments.length - 1; l6 += 2)
      o5 += `${t3} = lang.mustBoolean(${W3(e5, n7.arguments[l6])}, runtimeCtx);
      if (${t3} === true ) {
        return ${W3(e5, n7.arguments[l6 + 1])}
      }
`;
    return `${e5.isAsync ? "(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {" : "function() {"}
        ${o5}
        return ${W3(e5, n7.arguments[n7.arguments.length - 1])}
        ${e5.isAsync ? "})}()))" : "}()"}`;
  } catch (t3) {
    throw t3;
  }
}
function ve(e5, n7) {
  try {
    if (n7.arguments.length < 2)
      throw new s3(e5, r3.WrongNumberOfParameters, n7);
    if (2 === n7.arguments.length)
      return `(${W3(e5, n7.arguments[1])})`;
    if ((n7.arguments.length - 1) % 2 == 0)
      throw new s3(e5, r3.WrongNumberOfParameters, n7);
    const t3 = Fe2(e5), o5 = Fe2(e5);
    let a5 = "var ";
    for (let l6 = 1; l6 < n7.arguments.length - 1; l6 += 2)
      a5 += `${o5} = ${W3(e5, n7.arguments[l6])};
      if (lang.binary(${o5}, ${t3}, "==") === true ) {
        return ${W3(e5, n7.arguments[l6 + 1])}
      }
`;
    return `${e5.isAsync ? "(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {" : "function() {"}
        var ${t3} = ${W3(e5, n7.arguments[0])};
        ${a5}
        return ${W3(e5, n7.arguments[n7.arguments.length - 1])}
        ${e5.isAsync ? "})}()))" : "}()"}`;
  } catch (t3) {
    throw t3;
  }
}
var xe = {};
function Me2(e5) {
  return e5.symbols.symbolCounter++, "_T" + e5.symbols.symbolCounter.toString();
}
function Fe2(e5) {
  return e5.symbols.symbolCounter++, "_Tvar" + e5.symbols.symbolCounter.toString();
}
C(xe, q3), $2(xe, q3), m2(xe, q3), W2(xe, q3), f2(xe, q3), xe.iif = function(e5, n7) {
  try {
    return q3(e5, n7, (t3, r8, a5) => {
      throw new a3(e5, r3.Unrecognized, n7);
    });
  } catch (t3) {
    throw t3;
  }
}, xe.decode = function(e5, n7) {
  try {
    return q3(e5, n7, (t3, r8, a5) => {
      throw new a3(e5, r3.Unrecognized, n7);
    });
  } catch (t3) {
    throw t3;
  }
}, xe.when = function(e5, n7) {
  try {
    return q3(e5, n7, (t3, r8, a5) => {
      throw new a3(e5, r3.Unrecognized, n7);
    });
  } catch (t3) {
    throw t3;
  }
};
var Ce = {};
for (const Ze in xe)
  Ce[Ze] = new e(xe[Ze]);
S(xe, q3);
for (const Ze in xe)
  xe[Ze] = new e(xe[Ze]);
var Ie2 = function() {
};
Ie2.prototype = xe;
var Ae = function() {
};
function _e(e5, n7, t3) {
  const o5 = {};
  e5 || (e5 = {}), t3 || (t3 = {}), o5._SymbolsMap = {}, o5.textformatting = 1, o5.infinity = 1, o5.pi = 1;
  for (const l6 in n7)
    o5[l6] = 1;
  for (const l6 in t3)
    o5[l6] = 1;
  for (const l6 in e5)
    o5[l6] = 1;
  return o5;
}
function Oe(e5, n7, o5, l6) {
  const r8 = o5 ? new Ae() : new Ie2();
  e5 || (e5 = {}), n7 || (n7 = {});
  const a5 = new N({ newline: "\n", tab: "	", singlequote: "'", doublequote: '"', forwardslash: "/", backwardslash: "\\" });
  a5.immutable = false, r8._SymbolsMap = { textformatting: 1, infinity: 1, pi: 1 }, r8.textformatting = a5, r8.infinity = Number.POSITIVE_INFINITY, r8.pi = Math.PI;
  for (const t3 in n7)
    r8[t3] = n7[t3], r8._SymbolsMap[t3] = 1;
  for (const t3 in e5)
    r8._SymbolsMap[t3] = 1, e5[t3] && "esri.Graphic" === e5[t3].declaredClass ? r8[t3] = D.createFromGraphic(e5[t3], l6 ?? null) : r8[t3] = e5[t3];
  return r8;
}
Ae.prototype = Ce;
function Ee(e5, n7) {
  const t3 = { mode: n7, compiled: true, functions: {}, signatures: [], standardFunction: q3, standardFunctionAsync: q3, evaluateIdentifier: Be };
  for (let o5 = 0; o5 < e5.length; o5++)
    e5[o5].registerFunctions(t3);
  if ("sync" === n7) {
    for (const e6 in t3.functions)
      xe[e6] = new e(t3.functions[e6]), Ie2.prototype[e6] = xe[e6];
    for (let e6 = 0; e6 < t3.signatures.length; e6++)
      o(t3.signatures[e6], "sync");
  } else {
    for (const e6 in t3.functions)
      Ce[e6] = new e(t3.functions[e6]), Ae.prototype[e6] = Ce[e6];
    for (let e6 = 0; e6 < t3.signatures.length; e6++)
      o(t3.signatures[e6], "async");
  }
}
function Be(e5, n7) {
  const t3 = n7.name;
  if ("_SymbolsMap" === t3)
    throw new a3(e5, r3.InvalidIdentifier, null);
  if (e5.localStack.length > 0) {
    if ("_t" !== t3.substr(0, 2).toLowerCase() && void 0 !== e5.localStack[e5.localStack.length - 1][t3])
      return e5.localStack[e5.localStack.length - 1][t3];
    const n8 = e5.mangleMap[t3];
    if (void 0 !== n8 && void 0 !== e5.localStack[e5.localStack.length - 1][n8])
      return e5.localStack[e5.localStack.length - 1][n8];
  }
  if ("_t" !== t3.substr(0, 2).toLowerCase() && void 0 !== e5.globalScope[t3])
    return e5.globalScope[t3];
  if (1 === e5.globalScope._SymbolsMap[t3])
    return e5.globalScope[t3];
  const r8 = e5.mangleMap[t3];
  return void 0 !== r8 ? e5.globalScope[r8] : void 0;
}
Ee([p5], "sync"), Ee([p5], "async");
var $e = 0;
var je2 = { error(e5) {
  throw new a3(null, e5, null);
}, __awaiter: (e5, n7, t3, o5) => new Promise((t4, l6) => {
  function r8(e6) {
    try {
      s9(o5.next(e6));
    } catch (n8) {
      l6(n8);
    }
  }
  function a5(e6) {
    try {
      s9(o5.throw(e6));
    } catch (n8) {
      l6(n8);
    }
  }
  function s9(e6) {
    var _a;
    e6.done ? t4(e6.value) : ((_a = e6.value) == null ? void 0 : _a.then) ? e6.value.then(r8, a5) : ($e++, $e % 100 == 0 ? setTimeout(() => {
      $e = 0, r8(e6.value);
    }, 0) : r8(e6.value));
  }
  s9((o5 = o5.apply(e5, n7 || [])).next());
}), functionDepthchecker: (e5, n7) => function() {
  if (n7.depthCounter.depth++, n7.localStack.push([]), n7.depthCounter.depth > 64)
    throw new a3(null, r3.MaximumCallDepth, null);
  const t3 = e5.apply(this, arguments);
  return E(t3) ? t3.then((e6) => (n7.depthCounter.depth--, n7.localStack.length = n7.localStack.length - 1, e6)) : (n7.depthCounter.depth--, n7.localStack.length = n7.localStack.length - 1, t3);
}, chkAssig(e5, n7) {
  if (void 0 === n7.gdefs[e5])
    throw new a3(n7, r3.InvalidIdentifier, null);
  return e5;
}, mustBoolean(e5, n7) {
  if (true === e5 || false === e5)
    return e5;
  throw new a3(n7, r3.BooleanConditionRequired, null);
}, setAssig: (e5, n7) => (n7.gdefs[e5] = 1, e5), castString: (e5) => ce(e5), aCheck(e5, n7) {
  if (v(e5)) {
    if ("ArrayExpression" === n7)
      throw new a3(null, r3.NoFunctionInArray, null);
    if ("ObjectExpression" === n7)
      throw new a3(null, r3.NoFunctionInDictionary, null);
    throw new a3(null, r3.NoFunctionInTemplateLiteral, null);
  }
  return e5 === w ? null : e5;
}, Dictionary: N, Feature: D, UserDefinedCompiledFunction: K2, dictionary(e5) {
  const n7 = {}, r8 = /* @__PURE__ */ new Map();
  for (let t3 = 0; t3 < e5.length; t3 += 2) {
    if (v(e5[t3 + 1]))
      throw new a3(null, r3.NoFunctionInDictionary, null);
    if (false === P(e5[t3]))
      throw new a3(null, r3.KeyMustBeString, null);
    let a6 = e5[t3].toString();
    const s9 = a6.toLowerCase();
    r8.has(s9) ? a6 = r8.get(s9) : r8.set(s9, a6), e5[t3 + 1] === w ? n7[a6] = null : n7[a6] = e5[t3 + 1];
  }
  const a5 = new N(n7);
  return a5.immutable = false, a5;
}, strCheck(e5) {
  if (false === P(e5))
    throw new a3(null, r3.KeyMustBeString, null);
  return e5;
}, unary(e5, n7) {
  if (G(e5)) {
    if ("!" === n7)
      return !e5;
    if ("-" === n7)
      return -1 * pe(e5);
    if ("+" === n7)
      return 1 * pe(e5);
    if ("~" === n7)
      return ~pe(e5);
    throw new a3(null, r3.UnsupportedUnaryOperator, null);
  }
  if ("-" === n7)
    return -1 * pe(e5);
  if ("+" === n7)
    return 1 * pe(e5);
  if ("~" === n7)
    return ~pe(e5);
  throw new a3(null, r3.UnsupportedUnaryOperator, null);
}, logicalCheck(e5) {
  if (false === G(e5))
    throw new a3(null, r3.LogicExpressionOrAnd, null);
  return e5;
}, logical(e5, n7, t3) {
  if (G(e5) && G(n7))
    switch (t3) {
      case "||":
        return e5 || n7;
      case "&&":
        return e5 && n7;
      default:
        throw new a3(null, r3.LogicExpressionOrAnd, null);
    }
  throw new a3(null, r3.LogicExpressionOrAnd, null);
}, binary(e5, n7, t3) {
  switch (t3) {
    case "|":
    case "<<":
    case ">>":
    case ">>>":
    case "^":
    case "&":
      return Ie(pe(e5), pe(n7), t3);
    case "==":
    case "=":
      return fe(e5, n7);
    case "!=":
      return !fe(e5, n7);
    case "<":
    case ">":
    case "<=":
    case ">=":
      return se(e5, n7, t3);
    case "+":
      return P(e5) || P(n7) ? ce(e5) + ce(n7) : pe(e5) + pe(n7);
    case "-":
      return pe(e5) - pe(n7);
    case "*":
      return pe(e5) * pe(n7);
    case "/":
      return pe(e5) / pe(n7);
    case "%":
      return pe(e5) % pe(n7);
    default:
      throw new a3(null, r3.UnsupportedOperator, null);
  }
}, assign(e5, n7, t3) {
  switch (n7) {
    case "=":
      return e5 === w ? null : e5;
    case "/=":
      return pe(t3) / pe(e5);
    case "*=":
      return pe(t3) * pe(e5);
    case "-=":
      return pe(t3) - pe(e5);
    case "+=":
      return P(t3) || P(e5) ? ce(t3) + ce(e5) : pe(t3) + pe(e5);
    case "%=":
      return pe(t3) % pe(e5);
    default:
      throw new a3(null, r3.UnsupportedOperator, null);
  }
}, update(e5, n7, t3, o5) {
  const l6 = pe(e5[n7]);
  return e5[n7] = "++" === t3 ? l6 + 1 : l6 - 1, false === o5 ? l6 : "++" === t3 ? l6 + 1 : l6 - 1;
}, graphicToFeature: (e5, n7, t3) => null === e5 ? null : D.createFromGraphicLikeObject(e5.geometry, e5.attributes, n7, t3.timeZone), memberupdate(e5, n7, r8, a5) {
  let s9;
  if (q(e5)) {
    if (!z2(n7))
      throw new a3(null, r3.ArrayAccessorMustBeNumber, null);
    if (n7 < 0 && (n7 = e5.length + n7), n7 < 0 || n7 >= e5.length)
      throw new a3(null, r3.OutOfBounds, null);
    s9 = pe(e5[n7]), e5[n7] = "++" === r8 ? s9 + 1 : s9 - 1;
  } else if (e5 instanceof N) {
    if (false === P(n7))
      throw new a3(null, r3.KeyAccessorMustBeString, null);
    if (true !== e5.hasField(n7))
      throw new a3(null, r3.FieldNotFound, null, { key: n7 });
    s9 = pe(e5.field(n7)), e5.setField(n7, "++" === r8 ? s9 + 1 : s9 - 1);
  } else if (U(e5)) {
    if (false === P(n7))
      throw new a3(null, r3.KeyAccessorMustBeString, null);
    if (true !== e5.hasField(n7))
      throw new a3(null, r3.FieldNotFound, null);
    s9 = pe(e5.field(n7)), e5.setField(n7, "++" === r8 ? s9 + 1 : s9 - 1);
  } else {
    if ($(e5))
      throw new a3(null, r3.Immutable, null);
    if (!(e5 instanceof Ue))
      throw new a3(null, r3.InvalidIdentifier, null);
    if (false === P(n7))
      throw new a3(null, r3.ModuleAccessorMustBeString, null);
    if (true !== e5.hasGlobal(n7))
      throw new a3(null, r3.ModuleExportNotFound, null);
    s9 = pe(e5.global(n7)), e5.setGlobal(n7, "++" === r8 ? s9 + 1 : s9 - 1);
  }
  return false === a5 ? s9 : "++" === r8 ? s9 + 1 : s9 - 1;
}, assignmember(e5, n7, r8, a5) {
  if (q(e5)) {
    if (!z2(n7))
      throw new a3(null, r3.ArrayAccessorMustBeNumber, null);
    if (n7 < 0 && (n7 = e5.length + n7), n7 < 0 || n7 > e5.length)
      throw new a3(null, r3.OutOfBounds, null);
    if (n7 === e5.length) {
      if ("=" !== r8)
        throw new a3(null, r3.OutOfBounds, null);
      e5[n7] = this.assign(a5, r8, e5[n7]);
    } else
      e5[n7] = this.assign(a5, r8, e5[n7]);
  } else if (e5 instanceof N) {
    if (false === P(n7))
      throw new a3(null, r3.KeyAccessorMustBeString, null);
    if (true === e5.hasField(n7))
      e5.setField(n7, this.assign(a5, r8, e5.field(n7)));
    else {
      if ("=" !== r8)
        throw new a3(null, r3.FieldNotFound, null);
      e5.setField(n7, this.assign(a5, r8, null));
    }
  } else if (U(e5)) {
    if (false === P(n7))
      throw new a3(null, r3.KeyAccessorMustBeString, null);
    if (true === e5.hasField(n7))
      e5.setField(n7, this.assign(a5, r8, e5.field(n7)));
    else {
      if ("=" !== r8)
        throw new a3(null, r3.FieldNotFound, null);
      e5.setField(n7, this.assign(a5, r8, null));
    }
  } else {
    if ($(e5))
      throw new a3(null, r3.Immutable, null);
    if (!(e5 instanceof Ue))
      throw new a3(null, r3.InvalidIdentifier, null);
    if (false === P(n7))
      throw new a3(null, r3.ModuleAccessorMustBeString, null);
    if (!e5.hasGlobal(n7))
      throw new a3(null, r3.ModuleExportNotFound, null);
    e5.setGlobal(n7, this.assign(a5, r8, e5.global(n7)));
  }
}, member(e5, n7) {
  if (null === e5)
    throw new a3(null, r3.MemberOfNull, null);
  if (e5 instanceof N || U(e5)) {
    if (P(n7))
      return e5.field(n7);
    throw new a3(null, r3.InvalidMemberAccessKey, null);
  }
  if (e5 instanceof p) {
    if (P(n7))
      return L2(e5, n7, null, null);
    throw new a3(null, r3.InvalidMemberAccessKey, null);
  }
  if (q(e5)) {
    if (z2(n7) && isFinite(n7) && Math.floor(n7) === n7) {
      if (n7 < 0 && (n7 = e5.length + n7), n7 >= e5.length || n7 < 0)
        throw new a3(null, r3.OutOfBounds, null);
      return e5[n7];
    }
    throw new a3(null, r3.InvalidMemberAccessKey, null);
  }
  if (P(e5)) {
    if (z2(n7) && isFinite(n7) && Math.floor(n7) === n7) {
      if (n7 < 0 && (n7 = e5.length + n7), n7 >= e5.length || n7 < 0)
        throw new a3(null, r3.OutOfBounds, null);
      return e5[n7];
    }
    throw new a3(null, r3.InvalidMemberAccessKey, null);
  }
  if ($(e5)) {
    if (z2(n7) && isFinite(n7) && Math.floor(n7) === n7) {
      if (n7 < 0 && (n7 = e5.length() + n7), n7 >= e5.length() || n7 < 0)
        throw new a3(null, r3.OutOfBounds, null);
      return e5.get(n7);
    }
    throw new a3(null, r3.InvalidMemberAccessKey, null);
  }
  if (e5 instanceof Ue) {
    if (P(n7))
      return e5.global(n7);
    throw new a3(null, r3.InvalidMemberAccessKey, null);
  }
  throw new a3(null, r3.InvalidMemberAccessKey, null);
}, callfunc: (e5, n7, t3) => e5.call(t3, { arguments: n7, preparsed: true }), loadModule(e5, n7) {
  const t3 = n7.moduleFactoryMap[e5];
  if (n7.moduleSingletons[t3])
    return n7.moduleSingletons[t3];
  const o5 = n7.moduleFactory[t3]({ vars: {}, moduleSingletons: n7.moduleSingletons, depthCounter: n7.depthCounter, console: n7.console, abortSignal: n7.abortSignal, isAsync: n7.isAsync, services: n7.services, lrucache: n7.lrucache, timeZone: n7.timeZone ?? null, interceptor: n7.interceptor }, n7.spatialReference);
  return n7.moduleSingletons[t3] = o5, o5;
}, callModuleFunction(e5, n7, t3, r8) {
  if (!(e5 instanceof Ue))
    throw new a3(null, r3.FunctionNotFound, null);
  const a5 = e5.global(t3);
  if (false === v(a5))
    throw new a3(null, r3.CallNonFunction, null);
  return a5.call(r8, { preparsed: true, arguments: n7 });
} };
function Ne2(e5) {
  console.log(e5);
}
function Le(e5, t3, a5 = false) {
  null === t3 && (t3 = { vars: {}, customfunctions: {} });
  let s9 = null;
  e5.usesModules && (s9 = new s2(null, e5.loadedModules));
  const i5 = { isAsync: a5, globalScope: _e(t3.vars, a5 ? Ce : xe, t3.customfunctions), moduleFactory: {}, moduleFactoryMap: {}, undeclaredGlobalsInFunctions: /* @__PURE__ */ new Map(), customfunctions: t3.customfunctions, libraryResolver: s9, localScope: null, mangleMap: {}, depthCounter: { depth: 1 }, exports: {}, console: Ne2, lrucache: t3.lrucache, timeZone: t3.timeZone ?? null, interceptor: t3.interceptor, services: t3.services, symbols: { symbolCounter: 0 } };
  let c4 = W3(i5, e5);
  "" === c4 && (c4 = "lc.voidOperation; "), i5.undeclaredGlobalsInFunctions.size > 0 && i5.undeclaredGlobalsInFunctions.forEach((e6) => {
    throw new s3(t3, r3.InvalidIdentifier, e6.node);
  });
  let u8 = "";
  u8 = a5 ? "var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n" + c4 + "\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); " : "var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n " + c4 + "\n return lastStatement; } \n return this.postProcess(mainBody()); ";
  const p7 = i5.moduleFactory, w5 = i5.moduleFactoryMap, S3 = i5.exports, v4 = {};
  for (const n7 in S3)
    v4[n7] = void 0 !== i5.mangleMap[n7] ? i5.mangleMap[n7] : n7;
  const x6 = { lc: We, lang: je2, mangles: i5.mangleMap, postProcess(e6) {
    if (e6 instanceof F && (e6 = e6.value), e6 instanceof M2 && (e6 = e6.value), e6 === w && (e6 = null), e6 === O)
      throw new a3(null, r3.IllegalResult, null);
    if (e6 === R)
      throw new a3(null, r3.IllegalResult, null);
    if (v(e6))
      throw new a3(null, r3.IllegalResult, null);
    return e6;
  }, prepare(e6, n7) {
    let t4 = e6.spatialReference;
    null == t4 && (t4 = f.WebMercator);
    const o5 = Oe(e6.vars, e6.customfunctions, n7, e6.timeZone);
    return { localStack: [], isAsync: n7, moduleFactory: p7, moduleFactoryMap: w5, mangleMap: this.mangles, moduleSingletons: {}, exports: S3, gdefs: {}, exportmangle: v4, spatialReference: t4, globalScope: o5, abortSignal: void 0 === e6.abortSignal || null === e6.abortSignal ? { aborted: false } : e6.abortSignal, localScope: null, services: e6.services, console: e6.console ?? Ne2, lrucache: e6.lrucache, timeZone: e6.timeZone ?? null, interceptor: e6.interceptor, symbols: { symbolCounter: 0 }, depthCounter: { depth: 1 } };
  } };
  return new Function("context", "spatialReference", u8).bind(x6);
}
async function Re() {
  return Ee([await import("./geomasync-U5QI43MB.js")], "async"), true;
}
var Ue = class extends s {
  constructor(e5) {
    super(null), this.moduleContext = e5;
  }
  hasGlobal(e5) {
    return void 0 === this.moduleContext.exports[e5] && (e5 = e5.toLowerCase()), void 0 !== this.moduleContext.exports[e5];
  }
  setGlobal(e5, n7) {
    const t3 = this.moduleContext.globalScope, r8 = e5.toLowerCase();
    if (v(n7))
      throw new a3(null, r3.AssignModuleFunction, null);
    t3[this.moduleContext.exportmangle[r8]] = n7;
  }
  global(e5) {
    const n7 = this.moduleContext.globalScope;
    e5 = e5.toLowerCase();
    const t3 = n7[this.moduleContext.exportmangle[e5]];
    if (void 0 === t3)
      throw new a3(null, r3.InvalidIdentifier, null);
    if (v(t3) && !(t3 instanceof s4)) {
      const o5 = new s4();
      return o5.fn = t3, o5.parameterEvaluator = q3, o5.context = this.moduleContext, n7[this.moduleContext.exportmangle[e5]] = o5, o5;
    }
    return t3;
  }
};
function De(e5, t3, o5 = false) {
  const l6 = { isAsync: o5, moduleFactory: t3.moduleFactory, moduleFactoryMap: {}, libraryResolver: new s2(null, e5.loadedModules), globalScope: _e(t3.vars, o5 ? Ce : xe, t3.customfunctions), customfunctions: t3.customfunctions, localScope: null, mangleMap: {}, undeclaredGlobalsInFunctions: /* @__PURE__ */ new Map(), depthCounter: { depth: 1 }, exports: {}, console: Ne2, lrucache: t3.lrucache, timeZone: t3.timeZone ?? null, interceptor: t3.interceptor, services: t3.services, symbols: { symbolCounter: 0 } };
  let r8 = W3(l6, e5);
  "" === r8 && (r8 = "lc.voidOperation; ");
  let a5 = "";
  a5 = o5 ? "var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n" + r8 + "\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); " : "var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n " + r8 + "\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ";
  const s9 = l6.moduleFactory, i5 = l6.moduleFactoryMap, c4 = l6.exports, u8 = {};
  for (const n7 in c4)
    u8[n7] = void 0 !== l6.mangleMap[n7] ? l6.mangleMap[n7] : n7;
  const p7 = { lc: We, lang: je2, mangles: l6.mangleMap, prepareModule: (e6) => new Ue(e6), prepare(e6, n7) {
    let t4 = e6.spatialReference;
    null == t4 && (t4 = new f({ wkid: 102100 }));
    const o6 = Oe(e6.vars, e6.customfunctions, n7, e6.timeZone);
    return { localStack: [], isAsync: n7, exports: c4, exportmangle: u8, gdefs: {}, moduleFactory: s9, moduleFactoryMap: i5, moduleSingletons: e6.moduleSingletons, mangleMap: this.mangles, spatialReference: t4, globalScope: o6, abortSignal: void 0 === e6.abortSignal || null === e6.abortSignal ? { aborted: false } : e6.abortSignal, localScope: null, services: e6.services, console: e6.console ?? Ne2, lrucache: e6.lrucache, timeZone: e6.timeZone ?? null, interceptor: e6.interceptor, symbols: { symbolCounter: 0 }, depthCounter: e6.depthCounter };
  } };
  return new Function("context", "spatialReference", a5).bind(p7);
}

// node_modules/@arcgis/core/arcade/lib/types.js
var e2;
var t;
!function(e5) {
  e5.Break = "break", e5.Continue = "continue", e5.Else = "else", e5.False = "false", e5.For = "for", e5.From = "from", e5.Function = "function", e5.If = "if", e5.Import = "import", e5.Export = "export", e5.In = "in", e5.Null = "null", e5.Return = "return", e5.True = "true", e5.Var = "var", e5.While = "while";
}(e2 || (e2 = {})), function(e5) {
  e5.AssignmentExpression = "AssignmentExpression", e5.ArrayExpression = "ArrayExpression", e5.BlockComment = "BlockComment", e5.BlockStatement = "BlockStatement", e5.BinaryExpression = "BinaryExpression", e5.BreakStatement = "BreakStatement", e5.CallExpression = "CallExpression", e5.ContinueStatement = "ContinueStatement", e5.EmptyStatement = "EmptyStatement", e5.ExpressionStatement = "ExpressionStatement", e5.ExportNamedDeclaration = "ExportNamedDeclaration", e5.ExportSpecifier = "ExportSpecifier", e5.ForStatement = "ForStatement", e5.ForInStatement = "ForInStatement", e5.FunctionDeclaration = "FunctionDeclaration", e5.Identifier = "Identifier", e5.IfStatement = "IfStatement", e5.ImportDeclaration = "ImportDeclaration", e5.ImportDefaultSpecifier = "ImportDefaultSpecifier", e5.LineComment = "LineComment", e5.Literal = "Literal", e5.LogicalExpression = "LogicalExpression", e5.MemberExpression = "MemberExpression", e5.ObjectExpression = "ObjectExpression", e5.Program = "Program", e5.Property = "Property", e5.ReturnStatement = "ReturnStatement", e5.TemplateElement = "TemplateElement", e5.TemplateLiteral = "TemplateLiteral", e5.UnaryExpression = "UnaryExpression", e5.UpdateExpression = "UpdateExpression", e5.VariableDeclaration = "VariableDeclaration", e5.VariableDeclarator = "VariableDeclarator", e5.WhileStatement = "WhileStatement";
}(t || (t = {}));
var n5 = ["++", "--"];
var r6 = ["-", "+", "!", "~"];
var i3 = ["=", "/=", "*=", "%=", "+=", "-="];
var a4 = ["||", "&&"];
var o2 = ["|", "&", ">>", "<<", ">>>", "^", "==", "!=", "<", "<=", ">", ">=", "+", "-", "*", "/", "%"];
var c3 = { "||": 1, "&&": 2, "|": 3, "^": 4, "&": 5, "==": 6, "!=": 6, "<": 7, ">": 7, "<=": 7, ">=": 7, "<<": 8, ">>": 8, ">>>": 8, "+": 9, "-": 9, "*": 10, "/": 10, "%": 10 };
var l3;
!function(e5) {
  e5[e5.Unknown = 0] = "Unknown", e5[e5.BooleanLiteral = 1] = "BooleanLiteral", e5[e5.EOF = 2] = "EOF", e5[e5.Identifier = 3] = "Identifier", e5[e5.Keyword = 4] = "Keyword", e5[e5.NullLiteral = 5] = "NullLiteral", e5[e5.NumericLiteral = 6] = "NumericLiteral", e5[e5.Punctuator = 7] = "Punctuator", e5[e5.StringLiteral = 8] = "StringLiteral", e5[e5.Template = 10] = "Template";
}(l3 || (l3 = {}));
var s5 = ["Unknown", "Boolean", "<end>", "Identifier", "Keyword", "Null", "Numeric", "Punctuator", "String", "RegularExpression", "Template"];
var p6;
!function(e5) {
  e5.InvalidModuleUri = "InvalidModuleUri", e5.ForInOfLoopInitializer = "ForInOfLoopInitializer", e5.IdentiferExpected = "IdentiferExpected", e5.InvalidEscapedReservedWord = "InvalidEscapedReservedWord", e5.InvalidExpression = "InvalidExpression", e5.InvalidFunctionIdentifier = "InvalidFunctionIdentifier", e5.InvalidHexEscapeSequence = "InvalidHexEscapeSequence", e5.InvalidLeftHandSideInAssignment = "InvalidLeftHandSideInAssignment", e5.InvalidLeftHandSideInForIn = "InvalidLeftHandSideInForIn", e5.InvalidTemplateHead = "InvalidTemplateHead", e5.InvalidVariableAssignment = "InvalidVariableAssignment", e5.KeyMustBeString = "KeyMustBeString", e5.NoFunctionInsideBlock = "NoFunctionInsideBlock", e5.NoFunctionInsideFunction = "NoFunctionInsideFunction", e5.ModuleExportRootOnly = "ModuleExportRootOnly", e5.ModuleImportRootOnly = "ModuleImportRootOnly", e5.PunctuatorExpected = "PunctuatorExpected", e5.TemplateOctalLiteral = "TemplateOctalLiteral", e5.UnexpectedBoolean = "UnexpectedBoolean", e5.UnexpectedEndOfScript = "UnexpectedEndOfScript", e5.UnexpectedIdentifier = "UnexpectedIdentifier", e5.UnexpectedKeyword = "UnexpectedKeyword", e5.UnexpectedNull = "UnexpectedNull", e5.UnexpectedNumber = "UnexpectedNumber", e5.UnexpectedPunctuator = "UnexpectedPunctuator", e5.UnexpectedString = "UnexpectedString", e5.UnexpectedTemplate = "UnexpectedTemplate", e5.UnexpectedToken = "UnexpectedToken";
}(p6 || (p6 = {}));
var d2 = { [p6.InvalidModuleUri]: "Module uri must be a text literal.", [p6.ForInOfLoopInitializer]: "for-in loop variable declaration may not have an initializer.", [p6.IdentiferExpected]: "'${value}' is an invalid identifier.", [p6.InvalidEscapedReservedWord]: "Keyword cannot contain escaped characters.", [p6.InvalidExpression]: "Invalid expression.", [p6.InvalidFunctionIdentifier]: "'${value}' is an invalid function identifier.", [p6.InvalidHexEscapeSequence]: "Invalid hexadecimal escape sequence.", [p6.InvalidLeftHandSideInAssignment]: "Invalid left-hand side in assignment.", [p6.InvalidLeftHandSideInForIn]: "Invalid left-hand side in for-in.", [p6.InvalidTemplateHead]: "Invalid template structure.", [p6.InvalidVariableAssignment]: "Invalid variable assignment.", [p6.KeyMustBeString]: "Object property keys must be a word starting with a letter.", [p6.NoFunctionInsideBlock]: "Functions cannot be declared inside of code blocks.", [p6.NoFunctionInsideFunction]: "Functions cannot be declared inside another function.", [p6.ModuleExportRootOnly]: "Module exports cannot be declared inside of code blocks.", [p6.ModuleImportRootOnly]: "Module import cannot be declared inside of code blocks.", [p6.PunctuatorExpected]: "'${value}' expected.", [p6.TemplateOctalLiteral]: "Octal literals are not allowed in template literals.", [p6.UnexpectedBoolean]: "Unexpected boolean literal.", [p6.UnexpectedEndOfScript]: "Unexpected end of Arcade expression.", [p6.UnexpectedIdentifier]: "Unexpected identifier.", [p6.UnexpectedKeyword]: "Unexpected keyword.", [p6.UnexpectedNull]: "Unexpected null literal.", [p6.UnexpectedNumber]: "Unexpected number.", [p6.UnexpectedPunctuator]: "Unexpected ponctuator.", [p6.UnexpectedString]: "Unexpected text literal.", [p6.UnexpectedTemplate]: "Unexpected quasi '${value}'.", [p6.UnexpectedToken]: "Unexpected token '${value}'." };
var u5 = class _u extends Error {
  constructor({ code: e5, index: t3, line: n7, column: r8, len: i5 = 0, description: a5, data: o5 }) {
    var _a;
    super(`${a5 ?? e5}`), this.declaredRootClass = "esri.arcade.lib.parsingerror", this.name = "ParsingError", this.code = e5, this.index = t3, this.line = n7, this.column = r8, this.len = i5, this.data = o5, this.description = a5, this.range = { start: { line: n7, column: r8 - 1 }, end: { line: n7, column: r8 + i5 } }, (_a = Error.captureStackTrace) == null ? void 0 : _a.call(Error, this, _u);
  }
};
function m3(e5) {
  return (e5 == null ? void 0 : e5.type) === t.Program;
}
function f3(e5) {
  return (e5 == null ? void 0 : e5.type) === t.BlockStatement;
}
function I(e5) {
  return (e5 == null ? void 0 : e5.type) === t.BlockComment;
}
function S2(e5) {
  return (e5 == null ? void 0 : e5.type) === t.EmptyStatement;
}
function V2(e5) {
  return (e5 == null ? void 0 : e5.type) === t.VariableDeclarator;
}

// node_modules/@arcgis/core/arcade/lib/comment-handler.js
function i4(t3, n7) {
  return !!n7 && (n7.loc.end.line === t3.loc.start.line && n7.loc.end.column <= t3.loc.start.column);
}
function m4(t3, n7) {
  return t3.range[0] >= n7.range[0] && t3.range[1] <= n7.range[1];
}
var o3 = class {
  constructor() {
    this.comments = [], this._nodeStack = [], this._newComments = [];
  }
  insertInnerComments(n7) {
    if (!f3(n7) || 0 !== n7.body.length)
      return;
    const e5 = [];
    for (let t3 = this._newComments.length - 1; t3 >= 0; --t3) {
      const s9 = this._newComments[t3];
      n7.range[1] >= s9.range[0] && (e5.unshift(s9), this._newComments.splice(t3, 1));
    }
    e5.length && (n7.innerComments = e5);
  }
  attachTrailingComments(n7) {
    if (!n7)
      return;
    const e5 = this._nodeStack[this._nodeStack.length - 1];
    if (f3(n7) && m4(e5, n7))
      for (let t3 = this._newComments.length - 1; t3 >= 0; --t3) {
        const s10 = this._newComments[t3];
        m4(s10, n7) && (e5.trailingComments = [...e5.trailingComments ?? [], s10], this._newComments.splice(t3, 1));
      }
    let s9 = [];
    if (this._newComments.length > 0)
      for (let t3 = this._newComments.length - 1; t3 >= 0; --t3) {
        const m5 = this._newComments[t3];
        i4(m5, e5) ? (e5.trailingComments = [...e5.trailingComments ?? [], m5], this._newComments.splice(t3, 1)) : i4(m5, n7) && (s9.unshift(m5), this._newComments.splice(t3, 1));
      }
    if (e5 == null ? void 0 : e5.trailingComments) {
      i4(e5.trailingComments[0], n7) && (s9 = [...s9, ...e5.trailingComments], delete e5.trailingComments);
    }
    s9.length > 0 && (n7.trailingComments = s9);
  }
  attachLeadingComments(t3) {
    var _a, _b;
    if (!t3)
      return;
    let s9;
    for (; this._nodeStack.length > 0; ) {
      const n7 = this._nodeStack[this._nodeStack.length - 1];
      if (!(t3.range[0] <= n7.range[0]))
        break;
      s9 = n7, this._nodeStack.pop();
    }
    const i5 = [], m5 = [];
    if (s9) {
      for (let o5 = (((_a = s9.leadingComments) == null ? void 0 : _a.length) ?? 0) - 1; o5 >= 0; --o5) {
        const l6 = s9.leadingComments[o5];
        t3.range[0] >= l6.range[1] ? (i5.unshift(l6), s9.leadingComments.splice(o5, 1)) : V2(t3) && !I(l6) && (m5.unshift(l6), s9.leadingComments.splice(o5, 1));
      }
      return 0 === ((_b = s9.leadingComments) == null ? void 0 : _b.length) && delete s9.leadingComments, i5.length && (t3.leadingComments = i5), void (m5.length && (t3.trailingComments = [...m5, ...t3.trailingComments ?? []]));
    }
    for (let n7 = this._newComments.length - 1; n7 >= 0; --n7) {
      const e5 = this._newComments[n7];
      t3.range[0] >= e5.range[0] && (i5.unshift(e5), this._newComments.splice(n7, 1));
    }
    i5.length && (t3.leadingComments = i5);
  }
  attachComments(t3) {
    if (m3(t3) && t3.body.length > 0) {
      const n7 = this._nodeStack[this._nodeStack.length - 1];
      return n7 ? (n7.trailingComments = [...n7.trailingComments ?? [], ...this._newComments], this._newComments.length = 0, void this._nodeStack.pop()) : (t3.trailingComments = [...this._newComments], void (this._newComments.length = 0));
    }
    this.attachTrailingComments(t3), this.attachLeadingComments(t3), this.insertInnerComments(t3), this._nodeStack.push(t3);
  }
  collectComment(t3) {
    this.comments.push(t3), this._newComments.push(t3);
  }
};

// node_modules/@arcgis/core/arcade/lib/error-handler.js
function o4(t3, o5) {
  const e5 = d2[t3];
  return o5 ? e5.replaceAll(/\${(.*?)}/g, (r8, t4) => {
    var _a;
    return ((_a = o5[t4]) == null ? void 0 : _a.toString()) ?? "";
  }) : e5;
}
var e3 = class {
  constructor(r8 = false) {
    this.tolerant = r8, this.errors = [];
  }
  recordError(r8) {
    this.errors.push(r8);
  }
  tolerate(r8) {
    if (!this.tolerant)
      throw r8;
    this.recordError(r8);
  }
  throwError(r8) {
    throw r8.description = r8.description ?? o4(r8.code, r8.data), new u5(r8);
  }
  tolerateError(r8) {
    r8.description = r8.description ?? o4(r8.code, r8.data);
    const e5 = new u5(r8);
    if (!this.tolerant)
      throw e5;
    this.recordError(e5);
  }
};

// node_modules/@arcgis/core/arcade/lib/assert.js
function r7(r8, o5) {
  if (!r8)
    throw new Error("ASSERT: " + o5);
}

// node_modules/@arcgis/core/arcade/lib/character.js
var u6 = { NonAsciiIdentifierStart: /[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/, NonAsciiIdentifierPart: /[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/ };
var D2 = { fromCodePoint: (u8) => u8 < 65536 ? String.fromCharCode(u8) : String.fromCharCode(55296 + (u8 - 65536 >> 10)) + String.fromCharCode(56320 + (u8 - 65536 & 1023)), isWhiteSpace: (u8) => 32 === u8 || 9 === u8 || 11 === u8 || 12 === u8 || 160 === u8 || u8 >= 5760 && [5760, 8192, 8193, 8194, 8195, 8196, 8197, 8198, 8199, 8200, 8201, 8202, 8239, 8287, 12288, 65279].includes(u8), isLineTerminator: (u8) => 10 === u8 || 13 === u8 || 8232 === u8 || 8233 === u8, isIdentifierStart: (F4) => 36 === F4 || 95 === F4 || F4 >= 65 && F4 <= 90 || F4 >= 97 && F4 <= 122 || 92 === F4 || F4 >= 128 && u6.NonAsciiIdentifierStart.test(D2.fromCodePoint(F4)), isIdentifierPart: (F4) => 36 === F4 || 95 === F4 || F4 >= 65 && F4 <= 90 || F4 >= 97 && F4 <= 122 || F4 >= 48 && F4 <= 57 || 92 === F4 || F4 >= 128 && u6.NonAsciiIdentifierPart.test(D2.fromCodePoint(F4)), isDecimalDigit: (u8) => u8 >= 48 && u8 <= 57, isHexDigit: (u8) => u8 >= 48 && u8 <= 57 || u8 >= 65 && u8 <= 70 || u8 >= 97 && u8 <= 102, isOctalDigit: (u8) => u8 >= 48 && u8 <= 55 };

// node_modules/@arcgis/core/arcade/lib/scanner.js
function d3(e5) {
  return "0123456789abcdef".indexOf(e5.toLowerCase());
}
function l4(e5) {
  return "01234567".indexOf(e5);
}
var u7 = [[], [], []];
n5.forEach((e5) => u7[e5.length - 1].push(e5)), r6.forEach((e5) => u7[e5.length - 1].push(e5)), a4.forEach((e5) => u7[e5.length - 1].push(e5)), i3.forEach((e5) => u7[e5.length - 1].push(e5)), o2.forEach((e5) => u7[e5.length - 1].push(e5));
var x3 = class {
  constructor(e5, t3) {
    this.source = e5, this.errorHandler = t3, this._length = e5.length, this.index = 0, this.lineNumber = 1, this.lineStart = 0, this.curlyStack = [];
  }
  saveState() {
    return { index: this.index, lineNumber: this.lineNumber, lineStart: this.lineStart, curlyStack: this.curlyStack.slice() };
  }
  restoreState(e5) {
    this.index = e5.index, this.lineNumber = e5.lineNumber, this.lineStart = e5.lineStart, this.curlyStack = e5.curlyStack;
  }
  eof() {
    return this.index >= this._length;
  }
  throwUnexpectedToken(e5 = p6.UnexpectedToken) {
    this.errorHandler.throwError({ code: e5, index: this.index, line: this.lineNumber, column: this.index - this.lineStart + 1 });
  }
  tolerateUnexpectedToken(e5 = p6.UnexpectedToken) {
    this.errorHandler.tolerateError({ code: e5, index: this.index, line: this.lineNumber, column: this.index - this.lineStart + 1 });
  }
  skipSingleLineComment(e5) {
    const i5 = [], s9 = this.index - e5, n7 = { start: { line: this.lineNumber, column: this.index - this.lineStart - e5 }, end: { line: 0, column: 0 } };
    for (; !this.eof(); ) {
      const r8 = this.source.charCodeAt(this.index);
      if (++this.index, D2.isLineTerminator(r8)) {
        if (n7) {
          n7.end = { line: this.lineNumber, column: this.index - this.lineStart - 1 };
          const t3 = { multiLine: false, start: s9 + e5, end: this.index - 1, range: [s9, this.index - 1], loc: n7 };
          i5.push(t3);
        }
        return 13 === r8 && 10 === this.source.charCodeAt(this.index) && ++this.index, ++this.lineNumber, this.lineStart = this.index, i5;
      }
    }
    if (n7) {
      n7.end = { line: this.lineNumber, column: this.index - this.lineStart };
      const t3 = { multiLine: false, start: s9 + e5, end: this.index, range: [s9, this.index], loc: n7 };
      i5.push(t3);
    }
    return i5;
  }
  skipMultiLineComment() {
    const e5 = [], i5 = this.index - 2, s9 = { start: { line: this.lineNumber, column: this.index - this.lineStart - 2 }, end: { line: 0, column: 0 } };
    for (; !this.eof(); ) {
      const n7 = this.source.charCodeAt(this.index);
      if (D2.isLineTerminator(n7))
        13 === n7 && 10 === this.source.charCodeAt(this.index + 1) && ++this.index, ++this.lineNumber, ++this.index, this.lineStart = this.index;
      else if (42 === n7) {
        if (47 === this.source.charCodeAt(this.index + 1)) {
          if (this.index += 2, s9) {
            s9.end = { line: this.lineNumber, column: this.index - this.lineStart };
            const t3 = { multiLine: true, start: i5 + 2, end: this.index - 2, range: [i5, this.index], loc: s9 };
            e5.push(t3);
          }
          return e5;
        }
        ++this.index;
      } else
        ++this.index;
    }
    if (s9) {
      s9.end = { line: this.lineNumber, column: this.index - this.lineStart };
      const t3 = { multiLine: true, start: i5 + 2, end: this.index, range: [i5, this.index], loc: s9 };
      e5.push(t3);
    }
    return this.tolerateUnexpectedToken(), e5;
  }
  scanComments() {
    let e5 = [];
    for (; !this.eof(); ) {
      let i5 = this.source.charCodeAt(this.index);
      if (D2.isWhiteSpace(i5))
        ++this.index;
      else if (D2.isLineTerminator(i5))
        ++this.index, 13 === i5 && 10 === this.source.charCodeAt(this.index) && ++this.index, ++this.lineNumber, this.lineStart = this.index;
      else {
        if (47 !== i5)
          break;
        if (i5 = this.source.charCodeAt(this.index + 1), 47 === i5) {
          this.index += 2;
          const t3 = this.skipSingleLineComment(2);
          e5 = [...e5, ...t3];
        } else {
          if (42 !== i5)
            break;
          {
            this.index += 2;
            const t3 = this.skipMultiLineComment();
            e5 = [...e5, ...t3];
          }
        }
      }
    }
    return e5;
  }
  isKeyword(e5) {
    switch ((e5 = e5.toLowerCase()).length) {
      case 2:
        return e5 === e2.If || e5 === e2.In;
      case 3:
        return e5 === e2.Var || e5 === e2.For;
      case 4:
        return e5 === e2.Else;
      case 5:
        return e5 === e2.Break || e5 === e2.While;
      case 6:
        return e5 === e2.Return || e5 === e2.Import || e5 === e2.Export;
      case 8:
        return e5 === e2.Function || e5 === e2.Continue;
      default:
        return false;
    }
  }
  codePointAt(e5) {
    let t3 = this.source.charCodeAt(e5);
    if (t3 >= 55296 && t3 <= 56319) {
      const i5 = this.source.charCodeAt(e5 + 1);
      if (i5 >= 56320 && i5 <= 57343) {
        t3 = 1024 * (t3 - 55296) + i5 - 56320 + 65536;
      }
    }
    return t3;
  }
  scanHexEscape(e5) {
    const i5 = "u" === e5 ? 4 : 2;
    let s9 = 0;
    for (let n7 = 0; n7 < i5; ++n7) {
      if (this.eof() || !D2.isHexDigit(this.source.charCodeAt(this.index)))
        return null;
      s9 = 16 * s9 + d3(this.source[this.index++]);
    }
    return String.fromCharCode(s9);
  }
  scanUnicodeCodePointEscape() {
    let e5 = this.source[this.index], i5 = 0;
    for ("}" === e5 && this.throwUnexpectedToken(); !this.eof() && (e5 = this.source[this.index++], D2.isHexDigit(e5.charCodeAt(0))); )
      i5 = 16 * i5 + d3(e5);
    return (i5 > 1114111 || "}" !== e5) && this.throwUnexpectedToken(), D2.fromCodePoint(i5);
  }
  getIdentifier() {
    const e5 = this.index++;
    for (; !this.eof(); ) {
      const i5 = this.source.charCodeAt(this.index);
      if (92 === i5)
        return this.index = e5, this.getComplexIdentifier();
      if (i5 >= 55296 && i5 < 57343)
        return this.index = e5, this.getComplexIdentifier();
      if (!D2.isIdentifierPart(i5))
        break;
      ++this.index;
    }
    return this.source.slice(e5, this.index);
  }
  getComplexIdentifier() {
    let e5, i5 = this.codePointAt(this.index), s9 = D2.fromCodePoint(i5);
    for (this.index += s9.length, 92 === i5 && (117 !== this.source.charCodeAt(this.index) && this.throwUnexpectedToken(), ++this.index, "{" === this.source[this.index] ? (++this.index, e5 = this.scanUnicodeCodePointEscape()) : (e5 = this.scanHexEscape("u"), null !== e5 && "\\" !== e5 && D2.isIdentifierStart(e5.charCodeAt(0)) || this.throwUnexpectedToken()), s9 = e5); !this.eof() && (i5 = this.codePointAt(this.index), D2.isIdentifierPart(i5)); )
      e5 = D2.fromCodePoint(i5), s9 += e5, this.index += e5.length, 92 === i5 && (s9 = s9.substring(0, s9.length - 1), 117 !== this.source.charCodeAt(this.index) && this.throwUnexpectedToken(), ++this.index, "{" === this.source[this.index] ? (++this.index, e5 = this.scanUnicodeCodePointEscape()) : (e5 = this.scanHexEscape("u"), null !== e5 && "\\" !== e5 && D2.isIdentifierPart(e5.charCodeAt(0)) || this.throwUnexpectedToken()), s9 += e5);
    return s9;
  }
  octalToDecimal(e5) {
    let i5 = "0" !== e5, s9 = l4(e5);
    return !this.eof() && D2.isOctalDigit(this.source.charCodeAt(this.index)) && (i5 = true, s9 = 8 * s9 + l4(this.source[this.index++]), "0123".includes(e5) && !this.eof() && D2.isOctalDigit(this.source.charCodeAt(this.index)) && (s9 = 8 * s9 + l4(this.source[this.index++]))), { code: s9, octal: i5 };
  }
  scanIdentifier() {
    let e5;
    const t3 = this.index, i5 = 92 === this.source.charCodeAt(t3) ? this.getComplexIdentifier() : this.getIdentifier();
    if (e5 = 1 === i5.length ? l3.Identifier : this.isKeyword(i5) ? l3.Keyword : i5.toLowerCase() === e2.Null ? l3.NullLiteral : i5.toLowerCase() === e2.True || i5.toLowerCase() === e2.False ? l3.BooleanLiteral : l3.Identifier, e5 !== l3.Identifier && t3 + i5.length !== this.index) {
      const e6 = this.index;
      this.index = t3, this.tolerateUnexpectedToken(p6.InvalidEscapedReservedWord), this.index = e6;
    }
    return { type: e5, value: i5, lineNumber: this.lineNumber, lineStart: this.lineStart, start: t3, end: this.index };
  }
  scanPunctuator() {
    const e5 = this.index;
    let t3 = this.source[this.index];
    switch (t3) {
      case "(":
      case "{":
        "{" === t3 && this.curlyStack.push("{"), ++this.index;
        break;
      case ".":
      case ")":
      case ";":
      case ",":
      case "[":
      case "]":
      case ":":
      case "?":
      case "~":
        ++this.index;
        break;
      case "}":
        ++this.index, this.curlyStack.pop();
        break;
      default:
        for (let e6 = u7.length; e6 > 0; e6--)
          if (t3 = this.source.substring(this.index, this.index + e6), u7[e6 - 1].includes(t3)) {
            this.index += e6;
            break;
          }
    }
    return this.index === e5 && this.throwUnexpectedToken(), { type: l3.Punctuator, value: t3, lineNumber: this.lineNumber, lineStart: this.lineStart, start: e5, end: this.index };
  }
  scanHexLiteral(e5) {
    let i5 = "";
    for (; !this.eof() && D2.isHexDigit(this.source.charCodeAt(this.index)); )
      i5 += this.source[this.index++];
    return 0 === i5.length && this.throwUnexpectedToken(), D2.isIdentifierStart(this.source.charCodeAt(this.index)) && this.throwUnexpectedToken(), { type: l3.NumericLiteral, value: parseInt("0x" + i5, 16), lineNumber: this.lineNumber, lineStart: this.lineStart, start: e5, end: this.index };
  }
  scanBinaryLiteral(e5) {
    let i5 = "";
    for (; !this.eof(); ) {
      const e6 = this.source[this.index];
      if ("0" !== e6 && "1" !== e6)
        break;
      i5 += this.source[this.index++];
    }
    if (0 === i5.length && this.throwUnexpectedToken(), !this.eof()) {
      const e6 = this.source.charCodeAt(this.index);
      (D2.isIdentifierStart(e6) || D2.isDecimalDigit(e6)) && this.throwUnexpectedToken();
    }
    return { type: l3.NumericLiteral, value: parseInt(i5, 2), lineNumber: this.lineNumber, lineStart: this.lineStart, start: e5, end: this.index };
  }
  scanOctalLiteral(e5, i5) {
    let s9 = "", n7 = false;
    for (D2.isOctalDigit(e5.charCodeAt(0)) ? (n7 = true, s9 = "0" + this.source[this.index++]) : ++this.index; !this.eof() && D2.isOctalDigit(this.source.charCodeAt(this.index)); )
      s9 += this.source[this.index++];
    return n7 || 0 !== s9.length || this.throwUnexpectedToken(), (D2.isIdentifierStart(this.source.charCodeAt(this.index)) || D2.isDecimalDigit(this.source.charCodeAt(this.index))) && this.throwUnexpectedToken(), { type: l3.NumericLiteral, value: parseInt(s9, 8), lineNumber: this.lineNumber, lineStart: this.lineStart, start: i5, end: this.index };
  }
  scanNumericLiteral() {
    const i5 = this.index;
    let s9 = this.source[i5];
    r7(D2.isDecimalDigit(s9.charCodeAt(0)) || "." === s9, "Numeric literal must start with a decimal digit or a decimal point");
    let n7 = "";
    if ("." !== s9) {
      if (n7 = this.source[this.index++], s9 = this.source[this.index], "0" === n7) {
        if ("x" === s9 || "X" === s9)
          return ++this.index, this.scanHexLiteral(i5);
        if ("b" === s9 || "B" === s9)
          return ++this.index, this.scanBinaryLiteral(i5);
        if ("o" === s9 || "O" === s9)
          return this.scanOctalLiteral(s9, i5);
      }
      for (; D2.isDecimalDigit(this.source.charCodeAt(this.index)); )
        n7 += this.source[this.index++];
      s9 = this.source[this.index];
    }
    if ("." === s9) {
      for (n7 += this.source[this.index++]; D2.isDecimalDigit(this.source.charCodeAt(this.index)); )
        n7 += this.source[this.index++];
      s9 = this.source[this.index];
    }
    if ("e" === s9 || "E" === s9)
      if (n7 += this.source[this.index++], s9 = this.source[this.index], "+" !== s9 && "-" !== s9 || (n7 += this.source[this.index++]), D2.isDecimalDigit(this.source.charCodeAt(this.index)))
        for (; D2.isDecimalDigit(this.source.charCodeAt(this.index)); )
          n7 += this.source[this.index++];
      else
        this.throwUnexpectedToken();
    return D2.isIdentifierStart(this.source.charCodeAt(this.index)) && this.throwUnexpectedToken(), { type: l3.NumericLiteral, value: parseFloat(n7), lineNumber: this.lineNumber, lineStart: this.lineStart, start: i5, end: this.index };
  }
  scanStringLiteral() {
    const i5 = this.index;
    let s9 = this.source[i5];
    r7("'" === s9 || '"' === s9, "String literal must starts with a quote"), ++this.index;
    let n7 = false, r8 = "";
    for (; !this.eof(); ) {
      let e5 = this.source[this.index++];
      if (e5 === s9) {
        s9 = "";
        break;
      }
      if ("\\" === e5)
        if (e5 = this.source[this.index++], e5 && D2.isLineTerminator(e5.charCodeAt(0)))
          ++this.lineNumber, "\r" === e5 && "\n" === this.source[this.index] && ++this.index, this.lineStart = this.index;
        else
          switch (e5) {
            case "u":
              if ("{" === this.source[this.index])
                ++this.index, r8 += this.scanUnicodeCodePointEscape();
              else {
                const t3 = this.scanHexEscape(e5);
                null === t3 && this.throwUnexpectedToken(), r8 += t3;
              }
              break;
            case "x": {
              const t3 = this.scanHexEscape(e5);
              null === t3 && this.throwUnexpectedToken(p6.InvalidHexEscapeSequence), r8 += t3;
              break;
            }
            case "n":
              r8 += "\n";
              break;
            case "r":
              r8 += "\r";
              break;
            case "t":
              r8 += "	";
              break;
            case "b":
              r8 += "\b";
              break;
            case "f":
              r8 += "\f";
              break;
            case "v":
              r8 += "\v";
              break;
            case "8":
            case "9":
              r8 += e5, this.tolerateUnexpectedToken();
              break;
            default:
              if (e5 && D2.isOctalDigit(e5.charCodeAt(0))) {
                const t3 = this.octalToDecimal(e5);
                n7 = t3.octal || n7, r8 += String.fromCharCode(t3.code);
              } else
                r8 += e5;
          }
      else {
        if (D2.isLineTerminator(e5.charCodeAt(0)))
          break;
        r8 += e5;
      }
    }
    return "" !== s9 && (this.index = i5, this.throwUnexpectedToken()), { type: l3.StringLiteral, value: r8, lineNumber: this.lineNumber, lineStart: this.lineStart, start: i5, end: this.index };
  }
  scanTemplate() {
    let e5 = "", i5 = false;
    const s9 = this.index, n7 = "`" === this.source[s9];
    let r8 = false, h3 = 2;
    for (++this.index; !this.eof(); ) {
      let s10 = this.source[this.index++];
      if ("`" === s10) {
        h3 = 1, r8 = true, i5 = true;
        break;
      }
      if ("$" !== s10)
        if ("\\" !== s10)
          D2.isLineTerminator(s10.charCodeAt(0)) ? (++this.lineNumber, "\r" === s10 && "\n" === this.source[this.index] && ++this.index, this.lineStart = this.index, e5 += "\n") : e5 += s10;
        else if (s10 = this.source[this.index++], D2.isLineTerminator(s10.charCodeAt(0)))
          ++this.lineNumber, "\r" === s10 && "\n" === this.source[this.index] && ++this.index, this.lineStart = this.index;
        else
          switch (s10) {
            case "n":
              e5 += "\n";
              break;
            case "r":
              e5 += "\r";
              break;
            case "t":
              e5 += "	";
              break;
            case "u":
              if ("{" === this.source[this.index])
                ++this.index, e5 += this.scanUnicodeCodePointEscape();
              else {
                const t3 = this.index, i6 = this.scanHexEscape(s10);
                null !== i6 ? e5 += i6 : (this.index = t3, e5 += s10);
              }
              break;
            case "x": {
              const t3 = this.scanHexEscape(s10);
              null === t3 && this.throwUnexpectedToken(p6.InvalidHexEscapeSequence), e5 += t3;
              break;
            }
            case "b":
              e5 += "\b";
              break;
            case "f":
              e5 += "\f";
              break;
            case "v":
              e5 += "\v";
              break;
            default:
              "0" === s10 ? (D2.isDecimalDigit(this.source.charCodeAt(this.index)) && this.throwUnexpectedToken(p6.TemplateOctalLiteral), e5 += "\0") : D2.isOctalDigit(s10.charCodeAt(0)) ? this.throwUnexpectedToken(p6.TemplateOctalLiteral) : e5 += s10;
          }
      else {
        if ("{" === this.source[this.index]) {
          this.curlyStack.push("${"), ++this.index, i5 = true;
          break;
        }
        e5 += s10;
      }
    }
    return i5 || this.throwUnexpectedToken(), n7 || this.curlyStack.pop(), { type: l3.Template, value: this.source.slice(s9 + 1, this.index - h3), cooked: e5, head: n7, tail: r8, lineNumber: this.lineNumber, lineStart: this.lineStart, start: s9, end: this.index };
  }
  lex() {
    if (this.eof())
      return { type: l3.EOF, value: "", lineNumber: this.lineNumber, lineStart: this.lineStart, start: this.index, end: this.index };
    const e5 = this.source.charCodeAt(this.index);
    return D2.isIdentifierStart(e5) ? this.scanIdentifier() : 40 === e5 || 41 === e5 || 59 === e5 ? this.scanPunctuator() : 39 === e5 || 34 === e5 ? this.scanStringLiteral() : 46 === e5 ? D2.isDecimalDigit(this.source.charCodeAt(this.index + 1)) ? this.scanNumericLiteral() : this.scanPunctuator() : D2.isDecimalDigit(e5) ? this.scanNumericLiteral() : 96 === e5 || 125 === e5 && "${" === this.curlyStack[this.curlyStack.length - 1] ? this.scanTemplate() : e5 >= 55296 && e5 < 57343 && D2.isIdentifierStart(this.codePointAt(this.index)) ? this.scanIdentifier() : this.scanPunctuator();
  }
};

// node_modules/@arcgis/core/arcade/lib/parser.js
var k;
var w2;
function g(t3, e5 = 0) {
  let r8 = t3.start - t3.lineStart, i5 = t3.lineNumber;
  return r8 < 0 && (r8 += e5, i5--), { index: t3.start, line: i5, column: r8 };
}
function y3(t3) {
  return [{ index: t3.range[0], ...t3.loc.start }, { index: t3.range[1], ...t3.loc.end }];
}
function T(t3) {
  return c3[t3] ?? 0;
}
!function(t3) {
  t3[t3.None = 0] = "None", t3[t3.Function = 1] = "Function", t3[t3.IfClause = 2] = "IfClause", t3[t3.ForLoop = 4] = "ForLoop", t3[t3.WhileLoop = 8] = "WhileLoop";
}(k || (k = {})), function(t3) {
  t3[t3.AsObject = 0] = "AsObject", t3[t3.Automatic = 1] = "Automatic";
}(w2 || (w2 = {}));
var f4 = class {
  constructor(r8, n7 = {}, a5) {
    this.delegate = a5, this.hasLineTerminator = false, this.options = { tokens: "boolean" == typeof n7.tokens && n7.tokens, comments: "boolean" == typeof n7.comments && n7.comments, tolerant: "boolean" == typeof n7.tolerant && n7.tolerant }, this.options.comments && (this.commentHandler = new o3()), this.errorHandler = new e3(this.options.tolerant), this.scanner = new x3(r8, this.errorHandler), this.context = { isAssignmentTarget: false, blockContext: k.None, curlyParsingType: w2.AsObject }, this.rawToken = { type: l3.EOF, value: "", lineNumber: this.scanner.lineNumber, lineStart: 0, start: 0, end: 0 }, this.tokens = [], this.startMarker = { index: 0, line: this.scanner.lineNumber, column: 0 }, this.endMarker = { index: 0, line: this.scanner.lineNumber, column: 0 }, this.readNextRawToken(), this.endMarker = { index: this.scanner.index, line: this.scanner.lineNumber, column: this.scanner.index - this.scanner.lineStart };
  }
  throwIfInvalidType(t3, e5, { validTypes: r8, invalidTypes: i5 }) {
    (r8 == null ? void 0 : r8.some((e6) => t3.type === e6)) || (i5 == null ? void 0 : i5.some((e6) => t3.type === e6)) && this.throwError(p6.InvalidExpression, e5);
  }
  throwError(t3, e5, r8 = this.endMarker) {
    const { index: i5, line: n7, column: s9 } = e5, a5 = r8.index - i5 - 1;
    this.errorHandler.throwError({ code: t3, index: i5, line: n7, column: s9 + 1, len: a5 });
  }
  tolerateError(t3, e5) {
    throw new Error("######################################### !!!");
  }
  unexpectedTokenError(t3 = {}) {
    const { rawToken: e5 } = t3;
    let i5, { code: n7, data: h3 } = t3;
    if (e5) {
      if (!n7)
        switch (e5.type) {
          case l3.EOF:
            n7 = p6.UnexpectedEndOfScript;
            break;
          case l3.Identifier:
            n7 = p6.UnexpectedIdentifier;
            break;
          case l3.NumericLiteral:
            n7 = p6.UnexpectedNumber;
            break;
          case l3.StringLiteral:
            n7 = p6.UnexpectedString;
            break;
          case l3.Template:
            n7 = p6.UnexpectedTemplate;
        }
      i5 = e5.value.toString();
    } else
      i5 = "ILLEGAL";
    n7 = n7 ?? p6.UnexpectedToken, h3 || (h3 = { value: i5 });
    const c4 = o4(n7, h3);
    if (e5) {
      const t4 = e5.start, r8 = e5.lineNumber, i6 = e5.start - e5.lineStart + 1;
      return new u5({ code: n7, index: t4, line: r8, column: i6, len: e5.end - e5.start - 1, data: h3, description: c4 });
    }
    const { index: p7, line: l6 } = this.endMarker;
    return new u5({ code: n7, index: p7, line: l6, column: this.endMarker.column + 1, data: h3, description: c4 });
  }
  throwUnexpectedToken(t3 = {}) {
    throw t3.rawToken = t3.rawToken ?? this.rawToken, this.unexpectedTokenError(t3);
  }
  collectComments(t3) {
    const { commentHandler: e5 } = this;
    e5 && t3.length && t3.forEach((t4) => {
      const r8 = { type: t4.multiLine ? t.BlockComment : t.LineComment, value: this.getSourceValue(t4), range: t4.range, loc: t4.loc };
      e5.collectComment(r8);
    });
  }
  peekAhead(t3) {
    const e5 = () => (this.scanner.scanComments(), this.scanner.lex()), r8 = this.scanner.saveState(), i5 = t3.call(this, e5);
    return this.scanner.restoreState(r8), i5;
  }
  getSourceValue(t3) {
    return this.scanner.source.slice(t3.start, t3.end);
  }
  convertToToken(t3) {
    return { type: s5[t3.type], value: this.getSourceValue(t3), range: [t3.start, t3.end], loc: { start: { line: this.startMarker.line, column: this.startMarker.column }, end: { line: this.scanner.lineNumber, column: this.scanner.index - this.scanner.lineStart } } };
  }
  readNextRawToken() {
    this.endMarker.index = this.scanner.index, this.endMarker.line = this.scanner.lineNumber, this.endMarker.column = this.scanner.index - this.scanner.lineStart;
    const t3 = this.rawToken;
    this.collectComments(this.scanner.scanComments()), this.scanner.index !== this.startMarker.index && (this.startMarker.index = this.scanner.index, this.startMarker.line = this.scanner.lineNumber, this.startMarker.column = this.scanner.index - this.scanner.lineStart), this.rawToken = this.scanner.lex(), this.hasLineTerminator = t3.lineNumber !== this.rawToken.lineNumber, this.options.tokens && this.rawToken.type !== l3.EOF && this.tokens.push(this.convertToToken(this.rawToken));
  }
  captureStartMarker() {
    return { index: this.startMarker.index, line: this.startMarker.line, column: this.startMarker.column };
  }
  getItemLocation(t3) {
    return { range: [t3.index, this.endMarker.index], loc: { start: { line: t3.line, column: t3.column }, end: { line: this.endMarker.line, column: this.endMarker.column } } };
  }
  finalize(t3) {
    var _a, _b;
    return (this.delegate || this.commentHandler) && ((_a = this.commentHandler) == null ? void 0 : _a.attachComments(t3), (_b = this.delegate) == null ? void 0 : _b.call(this, t3)), t3;
  }
  expectPunctuator(t3) {
    const e5 = this.rawToken;
    this.matchPunctuator(t3) ? this.readNextRawToken() : this.throwUnexpectedToken({ rawToken: e5, code: p6.PunctuatorExpected, data: { value: t3 } });
  }
  expectKeyword(t3) {
    this.rawToken.type !== l3.Keyword || this.rawToken.value.toLowerCase() !== t3 ? this.throwUnexpectedToken({ rawToken: this.rawToken }) : this.readNextRawToken();
  }
  expectContextualKeyword(t3) {
    this.rawToken.type !== l3.Identifier || this.rawToken.value.toLowerCase() !== t3 ? this.throwUnexpectedToken({ rawToken: this.rawToken }) : this.readNextRawToken();
  }
  matchKeyword(t3) {
    return this.rawToken.type === l3.Keyword && this.rawToken.value.toLowerCase() === t3;
  }
  matchContextualKeyword(t3) {
    return this.rawToken.type === l3.Identifier && this.rawToken.value === t3;
  }
  matchPunctuator(t3) {
    return this.rawToken.type === l3.Punctuator && this.rawToken.value === t3;
  }
  getMatchingPunctuator(t3) {
    if ("string" == typeof t3 && (t3 = t3.split("")), this.rawToken.type === l3.Punctuator && (t3 == null ? void 0 : t3.length))
      return t3.find(this.matchPunctuator, this);
  }
  isolateCoverGrammar(t3) {
    const e5 = this.context.isAssignmentTarget;
    this.context.isAssignmentTarget = true;
    const r8 = t3.call(this);
    return this.context.isAssignmentTarget = e5, r8;
  }
  inheritCoverGrammar(t3) {
    const e5 = this.context.isAssignmentTarget;
    this.context.isAssignmentTarget = true;
    const r8 = t3.call(this);
    return this.context.isAssignmentTarget = this.context.isAssignmentTarget && e5, r8;
  }
  withBlockContext(t3, e5) {
    const r8 = this.context.blockContext;
    this.context.blockContext = this.context.blockContext | t3;
    const i5 = this.context.curlyParsingType;
    this.context.curlyParsingType = w2.Automatic;
    const n7 = e5.call(this);
    return this.context.blockContext = r8, this.context.curlyParsingType = i5, n7;
  }
  consumeSemicolon() {
    if (this.matchPunctuator(";"))
      this.readNextRawToken();
    else if (!this.hasLineTerminator)
      return this.rawToken.type === l3.EOF || this.matchPunctuator("}") ? (this.endMarker.index = this.startMarker.index, this.endMarker.line = this.startMarker.line, void (this.endMarker.column = this.startMarker.column)) : void this.throwUnexpectedToken({ rawToken: this.rawToken });
  }
  parsePrimaryExpression() {
    const t3 = this.captureStartMarker(), e5 = this.rawToken;
    switch (e5.type) {
      case l3.Identifier:
        return this.readNextRawToken(), this.finalize({ type: t.Identifier, name: e5.value, ...this.getItemLocation(t3) });
      case l3.NumericLiteral:
      case l3.StringLiteral:
        return this.context.isAssignmentTarget = false, this.readNextRawToken(), this.finalize({ type: t.Literal, value: e5.value, raw: this.getSourceValue(e5), isString: "string" == typeof e5.value, ...this.getItemLocation(t3) });
      case l3.BooleanLiteral:
        return this.context.isAssignmentTarget = false, this.readNextRawToken(), this.finalize({ type: t.Literal, value: e5.value.toLowerCase() === e2.True, raw: this.getSourceValue(e5), isString: false, ...this.getItemLocation(t3) });
      case l3.NullLiteral:
        return this.context.isAssignmentTarget = false, this.readNextRawToken(), this.finalize({ type: t.Literal, value: null, raw: this.getSourceValue(e5), isString: false, ...this.getItemLocation(t3) });
      case l3.Template:
        return this.parseTemplateLiteral();
      case l3.Punctuator:
        switch (e5.value) {
          case "(":
            return this.inheritCoverGrammar(this.parseGroupExpression);
          case "[":
            return this.inheritCoverGrammar(this.parseArrayInitializer);
          case "{":
            return this.inheritCoverGrammar(this.parseObjectExpression);
          default:
            return this.throwUnexpectedToken({ rawToken: this.rawToken });
        }
      case l3.Keyword:
        return this.context.isAssignmentTarget = false, this.throwUnexpectedToken({ rawToken: this.rawToken });
      default:
        return this.throwUnexpectedToken({ rawToken: this.rawToken });
    }
  }
  parseArrayInitializer() {
    const t3 = this.captureStartMarker();
    this.expectPunctuator("[");
    const e5 = [];
    for (; !this.matchPunctuator("]"); ) {
      const t4 = this.captureStartMarker();
      this.matchPunctuator(",") ? (this.readNextRawToken(), this.throwError(p6.InvalidExpression, t4)) : (e5.push(this.inheritCoverGrammar(this.parseAssignmentExpression)), this.matchPunctuator("]") || this.expectPunctuator(","));
    }
    return this.expectPunctuator("]"), this.finalize({ type: t.ArrayExpression, elements: e5, ...this.getItemLocation(t3) });
  }
  parseObjectPropertyKey() {
    const t3 = this.captureStartMarker(), e5 = this.rawToken;
    switch (e5.type) {
      case l3.StringLiteral:
        return this.readNextRawToken(), this.finalize({ type: t.Literal, value: e5.value, raw: this.getSourceValue(e5), isString: true, ...this.getItemLocation(t3) });
      case l3.Identifier:
      case l3.BooleanLiteral:
      case l3.NullLiteral:
      case l3.Keyword:
        return this.readNextRawToken(), this.finalize({ type: t.Identifier, name: e5.value, ...this.getItemLocation(t3) });
      default:
        this.throwError(p6.KeyMustBeString, t3);
    }
  }
  parseObjectProperty() {
    const t3 = this.rawToken, e5 = this.captureStartMarker(), r8 = this.parseObjectPropertyKey();
    let i5 = false, n7 = null;
    return this.matchPunctuator(":") ? (this.readNextRawToken(), n7 = this.inheritCoverGrammar(this.parseAssignmentExpression)) : t3.type === l3.Identifier ? (i5 = true, n7 = this.finalize({ type: t.Identifier, name: t3.value, ...this.getItemLocation(e5) })) : this.throwUnexpectedToken({ rawToken: this.rawToken }), this.finalize({ type: t.Property, kind: "init", key: r8, value: n7, shorthand: i5, ...this.getItemLocation(e5) });
  }
  parseObjectExpression() {
    const t3 = this.captureStartMarker();
    this.expectPunctuator("{");
    const e5 = [];
    for (; !this.matchPunctuator("}"); )
      e5.push(this.parseObjectProperty()), this.matchPunctuator("}") || this.expectPunctuator(",");
    return this.expectPunctuator("}"), this.finalize({ type: t.ObjectExpression, properties: e5, ...this.getItemLocation(t3) });
  }
  parseTemplateElement(t3 = false) {
    const e5 = this.rawToken;
    e5.type !== l3.Template && this.throwUnexpectedToken({ rawToken: e5 }), t3 && !e5.head && this.throwUnexpectedToken({ code: p6.InvalidTemplateHead, rawToken: e5 });
    const r8 = this.captureStartMarker();
    this.readNextRawToken();
    const { value: i5, cooked: n7, tail: o5 } = e5, c4 = this.finalize({ type: t.TemplateElement, value: { raw: i5, cooked: n7 }, tail: o5, ...this.getItemLocation(r8) });
    return c4.loc.start.column++, c4.loc.end.column = c4.loc.end.column - (o5 ? 1 : 2), c4;
  }
  parseTemplateLiteral() {
    const t3 = this.captureStartMarker(), e5 = [], r8 = [];
    let i5 = this.parseTemplateElement(true);
    for (r8.push(i5); !i5.tail; )
      e5.push(this.parseExpression()), i5 = this.parseTemplateElement(), r8.push(i5);
    return this.finalize({ type: t.TemplateLiteral, quasis: r8, expressions: e5, ...this.getItemLocation(t3) });
  }
  parseGroupExpression() {
    this.expectPunctuator("(");
    const t3 = this.inheritCoverGrammar(this.parseAssignmentExpression);
    return this.expectPunctuator(")"), t3;
  }
  parseArguments() {
    this.expectPunctuator("(");
    const t3 = [];
    if (!this.matchPunctuator(")"))
      for (; ; ) {
        const e5 = this.isolateCoverGrammar(this.parseAssignmentExpression);
        if (t3.push(e5), this.matchPunctuator(")"))
          break;
        if (this.expectPunctuator(","), this.matchPunctuator(")"))
          break;
      }
    return this.expectPunctuator(")"), t3;
  }
  parseMemberName() {
    const t3 = this.rawToken, e5 = this.captureStartMarker();
    return this.readNextRawToken(), t3.type !== l3.NullLiteral && t3.type !== l3.Identifier && t3.type !== l3.Keyword && t3.type !== l3.BooleanLiteral && this.throwUnexpectedToken({ rawToken: t3 }), this.finalize({ type: t.Identifier, name: t3.value, ...this.getItemLocation(e5) });
  }
  parseLeftHandSideExpression() {
    const t3 = this.captureStartMarker();
    let e5 = this.inheritCoverGrammar(this.parsePrimaryExpression);
    const r8 = this.captureStartMarker();
    let i5;
    for (; i5 = this.getMatchingPunctuator("([."); )
      switch (i5) {
        case "(": {
          this.context.isAssignmentTarget = false, e5.type !== t.Identifier && e5.type !== t.MemberExpression && this.throwError(p6.IdentiferExpected, t3, r8);
          const i6 = this.parseArguments();
          e5 = this.finalize({ type: t.CallExpression, callee: e5, arguments: i6, ...this.getItemLocation(t3) });
          continue;
        }
        case "[": {
          this.context.isAssignmentTarget = true, this.expectPunctuator("[");
          const r9 = this.isolateCoverGrammar(this.parseExpression);
          this.expectPunctuator("]"), e5 = this.finalize({ type: t.MemberExpression, computed: true, object: e5, property: r9, ...this.getItemLocation(t3) });
          continue;
        }
        case ".": {
          this.context.isAssignmentTarget = true, this.expectPunctuator(".");
          const r9 = this.parseMemberName();
          e5 = this.finalize({ type: t.MemberExpression, computed: false, object: e5, property: r9, ...this.getItemLocation(t3) });
          continue;
        }
      }
    return e5;
  }
  parseUpdateExpression() {
    const t3 = this.captureStartMarker();
    let e5 = this.getMatchingPunctuator(n5);
    if (e5) {
      this.readNextRawToken();
      const r9 = this.captureStartMarker(), i6 = this.inheritCoverGrammar(this.parseUnaryExpression);
      return i6.type !== t.Identifier && i6.type !== t.MemberExpression && i6.type !== t.CallExpression && this.throwError(p6.InvalidExpression, r9), this.context.isAssignmentTarget || this.tolerateError(p6.InvalidLeftHandSideInAssignment, t3), this.context.isAssignmentTarget = false, this.finalize({ type: t.UpdateExpression, operator: e5, argument: i6, prefix: true, ...this.getItemLocation(t3) });
    }
    const r8 = this.captureStartMarker(), i5 = this.inheritCoverGrammar(this.parseLeftHandSideExpression), n7 = this.captureStartMarker();
    return this.hasLineTerminator ? i5 : (e5 = this.getMatchingPunctuator(n5), e5 ? (i5.type !== t.Identifier && i5.type !== t.MemberExpression && this.throwError(p6.InvalidExpression, r8, n7), this.context.isAssignmentTarget || this.tolerateError(p6.InvalidLeftHandSideInAssignment, t3), this.readNextRawToken(), this.context.isAssignmentTarget = false, this.finalize({ type: t.UpdateExpression, operator: e5, argument: i5, prefix: false, ...this.getItemLocation(t3) })) : i5);
  }
  parseUnaryExpression() {
    const t3 = this.getMatchingPunctuator(r6);
    if (t3) {
      const e5 = this.captureStartMarker();
      this.readNextRawToken();
      const r8 = this.inheritCoverGrammar(this.parseUnaryExpression);
      return this.context.isAssignmentTarget = false, this.finalize({ type: t.UnaryExpression, operator: t3, argument: r8, prefix: true, ...this.getItemLocation(e5) });
    }
    return this.parseUpdateExpression();
  }
  parseBinaryExpression() {
    const t3 = this.rawToken;
    let e5 = this.inheritCoverGrammar(this.parseUnaryExpression);
    if (this.rawToken.type !== l3.Punctuator)
      return e5;
    const r8 = this.rawToken.value;
    let i5 = T(r8);
    if (0 === i5)
      return e5;
    this.readNextRawToken(), this.context.isAssignmentTarget = false;
    const n7 = [t3, this.rawToken];
    let a5 = e5, o5 = this.inheritCoverGrammar(this.parseUnaryExpression);
    const h3 = [a5, r8, o5], c4 = [i5];
    for (; this.rawToken.type === l3.Punctuator && (i5 = T(this.rawToken.value)) > 0; ) {
      for (; h3.length > 2 && i5 <= c4[c4.length - 1]; ) {
        o5 = h3.pop();
        const t4 = h3.pop();
        c4.pop(), a5 = h3.pop(), n7.pop();
        const e6 = n7[n7.length - 1], r9 = g(e6, e6.lineStart);
        h3.push(this.finalize(this.createBinaryOrLogicalExpression(r9, t4, a5, o5)));
      }
      h3.push(this.rawToken.value), c4.push(i5), n7.push(this.rawToken), this.readNextRawToken(), h3.push(this.inheritCoverGrammar(this.parseUnaryExpression));
    }
    let p7 = h3.length - 1;
    e5 = h3[p7];
    let l6 = n7.pop();
    for (; p7 > 1; ) {
      const t4 = n7.pop();
      if (!t4)
        break;
      const r9 = l6 == null ? void 0 : l6.lineStart, i6 = g(t4, r9), s9 = h3[p7 - 1];
      e5 = this.finalize(this.createBinaryOrLogicalExpression(i6, s9, h3[p7 - 2], e5)), p7 -= 2, l6 = t4;
    }
    return e5;
  }
  createBinaryOrLogicalExpression(t3, e5, r8, i5) {
    const n7 = a4.includes(e5) ? t.LogicalExpression : t.BinaryExpression;
    return n7 === t.BinaryExpression || (r8.type !== t.AssignmentExpression && r8.type !== t.UpdateExpression || this.throwError(p6.InvalidExpression, ...y3(r8)), i5.type !== t.AssignmentExpression && i5.type !== t.UpdateExpression || this.throwError(p6.InvalidExpression, ...y3(r8))), { type: n7, operator: e5, left: r8, right: i5, ...this.getItemLocation(t3) };
  }
  parseAssignmentExpression() {
    const t3 = this.captureStartMarker(), e5 = this.inheritCoverGrammar(this.parseBinaryExpression), r8 = this.captureStartMarker(), i5 = this.getMatchingPunctuator(i3);
    if (!i5)
      return e5;
    e5.type !== t.Identifier && e5.type !== t.MemberExpression && this.throwError(p6.InvalidExpression, t3, r8), this.context.isAssignmentTarget || this.tolerateError(p6.InvalidLeftHandSideInAssignment, t3), this.matchPunctuator("=") || (this.context.isAssignmentTarget = false), this.readNextRawToken();
    const n7 = this.isolateCoverGrammar(this.parseAssignmentExpression);
    return this.finalize({ type: t.AssignmentExpression, left: e5, operator: i5, right: n7, ...this.getItemLocation(t3) });
  }
  parseExpression() {
    return this.isolateCoverGrammar(this.parseAssignmentExpression);
  }
  parseStatements(t3) {
    const e5 = [];
    for (; this.rawToken.type !== l3.EOF && !this.matchPunctuator(t3); ) {
      const t4 = this.parseStatementListItem();
      S2(t4) || e5.push(t4);
    }
    return e5;
  }
  parseStatementListItem() {
    return this.context.isAssignmentTarget = true, this.matchKeyword(e2.Function) ? this.parseFunctionDeclaration() : this.matchKeyword(e2.Export) ? this.parseExportDeclaration() : this.matchKeyword(e2.Import) ? this.parseImportDeclaration() : this.parseStatement();
  }
  parseBlock() {
    const t3 = this.captureStartMarker();
    this.expectPunctuator("{");
    const e5 = this.parseStatements("}");
    return this.expectPunctuator("}"), this.finalize({ type: t.BlockStatement, body: e5, ...this.getItemLocation(t3) });
  }
  parseObjectStatement() {
    const t3 = this.captureStartMarker(), e5 = this.parseObjectExpression();
    return this.finalize({ type: t.ExpressionStatement, expression: e5, ...this.getItemLocation(t3) });
  }
  parseBlockOrObjectStatement() {
    if (this.context.curlyParsingType === w2.AsObject)
      return this.parseObjectStatement();
    return this.peekAhead((t3) => {
      let e5 = t3();
      return (e5.type === l3.Identifier || e5.type === l3.StringLiteral) && (e5 = t3(), e5.type === l3.Punctuator && ":" === e5.value);
    }) ? this.parseObjectStatement() : this.parseBlock();
  }
  parseIdentifier() {
    const t3 = this.rawToken;
    if (t3.type !== l3.Identifier)
      return null;
    const e5 = this.captureStartMarker();
    return this.readNextRawToken(), this.finalize({ type: t.Identifier, name: t3.value, ...this.getItemLocation(e5) });
  }
  parseVariableDeclarator() {
    const t3 = this.captureStartMarker(), e5 = this.parseIdentifier();
    e5 || this.throwUnexpectedToken({ code: p6.IdentiferExpected });
    let r8 = null;
    if (this.matchPunctuator("=")) {
      this.readNextRawToken();
      const t4 = this.rawToken;
      try {
        r8 = this.isolateCoverGrammar(this.parseAssignmentExpression);
      } catch (i5) {
        this.throwUnexpectedToken({ rawToken: t4, code: p6.InvalidVariableAssignment });
      }
    }
    return this.finalize({ type: t.VariableDeclarator, id: e5, init: r8, ...this.getItemLocation(t3) });
  }
  parseVariableDeclarationList() {
    const t3 = [this.parseVariableDeclarator()];
    for (; this.matchPunctuator(","); )
      this.readNextRawToken(), t3.push(this.parseVariableDeclarator());
    return t3;
  }
  parseVariableDeclaration() {
    const t3 = this.captureStartMarker();
    this.expectKeyword(e2.Var);
    const e5 = this.parseVariableDeclarationList();
    return this.consumeSemicolon(), this.finalize({ type: t.VariableDeclaration, declarations: e5, kind: "var", ...this.getItemLocation(t3) });
  }
  parseEmptyStatement() {
    const t3 = this.captureStartMarker();
    return this.expectPunctuator(";"), this.finalize({ type: t.EmptyStatement, ...this.getItemLocation(t3) });
  }
  parseExpressionStatement() {
    const t3 = this.captureStartMarker(), e5 = this.parseExpression();
    return this.consumeSemicolon(), this.finalize({ type: t.ExpressionStatement, expression: e5, ...this.getItemLocation(t3) });
  }
  parseIfClause() {
    return this.withBlockContext(k.IfClause, this.parseStatement);
  }
  parseIfStatement() {
    const t3 = this.captureStartMarker();
    this.expectKeyword(e2.If), this.expectPunctuator("(");
    const e5 = this.captureStartMarker(), r8 = this.parseExpression(), i5 = this.captureStartMarker();
    this.expectPunctuator(")"), r8.type !== t.AssignmentExpression && r8.type !== t.UpdateExpression || this.throwError(p6.InvalidExpression, e5, i5);
    const n7 = this.parseIfClause();
    let s9 = null;
    return this.matchKeyword(e2.Else) && (this.readNextRawToken(), s9 = this.parseIfClause()), this.finalize({ type: t.IfStatement, test: r8, consequent: n7, alternate: s9, ...this.getItemLocation(t3) });
  }
  parseWhileStatement() {
    const t3 = this.captureStartMarker();
    this.expectKeyword(e2.While), this.expectPunctuator("(");
    const e5 = this.captureStartMarker(), r8 = this.parseExpression(), i5 = this.captureStartMarker();
    this.expectPunctuator(")"), r8.type !== t.AssignmentExpression && r8.type !== t.UpdateExpression || this.throwError(p6.InvalidExpression, e5, i5);
    const n7 = this.withBlockContext(k.WhileLoop, this.parseStatement);
    return this.finalize({ type: t.WhileStatement, test: r8, body: n7, ...this.getItemLocation(t3) });
  }
  parseForStatement() {
    let t3 = null, e5 = null, r8 = null, i5 = null, n7 = null;
    const s9 = this.captureStartMarker();
    if (this.expectKeyword(e2.For), this.expectPunctuator("("), this.matchPunctuator(";"))
      this.readNextRawToken();
    else if (this.matchKeyword(e2.Var)) {
      const e6 = this.captureStartMarker();
      this.readNextRawToken();
      const r9 = this.parseVariableDeclarationList();
      if (1 === r9.length && this.matchKeyword(e2.In)) {
        r9[0].init && this.throwError(p6.ForInOfLoopInitializer, e6), i5 = this.finalize({ type: t.VariableDeclaration, declarations: r9, kind: "var", ...this.getItemLocation(e6) }), this.readNextRawToken(), n7 = this.parseExpression();
      } else
        this.matchKeyword(e2.In) && this.throwError(p6.InvalidLeftHandSideInForIn, e6), t3 = this.finalize({ type: t.VariableDeclaration, declarations: r9, kind: "var", ...this.getItemLocation(e6) }), this.expectPunctuator(";");
    } else {
      const e6 = this.context.isAssignmentTarget, r9 = this.captureStartMarker();
      t3 = this.inheritCoverGrammar(this.parseAssignmentExpression), this.matchKeyword(e2.In) ? (this.context.isAssignmentTarget || this.tolerateError(p6.InvalidLeftHandSideInForIn, r9), t3.type !== t.Identifier && this.throwError(p6.InvalidLeftHandSideInForIn, r9), this.readNextRawToken(), i5 = t3, n7 = this.parseExpression(), t3 = null) : (this.context.isAssignmentTarget = e6, this.expectPunctuator(";"));
    }
    i5 || (this.matchPunctuator(";") || (e5 = this.isolateCoverGrammar(this.parseExpression)), this.expectPunctuator(";"), this.matchPunctuator(")") || (r8 = this.isolateCoverGrammar(this.parseExpression))), this.expectPunctuator(")");
    const o5 = this.withBlockContext(k.ForLoop, () => this.isolateCoverGrammar(this.parseStatement));
    return i5 && n7 ? this.finalize({ type: t.ForInStatement, left: i5, right: n7, body: o5, ...this.getItemLocation(s9) }) : this.finalize({ type: t.ForStatement, init: t3, test: e5, update: r8, body: o5, ...this.getItemLocation(s9) });
  }
  parseContinueStatement() {
    const t3 = this.captureStartMarker();
    return this.expectKeyword(e2.Continue), this.consumeSemicolon(), this.finalize({ type: t.ContinueStatement, ...this.getItemLocation(t3) });
  }
  parseBreakStatement() {
    const t3 = this.captureStartMarker();
    return this.expectKeyword(e2.Break), this.consumeSemicolon(), this.finalize({ type: t.BreakStatement, ...this.getItemLocation(t3) });
  }
  parseReturnStatement() {
    const t3 = this.captureStartMarker();
    this.expectKeyword(e2.Return);
    const e5 = !this.matchPunctuator(";") && !this.matchPunctuator("}") && !this.hasLineTerminator && this.rawToken.type !== l3.EOF || this.rawToken.type === l3.StringLiteral || this.rawToken.type === l3.Template ? this.parseExpression() : null;
    return this.consumeSemicolon(), this.finalize({ type: t.ReturnStatement, argument: e5, ...this.getItemLocation(t3) });
  }
  parseStatement() {
    switch (this.rawToken.type) {
      case l3.BooleanLiteral:
      case l3.NullLiteral:
      case l3.NumericLiteral:
      case l3.StringLiteral:
      case l3.Template:
      case l3.Identifier:
        return this.parseExpressionStatement();
      case l3.Punctuator:
        return "{" === this.rawToken.value ? this.parseBlockOrObjectStatement() : "(" === this.rawToken.value ? this.parseExpressionStatement() : ";" === this.rawToken.value ? this.parseEmptyStatement() : this.parseExpressionStatement();
      case l3.Keyword:
        switch (this.rawToken.value.toLowerCase()) {
          case e2.Break:
            return this.parseBreakStatement();
          case e2.Continue:
            return this.parseContinueStatement();
          case e2.For:
            return this.parseForStatement();
          case e2.Function:
            return this.parseFunctionDeclaration();
          case e2.If:
            return this.parseIfStatement();
          case e2.Return:
            return this.parseReturnStatement();
          case e2.Var:
            return this.parseVariableDeclaration();
          case e2.While:
            return this.parseWhileStatement();
          default:
            return this.parseExpressionStatement();
        }
      default:
        return this.throwUnexpectedToken({ rawToken: this.rawToken });
    }
  }
  parseFormalParameters() {
    const t3 = [];
    if (this.expectPunctuator("("), !this.matchPunctuator(")"))
      for (; this.rawToken.type !== l3.EOF; ) {
        const e5 = this.parseIdentifier();
        if (e5 || this.throwUnexpectedToken({ rawToken: this.rawToken, code: p6.IdentiferExpected }), t3.push(e5), this.matchPunctuator(")"))
          break;
        if (this.expectPunctuator(","), this.matchPunctuator(")"))
          break;
      }
    return this.expectPunctuator(")"), t3;
  }
  parseFunctionDeclaration() {
    (this.context.blockContext & k.Function) === k.Function && this.throwUnexpectedToken({ code: p6.NoFunctionInsideFunction }), (this.context.blockContext & k.WhileLoop) !== k.WhileLoop && (this.context.blockContext & k.IfClause) !== k.IfClause || this.throwUnexpectedToken({ code: p6.NoFunctionInsideBlock });
    const t3 = this.captureStartMarker();
    this.expectKeyword(e2.Function);
    const e5 = this.parseIdentifier();
    e5 || this.throwUnexpectedToken({ code: p6.InvalidFunctionIdentifier });
    const r8 = this.parseFormalParameters(), i5 = this.context.blockContext;
    this.context.blockContext = this.context.blockContext | k.Function;
    const n7 = this.parseBlock();
    return this.context.blockContext = i5, this.finalize({ type: t.FunctionDeclaration, id: e5, params: r8, body: n7, ...this.getItemLocation(t3) });
  }
  parseScript() {
    const t3 = this.captureStartMarker(), e5 = this.parseStatements(), r8 = this.finalize({ type: t.Program, body: e5, ...this.getItemLocation(t3) });
    return this.options.tokens && (r8.tokens = this.tokens), this.options.tolerant && (r8.errors = this.errorHandler.errors), r8;
  }
  parseExportDeclaration() {
    this.context.blockContext !== k.None && this.throwUnexpectedToken({ code: p6.ModuleExportRootOnly });
    let t3 = null;
    const e5 = this.captureStartMarker();
    return this.expectKeyword(e2.Export), this.matchKeyword(e2.Var) ? t3 = this.parseVariableDeclaration() : this.matchKeyword("function") ? t3 = this.parseFunctionDeclaration() : this.throwUnexpectedToken({ code: p6.InvalidExpression }), this.finalize({ type: t.ExportNamedDeclaration, declaration: t3, specifiers: [], source: null, ...this.getItemLocation(e5) });
  }
  parseModuleSpecifier() {
    const t3 = this.captureStartMarker(), e5 = this.rawToken;
    if (e5.type === l3.StringLiteral)
      return this.readNextRawToken(), this.finalize({ type: t.Literal, value: e5.value, raw: this.getSourceValue(e5), isString: true, ...this.getItemLocation(t3) });
    this.throwError(p6.InvalidModuleUri, t3);
  }
  parseDefaultSpecifier() {
    const t3 = this.captureStartMarker(), e5 = this.parseIdentifier();
    return e5 || this.throwUnexpectedToken({ code: p6.IdentiferExpected }), this.finalize({ type: t.ImportDefaultSpecifier, local: e5, ...this.getItemLocation(t3) });
  }
  parseImportDeclaration() {
    this.context.blockContext !== k.None && this.throwUnexpectedToken({ code: p6.ModuleImportRootOnly });
    const t3 = this.captureStartMarker();
    this.expectKeyword(e2.Import);
    const e5 = this.parseDefaultSpecifier();
    this.expectContextualKeyword(e2.From);
    const r8 = this.parseModuleSpecifier();
    return this.finalize({ type: t.ImportDeclaration, specifiers: [e5], source: r8, ...this.getItemLocation(t3) });
  }
};

// node_modules/@arcgis/core/arcade/lib/arcade-parser.js
function s7(r8, s9, t3) {
  return new f4(r8, s9, t3).parseScript();
}

// node_modules/@arcgis/core/arcade/parser.js
function n6(n7, d4 = []) {
  const l6 = s7(n7);
  if (null === l6.body || void 0 === l6.body)
    throw new u5({ index: 0, line: 0, column: 0, data: null, description: "", code: p6.InvalidExpression });
  return l6.loadedModules = {}, d(l6, d4), l6;
}

// node_modules/@arcgis/core/arcade/featureset/support/RecentlyUsedCache.js
var e4 = class _e2 {
  constructor(e5) {
    const s9 = this;
    s9._keys = [], s9._values = [], s9.length = 0, e5 && e5.forEach((e6) => {
      s9.set(e6[0], e6[1]);
    });
  }
  entries() {
    return [].slice.call(this.keys().map((e5, s9) => [e5, this._values[s9]]));
  }
  keys() {
    return [].slice.call(this._keys);
  }
  values() {
    return [].slice.call(this._values);
  }
  has(e5) {
    return this._keys.includes(e5);
  }
  get(e5) {
    const s9 = this._keys.indexOf(e5);
    return s9 > -1 ? this._values[s9] : null;
  }
  deepGet(s9) {
    if (!(s9 == null ? void 0 : s9.length))
      return null;
    const t3 = (s10, i5) => null == s10 ? null : i5.length ? t3(s10 instanceof _e2 ? s10.get(i5[0]) : s10[i5[0]], i5.slice(1)) : s10;
    return t3(this.get(s9[0]), s9.slice(1));
  }
  set(e5, s9) {
    const t3 = this, i5 = this._keys.indexOf(e5);
    return i5 > -1 ? t3._values[i5] = s9 : (t3._keys.push(e5), t3._values.push(s9), t3.length = t3._values.length), this;
  }
  sortedSet(e5, s9, t3, i5) {
    const h3 = this, l6 = this._keys.length, r8 = t3 || 0, n7 = void 0 !== i5 ? i5 : l6 - 1;
    if (0 === l6)
      return h3._keys.push(e5), h3._values.push(s9), h3;
    if (e5 === this._keys[r8])
      return this._values.splice(r8, 0, s9), this;
    if (e5 === this._keys[n7])
      return this._values.splice(n7, 0, s9), this;
    if (e5 > this._keys[n7])
      return this._keys.splice(n7 + 1, 0, e5), this._values.splice(n7 + 1, 0, s9), this;
    if (e5 < this._keys[r8])
      return this._values.splice(r8, 0, s9), this._keys.splice(r8, 0, e5), this;
    if (r8 >= n7)
      return this;
    const u8 = r8 + Math.floor((n7 - r8) / 2);
    return e5 < this._keys[u8] ? this.sortedSet(e5, s9, r8, u8 - 1) : e5 > this._keys[u8] ? this.sortedSet(e5, s9, u8 + 1, n7) : this;
  }
  size() {
    return this.length;
  }
  clear() {
    const e5 = this;
    return e5._keys.length = e5.length = e5._values.length = 0, this;
  }
  delete(e5) {
    const s9 = this, t3 = s9._keys.indexOf(e5);
    return t3 > -1 && (s9._keys.splice(t3, 1), s9._values.splice(t3, 1), s9.length = s9._keys.length, true);
  }
  forEach(e5) {
    this._keys.forEach((s9, t3) => {
      e5(this._values[t3], s9, t3);
    });
  }
  map(e5) {
    return this.keys().map((s9, t3) => e5(this._values[t3], s9, t3));
  }
  filter(e5) {
    const s9 = this;
    return s9._keys.forEach((t3, i5) => {
      false === e5(s9._values[i5], t3, i5) && s9.delete(t3);
    }), this;
  }
  clone() {
    return new _e2(this.entries());
  }
};
var s8 = class {
  constructor(s9 = 20) {
    this._maxEntries = s9, this._values = new e4();
  }
  delete(e5) {
    this._values.has(e5) && this._values.delete(e5);
  }
  get(e5) {
    let s9 = null;
    return this._values.has(e5) && (s9 = this._values.get(e5), this._values.delete(e5), this._values.set(e5, s9)), s9;
  }
  put(e5, s9) {
    if (this._values.size() >= this._maxEntries) {
      const e6 = this._values.keys()[0];
      this._values.delete(e6);
    }
    this._values.set(e5, s9);
  }
};
var t2 = class {
  constructor(e5 = 20) {
    this._maxEntries = e5, this._cache = new s8(this._maxEntries);
  }
  clear() {
    this._cache = new s8(this._maxEntries);
  }
  addToCache(e5, s9) {
    this._cache.put(e5, s9);
  }
  removeFromCache(e5) {
    this._cache.delete(e5);
  }
  getFromCache(e5) {
    return this._cache.get(e5);
  }
};

// node_modules/@arcgis/core/arcade/ArcadeModuleResolver.js
var l5 = class _l {
  constructor(e5) {
    this.portalUri = e5;
  }
  normalizeModuleUri(e5) {
    const o5 = /^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi, s9 = /(?<portalurl>.+)\/home\/item\.html\?id\=(?<itemid>.+)$/gi, c4 = /(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi, u8 = /(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi, n7 = /(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;
    if (e5.startsWith("portal+")) {
      let l6 = e5.substring(7), a5 = "", m5 = l6, d4 = false;
      for (const e6 of [s9, u8, c4]) {
        const t3 = e6.exec(l6);
        if (null !== t3) {
          const e7 = t3.groups;
          m5 = e7.itemid, a5 = e7.portalurl, d4 = true;
          break;
        }
      }
      if (false === d4) {
        if (!o5.test(l6))
          throw new p3(l.UnsupportedUriProtocol, { uri: e5 });
        m5 = l6, a5 = this.portalUri;
      }
      m5.includes("/") && (m5 = m5.split("/")[0]), m5.includes("?") && (m5 = m5.split("?")[0]);
      let h3 = "current";
      const p7 = n7.exec(m5);
      if (null !== p7) {
        const e6 = p7.groups;
        m5 = e6.itemid, h3 = e6.versionstring;
      }
      return l6 = new j3({ url: a5 }).restUrl + "/content/items/" + m5 + "/resources/" + h3 + ".arc", { url: l6, scheme: "portal", uri: "PO:" + l6 };
    }
    if (e5.startsWith("mock")) {
      if ("mock" === e5) {
        return { url: "", scheme: "mock", data: '\n      export var hello = 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ', uri: "mock" };
      }
      const t3 = e5.replace("mock:", "");
      if (void 0 !== _l.mocks[t3])
        return { url: "", scheme: "mock", data: _l.mocks[t3], uri: e5 };
    }
    throw new p3(l.UnrecognizedUri, { uri: e5 });
  }
  async fetchModule(e5) {
    const t3 = _l.cachedModules.getFromCache(e5.uri);
    if (t3)
      return t3;
    const r8 = this.fetchSource(e5);
    _l.cachedModules.addToCache(e5.uri, r8);
    let o5 = null;
    try {
      o5 = await r8;
    } catch (s9) {
      throw _l.cachedModules.removeFromCache(e5.uri), s9;
    }
    return o5;
  }
  async fetchSource(s9) {
    if ("portal" === s9.scheme) {
      const t3 = await j(s9.url, { responseType: "text", query: {} });
      if (t3.data)
        return n6(t3.data, []);
    }
    if ("mock" === s9.scheme)
      return n6(s9.data ?? "", []);
    throw new p3(l.UnsupportedUriProtocol);
  }
  static create(e5) {
    return new _l(e5);
  }
  static getDefault() {
    return this._default ?? (_l._default = _l._moduleResolverFactory());
  }
  static set moduleResolverClass(e5) {
    this._moduleResolverFactory = e5, this._default = null;
  }
};
l5.mocks = {}, l5.cachedModules = new t2(30), l5._default = null, l5._moduleResolverFactory = () => {
  const e5 = j3.getDefault();
  return new l5(e5.url);
};

// node_modules/@arcgis/core/arcade/arcadeRuntime.js
var G2 = class extends r4 {
  constructor(e5, t3) {
    super(), this.definition = null, this.context = null, this.definition = e5, this.context = t3;
  }
  createFunction(e5) {
    return (...t3) => {
      const n7 = { spatialReference: this.context.spatialReference, console: this.context.console, services: this.context.services, timeZone: this.context.timeZone ?? null, lrucache: this.context.lrucache, exports: this.context.exports, libraryResolver: this.context.libraryResolver, interceptor: this.context.interceptor, localScope: {}, depthCounter: { depth: e5.depthCounter.depth + 1 }, globalScope: this.context.globalScope };
      if (n7.depthCounter.depth > 64)
        throw new a3(e5, r3.MaximumCallDepth, null);
      return Ie3(this.definition, n7, t3, null);
    };
  }
  call(e5, t3) {
    return W5(e5, t3, (n7, l6, i5) => {
      const a5 = { spatialReference: e5.spatialReference, services: e5.services, globalScope: e5.globalScope, depthCounter: { depth: e5.depthCounter.depth + 1 }, libraryResolver: e5.libraryResolver, exports: e5.exports, timeZone: e5.timeZone ?? null, console: e5.console, lrucache: e5.lrucache, interceptor: e5.interceptor, localScope: {} };
      if (a5.depthCounter.depth > 64)
        throw new a3(e5, r3.MaximumCallDepth, t3);
      return Ie3(this.definition, a5, i5, t3);
    });
  }
  marshalledCall(e5, t3, n7, o5) {
    return o5(e5, t3, (r8, l6, i5) => {
      const a5 = { spatialReference: e5.spatialReference, globalScope: n7.globalScope, services: e5.services, depthCounter: { depth: e5.depthCounter.depth + 1 }, libraryResolver: e5.libraryResolver, exports: e5.exports, console: e5.console, timeZone: e5.timeZone ?? null, lrucache: e5.lrucache, interceptor: e5.interceptor, localScope: {} };
      return i5 = i5.map((t4) => !v(t4) || t4 instanceof s4 ? t4 : n4(t4, e5, o5)), n4(Ie3(this.definition, a5, i5, t3), n7, o5);
    });
  }
};
var P3 = class extends s {
  constructor(e5) {
    super(e5);
  }
  global(e5) {
    const t3 = this.executingContext.globalScope[e5.toLowerCase()];
    if (t3.valueset || (t3.value = V3(this.executingContext, t3.node), t3.valueset = true), v(t3.value) && !(t3.value instanceof s4)) {
      const e6 = new s4();
      e6.fn = t3.value, e6.parameterEvaluator = W5, e6.context = this.executingContext, t3.value = e6;
    }
    return t3.value;
  }
  setGlobal(e5, t3) {
    if (v(t3))
      throw new a3(null, r3.AssignModuleFunction, null);
    this.executingContext.globalScope[e5.toLowerCase()] = { value: t3, valueset: true, node: null };
  }
  hasGlobal(e5) {
    return void 0 === this.executingContext.exports[e5] && (e5 = e5.toLowerCase()), void 0 !== this.executingContext.exports[e5];
  }
  loadModule(e5) {
    let n7 = e5.spatialReference;
    null == n7 && (n7 = new f({ wkid: 102100 })), this.moduleScope = Ce2({}, e5.customfunctions, e5.timeZone), this.executingContext = { spatialReference: n7, globalScope: this.moduleScope, localScope: null, libraryResolver: new s2(e5.libraryResolver._moduleSingletons, this.source.syntax.loadedModules), exports: {}, services: e5.services, console: e5.console ?? Ae2, timeZone: e5.timeZone ?? null, lrucache: e5.lrucache, interceptor: e5.interceptor, depthCounter: { depth: 1 } }, V3(this.executingContext, this.source.syntax);
  }
};
function T3(e5, t3) {
  const n7 = [];
  for (let o5 = 0; o5 < t3.arguments.length; o5++)
    n7.push(V3(e5, t3.arguments[o5]));
  return n7;
}
function W5(e5, t3, n7) {
  try {
    return true === t3.preparsed ? n7(e5, null, t3.arguments) : n7(e5, t3, T3(e5, t3));
  } catch (o5) {
    throw o5;
  }
}
function V3(e5, t3) {
  try {
    switch (t3 == null ? void 0 : t3.type) {
      case "EmptyStatement":
        return w;
      case "VariableDeclarator":
        return ce3(e5, t3);
      case "VariableDeclaration":
        return se3(e5, t3);
      case "ImportDeclaration":
        return ie2(e5, t3);
      case "ExportNamedDeclaration":
        return ae2(e5, t3);
      case "BlockStatement":
      case "Program":
        return oe2(e5, t3);
      case "FunctionDeclaration":
        return le2(e5, t3);
      case "ReturnStatement":
        return re2(e5, t3);
      case "IfStatement":
        return ne3(e5, t3);
      case "ExpressionStatement":
        return te2(e5, t3);
      case "AssignmentExpression":
        return ee2(e5, t3);
      case "UpdateExpression":
        return X3(e5, t3);
      case "BreakStatement":
        return O;
      case "ContinueStatement":
        return R;
      case "TemplateElement":
        return we2(e5, t3);
      case "TemplateLiteral":
        return ge2(e5, t3);
      case "ForStatement":
        return H4(e5, t3);
      case "ForInStatement":
        return Y2(e5, t3);
      case "WhileStatement":
        return J3(e5, t3);
      case "Identifier":
        return ve2(e5, t3);
      case "MemberExpression":
        return ue2(e5, t3);
      case "Literal":
        return t3.value;
      case "CallExpression":
        return ye2(e5, t3);
      case "UnaryExpression":
        return fe3(e5, t3);
      case "BinaryExpression":
        return de2(e5, t3);
      case "LogicalExpression":
        return he2(e5, t3);
      case "ArrayExpression":
        return pe3(e5, t3);
      case "ObjectExpression":
        return _(e5, t3);
      case "Property":
        return z5(e5, t3);
      default:
        throw new a3(e5, r3.Unrecognized, t3);
    }
  } catch (n7) {
    throw u2(e5, t3, n7);
  }
}
function _(e5, t3) {
  const l6 = {}, i5 = /* @__PURE__ */ new Map();
  for (let n7 = 0; n7 < t3.properties.length; n7++) {
    const a6 = V3(e5, t3.properties[n7]);
    if (v(a6.value))
      throw new a3(e5, r3.NoFunctionInDictionary, t3);
    if (false === P(a6.key))
      throw new a3(e5, r3.KeyMustBeString, t3);
    let s9 = a6.key.toString();
    const c4 = s9.toLowerCase();
    i5.has(c4) ? s9 = i5.get(c4) : i5.set(c4, s9), a6.value === w ? l6[s9] = null : l6[s9] = a6.value;
  }
  const a5 = new N(l6);
  return a5.immutable = false, a5;
}
function z5(e5, t3) {
  return { key: "Identifier" === t3.key.type ? t3.key.name : V3(e5, t3.key), value: V3(e5, t3.value) };
}
function Y2(e5, t3) {
  const l6 = V3(e5, t3.right);
  "VariableDeclaration" === t3.left.type && V3(e5, t3.left);
  let i5 = null, a5 = "";
  if ("VariableDeclaration" === t3.left.type) {
    const e6 = t3.left.declarations[0].id;
    "Identifier" === e6.type && (a5 = e6.name);
  } else
    "Identifier" === t3.left.type && (a5 = t3.left.name);
  if (!a5)
    throw new a3(e5, r3.InvalidIdentifier, t3);
  if (a5 = a5.toLowerCase(), null != e5.localScope && void 0 !== e5.localScope[a5] && (i5 = e5.localScope[a5]), null === i5 && void 0 !== e5.globalScope[a5] && (i5 = e5.globalScope[a5]), null === i5)
    throw new a3(e5, r3.InvalidIdentifier, t3);
  if (q(l6) || P(l6)) {
    const n7 = l6.length;
    for (let o5 = 0; o5 < n7; o5++) {
      i5.value = o5;
      const n8 = V3(e5, t3.body);
      if (n8 === O)
        break;
      if (n8 instanceof F)
        return n8;
    }
    return w;
  }
  if ($(l6)) {
    for (let n7 = 0; n7 < l6.length(); n7++) {
      i5.value = n7;
      const o5 = V3(e5, t3.body);
      if (o5 === O)
        break;
      if (o5 instanceof F)
        return o5;
    }
    return w;
  }
  if (!(l6 instanceof N || U(l6)))
    return w;
  {
    const n7 = l6.keys();
    for (let o5 = 0; o5 < n7.length; o5++) {
      i5.value = n7[o5];
      const r8 = V3(e5, t3.body);
      if (r8 === O)
        break;
      if (r8 instanceof F)
        return r8;
    }
  }
}
function H4(e5, t3) {
  null !== t3.init && V3(e5, t3.init);
  const n7 = { testResult: true, lastAction: w };
  do {
    Q3(e5, t3, n7);
  } while (true === n7.testResult);
  return n7.lastAction instanceof F ? n7.lastAction : w;
}
function J3(e5, t3) {
  const n7 = { testResult: true, lastAction: w };
  if (n7.testResult = V3(e5, t3.test), false === n7.testResult)
    return w;
  if (true !== n7.testResult)
    throw new a3(e5, r3.BooleanConditionRequired, t3);
  for (; true === n7.testResult && (n7.lastAction = V3(e5, t3.body), n7.lastAction !== O) && !(n7.lastAction instanceof F); )
    if (n7.testResult = V3(e5, t3.test), true !== n7.testResult && false !== n7.testResult)
      throw new a3(e5, r3.BooleanConditionRequired, t3);
  return n7.lastAction instanceof F ? n7.lastAction : w;
}
function Q3(e5, t3, n7) {
  if (null !== t3.test) {
    if (n7.testResult = V3(e5, t3.test), false === n7.testResult)
      return;
    if (true !== n7.testResult)
      throw new a3(e5, r3.BooleanConditionRequired, t3);
  }
  n7.lastAction = V3(e5, t3.body), n7.lastAction !== O ? n7.lastAction instanceof F ? n7.testResult = false : null !== t3.update && V3(e5, t3.update) : n7.testResult = false;
}
function X3(e5, t3) {
  let l6, i5 = null, a5 = "";
  if ("MemberExpression" === t3.argument.type) {
    if (i5 = V3(e5, t3.argument.object), true === t3.argument.computed ? a5 = V3(e5, t3.argument.property) : "Identifier" === t3.argument.property.type && (a5 = t3.argument.property.name), q(i5)) {
      if (!z2(a5))
        throw new a3(e5, r3.ArrayAccessorMustBeNumber, t3);
      if (a5 < 0 && (a5 = i5.length + a5), a5 < 0 || a5 >= i5.length)
        throw new a3(e5, r3.OutOfBounds, t3);
      l6 = pe(i5[a5]), i5[a5] = "++" === t3.operator ? l6 + 1 : l6 - 1;
    } else if (i5 instanceof N) {
      if (false === P(a5))
        throw new a3(e5, r3.KeyAccessorMustBeString, t3);
      if (true !== i5.hasField(a5))
        throw new a3(e5, r3.FieldNotFound, t3);
      l6 = pe(i5.field(a5)), i5.setField(a5, "++" === t3.operator ? l6 + 1 : l6 - 1);
    } else if (U(i5)) {
      if (false === P(a5))
        throw new a3(e5, r3.KeyAccessorMustBeString, t3);
      if (true !== i5.hasField(a5))
        throw new a3(e5, r3.FieldNotFound, t3);
      l6 = pe(i5.field(a5)), i5.setField(a5, "++" === t3.operator ? l6 + 1 : l6 - 1);
    } else {
      if ($(i5))
        throw new a3(e5, r3.Immutable, t3);
      if (!(i5 instanceof P3))
        throw new a3(e5, r3.InvalidParameter, t3);
      if (false === P(a5))
        throw new a3(e5, r3.ModuleAccessorMustBeString, t3);
      if (true !== i5.hasGlobal(a5))
        throw new a3(e5, r3.ModuleExportNotFound, t3);
      l6 = pe(i5.global(a5)), i5.setGlobal(a5, "++" === t3.operator ? l6 + 1 : l6 - 1);
    }
    return false === t3.prefix ? l6 : "++" === t3.operator ? l6 + 1 : l6 - 1;
  }
  if (i5 = "Identifier" === t3.argument.type ? t3.argument.name.toLowerCase() : "", !i5)
    throw new a3(e5, r3.InvalidIdentifier, t3);
  if (null != e5.localScope && void 0 !== e5.localScope[i5])
    return l6 = pe(e5.localScope[i5].value), e5.localScope[i5] = { value: "++" === t3.operator ? l6 + 1 : l6 - 1, valueset: true, node: t3 }, false === t3.prefix ? l6 : "++" === t3.operator ? l6 + 1 : l6 - 1;
  if (void 0 !== e5.globalScope[i5])
    return l6 = pe(e5.globalScope[i5].value), e5.globalScope[i5] = { value: "++" === t3.operator ? l6 + 1 : l6 - 1, valueset: true, node: t3 }, false === t3.prefix ? l6 : "++" === t3.operator ? l6 + 1 : l6 - 1;
  throw new a3(e5, r3.InvalidIdentifier, t3);
}
function $3(e5, t3, n7, l6, i5) {
  switch (t3) {
    case "=":
      return e5 === w ? null : e5;
    case "/=":
      return pe(n7) / pe(e5);
    case "*=":
      return pe(n7) * pe(e5);
    case "-=":
      return pe(n7) - pe(e5);
    case "+=":
      return P(n7) || P(e5) ? ce(n7) + ce(e5) : pe(n7) + pe(e5);
    case "%=":
      return pe(n7) % pe(e5);
    default:
      throw new a3(i5, r3.UnsupportedOperator, l6);
  }
}
function ee2(e5, t3) {
  let l6 = null, i5 = "";
  if ("MemberExpression" === t3.left.type) {
    if (l6 = V3(e5, t3.left.object), true === t3.left.computed)
      i5 = V3(e5, t3.left.property);
    else {
      if ("Identifier" !== t3.left.property.type)
        throw new a3(e5, r3.InvalidIdentifier, t3);
      i5 = t3.left.property.name;
    }
    const a6 = V3(e5, t3.right);
    if (q(l6)) {
      if (!z2(i5))
        throw new a3(e5, r3.ArrayAccessorMustBeNumber, t3);
      if (i5 < 0 && (i5 = l6.length + i5), i5 < 0 || i5 > l6.length)
        throw new a3(e5, r3.OutOfBounds, t3);
      if (i5 === l6.length) {
        if ("=" !== t3.operator)
          throw new a3(e5, r3.OutOfBounds, t3);
        l6[i5] = $3(a6, t3.operator, l6[i5], t3, e5);
      } else
        l6[i5] = $3(a6, t3.operator, l6[i5], t3, e5);
    } else if (l6 instanceof N) {
      if (false === P(i5))
        throw new a3(e5, r3.KeyAccessorMustBeString, t3);
      if (true === l6.hasField(i5))
        l6.setField(i5, $3(a6, t3.operator, l6.field(i5), t3, e5));
      else {
        if ("=" !== t3.operator)
          throw new a3(e5, r3.FieldNotFound, t3, { key: i5 });
        l6.setField(i5, $3(a6, t3.operator, null, t3, e5));
      }
    } else if (U(l6)) {
      if (false === P(i5))
        throw new a3(e5, r3.KeyAccessorMustBeString, t3);
      if (true === l6.hasField(i5))
        l6.setField(i5, $3(a6, t3.operator, l6.field(i5), t3, e5));
      else {
        if ("=" !== t3.operator)
          throw new a3(e5, r3.FieldNotFound, t3, { key: i5 });
        l6.setField(i5, $3(a6, t3.operator, null, t3, e5));
      }
    } else {
      if ($(l6))
        throw new a3(e5, r3.Immutable, t3);
      if (!(l6 instanceof P3))
        throw new a3(e5, r3.InvalidIdentifier, t3);
      if (false === P(i5))
        throw new a3(e5, r3.ModuleAccessorMustBeString, t3);
      if (true !== l6.hasGlobal(i5))
        throw new a3(e5, r3.ModuleExportNotFound, t3);
      l6.setGlobal(i5, $3(a6, t3.operator, l6.global(i5), t3, e5));
    }
    return w;
  }
  l6 = t3.left.name.toLowerCase();
  const a5 = V3(e5, t3.right);
  if (null != e5.localScope && void 0 !== e5.localScope[l6])
    return e5.localScope[l6] = { value: $3(a5, t3.operator, e5.localScope[l6].value, t3, e5), valueset: true, node: t3.right }, w;
  if (void 0 !== e5.globalScope[l6])
    return e5.globalScope[l6] = { value: $3(a5, t3.operator, e5.globalScope[l6].value, t3, e5), valueset: true, node: t3.right }, w;
  throw new a3(e5, r3.InvalidIdentifier, t3);
}
function te2(e5, t3) {
  if ("AssignmentExpression" === t3.expression.type || "UpdateExpression" === t3.expression.type)
    return V3(e5, t3.expression);
  if ("CallExpression" === t3.expression.type) {
    const n7 = V3(e5, t3.expression);
    return n7 === w ? w : new M2(n7);
  }
  {
    const n7 = V3(e5, t3.expression);
    return n7 === w ? w : new M2(n7);
  }
}
function ne3(e5, t3) {
  const n7 = V3(e5, t3.test);
  if (true === n7)
    return V3(e5, t3.consequent);
  if (false === n7)
    return null !== t3.alternate ? V3(e5, t3.alternate) : w;
  throw new a3(e5, r3.BooleanConditionRequired, t3);
}
function oe2(e5, t3) {
  let n7 = w;
  for (let o5 = 0; o5 < t3.body.length; o5++)
    if (n7 = V3(e5, t3.body[o5]), n7 instanceof F || n7 === O || n7 === R)
      return n7;
  return n7;
}
function re2(e5, t3) {
  if (null === t3.argument)
    return new F(w);
  const n7 = V3(e5, t3.argument);
  return new F(n7);
}
function le2(e5, t3) {
  const n7 = t3.id.name.toLowerCase();
  return e5.globalScope[n7] = { valueset: true, node: null, value: new G2(t3, e5) }, w;
}
function ie2(e5, t3) {
  var _a, _b;
  const n7 = t3.specifiers[0].local.name.toLowerCase(), o5 = e5.libraryResolver.loadLibrary(n7);
  let r8 = null;
  return ((_a = e5.libraryResolver._moduleSingletons) == null ? void 0 : _a.has(o5.uri)) ? r8 = e5.libraryResolver._moduleSingletons.get(o5.uri) : (r8 = new P3(o5), r8.loadModule(e5), (_b = e5.libraryResolver._moduleSingletons) == null ? void 0 : _b.set(o5.uri, r8)), e5.globalScope[n7] = { value: r8, valueset: true, node: t3 }, w;
}
function ae2(e5, t3) {
  if (V3(e5, t3.declaration), "FunctionDeclaration" === t3.declaration.type)
    e5.exports[t3.declaration.id.name.toLowerCase()] = "function";
  else if ("VariableDeclaration" === t3.declaration.type)
    for (const n7 of t3.declaration.declarations)
      e5.exports[n7.id.name.toLowerCase()] = "variable";
  return w;
}
function se3(e5, t3) {
  for (let n7 = 0; n7 < t3.declarations.length; n7++)
    V3(e5, t3.declarations[n7]);
  return w;
}
function ce3(e5, t3) {
  let n7 = null === t3.init ? null : V3(e5, t3.init);
  if (n7 === w && (n7 = null), "Identifier" !== t3.id.type)
    throw new a3(e5, r3.InvalidIdentifier, t3);
  const l6 = t3.id.name.toLowerCase();
  return null != e5.localScope ? e5.localScope[l6] = { value: n7, valueset: true, node: t3.init } : e5.globalScope[l6] = { value: n7, valueset: true, node: t3.init }, w;
}
function ue2(e5, t3) {
  try {
    const l6 = V3(e5, t3.object);
    if (null === l6)
      throw new a3(e5, r3.MemberOfNull, t3);
    if (false === t3.computed) {
      if ("Identifier" === t3.property.type) {
        if (l6 instanceof N || U(l6))
          return l6.field(t3.property.name);
        if (l6 instanceof p)
          return L2(l6, t3.property.name, t3, e5);
        if (l6 instanceof P3) {
          if (!l6.hasGlobal(t3.property.name))
            throw new a3(e5, r3.InvalidIdentifier, t3);
          return l6.global(t3.property.name);
        }
      }
      throw new a3(e5, r3.InvalidMemberAccessKey, t3);
    }
    {
      let i5 = V3(e5, t3.property);
      if (l6 instanceof N || U(l6)) {
        if (P(i5))
          return l6.field(i5);
        throw new a3(e5, r3.InvalidMemberAccessKey, t3);
      }
      if (l6 instanceof P3) {
        if (P(i5))
          return l6.global(i5);
        throw new a3(e5, r3.InvalidMemberAccessKey, t3);
      }
      if (l6 instanceof p) {
        if (P(i5))
          return L2(l6, i5, t3, e5);
        throw new a3(e5, r3.InvalidMemberAccessKey, t3);
      }
      if (q(l6)) {
        if (z2(i5) && isFinite(i5) && Math.floor(i5) === i5) {
          if (i5 < 0 && (i5 = l6.length + i5), i5 >= l6.length || i5 < 0)
            throw new a3(e5, r3.OutOfBounds, t3);
          return l6[i5];
        }
        throw new a3(e5, r3.InvalidMemberAccessKey, t3);
      }
      if (P(l6)) {
        if (z2(i5) && isFinite(i5) && Math.floor(i5) === i5) {
          if (i5 < 0 && (i5 = l6.length + i5), i5 >= l6.length || i5 < 0)
            throw new a3(e5, r3.OutOfBounds, t3);
          return l6[i5];
        }
        throw new a3(e5, r3.InvalidMemberAccessKey, t3);
      }
      if ($(l6)) {
        if (z2(i5) && isFinite(i5) && Math.floor(i5) === i5) {
          if (i5 < 0 && (i5 = l6.length() + i5), i5 >= l6.length() || i5 < 0)
            throw new a3(e5, r3.OutOfBounds, t3);
          return l6.get(i5);
        }
        throw new a3(e5, r3.InvalidMemberAccessKey, t3);
      }
      throw new a3(e5, r3.InvalidMemberAccessKey, t3);
    }
  } catch (l6) {
    throw l6;
  }
}
function fe3(e5, t3) {
  try {
    const n7 = V3(e5, t3.argument);
    if (G(n7)) {
      if ("!" === t3.operator)
        return !n7;
      if ("-" === t3.operator)
        return -1 * pe(n7);
      if ("+" === t3.operator)
        return 1 * pe(n7);
      if ("~" === t3.operator)
        return ~pe(n7);
      throw new a3(e5, r3.UnsupportedUnaryOperator, t3);
    }
    if ("~" === t3.operator)
      return ~pe(n7);
    if ("-" === t3.operator)
      return -1 * pe(n7);
    if ("+" === t3.operator)
      return 1 * pe(n7);
    throw new a3(e5, r3.UnsupportedUnaryOperator, t3);
  } catch (n7) {
    throw n7;
  }
}
function pe3(e5, t3) {
  try {
    const n7 = [];
    for (let l6 = 0; l6 < t3.elements.length; l6++) {
      const i5 = V3(e5, t3.elements[l6]);
      if (v(i5))
        throw new a3(e5, r3.NoFunctionInArray, t3);
      i5 === w ? n7.push(null) : n7.push(i5);
    }
    return n7;
  } catch (n7) {
    throw n7;
  }
}
function de2(e5, t3) {
  try {
    const n7 = [V3(e5, t3.left), V3(e5, t3.right)], l6 = n7[0], i5 = n7[1];
    switch (t3.operator) {
      case "|":
      case "<<":
      case ">>":
      case ">>>":
      case "^":
      case "&":
        return Ie(pe(l6), pe(i5), t3.operator);
      case "==":
        return fe(l6, i5);
      case "!=":
        return !fe(l6, i5);
      case "<":
      case ">":
      case "<=":
      case ">=":
        return se(l6, i5, t3.operator);
      case "+":
        return P(l6) || P(i5) ? ce(l6) + ce(i5) : pe(l6) + pe(i5);
      case "-":
        return pe(l6) - pe(i5);
      case "*":
        return pe(l6) * pe(i5);
      case "/":
        return pe(l6) / pe(i5);
      case "%":
        return pe(l6) % pe(i5);
      default:
        throw new a3(e5, r3.UnsupportedOperator, t3);
    }
  } catch (n7) {
    throw n7;
  }
}
function he2(e5, t3) {
  try {
    const n7 = V3(e5, t3.left);
    if (G(n7))
      switch (t3.operator) {
        case "||":
          if (true === n7)
            return n7;
          {
            const n8 = V3(e5, t3.right);
            if (G(n8))
              return n8;
            throw new a3(e5, r3.LogicExpressionOrAnd, t3);
          }
        case "&&":
          if (false === n7)
            return n7;
          {
            const n8 = V3(e5, t3.right);
            if (G(n8))
              return n8;
            throw new a3(e5, r3.LogicExpressionOrAnd, t3);
          }
        default:
          throw new a3(e5, r3.LogicExpressionOrAnd, t3);
      }
    throw new a3(e5, r3.LogicalExpressionOnlyBoolean, t3);
  } catch (n7) {
    throw n7;
  }
}
function we2(e5, t3) {
  return t3.value ? t3.value.cooked : "";
}
function me2(e5, t3, n7) {
  if (v(e5))
    throw new a3(t3, r3.NoFunctionInTemplateLiteral, n7);
  return e5;
}
function ge2(e5, t3) {
  let n7 = "", o5 = 0;
  for (const r8 of t3.quasis)
    if (n7 += r8.value ? r8.value.cooked : "", false === r8.tail) {
      n7 += t3.expressions[o5] ? ce(me2(V3(e5, t3.expressions[o5]), e5, t3)) : "", o5++;
    }
  return n7;
}
function ve2(e5, t3) {
  let n7;
  try {
    const l6 = t3.name.toLowerCase();
    if (null != e5.localScope && void 0 !== e5.localScope[l6])
      return n7 = e5.localScope[l6], true === n7.valueset || (n7.value = V3(e5, n7.node), n7.valueset = true), n7.value;
    if (void 0 !== e5.globalScope[l6])
      return n7 = e5.globalScope[l6], true === n7.valueset || (n7.value = V3(e5, n7.node), n7.valueset = true), n7.value;
    throw new a3(e5, r3.InvalidIdentifier, t3);
  } catch (l6) {
    throw l6;
  }
}
function ye2(e5, t3) {
  try {
    if ("MemberExpression" === t3.callee.type) {
      const n7 = V3(e5, t3.callee.object);
      if (!(n7 instanceof P3))
        throw new a3(e5, r3.FunctionNotFound, t3);
      const l6 = false === t3.callee.computed ? t3.callee.property.name : V3(e5, t3.callee.property);
      if (!n7.hasGlobal(l6))
        throw new a3(e5, r3.FunctionNotFound, t3);
      const i5 = n7.global(l6);
      if (!v(i5))
        throw new a3(e5, r3.CallNonFunction, t3);
      return i5.call(e5, t3);
    }
    if ("Identifier" !== t3.callee.type)
      throw new a3(e5, r3.FunctionNotFound, t3);
    if (null != e5.localScope && void 0 !== e5.localScope[t3.callee.name.toLowerCase()]) {
      const n7 = e5.localScope[t3.callee.name.toLowerCase()];
      if (v(n7.value))
        return n7.value.call(e5, t3);
      throw new a3(e5, r3.CallNonFunction, t3);
    }
    if (void 0 !== e5.globalScope[t3.callee.name.toLowerCase()]) {
      const n7 = e5.globalScope[t3.callee.name.toLowerCase()];
      if (v(n7.value))
        return n7.value.call(e5, t3);
      throw new a3(e5, r3.CallNonFunction, t3);
    }
    throw new a3(e5, r3.FunctionNotFound, t3);
  } catch (n7) {
    throw n7;
  }
}
var be3 = {};
function xe2(e5, t3, n7, o5) {
  try {
    const r8 = t3.arguments, l6 = V3(e5, r8[n7]);
    if (fe(l6, o5))
      return V3(e5, r8[n7 + 1]);
    {
      const l7 = r8.length - n7;
      return 1 === l7 ? V3(e5, r8[n7]) : 2 === l7 ? null : 3 === l7 ? V3(e5, r8[n7 + 2]) : xe2(e5, t3, n7 + 2, o5);
    }
  } catch (r8) {
    throw r8;
  }
}
function Se2(e5, t3, n7, l6) {
  try {
    const i5 = t3.arguments;
    if (true === l6)
      return V3(e5, i5[n7 + 1]);
    if (3 === i5.length - n7)
      return V3(e5, i5[n7 + 2]);
    {
      const l7 = V3(e5, i5[n7 + 2]);
      if (false === G(l7))
        throw new a3(e5, r3.BooleanConditionRequired, i5[n7 + 2]);
      return Se2(e5, t3, n7 + 2, l7);
    }
  } catch (i5) {
    throw i5;
  }
}
function Ie3(e5, t3, n7, l6) {
  try {
    const i5 = e5.body;
    if (n7.length !== e5.params.length)
      throw new a3(t3, r3.WrongNumberOfParameters, l6);
    if (null != t3.localScope)
      for (let o5 = 0; o5 < n7.length; o5++)
        t3.localScope[e5.params[o5].name.toLowerCase()] = { value: n7[o5], valueset: true, node: null };
    const a5 = V3(t3, i5);
    if (a5 instanceof F)
      return a5.value;
    if (a5 === O)
      throw new a3(t3, r3.UnexpectedToken, l6);
    if (a5 === R)
      throw new a3(t3, r3.UnexpectedToken, l6);
    return a5 instanceof M2 ? a5.value : a5;
  } catch (i5) {
    throw i5;
  }
}
C(be3, W5), $2(be3, W5), m2(be3, W5), W2(be3, W5), f2(be3, W5), S(be3, W5), be3.iif = function(e5, t3) {
  try {
    const n7 = t3.arguments;
    ne(null === n7 ? [] : n7, 3, 3, e5, t3);
    const l6 = V3(e5, n7[0]);
    if (false === G(l6))
      throw new a3(e5, r3.BooleanConditionRequired, t3);
    return V3(e5, true === l6 ? n7[1] : n7[2]);
  } catch (n7) {
    throw n7;
  }
}, be3.decode = function(e5, t3) {
  try {
    const n7 = t3.arguments;
    if (n7.length < 2)
      throw new a3(e5, r3.WrongNumberOfParameters, t3);
    if (2 === n7.length)
      return V3(e5, n7[1]);
    {
      if ((n7.length - 1) % 2 == 0)
        throw new a3(e5, r3.WrongNumberOfParameters, t3);
      const l6 = V3(e5, n7[0]);
      return xe2(e5, t3, 1, l6);
    }
  } catch (n7) {
    throw n7;
  }
}, be3.when = function(e5, t3) {
  try {
    const n7 = t3.arguments;
    if (n7.length < 3)
      throw new a3(e5, r3.WrongNumberOfParameters, t3);
    if (n7.length % 2 == 0)
      throw new a3(e5, r3.WrongNumberOfParameters, t3);
    const l6 = V3(e5, n7[0]);
    if (false === G(l6))
      throw new a3(e5, r3.BooleanConditionRequired, n7[0]);
    return Se2(e5, t3, 0, l6);
  } catch (n7) {
    throw n7;
  }
};
for (const Le2 in be3)
  be3[Le2] = { value: new e(be3[Le2]), valueset: true, node: null };
var Fe3 = function() {
};
function Ce2(e5, t3, o5) {
  const r8 = new Fe3();
  e5 || (e5 = {}), t3 || (t3 = {});
  const l6 = new N({ newline: "\n", tab: "	", singlequote: "'", doublequote: '"', forwardslash: "/", backwardslash: "\\" });
  l6.immutable = false, r8.textformatting = { value: l6, valueset: true, node: null };
  for (const n7 in t3)
    r8[n7] = { value: new e(t3[n7]), native: true, valueset: true, node: null };
  for (const n7 in e5)
    e5[n7] && "esri.Graphic" === e5[n7].declaredClass ? r8[n7] = { value: D.createFromGraphic(e5[n7], o5), valueset: true, node: null } : r8[n7] = { value: e5[n7], valueset: true, node: null };
  return r8;
}
Fe3.prototype = be3, Fe3.prototype.infinity = { value: Number.POSITIVE_INFINITY, valueset: true, node: null }, Fe3.prototype.pi = { value: Math.PI, valueset: true, node: null };
function Ae2(e5) {
  console.log(e5);
}
function Me3(e5) {
  const t3 = { mode: "sync", compiled: false, functions: {}, signatures: [], standardFunction: W5, evaluateIdentifier: ve2 };
  for (let n7 = 0; n7 < e5.length; n7++)
    e5[n7].registerFunctions(t3);
  for (const n7 in t3.functions)
    be3[n7] = { value: new e(t3.functions[n7]), valueset: true, node: null }, Fe3.prototype[n7] = be3[n7];
  for (let n7 = 0; n7 < t3.signatures.length; n7++)
    o(t3.signatures[n7], "sync");
}
function Ee2(e5, n7) {
  let l6 = n7.spatialReference;
  null == l6 && (l6 = new f({ wkid: 102100 }));
  let i5 = null;
  e5.usesModules && (i5 = new s2(/* @__PURE__ */ new Map(), e5.loadedModules));
  const a5 = { spatialReference: l6, globalScope: Ce2(n7.vars, n7.customfunctions, n7.timeZone), localScope: null, services: n7.services ?? null, exports: {}, libraryResolver: i5, console: n7.console ?? Ae2, timeZone: n7.timeZone ?? null, lrucache: n7.lrucache, interceptor: n7.interceptor, depthCounter: { depth: 1 } };
  let s9 = V3(a5, e5);
  if (s9 instanceof F && (s9 = s9.value), s9 instanceof M2 && (s9 = s9.value), s9 === w && (s9 = null), s9 === O)
    throw new a3(a5, r3.IllegalResult, null);
  if (s9 === R)
    throw new a3(a5, r3.IllegalResult, null);
  if (v(s9))
    throw new a3(a5, r3.IllegalResult, null);
  return s9;
}
Me3([p5]);

// node_modules/@arcgis/core/chunks/arcade.js
var w4 = /* @__PURE__ */ new Set(["feature", "angle", "bearing", "centroid", "envelopeintersects", "extent", "geometry", "isselfintersecting", "ringisclockwise"]);
var A2 = false;
var g3 = false;
var h2 = null;
var j4 = [];
function x5(t3, r8) {
  if (true === r8.useAsync || true === t3.isAsync)
    return M4(t3, r8);
  if (has("esri-csp-restrictions")) {
    return function(e5) {
      return Ee2(t3, e5);
    };
  }
  try {
    return Le(t3, r8);
  } catch (n7) {
    if ("esri.arcade.arcadeuncompilableerror" === n7.declaredRootClass)
      return function(e5) {
        return Ee2(t3, e5);
      };
    throw n7;
  }
}
function M4(t3, r8) {
  if (null === h2)
    throw new a3(null, r3.AsyncNotEnabled, null);
  if (has("esri-csp-restrictions")) {
    return function(e5) {
      return h2.executeScript(t3, e5);
    };
  }
  try {
    return Le(t3, r8, true);
  } catch (n7) {
    if ("esri.arcade.arcadeuncompilableerror" === n7.declaredRootClass)
      return function(e5) {
        return h2.executeScript(t3, e5);
      };
    throw n7;
  }
}
function F3(e5) {
  Me3(e5), Ee(e5, "sync"), null === h2 ? j4.push(e5) : (Ee(e5, "async"), h2.extend(e5));
}
function E3(e5, t3 = []) {
  return n6(e5, t3);
}
function v3(e5, t3, r8 = []) {
  return G3(n6(e5, r8), t3);
}
function G3(e5, t3) {
  if (true === t3.useAsync || true === e5.isAsync) {
    if (null === h2)
      throw new a3(null, r3.AsyncNotEnabled, null);
    return h2.executeScript(e5, t3);
  }
  return Ee2(e5, t3);
}
function U3(e5, t3) {
  return c2(e5, t3);
}
function _2(e5, t3) {
  return p4(e5, t3);
}
function I2(e5, t3 = false) {
  return void 0 === t3 && (t3 = false), l2(e5);
}
function R3(e5) {
  return u3(e5);
}
function C4(e5, t3 = []) {
  return void 0 === e5.usesGeometry && d(e5, t3), true === e5.usesGeometry;
}
var D4 = null;
function k3() {
  return D4 || (D4 = z6(), D4);
}
async function z6() {
  const e5 = await import("./geometryEngine-X6OFRYLT.js");
  return g3 = true, C2(e5), true;
}
var P4 = null;
function L4() {
  return null !== P4 || (P4 = N3()), P4;
}
async function N3() {
  await Re(), h2 = await import("./arcadeAsyncRuntime-7LFNKGKT.js");
  for (const e5 of j4)
    h2.extend(e5), Ee(e5, "async");
  return j4 = null, true;
}
function O3() {
  return A2;
}
function T4() {
  return !!h2;
}
function q4() {
  return g3;
}
var B2 = null;
function H5() {
  return B2 || (B2 = J4(), B2);
}
async function J4() {
  await L4();
  const [e5, r8, n7, s9, u8] = await Promise.all([import("./featureSetUtils-4Q5R2GBG.js"), import("./featuresetbase-OPXNYZO3.js"), import("./featuresetgeom-GJWYWAM6.js"), import("./featuresetstats-PFHCOSSO.js"), import("./featuresetstring-GFCTQCEZ.js")]);
  return ee3 = e5, h2.extend([r8, n7, s9, u8]), Ee([r8, n7, s9, u8], "async"), A2 = true, true;
}
function K4(e5, t3 = []) {
  return void 0 === e5.usesFeatureSet && d(e5, t3), true === e5.usesFeatureSet;
}
function Q4(e5, t3 = []) {
  return void 0 === e5.isAsync && d(e5, t3), true === e5.isAsync;
}
function V4(e5, t3) {
  if (t3) {
    for (const r8 of t3)
      if (U3(e5, r8))
        return true;
    return false;
  }
  return false;
}
async function W6(e5, t3, r8 = [], n7 = false, s9 = null) {
  return X4(/* @__PURE__ */ new Set(), e5, t3, r8, n7, s9);
}
async function X4(e5, t3, r8, n7 = [], s9 = false, u8 = null) {
  const a5 = "string" == typeof t3 ? E3(t3) : t3, o5 = [];
  return a5 && (false === q4() && (C4(a5) || s9) && o5.push(k3()), false === T4() && (true === a5.isAsync || r8) && o5.push(L4()), false === O3() && (K4(a5) || V4(a5, n7)) && o5.push(H5())), o5.length && await Promise.all(o5), await Z(e5, a5, u8, r8, s9), true;
}
function Y3(e5, t3 = []) {
  return void 0 === e5.usesModules && d(e5, t3), true === e5.usesModules;
}
async function Z(e5, t3, r8 = null, s9 = false, u8 = false) {
  const c4 = x2(t3);
  null === r8 && c4.length > 0 && (r8 = l5.getDefault()), t3.loadedModules = {};
  for (const n7 of c4) {
    n(r8);
    const c5 = r8.normalizeModuleUri(n7.source);
    if (e5.has(c5.uri))
      throw new a3(null, r3.CircularModules, null);
    e5.add(c5.uri);
    const i5 = await r8.fetchModule(c5);
    await X4(e5, i5, s9, [], u8, r8), e5.delete(c5.uri), i5.isAsync && (t3.isAsync = true), i5.usesFeatureSet && (t3.usesFeatureSet = true), i5.usesGeometry && (t3.usesGeometry = true), t3.loadedModules[n7.libname] = { uri: c5.uri, script: i5 };
  }
}
function $4(e5) {
  if (C4(e5))
    return true;
  const t3 = y(e5);
  let r8 = false;
  for (let n7 = 0; n7 < t3.length; n7++)
    if (w4.has(t3[n7])) {
      r8 = true;
      break;
    }
  return r8;
}
var ee3 = null;
function te3() {
  return ee3;
}
var re3 = Object.freeze(Object.defineProperty({ __proto__: null, _loadScriptDependenciesImpl: X4, compileScript: x5, enableAsyncSupport: L4, enableAsyncSupportImpl: N3, enableFeatureSetSupport: H5, enableFeatureSetSupportImpl: J4, enableGeometrySupport: k3, enableGeometrySupportImpl: z6, executeScript: G3, extend: F3, extractExpectedFieldLiterals: R3, extractFieldLiterals: I2, featureSetUtils: te3, isAsyncEnabled: T4, isFeatureSetSupportEnabled: O3, isGeometryEnabled: q4, loadDependentModules: Z, loadScriptDependencies: W6, parseAndExecuteScript: v3, parseScript: E3, referencesFunction: _2, referencesMember: U3, scriptIsAsync: Q4, scriptTouchesGeometry: $4, scriptUsesFeatureSet: K4, scriptUsesGeometryEngine: C4, scriptUsesModules: Y3 }, Symbol.toStringTag, { value: "Module" }));

// node_modules/@arcgis/core/support/arcadeUtils.js
var M5 = /^\$(feature|aggregatedFeatures)\./i;
var P5 = { vars: { $feature: "any", $view: "any" }, spatialReference: null };
function A3(e5) {
  return e5.replaceAll(/[|\\{}()[\]^$+*?.]/g, "\\$&");
}
function q5(e5) {
  return null == e5 ? null : q(e5) || $(e5) ? "array" : Q(e5) ? "date" : P(e5) ? "text" : G(e5) ? "boolean" : z2(e5) ? "number" : e5 instanceof N ? "dictionary" : U(e5) ? "feature" : e5 instanceof x ? "point" : e5 instanceof j2 ? "polygon" : e5 instanceof m ? "polyline" : e5 instanceof u ? "multipoint" : e5 instanceof M ? "extent" : e5 instanceof n2 ? "dateOnly" : e5 instanceof n3 ? "time" : H(e5) ? "featureSet" : W(e5) ? "featureSetCollection" : null;
}
function I3(n7) {
  if (!n7)
    return null;
  try {
    return E3(n7);
  } catch (r8) {
  }
  return null;
}
function O4(e5, r8) {
  const t3 = "string" == typeof e5 ? I3(e5) : e5;
  if (!t3)
    return null;
  try {
    return r8 = r8 || a(P5), x5(t3, r8);
  } catch (o5) {
  }
  return null;
}
function G4(e5, n7, r8) {
  return { vars: { $feature: null == e5 ? new D() : D.createFromGraphic(e5, r8), $view: n7 == null ? void 0 : n7.view }, spatialReference: n7 == null ? void 0 : n7.sr, timeZone: r8 ?? null };
}
function T5(e5, n7, r8) {
  return D.createFromGraphicLikeObject(n7, e5, r8, null);
}
function V5(e5, n7) {
  null != e5.vars && (e5.vars.$feature = n7);
}
function D5(e5, n7) {
  let t3;
  try {
    t3 = G3(e5, n7);
  } catch (o5) {
    t3 = null;
  }
  return t3;
}
function L5(e5, n7) {
  let r8;
  try {
    r8 = e5 ? e5(n7) : null;
  } catch (t3) {
    r8 = null;
  }
  return r8;
}
function J5(e5, n7) {
  try {
    return e5 ? e5(n7) : Promise.resolve(null);
  } catch (r8) {
    return Promise.resolve(null);
  }
}
function U4(e5, n7) {
  if (!e5)
    return [];
  const r8 = "string" == typeof e5 ? I3(e5) : e5;
  if (!r8)
    return [];
  const o5 = R3(r8);
  let i5 = new Array();
  o5.forEach((e6) => {
    M5.test(e6) && (e6 = e6.replace(M5, ""), i5.push(e6));
  });
  const s9 = i5.filter((e6) => e6.includes("*"));
  return i5 = i5.filter((e6) => !s9.includes(e6)), n7 && s9.forEach((e6) => {
    const r9 = new RegExp(`^${e6.split(/\*+/).map(A3).join(".*")}$`, "i");
    n7.forEach((e7) => r9.test(e7) ? i5.push(e7) : null);
  }), [...new Set(i5.sort())];
}
function Z2(e5) {
  return U3(e5, "$view");
}
function B3(e5, n7) {
  return !!e5 && U3(e5, n7);
}
function H6(e5) {
  if (!e5 || null == e5.spatialReference && (null == e5.scale || null == e5.viewingMode))
    return;
  return { view: e5.viewingMode && null != e5.scale ? new N({ viewingMode: e5.viewingMode, scale: e5.scale }) : null, sr: e5.spatialReference };
}
function K5({ url: e5, spatialReference: n7, lrucache: r8, interceptor: t3 }) {
  const o5 = te3();
  return o5 ? o5.createFeatureSetCollectionFromService(e5, n7, r8, t3) : null;
}
function N4({ layer: e5, spatialReference: n7, outFields: r8, returnGeometry: t3, lrucache: o5, interceptor: i5 }) {
  if (null === e5)
    return null;
  const s9 = te3();
  return s9 ? s9.constructFeatureSet(e5, n7, r8, t3 ?? true, o5, i5) : null;
}
function Q5(e5) {
  if (null === (e5 == null ? void 0 : e5.map))
    return null;
  const n7 = te3();
  return n7 ? n7.createFeatureSetCollectionFromMap(e5.map, e5.spatialReference, e5.lrucache, e5.interceptor) : null;
}
function W7(e5, n7) {
  return N.convertJsonToArcade(e5, n7);
}
function X5(e5, n7, r8 = []) {
  return W6(e5, n7, r8);
}
function Y4() {
  return k3();
}
function _3() {
  return H5();
}
function ee4(e5) {
  return "simple" === e5.type || "class-breaks" === e5.type || "unique-value" === e5.type || "dot-density" === e5.type || "dictionary" === e5.type || "pie-chart" === e5.type;
}
function ne4(e5) {
  return "esri.layers.support.LabelClass" === e5.declaredClass;
}
function re4(e5) {
  return "esri.PopupTemplate" === e5.declaredClass;
}
function te4(e5, n7) {
  var _a, _b;
  if (!e5)
    return false;
  if ("string" == typeof e5)
    return n7(e5);
  const r8 = e5;
  if (ee4(r8)) {
    if ("dot-density" === r8.type) {
      const e7 = (_a = r8.attributes) == null ? void 0 : _a.some((e8) => n7(e8.valueExpression));
      if (e7)
        return e7;
    }
    const e6 = r8.visualVariables, t3 = !!e6 && e6.some((e7) => {
      let r9 = n7(e7.valueExpression);
      return "size" === e7.type && (ue3(e7.minSize) && (r9 = r9 || n7(e7.minSize.valueExpression)), ue3(e7.maxSize) && (r9 = r9 || n7(e7.maxSize.valueExpression))), r9;
    });
    return !(!("valueExpression" in r8) || !n7(r8.valueExpression)) || t3;
  }
  if (ne4(r8)) {
    const e6 = (_b = r8.labelExpressionInfo) == null ? void 0 : _b.expression;
    return !(!e6 || !n7(e6)) || false;
  }
  return !!re4(r8) && (!!r8.expressionInfos && r8.expressionInfos.some((e6) => n7(e6.expression)) || Array.isArray(r8.content) && r8.content.some((e6) => {
    var _a2;
    return "expression" === e6.type && n7((_a2 = e6.expressionInfo) == null ? void 0 : _a2.expression);
  }));
}
function oe3(e5) {
  const n7 = I3(e5);
  return !!n7 && $4(n7);
}
function ie3(e5) {
  return te4(e5, oe3);
}
function se4(e5) {
  const n7 = I3(e5);
  return !!n7 && C4(n7);
}
function ae3(e5) {
  return te4(e5, se4);
}
function ue3(e5) {
  return e5 && "esri.renderers.visualVariables.SizeVariable" === e5.declaredClass;
}
export {
  N as Dictionary,
  re3 as arcade,
  D as arcadeFeature,
  N4 as convertFeatureLayerToFeatureSet,
  W7 as convertJsonToArcade,
  Q5 as convertMapToFeatureSetCollection,
  K5 as convertServiceUrlToWorkspace,
  G4 as createExecContext,
  T5 as createFeature,
  O4 as createFunction,
  I3 as createSyntaxTree,
  Z2 as dependsOnView,
  _3 as enableFeatureSetOperations,
  Y4 as enableGeometryOperations,
  D5 as evalSyntaxTree,
  J5 as executeAsyncFunction,
  L5 as executeFunction,
  U4 as extractFieldNames,
  q5 as getArcadeType,
  H6 as getViewInfo,
  ie3 as hasGeometryFunctions,
  ae3 as hasGeometryOperations,
  B3 as hasVariable,
  X5 as loadScriptDependencies,
  V5 as updateExecContext
};
//# sourceMappingURL=arcadeUtils-UYNHIB6Y.js.map
