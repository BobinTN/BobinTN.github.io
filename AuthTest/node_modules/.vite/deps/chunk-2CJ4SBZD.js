import {
  a,
  a2,
  a4 as a3,
  e,
  o as o2,
  o2 as o3,
  o3 as o4,
  s
} from "./chunk-55WTSNPL.js";
import {
  o
} from "./chunk-RN5RTM2J.js";
import {
  x
} from "./chunk-YTH6VA7N.js";

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js
var s2 = class extends a2 {
  constructor(r, s3) {
    super(r, "sampler2D", a.Draw, (e2, o6, t) => e2.bindTexture(r, s3(o6, t)));
  }
};

// node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js
var o5 = class extends a2 {
  constructor(r, o6) {
    super(r, "vec2", a.Draw, (e2, s3, t, i) => e2.setUniform2fv(r, o6(s3, t, i)));
  }
};

// node_modules/@arcgis/core/chunks/SSAOBlur.glsl.js
var f = 4;
function u() {
  const u2 = new o4(), c2 = u2.fragment;
  u2.include(o3);
  const m = (f + 1) / 2, p = 1 / (2 * m * m);
  return c2.include(a3), c2.uniforms.add(new s("depthMap", (e2) => e2.depthTexture), new s2("tex", (e2) => e2.colorTexture), new o5("blurSize", (e2) => e2.blurSize), new o2("projScale", (r, o6) => {
    const t = x(o6.camera.eye, o6.camera.center);
    return t > 5e4 ? Math.max(0, r.projScale - (t - 5e4)) : r.projScale;
  }), new e("nearFar", (e2, r) => r.camera.nearFar)), c2.code.add(o`
    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {
      float c = texture(tex, uv).r;
      float d = linearDepthFromTexture(depthMap, uv, nearFar);

      float ddiff = d - center_d;

      float w = exp(-r * r * ${o.float(p)} - ddiff * ddiff * sharpness);
      wTotal += w;
      bTotal += w * c;
    }
  `), u2.outputs.add("fragBlur", "float"), c2.code.add(o`
    void main(void) {
      float b = 0.0;
      float w_total = 0.0;

      float center_d = linearDepthFromTexture(depthMap, uv, nearFar);

      float sharpness = -0.05 * projScale / center_d;
      for (int r = -${o.int(f)}; r <= ${o.int(f)}; ++r) {
        float rf = float(r);
        vec2 uvOffset = uv + rf * blurSize;
        blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);
      }

      fragBlur = b / w_total;
    }
  `), u2;
}
var c = Object.freeze(Object.defineProperty({ __proto__: null, build: u }, Symbol.toStringTag, { value: "Module" }));

export {
  s2 as s,
  u,
  c
};
//# sourceMappingURL=chunk-2CJ4SBZD.js.map
