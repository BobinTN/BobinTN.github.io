{
  "version": 3,
  "sources": ["../../@arcgis/core/core/accessorSupport/diffUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../Accessor.js\";import t from\"../Collection.js\";import{getProperties as n}from\"./utils.js\";const o=new Set([\"esri.Color\",\"esri.portal.Portal\",\"esri.symbols.support.Symbol3DAnchorPosition2D\",\"esri.symbols.support.Symbol3DAnchorPosition3D\"]);function r(t){return t instanceof e}function f(e){return e instanceof t?Object.keys(e.items):r(e)?n(e).keys():e?Object.keys(e):[]}function l(e,n){return e instanceof t?e.items[n]:e[n]}function i(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function u(e){return e?e.declaredClass:null}function c(e,t){const n=e.diff;if(n&&\"function\"==typeof n)return n(e,t);const s=f(e),p=f(t);if(0===s.length&&0===p.length)return;if(!s.length||!p.length||i(e,t))return{type:\"complete\",oldValue:e,newValue:t};const a=p.filter((e=>!s.includes(e))),y=s.filter((e=>!p.includes(e))),m=s.filter((n=>p.includes(n)&&l(e,n)!==l(t,n))).concat(a,y).sort(),d=u(e);if(d&&o.has(d)&&m.length)return{type:\"complete\",oldValue:e,newValue:t};let h;const b=r(e)&&r(t);for(const o of m){const r=l(e,o),f=l(t,o);let i;if((b||\"function\"!=typeof r&&\"function\"!=typeof f)&&(r!==f&&(null!=r||null!=f))){if(n&&n[o]&&\"function\"==typeof n[o])i=n[o]?.(r,f);else if(r instanceof Date&&f instanceof Date){if(r.getTime()===f.getTime())continue;i={type:\"complete\",oldValue:r,newValue:f}}else i=\"object\"==typeof r&&\"object\"==typeof f&&u(r)===u(f)?c(r,f):{type:\"complete\",oldValue:r,newValue:f};null!=i&&(null!=h?h.diff[o]=i:h={type:\"partial\",diff:{[o]:i}})}}return h}function s(e,t){if(null==e)return!1;const n=t.split(\".\");let o=e;for(const r of n){if(\"complete\"===o.type)return!0;if(\"partial\"!==o.type)return!1;{const e=o.diff[r];if(!e)return!1;o=e}}return!0}function p(e,t){for(const n of t)if(s(e,n))return!0;return!1}function a(e,t){if(\"function\"!=typeof e&&\"function\"!=typeof t&&(null!=e||null!=t))return null==e||null==t||\"object\"==typeof e&&\"object\"==typeof t&&u(e)!==u(t)?{type:\"complete\",oldValue:e,newValue:t}:c(e,t)}function y(e){if(null==e)return!0;switch(e.type){case\"complete\":return!1;case\"collection\":{const t=e;for(const e of t.added)if(!y(e))return!1;for(const e of t.removed)if(!y(e))return!1;for(const e of t.changed)if(!y(e))return!1;return!0}case\"partial\":for(const t in e.diff){if(!y(e.diff[t]))return!1}return!0}}export{a as diff,s as hasDiff,p as hasDiffAny,y as isEmpty};\n"],
  "mappings": ";;;;;;;;;;;AAIyG,IAAM,IAAE,oBAAI,IAAI,CAAC,cAAa,sBAAqB,iDAAgD,+CAA+C,CAAC;AAAE,SAAS,EAAEA,IAAE;AAAC,SAAOA,cAAa;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,SAAO,aAAa,IAAE,OAAO,KAAK,EAAE,KAAK,IAAE,EAAE,CAAC,IAAE,EAAE,CAAC,EAAE,KAAK,IAAE,IAAE,OAAO,KAAK,CAAC,IAAE,CAAC;AAAC;AAAC,SAAS,EAAE,GAAE,GAAE;AAAC,SAAO,aAAa,IAAE,EAAE,MAAM,CAAC,IAAE,EAAE,CAAC;AAAC;AAAC,SAAS,EAAE,GAAEA,IAAE;AAAC,SAAM,EAAE,CAAC,MAAM,QAAQ,CAAC,KAAG,CAAC,MAAM,QAAQA,EAAC,MAAI,EAAE,WAASA,GAAE;AAAM;AAAC,SAAS,EAAE,GAAE;AAAC,SAAO,IAAE,EAAE,gBAAc;AAAI;AAAC,SAAS,EAAE,GAAEA,IAAE;AAJpkB;AAIqkB,QAAM,IAAE,EAAE;AAAK,MAAG,KAAG,cAAY,OAAO;AAAE,WAAO,EAAE,GAAEA,EAAC;AAAE,QAAMC,KAAE,EAAE,CAAC,GAAEC,KAAE,EAAEF,EAAC;AAAE,MAAG,MAAIC,GAAE,UAAQ,MAAIC,GAAE;AAAO;AAAO,MAAG,CAACD,GAAE,UAAQ,CAACC,GAAE,UAAQ,EAAE,GAAEF,EAAC;AAAE,WAAM,EAAC,MAAK,YAAW,UAAS,GAAE,UAASA,GAAC;AAAE,QAAMG,KAAED,GAAE,OAAQ,CAAAE,OAAG,CAACH,GAAE,SAASG,EAAC,CAAE,GAAE,IAAEH,GAAE,OAAQ,CAAAG,OAAG,CAACF,GAAE,SAASE,EAAC,CAAE,GAAE,IAAEH,GAAE,OAAQ,CAAAI,OAAGH,GAAE,SAASG,EAAC,KAAG,EAAE,GAAEA,EAAC,MAAI,EAAEL,IAAEK,EAAC,CAAE,EAAE,OAAOF,IAAE,CAAC,EAAE,KAAK,GAAE,IAAE,EAAE,CAAC;AAAE,MAAG,KAAG,EAAE,IAAI,CAAC,KAAG,EAAE;AAAO,WAAM,EAAC,MAAK,YAAW,UAAS,GAAE,UAASH,GAAC;AAAE,MAAI;AAAE,QAAM,IAAE,EAAE,CAAC,KAAG,EAAEA,EAAC;AAAE,aAAUM,MAAK,GAAE;AAAC,UAAMC,KAAE,EAAE,GAAED,EAAC,GAAEE,KAAE,EAAER,IAAEM,EAAC;AAAE,QAAIG;AAAE,SAAI,KAAG,cAAY,OAAOF,MAAG,cAAY,OAAOC,QAAKD,OAAIC,OAAI,QAAMD,MAAG,QAAMC,MAAI;AAAC,UAAG,KAAG,EAAEF,EAAC,KAAG,cAAY,OAAO,EAAEA,EAAC;AAAE,QAAAG,MAAE,OAAEH,QAAF,2BAAOC,IAAEC;AAAA,eAAWD,cAAa,QAAMC,cAAa,MAAK;AAAC,YAAGD,GAAE,QAAQ,MAAIC,GAAE,QAAQ;AAAE;AAAS,QAAAC,KAAE,EAAC,MAAK,YAAW,UAASF,IAAE,UAASC,GAAC;AAAA,MAAC;AAAM,QAAAC,KAAE,YAAU,OAAOF,MAAG,YAAU,OAAOC,MAAG,EAAED,EAAC,MAAI,EAAEC,EAAC,IAAE,EAAED,IAAEC,EAAC,IAAE,EAAC,MAAK,YAAW,UAASD,IAAE,UAASC,GAAC;AAAE,cAAMC,OAAI,QAAM,IAAE,EAAE,KAAKH,EAAC,IAAEG,KAAE,IAAE,EAAC,MAAK,WAAU,MAAK,EAAC,CAACH,EAAC,GAAEG,GAAC,EAAC;AAAA,IAAE;AAAA,EAAC;AAAC,SAAO;AAAC;AAAC,SAAS,EAAE,GAAET,IAAE;AAAC,MAAG,QAAM;AAAE,WAAM;AAAG,QAAM,IAAEA,GAAE,MAAM,GAAG;AAAE,MAAIM,KAAE;AAAE,aAAUC,MAAK,GAAE;AAAC,QAAG,eAAaD,GAAE;AAAK,aAAM;AAAG,QAAG,cAAYA,GAAE;AAAK,aAAM;AAAG;AAAC,YAAMF,KAAEE,GAAE,KAAKC,EAAC;AAAE,UAAG,CAACH;AAAE,eAAM;AAAG,MAAAE,KAAEF;AAAA,IAAC;AAAA,EAAC;AAAC,SAAM;AAAE;AAAC,SAAS,EAAE,GAAEJ,IAAE;AAAC,aAAU,KAAKA;AAAE,QAAG,EAAE,GAAE,CAAC;AAAE,aAAM;AAAG,SAAM;AAAE;AAAC,SAAS,EAAE,GAAEA,IAAE;AAAC,MAAG,cAAY,OAAO,KAAG,cAAY,OAAOA,OAAI,QAAM,KAAG,QAAMA;AAAG,WAAO,QAAM,KAAG,QAAMA,MAAG,YAAU,OAAO,KAAG,YAAU,OAAOA,MAAG,EAAE,CAAC,MAAI,EAAEA,EAAC,IAAE,EAAC,MAAK,YAAW,UAAS,GAAE,UAASA,GAAC,IAAE,EAAE,GAAEA,EAAC;AAAC;",
  "names": ["t", "s", "p", "a", "e", "n", "o", "r", "f", "i"]
}
