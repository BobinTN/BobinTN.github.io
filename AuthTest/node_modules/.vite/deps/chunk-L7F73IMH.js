import {
  A,
  d
} from "./chunk-TBSVVR6M.js";
import {
  t4 as t2
} from "./chunk-LXXF7K7W.js";
import {
  e,
  t
} from "./chunk-RFPH3ZTZ.js";
import {
  s2 as s
} from "./chunk-WJ3HJKNC.js";

// node_modules/@esri/arcgis-html-sanitizer/dist/esm/index.js
var isPlainObject = function(value) {
  if (typeof value !== "object" || value === null) {
    return false;
  }
  if (Object.prototype.toString.call(value) !== "[object Object]") {
    return false;
  }
  var proto = Object.getPrototypeOf(value);
  if (proto === null) {
    return true;
  }
  while (Object.getPrototypeOf(proto) !== null) {
    proto = Object.getPrototypeOf(proto);
  }
  return Object.getPrototypeOf(value) === proto;
};
var lib$1 = { exports: {} };
var _default$1 = {};
var lib = { exports: {} };
var _default = {};
function getDefaultWhiteList$1() {
  var whiteList = {};
  whiteList["align-content"] = false;
  whiteList["align-items"] = false;
  whiteList["align-self"] = false;
  whiteList["alignment-adjust"] = false;
  whiteList["alignment-baseline"] = false;
  whiteList["all"] = false;
  whiteList["anchor-point"] = false;
  whiteList["animation"] = false;
  whiteList["animation-delay"] = false;
  whiteList["animation-direction"] = false;
  whiteList["animation-duration"] = false;
  whiteList["animation-fill-mode"] = false;
  whiteList["animation-iteration-count"] = false;
  whiteList["animation-name"] = false;
  whiteList["animation-play-state"] = false;
  whiteList["animation-timing-function"] = false;
  whiteList["azimuth"] = false;
  whiteList["backface-visibility"] = false;
  whiteList["background"] = true;
  whiteList["background-attachment"] = true;
  whiteList["background-clip"] = true;
  whiteList["background-color"] = true;
  whiteList["background-image"] = true;
  whiteList["background-origin"] = true;
  whiteList["background-position"] = true;
  whiteList["background-repeat"] = true;
  whiteList["background-size"] = true;
  whiteList["baseline-shift"] = false;
  whiteList["binding"] = false;
  whiteList["bleed"] = false;
  whiteList["bookmark-label"] = false;
  whiteList["bookmark-level"] = false;
  whiteList["bookmark-state"] = false;
  whiteList["border"] = true;
  whiteList["border-bottom"] = true;
  whiteList["border-bottom-color"] = true;
  whiteList["border-bottom-left-radius"] = true;
  whiteList["border-bottom-right-radius"] = true;
  whiteList["border-bottom-style"] = true;
  whiteList["border-bottom-width"] = true;
  whiteList["border-collapse"] = true;
  whiteList["border-color"] = true;
  whiteList["border-image"] = true;
  whiteList["border-image-outset"] = true;
  whiteList["border-image-repeat"] = true;
  whiteList["border-image-slice"] = true;
  whiteList["border-image-source"] = true;
  whiteList["border-image-width"] = true;
  whiteList["border-left"] = true;
  whiteList["border-left-color"] = true;
  whiteList["border-left-style"] = true;
  whiteList["border-left-width"] = true;
  whiteList["border-radius"] = true;
  whiteList["border-right"] = true;
  whiteList["border-right-color"] = true;
  whiteList["border-right-style"] = true;
  whiteList["border-right-width"] = true;
  whiteList["border-spacing"] = true;
  whiteList["border-style"] = true;
  whiteList["border-top"] = true;
  whiteList["border-top-color"] = true;
  whiteList["border-top-left-radius"] = true;
  whiteList["border-top-right-radius"] = true;
  whiteList["border-top-style"] = true;
  whiteList["border-top-width"] = true;
  whiteList["border-width"] = true;
  whiteList["bottom"] = false;
  whiteList["box-decoration-break"] = true;
  whiteList["box-shadow"] = true;
  whiteList["box-sizing"] = true;
  whiteList["box-snap"] = true;
  whiteList["box-suppress"] = true;
  whiteList["break-after"] = true;
  whiteList["break-before"] = true;
  whiteList["break-inside"] = true;
  whiteList["caption-side"] = false;
  whiteList["chains"] = false;
  whiteList["clear"] = true;
  whiteList["clip"] = false;
  whiteList["clip-path"] = false;
  whiteList["clip-rule"] = false;
  whiteList["color"] = true;
  whiteList["color-interpolation-filters"] = true;
  whiteList["column-count"] = false;
  whiteList["column-fill"] = false;
  whiteList["column-gap"] = false;
  whiteList["column-rule"] = false;
  whiteList["column-rule-color"] = false;
  whiteList["column-rule-style"] = false;
  whiteList["column-rule-width"] = false;
  whiteList["column-span"] = false;
  whiteList["column-width"] = false;
  whiteList["columns"] = false;
  whiteList["contain"] = false;
  whiteList["content"] = false;
  whiteList["counter-increment"] = false;
  whiteList["counter-reset"] = false;
  whiteList["counter-set"] = false;
  whiteList["crop"] = false;
  whiteList["cue"] = false;
  whiteList["cue-after"] = false;
  whiteList["cue-before"] = false;
  whiteList["cursor"] = false;
  whiteList["direction"] = false;
  whiteList["display"] = true;
  whiteList["display-inside"] = true;
  whiteList["display-list"] = true;
  whiteList["display-outside"] = true;
  whiteList["dominant-baseline"] = false;
  whiteList["elevation"] = false;
  whiteList["empty-cells"] = false;
  whiteList["filter"] = false;
  whiteList["flex"] = false;
  whiteList["flex-basis"] = false;
  whiteList["flex-direction"] = false;
  whiteList["flex-flow"] = false;
  whiteList["flex-grow"] = false;
  whiteList["flex-shrink"] = false;
  whiteList["flex-wrap"] = false;
  whiteList["float"] = false;
  whiteList["float-offset"] = false;
  whiteList["flood-color"] = false;
  whiteList["flood-opacity"] = false;
  whiteList["flow-from"] = false;
  whiteList["flow-into"] = false;
  whiteList["font"] = true;
  whiteList["font-family"] = true;
  whiteList["font-feature-settings"] = true;
  whiteList["font-kerning"] = true;
  whiteList["font-language-override"] = true;
  whiteList["font-size"] = true;
  whiteList["font-size-adjust"] = true;
  whiteList["font-stretch"] = true;
  whiteList["font-style"] = true;
  whiteList["font-synthesis"] = true;
  whiteList["font-variant"] = true;
  whiteList["font-variant-alternates"] = true;
  whiteList["font-variant-caps"] = true;
  whiteList["font-variant-east-asian"] = true;
  whiteList["font-variant-ligatures"] = true;
  whiteList["font-variant-numeric"] = true;
  whiteList["font-variant-position"] = true;
  whiteList["font-weight"] = true;
  whiteList["grid"] = false;
  whiteList["grid-area"] = false;
  whiteList["grid-auto-columns"] = false;
  whiteList["grid-auto-flow"] = false;
  whiteList["grid-auto-rows"] = false;
  whiteList["grid-column"] = false;
  whiteList["grid-column-end"] = false;
  whiteList["grid-column-start"] = false;
  whiteList["grid-row"] = false;
  whiteList["grid-row-end"] = false;
  whiteList["grid-row-start"] = false;
  whiteList["grid-template"] = false;
  whiteList["grid-template-areas"] = false;
  whiteList["grid-template-columns"] = false;
  whiteList["grid-template-rows"] = false;
  whiteList["hanging-punctuation"] = false;
  whiteList["height"] = true;
  whiteList["hyphens"] = false;
  whiteList["icon"] = false;
  whiteList["image-orientation"] = false;
  whiteList["image-resolution"] = false;
  whiteList["ime-mode"] = false;
  whiteList["initial-letters"] = false;
  whiteList["inline-box-align"] = false;
  whiteList["justify-content"] = false;
  whiteList["justify-items"] = false;
  whiteList["justify-self"] = false;
  whiteList["left"] = false;
  whiteList["letter-spacing"] = true;
  whiteList["lighting-color"] = true;
  whiteList["line-box-contain"] = false;
  whiteList["line-break"] = false;
  whiteList["line-grid"] = false;
  whiteList["line-height"] = false;
  whiteList["line-snap"] = false;
  whiteList["line-stacking"] = false;
  whiteList["line-stacking-ruby"] = false;
  whiteList["line-stacking-shift"] = false;
  whiteList["line-stacking-strategy"] = false;
  whiteList["list-style"] = true;
  whiteList["list-style-image"] = true;
  whiteList["list-style-position"] = true;
  whiteList["list-style-type"] = true;
  whiteList["margin"] = true;
  whiteList["margin-bottom"] = true;
  whiteList["margin-left"] = true;
  whiteList["margin-right"] = true;
  whiteList["margin-top"] = true;
  whiteList["marker-offset"] = false;
  whiteList["marker-side"] = false;
  whiteList["marks"] = false;
  whiteList["mask"] = false;
  whiteList["mask-box"] = false;
  whiteList["mask-box-outset"] = false;
  whiteList["mask-box-repeat"] = false;
  whiteList["mask-box-slice"] = false;
  whiteList["mask-box-source"] = false;
  whiteList["mask-box-width"] = false;
  whiteList["mask-clip"] = false;
  whiteList["mask-image"] = false;
  whiteList["mask-origin"] = false;
  whiteList["mask-position"] = false;
  whiteList["mask-repeat"] = false;
  whiteList["mask-size"] = false;
  whiteList["mask-source-type"] = false;
  whiteList["mask-type"] = false;
  whiteList["max-height"] = true;
  whiteList["max-lines"] = false;
  whiteList["max-width"] = true;
  whiteList["min-height"] = true;
  whiteList["min-width"] = true;
  whiteList["move-to"] = false;
  whiteList["nav-down"] = false;
  whiteList["nav-index"] = false;
  whiteList["nav-left"] = false;
  whiteList["nav-right"] = false;
  whiteList["nav-up"] = false;
  whiteList["object-fit"] = false;
  whiteList["object-position"] = false;
  whiteList["opacity"] = false;
  whiteList["order"] = false;
  whiteList["orphans"] = false;
  whiteList["outline"] = false;
  whiteList["outline-color"] = false;
  whiteList["outline-offset"] = false;
  whiteList["outline-style"] = false;
  whiteList["outline-width"] = false;
  whiteList["overflow"] = false;
  whiteList["overflow-wrap"] = false;
  whiteList["overflow-x"] = false;
  whiteList["overflow-y"] = false;
  whiteList["padding"] = true;
  whiteList["padding-bottom"] = true;
  whiteList["padding-left"] = true;
  whiteList["padding-right"] = true;
  whiteList["padding-top"] = true;
  whiteList["page"] = false;
  whiteList["page-break-after"] = false;
  whiteList["page-break-before"] = false;
  whiteList["page-break-inside"] = false;
  whiteList["page-policy"] = false;
  whiteList["pause"] = false;
  whiteList["pause-after"] = false;
  whiteList["pause-before"] = false;
  whiteList["perspective"] = false;
  whiteList["perspective-origin"] = false;
  whiteList["pitch"] = false;
  whiteList["pitch-range"] = false;
  whiteList["play-during"] = false;
  whiteList["position"] = false;
  whiteList["presentation-level"] = false;
  whiteList["quotes"] = false;
  whiteList["region-fragment"] = false;
  whiteList["resize"] = false;
  whiteList["rest"] = false;
  whiteList["rest-after"] = false;
  whiteList["rest-before"] = false;
  whiteList["richness"] = false;
  whiteList["right"] = false;
  whiteList["rotation"] = false;
  whiteList["rotation-point"] = false;
  whiteList["ruby-align"] = false;
  whiteList["ruby-merge"] = false;
  whiteList["ruby-position"] = false;
  whiteList["shape-image-threshold"] = false;
  whiteList["shape-outside"] = false;
  whiteList["shape-margin"] = false;
  whiteList["size"] = false;
  whiteList["speak"] = false;
  whiteList["speak-as"] = false;
  whiteList["speak-header"] = false;
  whiteList["speak-numeral"] = false;
  whiteList["speak-punctuation"] = false;
  whiteList["speech-rate"] = false;
  whiteList["stress"] = false;
  whiteList["string-set"] = false;
  whiteList["tab-size"] = false;
  whiteList["table-layout"] = false;
  whiteList["text-align"] = true;
  whiteList["text-align-last"] = true;
  whiteList["text-combine-upright"] = true;
  whiteList["text-decoration"] = true;
  whiteList["text-decoration-color"] = true;
  whiteList["text-decoration-line"] = true;
  whiteList["text-decoration-skip"] = true;
  whiteList["text-decoration-style"] = true;
  whiteList["text-emphasis"] = true;
  whiteList["text-emphasis-color"] = true;
  whiteList["text-emphasis-position"] = true;
  whiteList["text-emphasis-style"] = true;
  whiteList["text-height"] = true;
  whiteList["text-indent"] = true;
  whiteList["text-justify"] = true;
  whiteList["text-orientation"] = true;
  whiteList["text-overflow"] = true;
  whiteList["text-shadow"] = true;
  whiteList["text-space-collapse"] = true;
  whiteList["text-transform"] = true;
  whiteList["text-underline-position"] = true;
  whiteList["text-wrap"] = true;
  whiteList["top"] = false;
  whiteList["transform"] = false;
  whiteList["transform-origin"] = false;
  whiteList["transform-style"] = false;
  whiteList["transition"] = false;
  whiteList["transition-delay"] = false;
  whiteList["transition-duration"] = false;
  whiteList["transition-property"] = false;
  whiteList["transition-timing-function"] = false;
  whiteList["unicode-bidi"] = false;
  whiteList["vertical-align"] = false;
  whiteList["visibility"] = false;
  whiteList["voice-balance"] = false;
  whiteList["voice-duration"] = false;
  whiteList["voice-family"] = false;
  whiteList["voice-pitch"] = false;
  whiteList["voice-range"] = false;
  whiteList["voice-rate"] = false;
  whiteList["voice-stress"] = false;
  whiteList["voice-volume"] = false;
  whiteList["volume"] = false;
  whiteList["white-space"] = false;
  whiteList["widows"] = false;
  whiteList["width"] = true;
  whiteList["will-change"] = false;
  whiteList["word-break"] = true;
  whiteList["word-spacing"] = true;
  whiteList["word-wrap"] = true;
  whiteList["wrap-flow"] = false;
  whiteList["wrap-through"] = false;
  whiteList["writing-mode"] = false;
  whiteList["z-index"] = false;
  return whiteList;
}
function onAttr(name, value, options) {
}
function onIgnoreAttr(name, value, options) {
}
var REGEXP_URL_JAVASCRIPT = /javascript\s*\:/img;
function safeAttrValue$1(name, value) {
  if (REGEXP_URL_JAVASCRIPT.test(value))
    return "";
  return value;
}
_default.whiteList = getDefaultWhiteList$1();
_default.getDefaultWhiteList = getDefaultWhiteList$1;
_default.onAttr = onAttr;
_default.onIgnoreAttr = onIgnoreAttr;
_default.safeAttrValue = safeAttrValue$1;
var util$1 = {
  indexOf: function(arr, item) {
    var i5, j2;
    if (Array.prototype.indexOf) {
      return arr.indexOf(item);
    }
    for (i5 = 0, j2 = arr.length; i5 < j2; i5++) {
      if (arr[i5] === item) {
        return i5;
      }
    }
    return -1;
  },
  forEach: function(arr, fn, scope) {
    var i5, j2;
    if (Array.prototype.forEach) {
      return arr.forEach(fn, scope);
    }
    for (i5 = 0, j2 = arr.length; i5 < j2; i5++) {
      fn.call(scope, arr[i5], i5, arr);
    }
  },
  trim: function(str) {
    if (String.prototype.trim) {
      return str.trim();
    }
    return str.replace(/(^\s*)|(\s*$)/g, "");
  },
  trimRight: function(str) {
    if (String.prototype.trimRight) {
      return str.trimRight();
    }
    return str.replace(/(\s*$)/g, "");
  }
};
var _$3 = util$1;
function parseStyle$1(css2, onAttr2) {
  css2 = _$3.trimRight(css2);
  if (css2[css2.length - 1] !== ";")
    css2 += ";";
  var cssLength = css2.length;
  var isParenthesisOpen = false;
  var lastPos = 0;
  var i5 = 0;
  var retCSS = "";
  function addNewAttr() {
    if (!isParenthesisOpen) {
      var source = _$3.trim(css2.slice(lastPos, i5));
      var j3 = source.indexOf(":");
      if (j3 !== -1) {
        var name = _$3.trim(source.slice(0, j3));
        var value = _$3.trim(source.slice(j3 + 1));
        if (name) {
          var ret = onAttr2(lastPos, retCSS.length, name, value, source);
          if (ret)
            retCSS += ret + "; ";
        }
      }
    }
    lastPos = i5 + 1;
  }
  for (; i5 < cssLength; i5++) {
    var c4 = css2[i5];
    if (c4 === "/" && css2[i5 + 1] === "*") {
      var j2 = css2.indexOf("*/", i5 + 2);
      if (j2 === -1)
        break;
      i5 = j2 + 1;
      lastPos = i5 + 1;
      isParenthesisOpen = false;
    } else if (c4 === "(") {
      isParenthesisOpen = true;
    } else if (c4 === ")") {
      isParenthesisOpen = false;
    } else if (c4 === ";") {
      if (isParenthesisOpen)
        ;
      else {
        addNewAttr();
      }
    } else if (c4 === "\n") {
      addNewAttr();
    }
  }
  return _$3.trim(retCSS);
}
var parser$2 = parseStyle$1;
var DEFAULT$1 = _default;
var parseStyle = parser$2;
function isNull$1(obj) {
  return obj === void 0 || obj === null;
}
function shallowCopyObject$1(obj) {
  var ret = {};
  for (var i5 in obj) {
    ret[i5] = obj[i5];
  }
  return ret;
}
function FilterCSS$2(options) {
  options = shallowCopyObject$1(options || {});
  options.whiteList = options.whiteList || DEFAULT$1.whiteList;
  options.onAttr = options.onAttr || DEFAULT$1.onAttr;
  options.onIgnoreAttr = options.onIgnoreAttr || DEFAULT$1.onIgnoreAttr;
  options.safeAttrValue = options.safeAttrValue || DEFAULT$1.safeAttrValue;
  this.options = options;
}
FilterCSS$2.prototype.process = function(css2) {
  css2 = css2 || "";
  css2 = css2.toString();
  if (!css2)
    return "";
  var me = this;
  var options = me.options;
  var whiteList = options.whiteList;
  var onAttr2 = options.onAttr;
  var onIgnoreAttr2 = options.onIgnoreAttr;
  var safeAttrValue2 = options.safeAttrValue;
  var retCSS = parseStyle(css2, function(sourcePosition, position, name, value, source) {
    var check = whiteList[name];
    var isWhite = false;
    if (check === true)
      isWhite = check;
    else if (typeof check === "function")
      isWhite = check(value);
    else if (check instanceof RegExp)
      isWhite = check.test(value);
    if (isWhite !== true)
      isWhite = false;
    value = safeAttrValue2(name, value);
    if (!value)
      return;
    var opts = {
      position,
      sourcePosition,
      source,
      isWhite
    };
    if (isWhite) {
      var ret = onAttr2(name, value, opts);
      if (isNull$1(ret)) {
        return name + ":" + value;
      } else {
        return ret;
      }
    } else {
      var ret = onIgnoreAttr2(name, value, opts);
      if (!isNull$1(ret)) {
        return ret;
      }
    }
  });
  return retCSS;
};
var css = FilterCSS$2;
(function(module, exports) {
  var DEFAULT2 = _default;
  var FilterCSS2 = css;
  function filterCSS(html, options) {
    var xss2 = new FilterCSS2(options);
    return xss2.process(html);
  }
  exports = module.exports = filterCSS;
  exports.FilterCSS = FilterCSS2;
  for (var i5 in DEFAULT2)
    exports[i5] = DEFAULT2[i5];
})(lib, lib.exports);
var util = {
  indexOf: function(arr, item) {
    var i5, j2;
    if (Array.prototype.indexOf) {
      return arr.indexOf(item);
    }
    for (i5 = 0, j2 = arr.length; i5 < j2; i5++) {
      if (arr[i5] === item) {
        return i5;
      }
    }
    return -1;
  },
  forEach: function(arr, fn, scope) {
    var i5, j2;
    if (Array.prototype.forEach) {
      return arr.forEach(fn, scope);
    }
    for (i5 = 0, j2 = arr.length; i5 < j2; i5++) {
      fn.call(scope, arr[i5], i5, arr);
    }
  },
  trim: function(str) {
    if (String.prototype.trim) {
      return str.trim();
    }
    return str.replace(/(^\s*)|(\s*$)/g, "");
  },
  spaceIndex: function(str) {
    var reg = /\s|\n|\t/;
    var match = reg.exec(str);
    return match ? match.index : -1;
  }
};
var FilterCSS$1 = lib.exports.FilterCSS;
var getDefaultCSSWhiteList = lib.exports.getDefaultWhiteList;
var _$2 = util;
function getDefaultWhiteList() {
  return {
    a: ["target", "href", "title"],
    abbr: ["title"],
    address: [],
    area: ["shape", "coords", "href", "alt"],
    article: [],
    aside: [],
    audio: [
      "autoplay",
      "controls",
      "crossorigin",
      "loop",
      "muted",
      "preload",
      "src"
    ],
    b: [],
    bdi: ["dir"],
    bdo: ["dir"],
    big: [],
    blockquote: ["cite"],
    br: [],
    caption: [],
    center: [],
    cite: [],
    code: [],
    col: ["align", "valign", "span", "width"],
    colgroup: ["align", "valign", "span", "width"],
    dd: [],
    del: ["datetime"],
    details: ["open"],
    div: [],
    dl: [],
    dt: [],
    em: [],
    figcaption: [],
    figure: [],
    font: ["color", "size", "face"],
    footer: [],
    h1: [],
    h2: [],
    h3: [],
    h4: [],
    h5: [],
    h6: [],
    header: [],
    hr: [],
    i: [],
    img: ["src", "alt", "title", "width", "height"],
    ins: ["datetime"],
    li: [],
    mark: [],
    nav: [],
    ol: [],
    p: [],
    pre: [],
    s: [],
    section: [],
    small: [],
    span: [],
    sub: [],
    summary: [],
    sup: [],
    strong: [],
    strike: [],
    table: ["width", "border", "align", "valign"],
    tbody: ["align", "valign"],
    td: ["width", "rowspan", "colspan", "align", "valign"],
    tfoot: ["align", "valign"],
    th: ["width", "rowspan", "colspan", "align", "valign"],
    thead: ["align", "valign"],
    tr: ["rowspan", "align", "valign"],
    tt: [],
    u: [],
    ul: [],
    video: [
      "autoplay",
      "controls",
      "crossorigin",
      "loop",
      "muted",
      "playsinline",
      "poster",
      "preload",
      "src",
      "height",
      "width"
    ]
  };
}
var defaultCSSFilter = new FilterCSS$1();
function onTag(tag, html, options) {
}
function onIgnoreTag(tag, html, options) {
}
function onTagAttr(tag, name, value) {
}
function onIgnoreTagAttr(tag, name, value) {
}
function escapeHtml(html) {
  return html.replace(REGEXP_LT, "&lt;").replace(REGEXP_GT, "&gt;");
}
function safeAttrValue(tag, name, value, cssFilter) {
  value = friendlyAttrValue(value);
  if (name === "href" || name === "src") {
    value = _$2.trim(value);
    if (value === "#")
      return "#";
    if (!(value.substr(0, 7) === "http://" || value.substr(0, 8) === "https://" || value.substr(0, 7) === "mailto:" || value.substr(0, 4) === "tel:" || value.substr(0, 11) === "data:image/" || value.substr(0, 6) === "ftp://" || value.substr(0, 2) === "./" || value.substr(0, 3) === "../" || value[0] === "#" || value[0] === "/")) {
      return "";
    }
  } else if (name === "background") {
    REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
      return "";
    }
  } else if (name === "style") {
    REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_7.test(value)) {
      return "";
    }
    REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex = 0;
    if (REGEXP_DEFAULT_ON_TAG_ATTR_8.test(value)) {
      REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex = 0;
      if (REGEXP_DEFAULT_ON_TAG_ATTR_4.test(value)) {
        return "";
      }
    }
    if (cssFilter !== false) {
      cssFilter = cssFilter || defaultCSSFilter;
      value = cssFilter.process(value);
    }
  }
  value = escapeAttrValue(value);
  return value;
}
var REGEXP_LT = /</g;
var REGEXP_GT = />/g;
var REGEXP_QUOTE = /"/g;
var REGEXP_QUOTE_2 = /&quot;/g;
var REGEXP_ATTR_VALUE_1 = /&#([a-zA-Z0-9]*);?/gim;
var REGEXP_ATTR_VALUE_COLON = /&colon;?/gim;
var REGEXP_ATTR_VALUE_NEWLINE = /&newline;?/gim;
var REGEXP_DEFAULT_ON_TAG_ATTR_4 = /((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi;
var REGEXP_DEFAULT_ON_TAG_ATTR_7 = /e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi;
var REGEXP_DEFAULT_ON_TAG_ATTR_8 = /u\s*r\s*l\s*\(.*/gi;
function escapeQuote(str) {
  return str.replace(REGEXP_QUOTE, "&quot;");
}
function unescapeQuote(str) {
  return str.replace(REGEXP_QUOTE_2, '"');
}
function escapeHtmlEntities(str) {
  return str.replace(REGEXP_ATTR_VALUE_1, function replaceUnicode(str2, code) {
    return code[0] === "x" || code[0] === "X" ? String.fromCharCode(parseInt(code.substr(1), 16)) : String.fromCharCode(parseInt(code, 10));
  });
}
function escapeDangerHtml5Entities(str) {
  return str.replace(REGEXP_ATTR_VALUE_COLON, ":").replace(REGEXP_ATTR_VALUE_NEWLINE, " ");
}
function clearNonPrintableCharacter(str) {
  var str2 = "";
  for (var i5 = 0, len = str.length; i5 < len; i5++) {
    str2 += str.charCodeAt(i5) < 32 ? " " : str.charAt(i5);
  }
  return _$2.trim(str2);
}
function friendlyAttrValue(str) {
  str = unescapeQuote(str);
  str = escapeHtmlEntities(str);
  str = escapeDangerHtml5Entities(str);
  str = clearNonPrintableCharacter(str);
  return str;
}
function escapeAttrValue(str) {
  str = escapeQuote(str);
  str = escapeHtml(str);
  return str;
}
function onIgnoreTagStripAll() {
  return "";
}
function StripTagBody(tags, next) {
  if (typeof next !== "function") {
    next = function() {
    };
  }
  var isRemoveAllTag = !Array.isArray(tags);
  function isRemoveTag(tag) {
    if (isRemoveAllTag)
      return true;
    return _$2.indexOf(tags, tag) !== -1;
  }
  var removeList = [];
  var posStart = false;
  return {
    onIgnoreTag: function(tag, html, options) {
      if (isRemoveTag(tag)) {
        if (options.isClosing) {
          var ret = "[/removed]";
          var end = options.position + ret.length;
          removeList.push([
            posStart !== false ? posStart : options.position,
            end
          ]);
          posStart = false;
          return ret;
        } else {
          if (!posStart) {
            posStart = options.position;
          }
          return "[removed]";
        }
      } else {
        return next(tag, html, options);
      }
    },
    remove: function(html) {
      var rethtml = "";
      var lastPos = 0;
      _$2.forEach(removeList, function(pos) {
        rethtml += html.slice(lastPos, pos[0]);
        lastPos = pos[1];
      });
      rethtml += html.slice(lastPos);
      return rethtml;
    }
  };
}
function stripCommentTag(html) {
  var retHtml = "";
  var lastPos = 0;
  while (lastPos < html.length) {
    var i5 = html.indexOf("<!--", lastPos);
    if (i5 === -1) {
      retHtml += html.slice(lastPos);
      break;
    }
    retHtml += html.slice(lastPos, i5);
    var j2 = html.indexOf("-->", i5);
    if (j2 === -1) {
      break;
    }
    lastPos = j2 + 3;
  }
  return retHtml;
}
function stripBlankChar(html) {
  var chars = html.split("");
  chars = chars.filter(function(char) {
    var c4 = char.charCodeAt(0);
    if (c4 === 127)
      return false;
    if (c4 <= 31) {
      if (c4 === 10 || c4 === 13)
        return true;
      return false;
    }
    return true;
  });
  return chars.join("");
}
_default$1.whiteList = getDefaultWhiteList();
_default$1.getDefaultWhiteList = getDefaultWhiteList;
_default$1.onTag = onTag;
_default$1.onIgnoreTag = onIgnoreTag;
_default$1.onTagAttr = onTagAttr;
_default$1.onIgnoreTagAttr = onIgnoreTagAttr;
_default$1.safeAttrValue = safeAttrValue;
_default$1.escapeHtml = escapeHtml;
_default$1.escapeQuote = escapeQuote;
_default$1.unescapeQuote = unescapeQuote;
_default$1.escapeHtmlEntities = escapeHtmlEntities;
_default$1.escapeDangerHtml5Entities = escapeDangerHtml5Entities;
_default$1.clearNonPrintableCharacter = clearNonPrintableCharacter;
_default$1.friendlyAttrValue = friendlyAttrValue;
_default$1.escapeAttrValue = escapeAttrValue;
_default$1.onIgnoreTagStripAll = onIgnoreTagStripAll;
_default$1.StripTagBody = StripTagBody;
_default$1.stripCommentTag = stripCommentTag;
_default$1.stripBlankChar = stripBlankChar;
_default$1.cssFilter = defaultCSSFilter;
_default$1.getDefaultCSSWhiteList = getDefaultCSSWhiteList;
var parser$1 = {};
var _$1 = util;
function getTagName(html) {
  var i5 = _$1.spaceIndex(html);
  var tagName;
  if (i5 === -1) {
    tagName = html.slice(1, -1);
  } else {
    tagName = html.slice(1, i5 + 1);
  }
  tagName = _$1.trim(tagName).toLowerCase();
  if (tagName.slice(0, 1) === "/")
    tagName = tagName.slice(1);
  if (tagName.slice(-1) === "/")
    tagName = tagName.slice(0, -1);
  return tagName;
}
function isClosing(html) {
  return html.slice(0, 2) === "</";
}
function parseTag$1(html, onTag2, escapeHtml2) {
  var rethtml = "";
  var lastPos = 0;
  var tagStart = false;
  var quoteStart = false;
  var currentPos = 0;
  var len = html.length;
  var currentTagName = "";
  var currentHtml = "";
  chariterator:
    for (currentPos = 0; currentPos < len; currentPos++) {
      var c4 = html.charAt(currentPos);
      if (tagStart === false) {
        if (c4 === "<") {
          tagStart = currentPos;
          continue;
        }
      } else {
        if (quoteStart === false) {
          if (c4 === "<") {
            rethtml += escapeHtml2(html.slice(lastPos, currentPos));
            tagStart = currentPos;
            lastPos = currentPos;
            continue;
          }
          if (c4 === ">") {
            rethtml += escapeHtml2(html.slice(lastPos, tagStart));
            currentHtml = html.slice(tagStart, currentPos + 1);
            currentTagName = getTagName(currentHtml);
            rethtml += onTag2(
              tagStart,
              rethtml.length,
              currentTagName,
              currentHtml,
              isClosing(currentHtml)
            );
            lastPos = currentPos + 1;
            tagStart = false;
            continue;
          }
          if (c4 === '"' || c4 === "'") {
            var i5 = 1;
            var ic = html.charAt(currentPos - i5);
            while (ic.trim() === "" || ic === "=") {
              if (ic === "=") {
                quoteStart = c4;
                continue chariterator;
              }
              ic = html.charAt(currentPos - ++i5);
            }
          }
        } else {
          if (c4 === quoteStart) {
            quoteStart = false;
            continue;
          }
        }
      }
    }
  if (lastPos < html.length) {
    rethtml += escapeHtml2(html.substr(lastPos));
  }
  return rethtml;
}
var REGEXP_ILLEGAL_ATTR_NAME = /[^a-zA-Z0-9\\_:.-]/gim;
function parseAttr$1(html, onAttr2) {
  var lastPos = 0;
  var lastMarkPos = 0;
  var retAttrs = [];
  var tmpName = false;
  var len = html.length;
  function addAttr(name, value) {
    name = _$1.trim(name);
    name = name.replace(REGEXP_ILLEGAL_ATTR_NAME, "").toLowerCase();
    if (name.length < 1)
      return;
    var ret = onAttr2(name, value || "");
    if (ret)
      retAttrs.push(ret);
  }
  for (var i5 = 0; i5 < len; i5++) {
    var c4 = html.charAt(i5);
    var v3, j2;
    if (tmpName === false && c4 === "=") {
      tmpName = html.slice(lastPos, i5);
      lastPos = i5 + 1;
      lastMarkPos = html.charAt(lastPos) === '"' || html.charAt(lastPos) === "'" ? lastPos : findNextQuotationMark(html, i5 + 1);
      continue;
    }
    if (tmpName !== false) {
      if (i5 === lastMarkPos) {
        j2 = html.indexOf(c4, i5 + 1);
        if (j2 === -1) {
          break;
        } else {
          v3 = _$1.trim(html.slice(lastMarkPos + 1, j2));
          addAttr(tmpName, v3);
          tmpName = false;
          i5 = j2;
          lastPos = i5 + 1;
          continue;
        }
      }
    }
    if (/\s|\n|\t/.test(c4)) {
      html = html.replace(/\s|\n|\t/g, " ");
      if (tmpName === false) {
        j2 = findNextEqual(html, i5);
        if (j2 === -1) {
          v3 = _$1.trim(html.slice(lastPos, i5));
          addAttr(v3);
          tmpName = false;
          lastPos = i5 + 1;
          continue;
        } else {
          i5 = j2 - 1;
          continue;
        }
      } else {
        j2 = findBeforeEqual(html, i5 - 1);
        if (j2 === -1) {
          v3 = _$1.trim(html.slice(lastPos, i5));
          v3 = stripQuoteWrap(v3);
          addAttr(tmpName, v3);
          tmpName = false;
          lastPos = i5 + 1;
          continue;
        } else {
          continue;
        }
      }
    }
  }
  if (lastPos < html.length) {
    if (tmpName === false) {
      addAttr(html.slice(lastPos));
    } else {
      addAttr(tmpName, stripQuoteWrap(_$1.trim(html.slice(lastPos))));
    }
  }
  return _$1.trim(retAttrs.join(" "));
}
function findNextEqual(str, i5) {
  for (; i5 < str.length; i5++) {
    var c4 = str[i5];
    if (c4 === " ")
      continue;
    if (c4 === "=")
      return i5;
    return -1;
  }
}
function findNextQuotationMark(str, i5) {
  for (; i5 < str.length; i5++) {
    var c4 = str[i5];
    if (c4 === " ")
      continue;
    if (c4 === "'" || c4 === '"')
      return i5;
    return -1;
  }
}
function findBeforeEqual(str, i5) {
  for (; i5 > 0; i5--) {
    var c4 = str[i5];
    if (c4 === " ")
      continue;
    if (c4 === "=")
      return i5;
    return -1;
  }
}
function isQuoteWrapString(text) {
  if (text[0] === '"' && text[text.length - 1] === '"' || text[0] === "'" && text[text.length - 1] === "'") {
    return true;
  } else {
    return false;
  }
}
function stripQuoteWrap(text) {
  if (isQuoteWrapString(text)) {
    return text.substr(1, text.length - 2);
  } else {
    return text;
  }
}
parser$1.parseTag = parseTag$1;
parser$1.parseAttr = parseAttr$1;
var FilterCSS = lib.exports.FilterCSS;
var DEFAULT = _default$1;
var parser = parser$1;
var parseTag = parser.parseTag;
var parseAttr = parser.parseAttr;
var _ = util;
function isNull(obj) {
  return obj === void 0 || obj === null;
}
function getAttrs(html) {
  var i5 = _.spaceIndex(html);
  if (i5 === -1) {
    return {
      html: "",
      closing: html[html.length - 2] === "/"
    };
  }
  html = _.trim(html.slice(i5 + 1, -1));
  var isClosing2 = html[html.length - 1] === "/";
  if (isClosing2)
    html = _.trim(html.slice(0, -1));
  return {
    html,
    closing: isClosing2
  };
}
function shallowCopyObject(obj) {
  var ret = {};
  for (var i5 in obj) {
    ret[i5] = obj[i5];
  }
  return ret;
}
function keysToLowerCase(obj) {
  var ret = {};
  for (var i5 in obj) {
    if (Array.isArray(obj[i5])) {
      ret[i5.toLowerCase()] = obj[i5].map(function(item) {
        return item.toLowerCase();
      });
    } else {
      ret[i5.toLowerCase()] = obj[i5];
    }
  }
  return ret;
}
function FilterXSS(options) {
  options = shallowCopyObject(options || {});
  if (options.stripIgnoreTag) {
    if (options.onIgnoreTag) {
      console.error(
        'Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'
      );
    }
    options.onIgnoreTag = DEFAULT.onIgnoreTagStripAll;
  }
  if (options.whiteList || options.allowList) {
    options.whiteList = keysToLowerCase(options.whiteList || options.allowList);
  } else {
    options.whiteList = DEFAULT.whiteList;
  }
  options.onTag = options.onTag || DEFAULT.onTag;
  options.onTagAttr = options.onTagAttr || DEFAULT.onTagAttr;
  options.onIgnoreTag = options.onIgnoreTag || DEFAULT.onIgnoreTag;
  options.onIgnoreTagAttr = options.onIgnoreTagAttr || DEFAULT.onIgnoreTagAttr;
  options.safeAttrValue = options.safeAttrValue || DEFAULT.safeAttrValue;
  options.escapeHtml = options.escapeHtml || DEFAULT.escapeHtml;
  this.options = options;
  if (options.css === false) {
    this.cssFilter = false;
  } else {
    options.css = options.css || {};
    this.cssFilter = new FilterCSS(options.css);
  }
}
FilterXSS.prototype.process = function(html) {
  html = html || "";
  html = html.toString();
  if (!html)
    return "";
  var me = this;
  var options = me.options;
  var whiteList = options.whiteList;
  var onTag2 = options.onTag;
  var onIgnoreTag2 = options.onIgnoreTag;
  var onTagAttr2 = options.onTagAttr;
  var onIgnoreTagAttr2 = options.onIgnoreTagAttr;
  var safeAttrValue2 = options.safeAttrValue;
  var escapeHtml2 = options.escapeHtml;
  var cssFilter = me.cssFilter;
  if (options.stripBlankChar) {
    html = DEFAULT.stripBlankChar(html);
  }
  if (!options.allowCommentTag) {
    html = DEFAULT.stripCommentTag(html);
  }
  var stripIgnoreTagBody = false;
  if (options.stripIgnoreTagBody) {
    stripIgnoreTagBody = DEFAULT.StripTagBody(
      options.stripIgnoreTagBody,
      onIgnoreTag2
    );
    onIgnoreTag2 = stripIgnoreTagBody.onIgnoreTag;
  }
  var retHtml = parseTag(
    html,
    function(sourcePosition, position, tag, html2, isClosing2) {
      var info = {
        sourcePosition,
        position,
        isClosing: isClosing2,
        isWhite: Object.prototype.hasOwnProperty.call(whiteList, tag)
      };
      var ret = onTag2(tag, html2, info);
      if (!isNull(ret))
        return ret;
      if (info.isWhite) {
        if (info.isClosing) {
          return "</" + tag + ">";
        }
        var attrs = getAttrs(html2);
        var whiteAttrList = whiteList[tag];
        var attrsHtml = parseAttr(attrs.html, function(name, value) {
          var isWhiteAttr = _.indexOf(whiteAttrList, name) !== -1;
          var ret2 = onTagAttr2(tag, name, value, isWhiteAttr);
          if (!isNull(ret2))
            return ret2;
          if (isWhiteAttr) {
            value = safeAttrValue2(tag, name, value, cssFilter);
            if (value) {
              return name + '="' + value + '"';
            } else {
              return name;
            }
          } else {
            ret2 = onIgnoreTagAttr2(tag, name, value, isWhiteAttr);
            if (!isNull(ret2))
              return ret2;
            return;
          }
        });
        html2 = "<" + tag;
        if (attrsHtml)
          html2 += " " + attrsHtml;
        if (attrs.closing)
          html2 += " /";
        html2 += ">";
        return html2;
      } else {
        ret = onIgnoreTag2(tag, html2, info);
        if (!isNull(ret))
          return ret;
        return escapeHtml2(html2);
      }
    },
    escapeHtml2
  );
  if (stripIgnoreTagBody) {
    retHtml = stripIgnoreTagBody.remove(retHtml);
  }
  return retHtml;
};
var xss = FilterXSS;
(function(module, exports) {
  var DEFAULT2 = _default$1;
  var parser2 = parser$1;
  var FilterXSS2 = xss;
  function filterXSS(html, options) {
    var xss2 = new FilterXSS2(options);
    return xss2.process(html);
  }
  exports = module.exports = filterXSS;
  exports.filterXSS = filterXSS;
  exports.FilterXSS = FilterXSS2;
  (function() {
    for (var i5 in DEFAULT2) {
      exports[i5] = DEFAULT2[i5];
    }
    for (var j2 in parser2) {
      exports[j2] = parser2[j2];
    }
  })();
  function isWorkerEnv() {
    return typeof self !== "undefined" && typeof DedicatedWorkerGlobalScope !== "undefined" && self instanceof DedicatedWorkerGlobalScope;
  }
  if (isWorkerEnv()) {
    self.filterXSS = module.exports;
  }
})(lib$1, lib$1.exports);
var Sanitizer = (
  /** @class */
  function() {
    function Sanitizer2(filterOptions, extendDefaults) {
      var _this = this;
      this.arcgisWhiteList = {
        a: ["href", "style", "target"],
        abbr: ["title"],
        audio: ["autoplay", "controls", "loop", "muted", "preload"],
        b: [],
        br: [],
        dd: ["style"],
        div: ["align", "style"],
        dl: ["style"],
        dt: ["style"],
        em: [],
        figcaption: ["style"],
        figure: ["style"],
        font: ["color", "face", "size", "style"],
        h1: ["style"],
        h2: ["style"],
        h3: ["style"],
        h4: ["style"],
        h5: ["style"],
        h6: ["style"],
        hr: [],
        i: [],
        img: ["alt", "border", "height", "src", "style", "width"],
        li: [],
        ol: [],
        p: ["style"],
        source: ["media", "src", "type"],
        span: ["style"],
        strong: [],
        sub: ["style"],
        sup: ["style"],
        table: ["border", "cellpadding", "cellspacing", "height", "style", "width"],
        tbody: [],
        tr: ["align", "height", "style", "valign"],
        td: [
          "align",
          "colspan",
          "height",
          "nowrap",
          "rowspan",
          "style",
          "valign",
          "width"
        ],
        th: [
          "align",
          "colspan",
          "height",
          "nowrap",
          "rowspan",
          "style",
          "valign",
          "width"
        ],
        u: [],
        ul: [],
        video: [
          "autoplay",
          "controls",
          "height",
          "loop",
          "muted",
          "poster",
          "preload",
          "width"
        ]
      };
      this.allowedProtocols = [
        "http",
        "https",
        "mailto",
        "iform",
        "tel",
        "flow",
        "lfmobile",
        "arcgis-navigator",
        "arcgis-appstudio-player",
        "arcgis-survey123",
        "arcgis-collector",
        "arcgis-workforce",
        "arcgis-explorer",
        "arcgis-trek2there",
        "arcgis-quickcapture",
        "mspbi",
        "comgooglemaps",
        "pdfefile",
        "pdfehttp",
        "pdfehttps",
        "boxapp",
        "boxemm",
        "awb",
        "awbs",
        "gropen",
        "radarscope"
      ];
      this.arcgisFilterOptions = {
        allowCommentTag: true,
        safeAttrValue: function(tag, name, value, cssFilter) {
          if (tag === "a" && name === "href" || (tag === "img" || tag === "source") && name === "src") {
            return _this.sanitizeUrl(value);
          }
          return lib$1.exports.safeAttrValue(tag, name, value, cssFilter);
        }
      };
      this._entityMap = {
        "&": "&#x38;",
        "<": "&#x3C;",
        ">": "&#x3E;",
        '"': "&#x22;",
        "'": "&#x27;",
        "/": "&#x2F;"
      };
      var xssFilterOptions;
      if (filterOptions && !extendDefaults) {
        xssFilterOptions = filterOptions;
      } else if (filterOptions && extendDefaults) {
        xssFilterOptions = Object.create(this.arcgisFilterOptions);
        Object.keys(filterOptions).forEach(function(key) {
          if (key === "whiteList") {
            xssFilterOptions.whiteList = _this._extendObjectOfArrays([
              _this.arcgisWhiteList,
              filterOptions.whiteList || {}
            ]);
          } else {
            xssFilterOptions[key] = filterOptions[key];
          }
        });
      } else {
        xssFilterOptions = Object.create(this.arcgisFilterOptions);
        xssFilterOptions.whiteList = this.arcgisWhiteList;
      }
      this.xssFilterOptions = xssFilterOptions;
      this._xssFilter = new lib$1.exports.FilterXSS(xssFilterOptions);
    }
    Sanitizer2.prototype.sanitize = function(value, options) {
      if (options === void 0) {
        options = {};
      }
      switch (typeof value) {
        case "number":
          if (isNaN(value) || !isFinite(value)) {
            return null;
          }
          return value;
        case "boolean":
          return value;
        case "string":
          return this._xssFilter.process(value);
        case "object":
          return this._iterateOverObject(value, options);
        default:
          if (options.allowUndefined && typeof value === "undefined") {
            return;
          }
          return null;
      }
    };
    Sanitizer2.prototype.sanitizeUrl = function(value, options) {
      var _a = (options !== null && options !== void 0 ? options : {}).isProtocolRequired, isProtocolRequired = _a === void 0 ? true : _a;
      var protocol = this._trim(value.substring(0, value.indexOf(":")));
      var isRootUrl = value === "/";
      var isUrlFragment = /^#/.test(value);
      var isValidProtocol = protocol && this.allowedProtocols.indexOf(protocol.toLowerCase()) > -1;
      if (isRootUrl || isUrlFragment || isValidProtocol) {
        return lib$1.exports.escapeAttrValue(value);
      }
      if (!protocol && !isProtocolRequired) {
        return lib$1.exports.escapeAttrValue("https://".concat(value));
      }
      return "";
    };
    Sanitizer2.prototype.sanitizeHTMLAttribute = function(tag, attribute, value, cssFilter) {
      if (typeof this.xssFilterOptions.safeAttrValue === "function") {
        return this.xssFilterOptions.safeAttrValue(
          tag,
          attribute,
          value,
          // @ts-expect-error safeAttrValue does handle undefined cssFilter
          cssFilter
        );
      }
      return lib$1.exports.safeAttrValue(tag, attribute, value, cssFilter);
    };
    Sanitizer2.prototype.validate = function(value, options) {
      if (options === void 0) {
        options = {};
      }
      var sanitized = this.sanitize(value, options);
      return {
        isValid: value === sanitized,
        sanitized
      };
    };
    Sanitizer2.prototype.encodeHTML = function(value) {
      var _this = this;
      return String(value).replace(/[&<>"'\/]/g, function(s4) {
        return _this._entityMap[s4];
      });
    };
    Sanitizer2.prototype.encodeAttrValue = function(value) {
      var alphanumericRE = /^[a-zA-Z0-9]$/;
      return String(value).replace(/[\x00-\xFF]/g, function(c4, idx) {
        return !alphanumericRE.test(c4) ? "&#x".concat(Number(value.charCodeAt(idx)).toString(16), ";") : c4;
      });
    };
    Sanitizer2.prototype._extendObjectOfArrays = function(objects) {
      var finalObj = {};
      objects.forEach(function(obj) {
        Object.keys(obj).forEach(function(key) {
          if (Array.isArray(obj[key]) && Array.isArray(finalObj[key])) {
            finalObj[key] = finalObj[key].concat(obj[key]);
          } else {
            finalObj[key] = obj[key];
          }
        });
      });
      return finalObj;
    };
    Sanitizer2.prototype._iterateOverObject = function(obj, options) {
      var _this = this;
      if (options === void 0) {
        options = {};
      }
      try {
        var hasChanged_1 = false;
        var changedObj = void 0;
        if (Array.isArray(obj)) {
          changedObj = obj.reduce(function(prev, value) {
            var validation = _this.validate(value, options);
            if (validation.isValid) {
              return prev.concat([value]);
            } else {
              hasChanged_1 = true;
              return prev.concat([validation.sanitized]);
            }
          }, []);
        } else if (!isPlainObject(obj)) {
          if (options.allowUndefined && typeof obj === "undefined") {
            return;
          }
          return null;
        } else {
          var keys = Object.keys(obj);
          changedObj = keys.reduce(function(prev, key) {
            var value = obj[key];
            var validation = _this.validate(value, options);
            if (validation.isValid) {
              prev[key] = value;
            } else {
              hasChanged_1 = true;
              prev[key] = validation.sanitized;
            }
            return prev;
          }, {});
        }
        if (hasChanged_1) {
          return changedObj;
        }
        return obj;
      } catch (err) {
        return null;
      }
    };
    Sanitizer2.prototype._trim = function(val) {
      return String.prototype.trim ? val.trim() : val.replace(/(^\s*)|(\s*$)/g, "");
    };
    return Sanitizer2;
  }()
);

// node_modules/@arcgis/core/widgets/support/vnodeCache.js
var n = /* @__PURE__ */ new Map();
function t3() {
  n.clear();
}
function e2(t8) {
  return n.get(t8);
}
function c(t8, e5) {
  n.set(t8, e5);
}
function o(t8) {
  n.delete(t8);
}

// node_modules/@arcgis/core/widgets/support/widgetUtils.js
var m = s.getLogger("esri.widgets.support.widgetUtils");
function g(e5) {
  const n7 = t2.acquire();
  for (let t8 = 0; t8 < arguments.length; t8++) {
    const e6 = arguments[t8], r3 = typeof e6;
    if ("string" === r3)
      n7.push(e6);
    else if (Array.isArray(e6))
      n7.push.apply(n7, e6);
    else if ("object" === r3)
      for (const t9 in e6)
        e6[t9] && n7.push(t9);
  }
  const r2 = n7.join(" ");
  return t2.release(n7), r2;
}
var h = (() => {
  const e5 = /* @__PURE__ */ new Map(), t8 = new ResizeObserver((t9) => {
    var _a;
    t3();
    for (const n7 of t9)
      (_a = e5.get(n7.target)) == null ? void 0 : _a(n7);
  }), i5 = (n7, i6, o6) => (e5.has(n7) && m.error("Already observing element", n7), e5.set(n7, i6), t8.observe(n7, o6), e(() => {
    t8.unobserve(n7), e5.delete(n7);
  }));
  return (e6, t9, a3) => {
    let c4 = null;
    return t([d(() => "function" == typeof e6 ? e6() : e6, (e7) => {
      c4 == null ? void 0 : c4.remove(), e7 && (c4 = i5(e7, t9, a3));
    }, A), e(() => c4 == null ? void 0 : c4.remove())]);
  };
})();
function v(e5) {
  const t8 = e5 == null ? void 0 : e5.closest("[dir]");
  return null !== t8 && t8 instanceof HTMLElement && "rtl" === t8.dir || "rtl" === document.dir;
}
function L(e5) {
  const t8 = "data-node-ref";
  this[e5.getAttribute(t8)] = null;
}
function b(e5) {
  const t8 = "data-node-ref";
  this[e5.getAttribute(t8)] = e5;
}
var E = ["dd", "dl", "dt", "h1", "h2", "h3", "h4", "h5", "h6", "sub", "sup", ...["animate", "animatetransform", "circle", "clippath", "defs", "ellipse", "g", "image", "line", "lineargradient", "marker", "mask", "path", "pattern", "polygon", "polyline", "radialgradient", "rect", "stop", "svg", "switch", "symbol", "text", "textpath", "tspan", "use"]];
var A2 = E.reduce((e5, t8) => (e5[t8] = [], e5), {});
var j = ["align", "alink", "alt", "bgcolor", "border", "cellpadding", "cellspacing", "class", "color", "cols", "colspan", "coords", "d", "dir", "face", "height", "hspace", "ismap", "lang", "marginheight", "marginwidth", "multiple", "nohref", "noresize", "noshade", "nowrap", "ref", "rel", "rev", "rows", "rowspan", "scrolling", "shape", "span", "summary", "tabindex", "title", "usemap", "valign", "value", "vlink", "vspace", "width"];
var k = new Sanitizer({ whiteList: A2, onTagAttr: (e5, t8, n7) => {
  const r2 = `${t8}="${n7}"`;
  if (j.includes(t8))
    return r2;
}, stripIgnoreTag: true, stripIgnoreTagBody: ["script", "style"] }, true);
function x(e5) {
  return "Enter" === e5 || " " === e5;
}

// node_modules/@arcgis/core/widgets/support/symbols.js
var t4 = Symbol("widget");
var e3 = Symbol("widget-test-data");

// node_modules/@arcgis/core/widgets/support/jsxWidgetSupport.js
var o2 = [];
var n2 = {};
var i = /* @__PURE__ */ new WeakMap();
function d2(e5, t8) {
  let r2 = t8.children;
  if (r2 == null ? void 0 : r2.length)
    for (let o6 = 0; o6 < r2.length; ++o6)
      r2[o6] = d2(e5, r2[o6]);
  else
    r2 = o2;
  const i5 = t8.vnodeSelector;
  if (f(i5)) {
    const o6 = t8.properties || n2, d6 = o6.key || i5;
    return { vnodeSelector: "div", properties: { key: d6, afterCreate: s2, afterUpdate: c2, afterRemoved: a, parentWidget: e5, widgetConstructor: i5, widgetProperties: { ...o6, key: d6, children: r2 } }, children: void 0, text: void 0, domNode: null };
  }
  return t8;
}
function s2(r2, o6, n7, { parentWidget: d6, widgetConstructor: s4, widgetProperties: c4 }) {
  var _a;
  const f3 = new s4(c4);
  f3.container = r2, i.set(r2, f3), (_a = f3.afterCreate) == null ? void 0 : _a.call(f3, f3, r2), d6.addHandles(e(() => a(r2))), queueMicrotask(() => {
    f3[e3].projector.renderNow();
  });
}
function c2(e5, t8, r2, { widgetProperties: o6 }) {
  var _a;
  const n7 = i.get(e5);
  n7 && (n7.set(o6), (_a = n7.afterUpdate) == null ? void 0 : _a.call(n7, n7, e5));
}
function a(e5) {
  var _a;
  const t8 = i.get(e5);
  t8 && ((_a = t8.afterRemoved) == null ? void 0 : _a.call(t8, t8, e5), t8.destroy(), i.delete(e5));
}
function f(e5) {
  return "function" == typeof e5 && e5[t4];
}

// node_modules/@arcgis/core/widgets/support/jsxFactory.js
var e4 = function(r2) {
  return { vnodeSelector: "", properties: void 0, children: void 0, text: r2.toString(), domNode: null };
};
var o3 = function(r2, t8) {
  for (var n7 = 0, i5 = r2.length; n7 < i5; n7++) {
    var d6 = r2[n7];
    Array.isArray(d6) ? o3(d6, t8) : null != d6 && false !== d6 && (d6.hasOwnProperty("vnodeSelector") || (d6 = e4(d6)), t8.push(d6));
  }
};
var t5 = function(r2, e5) {
  for (var t8 = [], n7 = 2; n7 < arguments.length; n7++)
    t8[n7 - 2] = arguments[n7];
  if (1 === t8.length && "string" == typeof t8[0])
    return { vnodeSelector: r2, properties: e5 || void 0, children: void 0, text: t8[0], domNode: null };
  var i5 = [];
  return o3(t8, i5), { vnodeSelector: r2, properties: e5 || void 0, children: i5, text: void 0, domNode: null };
};
function n3(e5, o6, ...n7) {
  return "function" != typeof e5 || f(e5) ? t5(e5, o6, ...n7) : e5(o6, ...n7);
}
function i2(...r2) {
  return r2;
}

// node_modules/@arcgis/core/libs/maquette/projection.js
var t6 = "http://www.w3.org/";
var r = `${t6}2000/svg`;
var o4 = `${t6}1999/xlink`;
var i3 = [];
var n4 = (e5, t8) => {
  let r2 = {};
  return Object.keys(e5).forEach((t9) => {
    r2[t9] = e5[t9];
  }), t8 && Object.keys(t8).forEach((e6) => {
    r2[e6] = t8[e6];
  }), r2;
};
var s3 = (e5, t8) => e5.vnodeSelector === t8.vnodeSelector && (e5.properties && t8.properties ? e5.properties.key === t8.properties.key && e5.properties.bind === t8.properties.bind : !e5.properties && !t8.properties);
var l = (e5) => {
  if ("string" != typeof e5)
    throw new Error("Style values must be strings");
};
var p = (e5, t8, r2) => {
  if ("" !== t8.vnodeSelector) {
    for (let o6 = r2; o6 < e5.length; o6++)
      if (s3(e5[o6], t8))
        return o6;
  }
  return -1;
};
var d3 = (e5, t8, r2, o6) => {
  let i5 = e5[t8];
  if ("" === i5.vnodeSelector)
    return;
  let n7 = i5.properties;
  if (!(n7 ? void 0 === n7.key ? n7.bind : n7.key : void 0)) {
    for (let l2 = 0; l2 < e5.length; l2++)
      if (l2 !== t8) {
        let t9 = e5[l2];
        if (s3(t9, i5))
          throw new Error(`${r2.vnodeSelector} had a ${i5.vnodeSelector} child ${"added" === o6 ? o6 : "removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`);
      }
  }
};
var a2 = (e5) => {
  if (e5.properties) {
    let t8 = e5.properties.enterAnimation;
    t8 && t8(e5.domNode, e5.properties);
  }
};
var f2 = [];
var c3 = false;
var u = (e5) => {
  (e5.children || []).forEach(u), e5.properties && e5.properties.afterRemoved && e5.properties.afterRemoved.apply(e5.properties.bind || e5.properties, [e5.domNode]);
};
var m2 = () => {
  c3 = false, f2.forEach(u), f2.length = 0;
};
var h2 = (e5) => {
  f2.push(e5), c3 || (c3 = true, "undefined" != typeof window && "requestIdleCallback" in window ? window.requestIdleCallback(m2, { timeout: 16 }) : setTimeout(m2, 16));
};
var v2 = (e5) => {
  let t8 = e5.domNode;
  if (e5.properties) {
    let r2 = e5.properties.exitAnimation;
    if (r2) {
      t8.style.pointerEvents = "none";
      let o6 = () => {
        t8.parentNode && (t8.parentNode.removeChild(t8), h2(e5));
      };
      return void r2(t8, o6, e5.properties);
    }
  }
  t8.parentNode && (t8.parentNode.removeChild(t8), h2(e5));
};
var y = (t8, i5, n7) => {
  if (!i5)
    return;
  let s4 = n7.eventHandlerInterceptor, p3 = Object.keys(i5), d6 = p3.length;
  for (let a3 = 0; a3 < d6; a3++) {
    let d7 = p3[a3], f3 = i5[d7];
    if ("className" === d7)
      throw new Error('Property "className" is not supported, use "class".');
    if ("class" === d7)
      k2(t8, f3, true);
    else if ("classes" === d7) {
      let e5 = Object.keys(f3), r2 = e5.length;
      for (let o6 = 0; o6 < r2; o6++) {
        let r3 = e5[o6];
        f3[r3] && t8.classList.add(r3);
      }
    } else if ("styles" === d7) {
      let e5 = Object.keys(f3), r2 = e5.length;
      for (let o6 = 0; o6 < r2; o6++) {
        let r3 = e5[o6], i6 = f3[r3];
        i6 && (l(i6), n7.styleApplyer(t8, r3, i6));
      }
    } else if ("key" !== d7 && null != f3) {
      let l2 = typeof f3;
      "function" === l2 ? (0 === d7.lastIndexOf("on", 0) && (s4 && (f3 = s4(d7, f3, t8, i5)), "oninput" === d7 && function() {
        let e5 = f3;
        f3 = function(t9) {
          e5.apply(this, [t9]), t9.target["oninput-value"] = t9.target.value;
        };
      }()), t8[d7] = f3) : n7.namespace === r ? "href" === d7 ? t8.setAttributeNS(o4, d7, f3) : t8.setAttribute(d7, f3) : "string" === l2 && "value" !== d7 ? "innerHTML" === d7 ? t8[d7] = k.sanitize(f3) : g2(t8) && d7 in t8 ? t8[d7] = f3 : t8.setAttribute(d7, f3) : t8[d7] = f3;
    }
  }
};
function g2(e5) {
  if (!(e5 instanceof Element && e5.tagName.includes("-")))
    return false;
  const t8 = window.customElements.get(e5.tagName.toLowerCase());
  return !!t8 && e5 instanceof t8;
}
var N;
var b2 = (e5, t8, r2) => {
  if (t8)
    for (let o6 of t8)
      x2(o6, e5, void 0, r2);
};
var w = (e5, t8, r2) => {
  b2(e5, t8.children, r2), t8.text && (e5.textContent = t8.text), y(e5, t8.properties, r2), t8.properties && t8.properties.afterCreate && t8.properties.afterCreate.apply(t8.properties.bind || t8.properties, [e5, r2, t8.vnodeSelector, t8.properties, t8.children]);
};
var x2 = (e5, t8, o6, i5) => {
  let s4, l2 = 0, p3 = e5.vnodeSelector, d6 = t8.ownerDocument;
  if ("" === p3)
    s4 = e5.domNode = d6.createTextNode(e5.text), void 0 !== o6 ? t8.insertBefore(s4, o6) : t8.appendChild(s4);
  else {
    for (let a3 = 0; a3 <= p3.length; ++a3) {
      let f3 = p3.charAt(a3);
      if (a3 === p3.length || "." === f3 || "#" === f3) {
        let f4 = p3.charAt(l2 - 1), c4 = p3.slice(l2, a3);
        "." === f4 ? s4.classList.add(c4) : "#" === f4 ? s4.id = c4 : ("svg" === c4 && (i5 = n4(i5, { namespace: r })), void 0 !== i5.namespace ? s4 = e5.domNode = d6.createElementNS(i5.namespace, c4) : (s4 = e5.domNode = e5.domNode || d6.createElement(c4), "input" === c4 && e5.properties && void 0 !== e5.properties.type && s4.setAttribute("type", e5.properties.type)), void 0 !== o6 ? t8.insertBefore(s4, o6) : s4.parentNode !== t8 && t8.appendChild(s4)), l2 = a3 + 1;
      }
    }
    w(s4, e5, i5);
  }
};
var k2 = (e5, t8, r2) => {
  t8 && t8.split(" ").forEach((t9) => {
    t9 && e5.classList.toggle(t9, r2);
  });
};
var A3 = (t8, i5, n7, s4) => {
  if (!n7)
    return;
  let p3 = false, d6 = Object.keys(n7), a3 = d6.length;
  for (let f3 = 0; f3 < a3; f3++) {
    let a4 = d6[f3], c4 = n7[a4], u2 = i5[a4];
    if ("class" === a4)
      u2 !== c4 && (k2(t8, u2, false), k2(t8, c4, true));
    else if ("classes" === a4) {
      let e5 = t8.classList, r2 = Object.keys(c4), o6 = r2.length;
      for (let t9 = 0; t9 < o6; t9++) {
        let o7 = r2[t9], i6 = !!c4[o7];
        i6 !== !!u2[o7] && (p3 = true, i6 ? e5.add(o7) : e5.remove(o7));
      }
    } else if ("styles" === a4) {
      let e5 = Object.keys(c4), r2 = e5.length;
      for (let o6 = 0; o6 < r2; o6++) {
        let r3 = e5[o6], i6 = c4[r3];
        i6 !== u2[r3] && (p3 = true, i6 ? (l(i6), s4.styleApplyer(t8, r3, i6)) : s4.styleApplyer(t8, r3, ""));
      }
    } else if (c4 || "string" != typeof u2 || (c4 = ""), "value" !== a4 || g2(t8)) {
      if (c4 !== u2) {
        let i6 = typeof c4;
        "function" === i6 && s4.eventHandlerInterceptor || (s4.namespace === r ? "href" === a4 ? t8.setAttributeNS(o4, a4, c4) : t8.setAttribute(a4, c4) : "string" === i6 ? "innerHTML" === a4 ? t8[a4] = k.sanitize(c4) : "role" === a4 && "" === c4 ? t8.removeAttribute(a4) : g2(t8) && a4 in t8 ? t8[a4] = c4 : t8.setAttribute(a4, c4) : t8[a4] !== c4 && (t8[a4] = c4), p3 = true);
      }
    } else {
      let e5 = t8[a4];
      e5 !== c4 && (t8["oninput-value"] ? e5 === t8["oninput-value"] : c4 !== u2) && (t8[a4] = c4, t8["oninput-value"] = void 0), c4 !== u2 && (p3 = true);
    }
  }
  return p3;
};
var S = (e5, t8, r2, o6, n7) => {
  if (r2 === o6)
    return false;
  o6 = o6 || i3;
  let l2, f3 = (r2 = r2 || i3).length, c4 = o6.length, u2 = 0, m3 = 0, h3 = false;
  for (; m3 < c4; ) {
    let i5 = u2 < f3 ? r2[u2] : void 0, c5 = o6[m3];
    if (void 0 !== i5 && s3(i5, c5))
      h3 = N(i5, c5, n7) || h3, u2++;
    else {
      let i6 = p(r2, c5, u2 + 1);
      if (i6 >= 0) {
        for (l2 = u2; l2 < i6; l2++)
          v2(r2[l2]), d3(r2, l2, e5, "removed");
        h3 = N(r2[i6], c5, n7) || h3, u2 = i6 + 1;
      } else
        x2(c5, t8, u2 < f3 ? r2[u2].domNode : void 0, n7), a2(c5), d3(o6, m3, e5, "added");
    }
    m3++;
  }
  if (f3 > u2)
    for (l2 = u2; l2 < f3; l2++)
      v2(r2[l2]), d3(r2, l2, e5, "removed");
  return h3;
};
N = (e5, t8, o6) => {
  let i5 = e5.domNode, s4 = false;
  if (e5 === t8)
    return false;
  let l2 = false;
  if ("" === t8.vnodeSelector) {
    if (t8.text !== e5.text) {
      let e6 = i5.ownerDocument.createTextNode(t8.text);
      return i5.parentNode.replaceChild(e6, i5), t8.domNode = e6, s4 = true, s4;
    }
    t8.domNode = i5;
  } else
    0 === t8.vnodeSelector.lastIndexOf("svg", 0) && (o6 = n4(o6, { namespace: r })), e5.text !== t8.text && (l2 = true, void 0 === t8.text ? i5.removeChild(i5.firstChild) : i5.textContent = t8.text), t8.domNode = i5, l2 = S(t8, i5, e5.children, t8.children, o6) || l2, l2 = A3(i5, e5.properties, t8.properties, o6) || l2, t8.properties && t8.properties.afterUpdate && t8.properties.afterUpdate.apply(t8.properties.bind || t8.properties, [i5, o6, t8.vnodeSelector, t8.properties, t8.children]);
  return l2 && t8.properties && t8.properties.updateAnimation && t8.properties.updateAnimation(i5, t8.properties, e5.properties), s4;
};
var C = (e5, t8) => ({ getLastRender: () => e5, update: (r2) => {
  if (e5.vnodeSelector !== r2.vnodeSelector)
    throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");
  let o6 = e5;
  e5 = r2, N(o6, r2, t8);
}, domNode: e5.domNode });

// node_modules/@arcgis/core/libs/maquette/dom.js
var p2 = { namespace: void 0, performanceLogger: () => {
}, eventHandlerInterceptor: void 0, styleApplyer: (e5, r2, o6) => {
  "-" === r2.charAt(0) ? e5.style.setProperty(r2, o6) : e5.style[r2] = o6;
} };
var d4 = (r2) => n4(p2, r2);
var n5 = { create: (e5, t8) => (t8 = d4(t8), x2(e5, document.createElement("div"), void 0, t8), C(e5, t8)), append: (e5, t8, p3) => (p3 = d4(p3), x2(t8, e5, void 0, p3), C(t8, p3)), insertBefore: (e5, t8, p3) => (p3 = d4(p3), x2(t8, e5.parentNode, e5, p3), C(t8, p3)), merge: (e5, r2, p3) => (p3 = d4(p3), r2.domNode = e5, w(e5, r2, p3), C(r2, p3)), replace: (e5, t8, p3) => (p3 = d4(p3), x2(t8, e5.parentNode, e5, p3), e5.parentNode.removeChild(e5), C(t8, p3)) };

// node_modules/@arcgis/core/libs/maquette/projector.js
var t7;
var n6 = (e5, r2) => {
  let t8 = [];
  for (; e5 && e5 !== r2; )
    t8.push(e5), e5 = e5.parentNode;
  return t8;
};
t7 = Array.prototype.find ? (e5, r2) => e5.find(r2) : (e5, r2) => e5.filter(r2)[0];
var o5 = (e5, r2) => {
  let n7 = e5;
  return r2.forEach((e6) => {
    n7 = n7 && n7.children ? t7(n7.children, (r3) => r3.domNode === e6) : void 0;
  }), n7;
};
var d5 = (e5, r2, t8) => {
  let d6 = function(d7) {
    t8("domEvent", d7);
    let i5 = r2(), p3 = n6(d7.currentTarget, i5.domNode);
    p3.reverse();
    let l2, a3 = o5(i5.getLastRender(), p3);
    return e5.scheduleRender(), a3 && (l2 = a3.properties[`on${d7.type}`].apply(a3.properties.bind || this, arguments)), t8("domEventProcessed", d7), l2;
  };
  return (e6, r3, t9, n7) => d6;
};
var i4 = (t8) => {
  let n7, o6, i5 = d4(t8), p3 = i5.performanceLogger, l2 = true, a3 = false, s4 = [], c4 = [], u2 = (e5, r2, t9) => {
    let o7, l3 = () => o7;
    i5.eventHandlerInterceptor = d5(n7, l3, p3), o7 = e5(r2, t9(), i5), s4.push(o7), c4.push(t9);
  }, f3 = () => {
    if (o6 = void 0, l2) {
      l2 = false, p3("renderStart", void 0);
      for (let e5 = 0; e5 < s4.length; e5++) {
        let r2 = c4[e5]();
        p3("rendered", void 0), s4[e5].update(r2), p3("patched", void 0);
      }
      p3("renderDone", void 0), l2 = true;
    }
  };
  return n7 = { renderNow: f3, scheduleRender: () => {
    o6 || a3 || (o6 = requestAnimationFrame(f3));
  }, stop: () => {
    o6 && (cancelAnimationFrame(o6), o6 = void 0), a3 = true;
  }, resume: () => {
    a3 = false, l2 = true, n7.scheduleRender();
  }, append: (e5, t9) => {
    u2(n5.append, e5, t9);
  }, insertBefore: (e5, t9) => {
    u2(n5.insertBefore, e5, t9);
  }, merge: (e5, t9) => {
    u2(n5.merge, e5, t9);
  }, replace: (e5, t9) => {
    u2(n5.replace, e5, t9);
  }, detach: (e5) => {
    for (let r2 = 0; r2 < c4.length; r2++)
      if (c4[r2] === e5)
        return c4.splice(r2, 1), s4.splice(r2, 1)[0];
    throw new Error("renderFunction was not found");
  } }, n7;
};

export {
  t3 as t,
  e2 as e,
  c,
  o,
  g,
  v,
  L,
  b,
  x,
  n5 as n,
  i4 as i,
  t4 as t2,
  e3 as e2,
  d2 as d,
  f,
  n3 as n2,
  i2
};
/*! Bundled license information:

@esri/arcgis-html-sanitizer/dist/esm/index.js:
  (*!
   * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
   * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
   * Apache-2.0
   * 
   * js-xss
   * Copyright (c) 2012-2018 Zongmin Lei() <leizongmin@gmail.com>
   * http://ucdok.com
   * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
   *)
*/
//# sourceMappingURL=chunk-L7F73IMH.js.map
