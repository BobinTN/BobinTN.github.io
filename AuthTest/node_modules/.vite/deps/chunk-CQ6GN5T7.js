import {
  m,
  n3 as n
} from "./chunk-VLDVHSJX.js";
import {
  f
} from "./chunk-BV5PCIP6.js";
import {
  E as E2,
  h
} from "./chunk-A6KO3R3G.js";
import {
  T,
  e2 as e
} from "./chunk-T56C4ORZ.js";
import {
  D,
  E,
  F,
  G,
  L,
  U,
  _
} from "./chunk-RCLKRKWR.js";
import {
  r
} from "./chunk-WGO3VFQP.js";

// node_modules/@arcgis/core/views/webgl/WebGLDriverTestModule.js
var t = class {
  constructor() {
    this._result = false;
  }
  dispose() {
    this._program = r(this._program);
  }
  get result() {
    return null != this._program && (this._result = this._test(this._program), this.dispose()), this._result;
  }
};

// node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js
var f2 = class extends t {
  constructor(e2) {
    super(), this._rctx = e2;
    const r2 = "\n    precision highp float;\n\n    attribute vec2 a_pos;\n    varying vec2 v_uv;\n\n    void main() {\n      v_uv = a_pos;\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ", t3 = "\n    precision highp float;\n\n    varying vec2 v_uv;\n\n    uniform sampler2D u_texture;\n\n    void main() {\n      gl_FragColor = texture2D(u_texture, v_uv);\n    }\n    ";
    this._program = e2.programCache.acquire(r2, t3, /* @__PURE__ */ new Map([["a_pos", 0]]));
  }
  dispose() {
    super.dispose();
  }
  _test(g) {
    const f3 = this._rctx;
    if (!f3.gl)
      return g.dispose(), true;
    const l = new e(1);
    l.wrapMode = D.CLAMP_TO_EDGE, l.samplingMode = L.NEAREST;
    const w = new E2(f3, l), v = h.createVertex(f3, F.STATIC_DRAW, new Uint16Array([0, 0, 1, 0, 0, 1, 1, 1])), x = new f(f3, /* @__PURE__ */ new Map([["a_pos", 0]]), m, { geometry: v }), h2 = new e();
    h2.samplingMode = L.LINEAR, h2.wrapMode = D.CLAMP_TO_EDGE;
    const b = new T(f3, h2, _2);
    f3.useProgram(g), f3.bindTexture(b, 0), g.setUniform1i("u_texture", 0);
    const A = f3.getBoundFramebufferObject(), { x: E4, y: T3, width: j, height: C } = f3.getViewport();
    f3.bindFramebuffer(w), f3.setViewport(0, 0, 1, 1), f3.setClearColor(0, 0, 0, 0), f3.setBlendingEnabled(false), f3.clearSafe(_.COLOR_BUFFER_BIT), f3.bindVAO(x), f3.drawArrays(E.TRIANGLE_STRIP, 0, 4);
    const y = new Uint8Array(4);
    return w.readPixels(0, 0, 1, 1, G.RGBA, U.UNSIGNED_BYTE, y), x.dispose(), w.dispose(), b.dispose(), f3.setViewport(E4, T3, j, C), f3.bindFramebuffer(A), 255 !== y[0];
  }
};
var _2 = new Image();
_2.src = "data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A", _2.width = 5, _2.height = 5, _2.decode();

// node_modules/@arcgis/core/views/webgl/capabilities/DisjointTimerQuery.js
var t2 = class {
  constructor(e2, t3, E4, T3, r2, _3, i, u, s) {
    this.createQuery = e2, this.deleteQuery = t3, this.resultAvailable = E4, this.getResult = T3, this.disjoint = r2, this.beginTimeElapsed = _3, this.endTimeElapsed = i, this.createTimestamp = u, this.timestampBits = s;
  }
};
var E3 = false;
function T2(T3, r2) {
  if (r2.disjointTimerQuery)
    return null;
  let _3 = T3.getExtension("EXT_disjoint_timer_query_webgl2");
  return _3 && n(T3) ? new t2(() => T3.createQuery(), (e2) => {
    T3.deleteQuery(e2), E3 = false;
  }, (e2) => T3.getQueryParameter(e2, T3.QUERY_RESULT_AVAILABLE), (e2) => T3.getQueryParameter(e2, T3.QUERY_RESULT), () => T3.getParameter(_3.GPU_DISJOINT_EXT), (e2) => {
    E3 || (E3 = true, T3.beginQuery(_3.TIME_ELAPSED_EXT, e2));
  }, () => {
    T3.endQuery(_3.TIME_ELAPSED_EXT), E3 = false;
  }, (e2) => _3.queryCounterEXT(e2, _3.TIMESTAMP_EXT), () => T3.getQuery(_3.TIMESTAMP_EXT, _3.QUERY_COUNTER_BITS_EXT)) : (_3 = T3.getExtension("EXT_disjoint_timer_query"), _3 ? new t2(() => _3.createQueryEXT(), (e2) => {
    _3.deleteQueryEXT(e2), E3 = false;
  }, (e2) => _3.getQueryObjectEXT(e2, _3.QUERY_RESULT_AVAILABLE_EXT), (e2) => _3.getQueryObjectEXT(e2, _3.QUERY_RESULT_EXT), () => T3.getParameter(_3.GPU_DISJOINT_EXT), (e2) => {
    E3 || (E3 = true, _3.beginQueryEXT(_3.TIME_ELAPSED_EXT, e2));
  }, () => {
    _3.endQueryEXT(_3.TIME_ELAPSED_EXT), E3 = false;
  }, (e2) => _3.queryCounterEXT(e2, _3.TIMESTAMP_EXT), () => _3.getQueryEXT(_3.TIMESTAMP_EXT, _3.QUERY_COUNTER_BITS_EXT)) : null);
}

export {
  T2 as T,
  t,
  f2 as f
};
//# sourceMappingURL=chunk-CQ6GN5T7.js.map
