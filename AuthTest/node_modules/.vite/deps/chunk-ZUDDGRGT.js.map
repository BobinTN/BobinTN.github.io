{
  "version": 3,
  "sources": ["../../@arcgis/core/portal/support/featureCollectionUtils.js", "../../@arcgis/core/layers/support/layersCreator.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nfunction e(e){return t(e,\"notes\")}function r(e){return t(e,\"markup\")}function n(e){return t(e,\"route\")}function t(e,r){return!(!e.layerType||\"ArcGISFeatureLayer\"!==e.layerType)&&e.featureCollectionType===r}export{e as isMapNotesLayer,r as isMarkupLayer,n as isRouteLayer};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Collection.js\";import\"../../core/has.js\";import{LayerLoadContext as r}from\"./LayerLoadContext.js\";import{layerLookupMap as a}from\"./lazyLayerLoader.js\";import t from\"../../portal/PortalItem.js\";import{isMapNotesLayer as y,isMarkupLayer as i,isRouteLayer as L}from\"../../portal/support/featureCollectionUtils.js\";import{selectLayerClassPath as o}from\"../../portal/support/portalLayers.js\";import{loadStyleRenderer as n}from\"../../renderers/support/styleUtils.js\";async function c(e,r,a){if(!r)return;const t=[];for(const i of r)t.push(g(i,a));const y=await Promise.allSettled(t);for(const i of y)\"rejected\"===i.status||i.value&&e.add(i.value)}const l={ArcGISDimensionLayer:\"DimensionLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",PointCloudLayer:\"PointCloudLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",IntegratedMeshLayer:\"IntegratedMeshLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",BuildingSceneLayer:\"BuildingSceneLayer\",ArcGISTiledElevationServiceLayer:\"ElevationLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",GroupLayer:\"GroupLayer\",GeoJSON:\"GeoJSONLayer\",WebTiledLayer:\"WebTileLayer\",CSV:\"CSVLayer\",VectorTileLayer:\"VectorTileLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",DefaultTileLayer:\"TileLayer\",KML:\"KMLLayer\",RasterDataLayer:\"UnsupportedLayer\",Voxel:\"VoxelLayer\",LineOfSightLayer:\"LineOfSightLayer\"},s={ArcGISTiledElevationServiceLayer:\"ElevationLayer\",DefaultTileLayer:\"ElevationLayer\",RasterDataElevationLayer:\"UnsupportedLayer\"},p={ArcGISFeatureLayer:\"FeatureLayer\"},S={ArcGISTiledMapServiceLayer:\"TileLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",WebTiledLayer:\"WebTileLayer\",VectorTileLayer:\"VectorTileLayer\",ArcGISImageServiceLayer:\"UnsupportedLayer\",WMS:\"UnsupportedLayer\",ArcGISMapServiceLayer:\"UnsupportedLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",DefaultTileLayer:\"TileLayer\"},u={ArcGISAnnotationLayer:\"UnsupportedLayer\",ArcGISDimensionLayer:\"UnsupportedLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISStreamLayer:\"StreamLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoRSS:\"GeoRSSLayer\",GeoJSON:\"GeoJSONLayer\",GroupLayer:\"GroupLayer\",KML:\"KMLLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",SubtypeGroupLayer:\"SubtypeGroupLayer\",VectorTileLayer:\"VectorTileLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},d={ArcGISFeatureLayer:\"FeatureLayer\"},I={ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WebTiledLayer:\"WebTileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",WMS:\"WMSLayer\",DefaultTileLayer:\"TileLayer\"},m={...u,LinkChartLayer:\"LinkChartLayer\"},f={...d},T={...I};async function g(e,r){return G(await M(e,r),e,r)}async function G(e,r,a){const t=new e;return t.read(r,a.context),\"group\"===t.type&&(\"GroupLayer\"===r.layerType?await w(t,r,a):v(r)?h(t,r,a.context):A(r)&&await C(t,r,a.context)),await n(t,a.context),t}async function M(e,n){const c=n.context,l=b(c);let s=e.layerType||e.type;!s&&n?.defaultLayerType&&(s=n.defaultLayerType);const p=l[s];let S=p?a[p]:a.UnknownLayer;if(v(e)){const y=c?.portal;if(e.itemId){const i=new t({id:e.itemId,portal:y});await i.load();const L=(await o(i,new r)).className||\"UnknownLayer\";S=a[L]}}else\"ArcGISFeatureLayer\"===s?y(e)||i(e)?S=a.MapNotesLayer:L(e)?S=a.RouteLayer:A(e)&&(S=a.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?S=a.WMTSLayer:\"WFS\"===s&&\"2.0.0\"!==e.wfsInfo?.version&&(S=a.UnsupportedLayer);return S()}function A(e){if(\"ArcGISFeatureLayer\"!==e.layerType||v(e))return!1;return(e.featureCollection?.layers?.length??0)>1}function v(e){return\"Feature Collection\"===e.type}function b(e){let r;switch(e.origin){case\"web-scene\":switch(e.layerContainerType){case\"basemap\":r=S;break;case\"ground\":r=s;break;case\"tables\":r=p;break;default:r=l}break;case\"link-chart\":switch(e.layerContainerType){case\"basemap\":r=T;break;case\"tables\":r=f;break;default:r=m}break;default:switch(e.layerContainerType){case\"basemap\":r=I;break;case\"tables\":r=d;break;default:r=u}}return r}async function w(r,a,t){const y=new e,i=c(y,Array.isArray(a.layers)?a.layers:[],t);try{try{if(await i,\"group\"===r.type)return r.layers.addMany(y),r}catch(L){r.destroy();for(const e of y)e.destroy();throw L}}catch(L){throw L}}function h(e,r,a){r.itemId&&(e.portalItem=new t({id:r.itemId,portal:a?.portal}),e.when((()=>{const t=t=>{const y=t.layerId;F(t,e,r,y,a);const i=r.featureCollection?.layers?.[y];i&&t.read(i,a)};e.layers?.forEach(t),e.tables?.forEach(t)})))}async function C(e,r,t){const y=a.FeatureLayer,i=await y(),L=r.featureCollection,o=L?.showLegend,n=L?.layers?.map(((a,y)=>{const L=new i;L.read(a,t);const n={...t,ignoreDefaults:!0};return F(L,e,r,y,n),null!=o&&L.read({showLegend:o},n),L}));e.layers.addMany(n??[])}function F(e,r,a,t,y){e.read({id:`${r.id}-sublayer-${t}`,visibility:a.visibleLayers?.includes(t)??!0},y)}export{w as populateGroupLayer,c as populateOperationalLayers};\n"],
  "mappings": "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",
  "names": ["e", "t", "r", "e", "r", "a", "t", "S", "n", "c", "l", "s", "p", "L", "_a", "_b", "y"]
}
