{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js", "../../@arcgis/core/chunks/SSAOBlur.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class s extends r{constructor(r,s){super(r,\"sampler2D\",e.Draw,((e,o,t)=>e.bindTexture(r,s(o,t))))}}export{s as Texture2DDrawUniform};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o){super(r,\"vec2\",e.Draw,((e,s,t,i)=>e.setUniform2fv(r,o(s,t,i))))}}export{o as Float2DrawUniform};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.28/esri/copyright.txt for details.\n*/\nimport{o as e}from\"./vec3.js\";import{ScreenSpacePass as r}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadLinearDepth as o}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{Float2DrawUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";import{Float2PassUniform as a}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{FloatPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as l}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as s}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DDrawUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";const f=4;function u(){const u=new s,c=u.fragment;u.include(r);const m=(f+1)/2,p=1/(2*m*m);return c.include(o),c.uniforms.add(new d(\"depthMap\",(e=>e.depthTexture)),new i(\"tex\",(e=>e.colorTexture)),new t(\"blurSize\",(e=>e.blurSize)),new n(\"projScale\",((r,o)=>{const t=e(o.camera.eye,o.camera.center);return t>5e4?Math.max(0,r.projScale-(t-5e4)):r.projScale})),new a(\"nearFar\",((e,r)=>r.camera.nearFar))),c.code.add(l`\n    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {\n      float c = texture(tex, uv).r;\n      float d = linearDepthFromTexture(depthMap, uv, nearFar);\n\n      float ddiff = d - center_d;\n\n      float w = exp(-r * r * ${l.float(p)} - ddiff * ddiff * sharpness);\n      wTotal += w;\n      bTotal += w * c;\n    }\n  `),u.outputs.add(\"fragBlur\",\"float\"),c.code.add(l`\n    void main(void) {\n      float b = 0.0;\n      float w_total = 0.0;\n\n      float center_d = linearDepthFromTexture(depthMap, uv, nearFar);\n\n      float sharpness = -0.05 * projScale / center_d;\n      for (int r = -${l.int(f)}; r <= ${l.int(f)}; ++r) {\n        float rf = float(r);\n        vec2 uvOffset = uv + rf * blurSize;\n        blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);\n      }\n\n      fragBlur = b / w_total;\n    }\n  `),u}const c=Object.freeze(Object.defineProperty({__proto__:null,build:u},Symbol.toStringTag,{value:\"Module\"}));export{c as S,u as b};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAIiG,IAAMA,KAAN,cAAgBC,GAAC;AAAA,EAAC,YAAY,GAAED,IAAE;AAAC,UAAM,GAAE,aAAY,EAAE,MAAM,CAACE,IAAEC,IAAE,MAAID,GAAE,YAAY,GAAEF,GAAEG,IAAE,CAAC,CAAC,CAAE;AAAA,EAAC;AAAC;;;ACAlG,IAAMC,KAAN,cAAgBC,GAAC;AAAA,EAAC,YAAY,GAAED,IAAE;AAAC,UAAM,GAAE,QAAO,EAAE,MAAM,CAACE,IAAEC,IAAE,GAAE,MAAID,GAAE,cAAc,GAAEF,GAAEG,IAAE,GAAE,CAAC,CAAC,CAAE;AAAA,EAAC;AAAC;;;ACA8tB,IAAM,IAAE;AAAE,SAAS,IAAG;AAAC,QAAMC,KAAE,IAAIC,MAAEC,KAAEF,GAAE;AAAS,EAAAA,GAAE,QAAQC,EAAC;AAAE,QAAM,KAAG,IAAE,KAAG,GAAE,IAAE,KAAG,IAAE,IAAE;AAAG,SAAOC,GAAE,QAAQC,EAAC,GAAED,GAAE,SAAS,IAAI,IAAI,EAAE,YAAY,CAAAE,OAAGA,GAAE,YAAa,GAAE,IAAIC,GAAE,OAAO,CAAAD,OAAGA,GAAE,YAAa,GAAE,IAAIH,GAAE,YAAY,CAAAG,OAAGA,GAAE,QAAS,GAAE,IAAIH,GAAE,aAAa,CAAC,GAAEA,OAAI;AAAC,UAAM,IAAE,EAAEA,GAAE,OAAO,KAAIA,GAAE,OAAO,MAAM;AAAE,WAAO,IAAE,MAAI,KAAK,IAAI,GAAE,EAAE,aAAW,IAAE,IAAI,IAAE,EAAE;AAAA,EAAS,CAAE,GAAE,IAAI,EAAE,WAAW,CAACG,IAAE,MAAI,EAAE,OAAO,OAAQ,CAAC,GAAEF,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAOhyC,EAAE,MAAM,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA,GAItC,GAAEF,GAAE,QAAQ,IAAI,YAAW,OAAO,GAAEE,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAQ5B,EAAE,IAAI,CAAC,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAQ7C,GAAEF;AAAC;AAAC,IAAM,IAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,OAAM,EAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;",
  "names": ["s", "a", "e", "o", "o", "a", "e", "s", "u", "o", "c", "a", "e", "s"]
}
