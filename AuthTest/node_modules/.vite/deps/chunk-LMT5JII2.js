import {
  At,
  C,
  F,
  G,
  K,
  Tt,
  Y,
  _,
  tt
} from "./chunk-R5DM4YAB.js";

// node_modules/@arcgis/core/chunks/persistableUrlUtils.js
function i(t, o) {
  var _a;
  const s = (_a = o == null ? void 0 : o.url) == null ? void 0 : _a.path;
  if (t && s && (t = _(t, s, { preserveProtocolRelative: true }), o.portalItem && o.readResourcePaths)) {
    const e = G(t, o.portalItem.itemUrl);
    null != e && h.test(e) && o.readResourcePaths.push(o.portalItem.resourceFromPath(e).path);
  }
  return I(t, o == null ? void 0 : o.portal);
}
function c(n, l, a = R.YES) {
  var _a, _b;
  if (null == n)
    return n;
  !Y(n) && (l == null ? void 0 : l.blockedRelativeUrls) && l.blockedRelativeUrls.push(n);
  let u = _(n);
  if (l) {
    const e = ((_a = l.verifyItemRelativeUrls) == null ? void 0 : _a.rootPath) || ((_b = l.url) == null ? void 0 : _b.path);
    if (e) {
      const t = I(e, l.portal), o = I(u, l.portal);
      u = G(o, t, t);
      null != u && u !== o && u !== n && l.verifyItemRelativeUrls && l.verifyItemRelativeUrls.writtenUrls.push(u);
    }
  }
  return u = d(u, l == null ? void 0 : l.portal), Y(u) && (u = K(u)), (l == null ? void 0 : l.resources) && (l == null ? void 0 : l.portalItem) && !Y(u) && !tt(u) && a === R.YES && l.resources.toKeep.push({ resource: l.portalItem.resourceFromPath(u), compress: false }), u;
}
function m(e, r, t) {
  return i(e, t);
}
function p(e, r, t, o) {
  const s = c(e, o);
  void 0 !== s && (r[t] = s);
}
var f = /\/items\/([^\/]+)\/resources\/(.*)/;
var h = /^\.\/resources\//;
function U(e) {
  const r = (e == null ? void 0 : e.match(f)) ?? null;
  return (r == null ? void 0 : r[1]) ?? null;
}
function v(e) {
  const r = (e == null ? void 0 : e.match(f)) ?? null;
  if (null == r)
    return null;
  const t = r[2], o = t.lastIndexOf("/");
  if (-1 === o) {
    const { path: e2, extension: r2 } = Tt(t);
    return { prefix: null, filename: e2, extension: r2 };
  }
  const { path: s, extension: l } = Tt(t.slice(o + 1));
  return { prefix: t.slice(0, o), filename: s, extension: l };
}
function d(e, r) {
  return r && !r.isPortal && r.urlKey && r.customBaseUrl ? At(e, `${r.urlKey}.${r.customBaseUrl}`, r.portalHostname) : e;
}
function I(e, r) {
  if (!r || r.isPortal || !r.urlKey || !r.customBaseUrl)
    return e;
  const t = `${r.urlKey}.${r.customBaseUrl}`, o = C();
  return F(o, `${o.scheme}://${t}`) ? At(e, r.portalHostname, t) : At(e, t, r.portalHostname);
}
var R;
!function(e) {
  e[e.YES = 0] = "YES", e[e.NO = 1] = "NO";
}(R || (R = {}));
var x = Object.freeze(Object.defineProperty({ __proto__: null, get MarkKeep() {
  return R;
}, ensureMainOnlineDomain: d, fromJSON: i, itemIdFromResourceUrl: U, prefixAndFilenameFromResourceUrl: v, read: m, toJSON: c, write: p }, Symbol.toStringTag, { value: "Module" }));

export {
  i,
  c,
  m,
  p,
  U,
  v,
  d,
  R,
  x
};
//# sourceMappingURL=chunk-LMT5JII2.js.map
